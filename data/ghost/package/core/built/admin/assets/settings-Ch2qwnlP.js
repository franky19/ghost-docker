const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/code-editor-view-m7_Z8h85.js","assets/index-DQyPmpGB.js","assets/index-Ip63LVtf.css","assets/index-C_lxe0H8.js","assets/newsletters-CnOF1I5K.js","assets/posts-C7K9oIZ5.js","assets/referrers-B7Md7X9n.js","assets/index-nC0DduzN.js","assets/index-tQQnlArK.js","assets/_baseAssignValue-ImTGDFcZ.js","assets/modals-xz56TizU.js","assets/modals-BKa6wJ_I.css","assets/koenig-lexical-CNibzgv8.js"])))=>i.map(i=>d[i]);
import{j as f,dH as s2,aE as _,e as X,r as x,aC as no,d5 as ve,dI as o2,dJ as Id,dK as ab,dL as lb,dM as a2,dc as Ss,c3 as Yh,dN as l2,aB as Hr,ba as Vc,ar as cb,as as ub,au as $f,ay as Br,bc as c2,d3 as u2,b7 as db,at as d2,b8 as f2,be as h2,az as p2,bm as m2,bn as g2,dO as v2,dP as b2,bo as x2,dQ as y2,dR as w2,dS as S2,dT as C2,dU as k2,dV as A2,dW as M2,dX as I2,dY as E2,dZ as Jh,aH as D2,aG as R2,aF as O2,d_ as fb,d7 as Xr,aV as vt,d8 as Te,dg as T2,ac as Qr,ad as Ve,d$ as Ff,e0 as Hf,d9 as er,d6 as Ed,e1 as N2,dm as hb,e2 as P2,ak as Uc,al as Vf,e3 as L2,aK as _2,cV as pb,ae as j2,am as Uf,di as B2,e4 as $2,cT as F2,dv as Cs,dE as mb,e5 as H2,cE as V2,dd as U2,dr as gr,da as z2,du as W2,dD as q2}from"./index-DQyPmpGB.js";import{R as G2,C as K2,L as Z2,T as Y2}from"./index-C_lxe0H8.js";import{u as gb,b as J2,c as X2,n as Q2}from"./newsletters-CnOF1I5K.js";import{b as eC}from"./posts-C7K9oIZ5.js";import{a as tC}from"./referrers-B7Md7X9n.js";const gt=({className:n})=>(n||(n="border-grey-200 dark:border-grey-800"),f.jsx(s2,{asChild:!0,decorative:!0,children:f.jsx("hr",{className:n})})),vb=_("text-sm font-medium tracking-normal"),bb=_(vb,"text-grey-900 dark:text-grey-500"),ft=({level:n=1,children:e,styles:t="",grey:r=!0,separator:i,useLabelTag:s,className:o="",...a})=>{const l=`${s?"label":`h${n}`}`;if(t+=n===6||s?` block ${r?bb:vb}`:" ",!s)switch(n){case 1:t+=" md:text-4xl leading-tighter";break;case 2:t+=" md:text-3xl";break;case 3:t+=" md:text-2xl";break;case 4:t+=" md:text-xl";break;case 5:t+=" md:text-lg";break}o=_(t,!r&&"dark:text-white",o);const c=X.createElement(l,{className:o,key:"heading-elem",...a},e);if(i){const u=!n||n===1?2:1,d=n===6?2:3;return f.jsxs("div",{className:`gap-${u} mb-${d} flex flex-col`,children:[c,f.jsx(gt,{})]})}else return c},qn=({children:n,color:e,className:t,...r})=>{if(!n)return null;let i="text-grey-700 dark:text-grey-600";switch(e){case"red":i="text-red dark:text-red-500";break;case"green":i="text-green dark:text-green-500";break}return t=_("mt-1 inline-block text-xs leading-snug",i,t),f.jsx("span",{className:t,...r,children:n})},nC=X.lazy(()=>no(()=>import("./code-editor-view-m7_Z8h85.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Xh=x.forwardRef(function(e,t){return f.jsx(x.Suspense,{fallback:null,children:f.jsx(nC,{...e,ref:t})})}),xb=({size:n,color:e,delay:t,style:r})=>{const[i,s]=X.useState(!t);X.useEffect(()=>{if(t){const a=setTimeout(()=>{s(!0)},t);return()=>{clearTimeout(a)}}},[t]);let o="relative mx-0 my-[-0.5] box-border inline-block animate-spin rounded-full before:z-10 before:block before:rounded-full before:content-[''] ";switch(n){case"sm":o+=" h-[16px] w-[16px] border-2 before:mt-[10px] before:h-[3px] before:w-[3px] ";break;case"md":o+=" h-[20px] w-[20px] border-2 before:mt-[13px] before:h-[3px] before:w-[3px] ";break;case"lg":default:o+=" h-[50px] w-[50px] border before:mt-[7px] before:h-[7px] before:w-[7px] ";break}switch(e){case"light":o+=" border-white/20 before:bg-white dark:border-black/10 dark:before:bg-black ";break;case"dark":default:o+=" border-black/10 before:bg-black dark:border-white/20 dark:before:bg-white ";break}return n==="lg"?f.jsx("div",{className:`flex h-64 items-center justify-center transition-opacity ${i?"opacity-100":"opacity-0"}`,style:r,children:f.jsx("div",{className:o})}):f.jsx("div",{className:o})},ne=X.forwardRef(({testId:n,size:e="md",label:t="",hideLabel:r=!1,icon:i="",iconSize:s,iconColorClass:o,color:a="clear",fullWidth:l,link:c,linkWithPadding:u=!1,disabled:d,unstyled:h=!1,className:p="",tag:g="button",loading:m=!1,loadingIndicatorColor:v,outlineOnMobile:b=!1,onClick:y,...S},w)=>{if(a||(a="clear"),!h){switch(p=_("inline-flex items-center justify-center whitespace-nowrap rounded text-sm transition",c&&a!=="clear"&&a!=="black"||!c&&a!=="clear"?"font-bold":"font-semibold",c?"":`${e==="sm"?"h-7":"h-[34px]"}`,c?"":`${e==="sm"||t&&i?"px-3":"px-4"}`,c&&u&&"-m-1 p-1",p),a){case"black":p=_(c?"text-black hover:text-grey-800 dark:text-white":`bg-black text-white dark:bg-white dark:text-black ${!d&&"hover:bg-grey-900"}`,p),v="light",o=o||"text-white";break;case"light-grey":p=_(c?"text-grey-800 hover:text-green-400 dark:text-white":`bg-grey-200 text-black dark:bg-grey-900 dark:text-white ${!d&&"hover:!bg-grey-300 dark:hover:!bg-grey-800"}`,p),v="dark";break;case"grey":p=_(c?"text-black hover:text-grey-800 dark:text-white":`bg-grey-100 text-black dark:bg-grey-900 dark:text-white ${!d&&"hover:!bg-grey-300 dark:hover:!bg-grey-800"}`,p),v="dark";break;case"green":p=_(c?" text-green hover:text-green-400":` bg-green text-white ${!d&&"hover:bg-green-400"}`,p),v="light",o=o||"text-white";break;case"red":p=_(c?"text-red hover:text-red-400":`bg-red text-white ${!d&&"hover:bg-red-400"}`,p),v="light",o=o||"text-white";break;case"white":p=_(c?"text-white hover:text-white dark:text-black dark:hover:text-grey-800":"bg-white text-black dark:bg-black dark:text-white",p),v="dark";break;case"outline":p=_(c?"text-black hover:text-grey-800 dark:text-white":`border border-grey-300 bg-transparent text-black dark:border-grey-800 dark:text-white ${!d&&"hover:!border-black dark:hover:!border-white"}`,p),v="dark";break;default:p=_(c?" text-black hover:text-grey-800 dark:text-white":`text-grey-900 dark:text-white dark:hover:bg-grey-900 ${!d&&"hover:bg-grey-200 hover:text-black"}`,b&&!c&&"border border-grey-300 hover:border-transparent md:border-transparent",p),v="dark";break}p=_(l&&!c&&" w-full",d?"opacity-40":"cursor-pointer",p)}const C=t&&i&&!r?"mr-1.5":"";let A="";A+=t&&r?"sr-only":"",A+=m?"invisible":"",s=s||(e==="sm"||t&&i?"sm":"md");const k=f.jsxs(f.Fragment,{children:[i&&f.jsx(ve,{className:C,colorClass:o,name:i,size:s}),f.jsx("span",{className:A,children:t}),m&&f.jsxs("div",{className:"absolute flex",children:[f.jsx(xb,{color:v,size:e}),f.jsx("span",{className:"sr-only",children:"Loading..."})]})]});return X.createElement(g,{className:p,"data-testid":n,disabled:d,type:"button",onClick:y,ref:w,...S},k)});ne.displayName="Button";function rC(n,e,t=!1){let r;return function(...i){const s=()=>{r=null,t||n.apply(this,i)},o=t&&!r;r&&clearTimeout(r),r=setTimeout(s,e),o&&n.apply(this,i)}}var ot=function(){return ot=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ot.apply(this,arguments)},yb=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},Nu=Symbol("NiceModalId"),zf={},Gi=X.createContext(zf),wb=X.createContext(null),wn={},Os={},iC=0,Ki=function(){throw new Error("No dispatch method detected, did you embed your app with NiceModal.Provider?")},Sb=function(){return"_nice_modal_"+iC++},Cb=function(n,e){var t,r,i;switch(n===void 0&&(n=zf),e.type){case"nice-modal/show":{var s=e.payload,o=s.modalId,a=s.args;return ot(ot({},n),(t={},t[o]=ot(ot({},n[o]),{id:o,args:a,visible:!!Os[o],delayVisible:!Os[o]}),t))}case"nice-modal/hide":{var o=e.payload.modalId;return n[o]?ot(ot({},n),(r={},r[o]=ot(ot({},n[o]),{visible:!1}),r)):n}case"nice-modal/remove":{var o=e.payload.modalId,l=ot({},n);return delete l[o],l}case"nice-modal/set-flags":{var c=e.payload,o=c.modalId,u=c.flags;return ot(ot({},n),(i={},i[o]=ot(ot({},n[o]),u),i))}default:return n}};function sC(n){var e;return(e=wn[n])===null||e===void 0?void 0:e.comp}function oC(n,e){return{type:"nice-modal/show",payload:{modalId:n,args:e}}}function aC(n,e){return{type:"nice-modal/set-flags",payload:{modalId:n,flags:e}}}function lC(n){return{type:"nice-modal/hide",payload:{modalId:n}}}function cC(n){return{type:"nice-modal/remove",payload:{modalId:n}}}var Xn={},Di={},zc=function(n){return typeof n=="string"?n:(n[Nu]||(n[Nu]=Sb()),n[Nu])};function Wf(n,e){var t=zc(n);if(typeof n!="string"&&!wn[t]&&Wc(t,n),Ki(oC(t,e)),!Xn[t]){var r,i,s=new Promise(function(o,a){r=o,i=a});Xn[t]={resolve:r,reject:i,promise:s}}return Xn[t].promise}function qf(n){var e=zc(n);if(Ki(lC(e)),delete Xn[e],!Di[e]){var t,r,i=new Promise(function(s,o){t=s,r=o});Di[e]={resolve:t,reject:r,promise:i}}return Di[e].promise}var kb=function(n){var e=zc(n);Ki(cC(e)),delete Xn[e],delete Di[e]},uC=function(n,e){Ki(aC(n,e))};function rr(n,e){var t=x.useContext(Gi),r=x.useContext(wb),i=null,s=n&&typeof n!="string";if(n?i=zc(n):i=r,!i)throw new Error("No modal id found in NiceModal.useModal.");var o=i;x.useEffect(function(){s&&!wn[o]&&Wc(o,n,e)},[s,o,n,e]);var a=t[o],l=x.useCallback(function(g){return Wf(o,g)},[o]),c=x.useCallback(function(){return qf(o)},[o]),u=x.useCallback(function(){return kb(o)},[o]),d=x.useCallback(function(g){var m;(m=Xn[o])===null||m===void 0||m.resolve(g),delete Xn[o]},[o]),h=x.useCallback(function(g){var m;(m=Xn[o])===null||m===void 0||m.reject(g),delete Xn[o]},[o]),p=x.useCallback(function(g){var m;(m=Di[o])===null||m===void 0||m.resolve(g),delete Di[o]},[o]);return x.useMemo(function(){return{id:o,args:a?.args,visible:!!a?.visible,keepMounted:!!a?.keepMounted,show:l,hide:c,remove:u,resolve:d,reject:h,resolveHide:p}},[o,a?.args,a?.visible,a?.keepMounted,l,c,u,d,h,p])}var dC=function(n){return function(e){var t,r=e.defaultVisible,i=e.keepMounted,s=e.id,o=yb(e,["defaultVisible","keepMounted","id"]),a=rr(s),l=a.args,c=a.show,u=x.useContext(Gi),d=!!u[s];x.useEffect(function(){return r&&c(),Os[s]=!0,function(){delete Os[s]}},[s,c,r]),x.useEffect(function(){i&&uC(s,{keepMounted:!0})},[s,i]);var h=(t=u[s])===null||t===void 0?void 0:t.delayVisible;return x.useEffect(function(){h&&c(l)},[h,l,c]),d?X.createElement(wb.Provider,{value:s},X.createElement(n,ot({},o,l))):null}},Wc=function(n,e,t){wn[n]?wn[n].props=t:wn[n]={comp:e,props:t}},fC=function(n){delete wn[n]},Ab=function(){var n=x.useContext(Gi),e=Object.keys(n).filter(function(r){return!!n[r]});e.forEach(function(r){if(!wn[r]&&!Os[r]){console.warn("No modal found for id: "+r+". Please check the id or if it is registered or declared via JSX.");return}});var t=e.filter(function(r){return wn[r]}).map(function(r){return ot({id:r},wn[r])});return X.createElement(X.Fragment,null,t.map(function(r){return X.createElement(r.comp,ot({key:r.id,id:r.id},r.props))}))},hC=function(n){var e=n.children,t=x.useReducer(Cb,zf),r=t[0];return Ki=t[1],X.createElement(Gi.Provider,{value:r},e,X.createElement(Ab,null))},pC=function(n){var e=n.children,t=n.dispatch,r=n.modals;return!t||!r?X.createElement(hC,null,e):(Ki=t,X.createElement(Gi.Provider,{value:r},e,X.createElement(Ab,null)))},mC=function(n){var e=n.id,t=n.component;return x.useEffect(function(){return Wc(e,t),function(){fC(e)}},[e,t]),null},gC=function(n){var e,t=n.modal,r=n.handler,i=r===void 0?{}:r,s=yb(n,["modal","handler"]),o=x.useMemo(function(){return Sb()},[]),a=typeof t=="string"?(e=wn[t])===null||e===void 0?void 0:e.comp:t;if(!i)throw new Error("No handler found in NiceModal.ModalHolder.");if(!a)throw new Error("No modal found for id: "+t+" in NiceModal.ModalHolder.");return i.show=x.useCallback(function(l){return Wf(o,l)},[o]),i.hide=x.useCallback(function(){return qf(o)},[o]),X.createElement(a,ot({id:o},s))},vC=function(n){return{visible:n.visible,onOk:function(){return n.hide()},onCancel:function(){return n.hide()},afterClose:function(){n.resolveHide(),n.keepMounted||n.remove()}}},bC=function(n){return{visible:n.visible,onClose:function(){return n.hide()},afterVisibleChange:function(e){e||n.resolveHide(),!e&&!n.keepMounted&&n.remove()}}},xC=function(n){return{open:n.visible,onClose:function(){return n.hide()},onExited:function(){n.resolveHide(),!n.keepMounted&&n.remove()}}},yC=function(n){return{show:n.visible,onHide:function(){return n.hide()},onExited:function(){n.resolveHide(),!n.keepMounted&&n.remove()}}},Ye={Provider:pC,ModalDef:mC,ModalHolder:gC,NiceModalContext:Gi,create:dC,register:Wc,getModal:sC,show:Wf,hide:qf,remove:kb,useModal:rr,reducer:Cb,antdModal:vC,antdDrawer:bC,muiDialog:xC,bootstrapDialog:yC};const Mb=X.createContext({isDirty:!1,setGlobalDirtyState:()=>{}}),wC=({children:n})=>{const[e,t]=x.useState([]),r=x.useCallback((i,s)=>{t(o=>s&&!o.includes(i)?[...o,i]:!s&&o.includes(i)?o.filter(a=>a!==i):o)},[]);return f.jsx(Mb.Provider,{value:{isDirty:e.length>0,setGlobalDirtyState:r},children:n})},qc=()=>{const n=x.useId(),{isDirty:e,setGlobalDirtyState:t}=x.useContext(Mb);x.useEffect(()=>()=>t(n,!1),[n,t]);const r=x.useCallback(i=>t(n,i),[n,t]);return{isDirty:e,setGlobalDirtyState:r}},Ib=x.createContext({isAnyTextFieldFocused:!1,setFocusState:()=>{},fetchKoenigLexical:async()=>{},darkMode:!1}),Eb=()=>x.useContext(Ib),Zi=()=>{const n=Eb();if(!n)throw new Error("useFocusContext must be used within a FocusProvider");return n},SC=({fetchKoenigLexical:n,darkMode:e,children:t})=>{const[r,i]=x.useState(!1),s=o=>{i(o)};return f.jsx(Ib.Provider,{value:{isAnyTextFieldFocused:r,setFocusState:s,fetchKoenigLexical:n,darkMode:e},children:f.jsxs(wC,{children:[f.jsx(o2,{}),f.jsx(Ye.Provider,{children:t})]})})},tt=({type:n="text",inputRef:e,title:t,hideTitle:r,value:i,error:s,placeholder:o,rightPlaceholder:a,hint:l,onChange:c,onFocus:u,onBlur:d,clearBg:h=!1,className:p="",maxLength:g,containerClassName:m="",hintClassName:v="",unstyled:b=!1,disabled:y,...S})=>{const w=x.useId(),{setFocusState:C}=Zi(),A=P=>{u?.(P),C(!0)},k=P=>{d?.(P),C(!1)},I=_("relative order-2 flex w-full items-center",t&&!r&&"mt-1.5"),D=!b&&_("dark:peer-hover:bg-grey-925 dark:peer-focus:bg-grey-950 absolute inset-0 rounded-lg border text-grey-300 transition-colors peer-hover:bg-grey-100 peer-focus:border-green peer-focus:bg-white peer-focus:shadow-[0_0_0_2px_rgba(48,207,67,.25)]",s?"border-red bg-white dark:bg-grey-925":"border-transparent bg-grey-150 dark:bg-grey-900",y&&"dark:peer-hover:bg-grey-950 bg-grey-50 peer-hover:bg-grey-50 dark:bg-grey-950"),O=!b&&_("peer z-[1] order-2 h-9 w-full bg-transparent px-3 py-1.5 text-sm placeholder:text-grey-500 md:h-[38px] md:py-2 md:text-md dark:placeholder:text-grey-700",y?"cursor-not-allowed text-grey-600 opacity-60 dark:text-grey-800":"dark:text-white",a?"w-0 grow rounded-l-lg":"rounded-lg",p),T=!b&&_("z-[1] order-3 rounded-r-lg",a?typeof a=="string"?"flex h-8 items-center py-1 pr-3 text-right text-sm text-grey-500 md:h-9 md:text-base":"h-9 pr-1":"pr-2");let N=f.jsx(f.Fragment,{});const L=f.jsx("input",{ref:e,className:O||p,disabled:y,id:w,maxLength:g,placeholder:o,type:n,value:i,onBlur:k,onChange:c,onFocus:A,...S});return N=f.jsx(ab,{name:w,asChild:!0,children:f.jsxs("div",{className:I,children:[f.jsx(lb,{asChild:!0,children:L}),!b&&!h&&f.jsx("div",{className:D||""}),a&&f.jsx("span",{className:T||"",children:a})]})}),v=_("order-3",v),m=_("flex flex-col",m),t||l?f.jsx(Id,{asChild:!0,children:f.jsxs("div",{className:m,children:[N,t&&f.jsx(ft,{className:r?"sr-only":"order-1",htmlFor:w,useLabelTag:!0,children:t}),l&&f.jsx(qn,{className:v,color:s?"red":"default",children:l})]})}):f.jsx(Id,{asChild:!0,children:N})},CC=({valueInCents:n,onChange:e,...t})=>{const[r,i]=x.useState(n===""?"":((n||0)/100).toString()),s=a=>a.replace(/[^\d.]+/g,""),o=a=>{var l;return Math.round(parseFloat(((l=a.match(/[\d]+\.?[\d]{0,2}/))==null?void 0:l[0])||"0")*100)};return f.jsx(tt,{...t,value:r,onBlur:a=>{var l;i((o(a.target.value)/100).toString()),(l=t.onBlur)==null||l.call(t,a)},onChange:a=>{i(s(a.target.value)),e?.(o(a.target.value))}})},rc=({id:n,onUpload:e,children:t,style:r,unstyled:i=!1,inputRef:s,className:o,dragIndicatorClassName:a,accept:l,...c})=>{const[u,d]=x.useState(Date.now()),[h,p]=x.useState(!1),g=y=>{var S;const w=(S=y.target.files)==null?void 0:S[0];w&&e?.(w),d(Date.now())},m=y=>{var S;b(y);const w=(S=y.dataTransfer.files)==null?void 0:S[0];w&&e?.(w),d(Date.now())},v=y=>{y.preventDefault(),p(!0)},b=y=>{y.preventDefault(),p(!1)};return f.jsxs("label",{className:_("relative",o),htmlFor:n,style:r,onDragEnter:v,onDragLeave:b,onDragOver:v,onDrop:m,...c,children:[f.jsx("div",{className:_({"absolute inset-1 rounded":!0,"border-2 border-dashed border-grey-400/25":h},h&&[a])}),f.jsx("input",{ref:s||null,accept:l,id:n,type:"file",hidden:!0,onChange:g},u),typeof t=="string"?f.jsx("div",{className:i?"":"inline-flex h-[34px] cursor-pointer items-center justify-center rounded px-4 text-sm font-semibold hover:bg-grey-100 dark:text-white dark:hover:bg-grey-900",children:t}):t]})},kC=({title:n,grouped:e=!1,gap:t="md",margins:r="md",marginTop:i=!1,marginBottom:s=!0,className:o="",children:a})=>{let l=_("flex flex-col",t==="xs"&&"gap-4",t==="sm"&&"gap-6",t==="md"&&"gap-8",t==="lg"&&"gap-11");r||(r=t),s&&(l=_(l,r==="sm"&&"mb-7",r==="md"&&"mb-10",r==="lg"&&"mb-12")),i&&(l=_(l,r==="sm"&&"mt-7",r==="md"&&"mt-10",r==="lg"&&"mt-12")),e&&(l=_(l,"rounded-sm border border-grey-200 p-4 md:p-7 dark:border-grey-900"));const c=_(e?"mb-3":"mb-4");return e||n?f.jsxs("div",{className:o,children:[n&&f.jsx(ft,{className:c,level:5,children:n}),f.jsx("div",{className:l,children:a})]}):f.jsx("div",{className:_(l,o),children:a})},Db=({color:n="grey",children:e,className:t})=>{const r=_("relative overflow-hidden rounded-sm p-2",n==="grey"&&"text-black",n==="blue"&&"text-blue",n==="green"&&"text-green",n==="yellow"&&"text-yellow-600",n==="red"&&"text-red","after:pointer-events-none after:absolute after:inset-0 after:block after:opacity-10 after:content-['']",n==="grey"&&"after:bg-grey-500",n==="blue"&&"after:bg-blue",n==="green"&&"after:bg-green",n==="yellow"&&"after:bg-yellow",n==="red"&&"after:bg-red",t);return f.jsx("div",{className:r,children:e})};var AC=Object.defineProperty,MC=(n,e,t)=>e in n?AC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,IC=(n,e,t)=>MC(n,e+"",t);class Rb extends X.Component{constructor(e){super(e),IC(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){a2(r=>{r.setTag("adminx_settings_component",t.componentStack),Ss(e)}),console.error(e),console.error("In component:",t.componentStack)}render(){return this.state.hasError?f.jsxs(Db,{color:"red",children:["An error occurred loading ",this.props.name,". Please refresh and try again."]}):this.props.children}}const ke=(n,e)=>function(r){return f.jsx(Rb,{name:e,children:f.jsx(n,{...r})})},EC=function(n){let e="pending",t;const r=n().then(s=>{e="success",t=s},s=>{e="error",t=s});return{read:()=>{switch(e){case"pending":throw r;case"error":throw t;default:return t}}}},DC=({editor:n,onBlur:e,placeholder:t,nodes:r,emojiPicker:i=!0,darkMode:s=!1,singleParagraph:o=!1,children:a,initialEditorState:l,onChange:c})=>{const u=x.useCallback(b=>{var y;try{Ss({error:b,tags:{lexical:!0},contexts:{koenig:{version:(y=window["@tryghost/koenig-lexical"])==null?void 0:y.version}}})}catch(S){console.error(S)}console.error(b)},[]),{setFocusState:d}=Zi(),h=()=>{e&&e(),d(!1)},p=()=>{d(!0)},g=x.useMemo(()=>new Proxy({},{get:(b,y)=>n.read()[y]}),[n]),m={DEFAULT_NODES:g.DEFAULT_TRANSFORMERS,BASIC_NODES:g.BASIC_TRANSFORMERS,MINIMAL_NODES:g.MINIMAL_TRANSFORMERS},v=r||"DEFAULT_NODES";return f.jsx(g.KoenigComposer,{darkMode:s,initialEditorState:l,nodes:g[v],onError:u,children:f.jsxs(g.KoenigComposableEditor,{className:"koenig-lexical koenig-lexical-editor-input",isSnippetsEnabled:!1,markdownTransformers:m[v],placeholderClassName:"koenig-lexical-editor-input-placeholder line-clamp-1",placeholderText:t,singleParagraph:o,onBlur:h,onChange:c,onFocus:p,children:[a(g),i?f.jsx(g.EmojiPickerPlugin,{}):null]})})},RC=({className:n,children:e,initialEditorState:t,onChange:r,...i})=>{const{fetchKoenigLexical:s,darkMode:o}=Eb(),a=x.useMemo(()=>EC(s),[s]);return f.jsx("div",{className:n||"w-full",children:f.jsx("div",{className:"koenig-react-editor w-full [&_*]:!font-inherit [&_*]:!text-inherit",children:f.jsx(Rb,{name:"editor",children:f.jsx(x.Suspense,{fallback:f.jsx("p",{className:"koenig-react-editor-loading",children:"Loading editor..."}),children:f.jsx(DC,{...i,darkMode:o,editor:a,initialEditorState:t,onChange:r,children:e})})})})})},Qh=({id:n,children:e,width:t="100%",height:r="120px",imageURL:i,imageFit:s="cover",imageContainerClassName:o,imageClassName:a,fileUploadClassName:l,fileUploadProps:c,deleteButtonClassName:u,deleteButtonContent:d,deleteButtonUnstyled:h=!1,imageBWCheckedBg:p=!1,unstyled:g=!1,onUpload:m,onDelete:v,onImageClick:b,pintura:y,editButtonClassName:S,editButtonContent:w,editButtonUnstyled:C=!1,buttonContainerClassName:A,unsplashButtonClassName:k,unsplashButtonUnstyled:I=!1,unsplashButtonContent:D,unsplashEnabled:O,openUnsplash:T})=>{if(g||(o=_("group relative flex justify-center",o),a=_(s==="cover"&&"object-cover",s==="contain"&&"object-contain",s==="fill"&&"object-fill",s==="scale-down"&&"object-scale-down",s==="none"&&"object-scale-down",a),l=_("flex cursor-pointer items-center justify-center rounded border border-grey-100 bg-grey-75 p-3 text-sm font-semibold text-grey-800 hover:text-black dark:border-grey-900 dark:bg-grey-900 dark:text-grey-400",l),h||(u=_("absolute right-4 top-4 flex h-8 w-8 cursor-pointer items-center justify-center rounded bg-[rgba(0,0,0,0.75)] text-white hover:bg-black group-hover:!visible md:invisible",u)),C||(S=_("absolute right-16 top-4 flex h-8 w-8 cursor-pointer items-center justify-center rounded bg-[rgba(0,0,0,0.75)] text-white hover:bg-black group-hover:!visible md:invisible",S)),I||(k=_("absolute right-16 top-4 flex h-8 w-8 cursor-pointer items-center justify-center rounded bg-[rgba(255,255,255)] text-white",k))),d=d||f.jsx(ve,{colorClass:"text-white",name:"trash",size:"sm"}),w=w||f.jsx(ve,{colorClass:"text-white",name:"pen",size:"sm"}),D=D||f.jsx(ve,{colorClass:"text-black",name:"unsplash-logo",size:"sm"}),i){let N=f.jsxs("div",{className:o,style:{width:g?"":t,height:g?"":r},children:[f.jsx("img",{alt:"",className:a,id:n,src:i,style:{width:g?"":t||"100%",height:g?"":r||"auto"},onClick:b}),f.jsxs("div",{className:A,children:[y?.isEnabled&&y?.openEditor&&f.jsx("button",{className:S,type:"button",onClick:y.openEditor,children:w}),f.jsx("button",{className:u,type:"button",onClick:v,children:d})]})]});if(p){const L="#d9d9d9";N=f.jsx("div",{style:{backgroundImage:`
                        linear-gradient(45deg, ${L} 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, ${L} 75%),
                        linear-gradient(45deg, transparent 75%, ${L} 75%),
                        linear-gradient(45deg, ${L} 25%, #f1f1f1 25%)
                    `,backgroundSize:"32px 32px",backgroundPosition:"0 0, 0 0, -16px -16px, 16px 16px"},children:N})}return N}else return f.jsxs("div",{className:`${A} ${O?"relative":""}`,children:[O&&f.jsx("button",{className:k,"data-testid":"toggle-unsplash-button",type:"button",onClick:T,children:D}),f.jsx(rc,{className:l,id:n,style:{width:g?"":t,height:g?"":r},unstyled:g,onUpload:m,...c,children:f.jsx(f.Fragment,{children:f.jsx("span",{className:"text-center",children:e})})})]})};function qr(n){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(n)}function OC(n,e){if(qr(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(qr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ob(n){var e=OC(n,"string");return qr(e)=="symbol"?e:e+""}function ki(n,e,t){return(e=Ob(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ep(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function te(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ep(Object(t),!0).forEach(function(r){ki(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ep(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function TC(n){if(Array.isArray(n))return n}function NC(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Dd(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Tb(n,e){if(n){if(typeof n=="string")return Dd(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Dd(n,e):void 0}}function PC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt(n,e){return TC(n)||NC(n,e)||Tb(n,e)||PC()}function Nb(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function An(n,e){if(n==null)return{};var t,r,i=Nb(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}var LC=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Gc(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,i=r===void 0?!1:r,s=n.defaultValue,o=s===void 0?null:s,a=n.inputValue,l=n.menuIsOpen,c=n.onChange,u=n.onInputChange,d=n.onMenuClose,h=n.onMenuOpen,p=n.value,g=An(n,LC),m=x.useState(a!==void 0?a:t),v=pt(m,2),b=v[0],y=v[1],S=x.useState(l!==void 0?l:i),w=pt(S,2),C=w[0],A=w[1],k=x.useState(p!==void 0?p:o),I=pt(k,2),D=I[0],O=I[1],T=x.useCallback(function(ae,ee){typeof c=="function"&&c(ae,ee),O(ae)},[c]),N=x.useCallback(function(ae,ee){var de;typeof u=="function"&&(de=u(ae,ee)),y(de!==void 0?de:ae)},[u]),L=x.useCallback(function(){typeof h=="function"&&h(),A(!0)},[h]),P=x.useCallback(function(){typeof d=="function"&&d(),A(!1)},[d]),H=a!==void 0?a:b,q=l!==void 0?l:C,Z=p!==void 0?p:D;return te(te({},g),{},{inputValue:H,menuIsOpen:q,onChange:T,onInputChange:N,onMenuClose:P,onMenuOpen:L,value:Z})}function se(){return se=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},se.apply(null,arguments)}function _C(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function tp(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Ob(r.key),r)}}function jC(n,e,t){return e&&tp(n.prototype,e),t&&tp(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Rd(n,e){return Rd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Rd(n,e)}function BC(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Rd(n,e)}function ic(n){return ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ic(n)}function Pb(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pb=function(){return!!n})()}function $C(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function FC(n,e){if(e&&(qr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $C(n)}function HC(n){var e=Pb();return function(){var t,r=ic(n);if(e){var i=ic(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return FC(this,t)}}function VC(n){if(Array.isArray(n))return Dd(n)}function UC(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function zC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ri(n){return VC(n)||UC(n)||Tb(n)||zC()}function WC(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function qC(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var GC=(function(){function n(t){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(qC(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=WC(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},n})(),Mt="-ms-",sc="-moz-",De="-webkit-",Lb="comm",Gf="rule",Kf="decl",KC="@import",_b="@keyframes",ZC="@layer",YC=Math.abs,Kc=String.fromCharCode,JC=Object.assign;function XC(n,e){return wt(n,0)^45?(((e<<2^wt(n,0))<<2^wt(n,1))<<2^wt(n,2))<<2^wt(n,3):0}function jb(n){return n.trim()}function QC(n,e){return(n=e.exec(n))?n[0]:n}function Re(n,e,t){return n.replace(e,t)}function Od(n,e){return n.indexOf(e)}function wt(n,e){return n.charCodeAt(e)|0}function Ts(n,e,t){return n.slice(e,t)}function Pn(n){return n.length}function Zf(n){return n.length}function Eo(n,e){return e.push(n),n}function ek(n,e){return n.map(e).join("")}var Zc=1,Fi=1,Bb=0,Jt=0,nt=0,Yi="";function Yc(n,e,t,r,i,s,o){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:Zc,column:Fi,length:o,return:""}}function cs(n,e){return JC(Yc("",null,null,"",null,null,0),n,{length:-n.length},e)}function tk(){return nt}function nk(){return nt=Jt>0?wt(Yi,--Jt):0,Fi--,nt===10&&(Fi=1,Zc--),nt}function an(){return nt=Jt<Bb?wt(Yi,Jt++):0,Fi++,nt===10&&(Fi=1,Zc++),nt}function Un(){return wt(Yi,Jt)}function Fl(){return Jt}function ro(n,e){return Ts(Yi,n,e)}function Ns(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $b(n){return Zc=Fi=1,Bb=Pn(Yi=n),Jt=0,[]}function Fb(n){return Yi="",n}function Hl(n){return jb(ro(Jt-1,Td(n===91?n+2:n===40?n+1:n)))}function rk(n){for(;(nt=Un())&&nt<33;)an();return Ns(n)>2||Ns(nt)>3?"":" "}function ik(n,e){for(;--e&&an()&&!(nt<48||nt>102||nt>57&&nt<65||nt>70&&nt<97););return ro(n,Fl()+(e<6&&Un()==32&&an()==32))}function Td(n){for(;an();)switch(nt){case n:return Jt;case 34:case 39:n!==34&&n!==39&&Td(nt);break;case 40:n===41&&Td(n);break;case 92:an();break}return Jt}function sk(n,e){for(;an()&&n+nt!==57;)if(n+nt===84&&Un()===47)break;return"/*"+ro(e,Jt-1)+"*"+Kc(n===47?n:an())}function ok(n){for(;!Ns(Un());)an();return ro(n,Jt)}function ak(n){return Fb(Vl("",null,null,null,[""],n=$b(n),0,[0],n))}function Vl(n,e,t,r,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,p=0,g=0,m=1,v=1,b=1,y=0,S="",w=i,C=s,A=r,k=S;v;)switch(g=y,y=an()){case 40:if(g!=108&&wt(k,d-1)==58){Od(k+=Re(Hl(y),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:k+=Hl(y);break;case 9:case 10:case 13:case 32:k+=rk(g);break;case 92:k+=ik(Fl()-1,7);continue;case 47:switch(Un()){case 42:case 47:Eo(lk(sk(an(),Fl()),e,t),l);break;default:k+="/"}break;case 123*m:a[c++]=Pn(k)*b;case 125*m:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+u:b==-1&&(k=Re(k,/\f/g,"")),p>0&&Pn(k)-d&&Eo(p>32?rp(k+";",r,t,d-1):rp(Re(k," ","")+";",r,t,d-2),l);break;case 59:k+=";";default:if(Eo(A=np(k,e,t,c,u,i,a,S,w=[],C=[],d),s),y===123)if(u===0)Vl(k,e,A,A,w,s,d,a,C);else switch(h===99&&wt(k,3)===110?100:h){case 100:case 108:case 109:case 115:Vl(n,A,A,r&&Eo(np(n,A,A,0,0,i,a,S,i,w=[],d),C),i,C,d,a,r?w:C);break;default:Vl(k,A,A,A,[""],C,0,a,C)}}c=u=p=0,m=b=1,S=k="",d=o;break;case 58:d=1+Pn(k),p=g;default:if(m<1){if(y==123)--m;else if(y==125&&m++==0&&nk()==125)continue}switch(k+=Kc(y),y*m){case 38:b=u>0?1:(k+="\f",-1);break;case 44:a[c++]=(Pn(k)-1)*b,b=1;break;case 64:Un()===45&&(k+=Hl(an())),h=Un(),u=d=Pn(S=k+=ok(Fl())),y++;break;case 45:g===45&&Pn(k)==2&&(m=0)}}return s}function np(n,e,t,r,i,s,o,a,l,c,u){for(var d=i-1,h=i===0?s:[""],p=Zf(h),g=0,m=0,v=0;g<r;++g)for(var b=0,y=Ts(n,d+1,d=YC(m=o[g])),S=n;b<p;++b)(S=jb(m>0?h[b]+" "+y:Re(y,/&\f/g,h[b])))&&(l[v++]=S);return Yc(n,e,t,i===0?Gf:a,l,c,u)}function lk(n,e,t){return Yc(n,e,t,Lb,Kc(tk()),Ts(n,2,-2),0)}function rp(n,e,t,r){return Yc(n,e,t,Kf,Ts(n,0,r),Ts(n,r+1,-1),r)}function Oi(n,e){for(var t="",r=Zf(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function ck(n,e,t,r){switch(n.type){case ZC:if(n.children.length)break;case KC:case Kf:return n.return=n.return||n.value;case Lb:return"";case _b:return n.return=n.value+"{"+Oi(n.children,r)+"}";case Gf:n.value=n.props.join(",")}return Pn(t=Oi(n.children,r))?n.return=n.value+"{"+t+"}":""}function uk(n){var e=Zf(n);return function(t,r,i,s){for(var o="",a=0;a<e;a++)o+=n[a](t,r,i,s)||"";return o}}function dk(n){return function(e){e.root||(e=e.return)&&n(e)}}function fk(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var hk=function(e,t,r){for(var i=0,s=0;i=s,s=Un(),i===38&&s===12&&(t[r]=1),!Ns(s);)an();return ro(e,Jt)},pk=function(e,t){var r=-1,i=44;do switch(Ns(i)){case 0:i===38&&Un()===12&&(t[r]=1),e[r]+=hk(Jt-1,t,r);break;case 2:e[r]+=Hl(i);break;case 4:if(i===44){e[++r]=Un()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Kc(i)}while(i=an());return e},mk=function(e,t){return Fb(pk($b(e),t))},ip=new WeakMap,gk=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!ip.get(r))&&!i){ip.set(e,!0);for(var s=[],o=mk(t,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},vk=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Hb(n,e){switch(XC(n,e)){case 5103:return De+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return De+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return De+n+sc+n+Mt+n+n;case 6828:case 4268:return De+n+Mt+n+n;case 6165:return De+n+Mt+"flex-"+n+n;case 5187:return De+n+Re(n,/(\w+).+(:[^]+)/,De+"box-$1$2"+Mt+"flex-$1$2")+n;case 5443:return De+n+Mt+"flex-item-"+Re(n,/flex-|-self/,"")+n;case 4675:return De+n+Mt+"flex-line-pack"+Re(n,/align-content|flex-|-self/,"")+n;case 5548:return De+n+Mt+Re(n,"shrink","negative")+n;case 5292:return De+n+Mt+Re(n,"basis","preferred-size")+n;case 6060:return De+"box-"+Re(n,"-grow","")+De+n+Mt+Re(n,"grow","positive")+n;case 4554:return De+Re(n,/([^-])(transform)/g,"$1"+De+"$2")+n;case 6187:return Re(Re(Re(n,/(zoom-|grab)/,De+"$1"),/(image-set)/,De+"$1"),n,"")+n;case 5495:case 3959:return Re(n,/(image-set\([^]*)/,De+"$1$`$1");case 4968:return Re(Re(n,/(.+:)(flex-)?(.*)/,De+"box-pack:$3"+Mt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+De+n+n;case 4095:case 3583:case 4068:case 2532:return Re(n,/(.+)-inline(.+)/,De+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pn(n)-1-e>6)switch(wt(n,e+1)){case 109:if(wt(n,e+4)!==45)break;case 102:return Re(n,/(.+:)(.+)-([^]+)/,"$1"+De+"$2-$3$1"+sc+(wt(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Od(n,"stretch")?Hb(Re(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(wt(n,e+1)!==115)break;case 6444:switch(wt(n,Pn(n)-3-(~Od(n,"!important")&&10))){case 107:return Re(n,":",":"+De)+n;case 101:return Re(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+De+(wt(n,14)===45?"inline-":"")+"box$3$1"+De+"$2$3$1"+Mt+"$2box$3")+n}break;case 5936:switch(wt(n,e+11)){case 114:return De+n+Mt+Re(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return De+n+Mt+Re(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return De+n+Mt+Re(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return De+n+Mt+n+n}return n}var bk=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case Kf:e.return=Hb(e.value,e.length);break;case _b:return Oi([cs(e,{value:Re(e.value,"@","@"+De)})],i);case Gf:if(e.length)return ek(e.props,function(s){switch(QC(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Oi([cs(e,{props:[Re(s,/:(read-\w+)/,":"+sc+"$1")]})],i);case"::placeholder":return Oi([cs(e,{props:[Re(s,/:(plac\w+)/,":"+De+"input-$1")]}),cs(e,{props:[Re(s,/:(plac\w+)/,":"+sc+"$1")]}),cs(e,{props:[Re(s,/:(plac\w+)/,Mt+"input-$1")]})],i)}return""})}},xk=[bk],yk=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var v=m.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=e.stylisPlugins||xk,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(m){for(var v=m.getAttribute("data-emotion").split(" "),b=1;b<v.length;b++)s[v[b]]=!0;a.push(m)});var l,c=[gk,vk];{var u,d=[ck,dk(function(m){u.insert(m)})],h=uk(c.concat(i,d)),p=function(v){return Oi(ak(v),h)};l=function(v,b,y,S){u=y,p(v?v+"{"+b.styles+"}":b.styles),S&&(g.inserted[b.name]=!0)}}var g={key:t,sheet:new GC({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(a),g},wk=!0;function Sk(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):r+=i+" "}),r}var Vb=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||wk===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},Ck=function(e,t,r){Vb(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function kk(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Ak={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Mk=/[A-Z]|^ms/g,Ik=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ub=function(e){return e.charCodeAt(1)===45},sp=function(e){return e!=null&&typeof e!="boolean"},Pu=fk(function(n){return Ub(n)?n:n.replace(Mk,"-$&").toLowerCase()}),op=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Ik,function(r,i,s){return Ln={name:i,styles:s,next:Ln},i})}return Ak[e]!==1&&!Ub(e)&&typeof t=="number"&&t!==0?t+"px":t};function Ps(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return Ln={name:t.name,styles:t.styles,next:Ln},t.name;if(t.styles!==void 0){var r=t.next;if(r!==void 0)for(;r!==void 0;)Ln={name:r.name,styles:r.styles,next:Ln},r=r.next;var i=t.styles+";";return i}return Ek(n,e,t)}case"function":{if(n!==void 0){var s=Ln,o=t(n);return Ln=s,Ps(n,e,o)}break}}return t}function Ek(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=Ps(n,e,t[i])+";";else for(var s in t){var o=t[s];if(typeof o!="object")sp(o)&&(r+=Pu(s)+":"+op(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var a=0;a<o.length;a++)sp(o[a])&&(r+=Pu(s)+":"+op(s,o[a])+";");else{var l=Ps(n,e,o);switch(s){case"animation":case"animationName":{r+=Pu(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var ap=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ln,zb=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";Ln=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Ps(r,t,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Ps(r,t,e[a]),i&&(s+=o[a]);ap.lastIndex=0;for(var l="",c;(c=ap.exec(s))!==null;)l+="-"+c[1];var u=kk(s)+l;return{name:u,styles:s,next:Ln}},Dk=function(e){return e()},Rk=Yh.useInsertionEffect?Yh.useInsertionEffect:!1,Ok=Rk||Dk,Yf={}.hasOwnProperty,Wb=x.createContext(typeof HTMLElement<"u"?yk({key:"css"}):null);Wb.Provider;var Tk=function(e){return x.forwardRef(function(t,r){var i=x.useContext(Wb);return e(t,i,r)})},Nk=x.createContext({}),Nd="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Pk=function(e,t){var r={};for(var i in t)Yf.call(t,i)&&(r[i]=t[i]);return r[Nd]=e,r},Lk=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return Vb(t,r,i),Ok(function(){return Ck(t,r,i)}),null},_k=Tk(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=n[Nd],s=[r],o="";typeof n.className=="string"?o=Sk(e.registered,s,n.className):n.className!=null&&(o=n.className+" ");var a=zb(s,void 0,x.useContext(Nk));o+=e.key+"-"+a.name;var l={};for(var c in n)Yf.call(n,c)&&c!=="css"&&c!==Nd&&(l[c]=n[c]);return l.ref=t,l.className=o,x.createElement(x.Fragment,null,x.createElement(Lk,{cache:e,serialized:a,isStringTag:typeof i=="string"}),x.createElement(i,l))}),jk=_k,oe=function(e,t){var r=arguments;if(t==null||!Yf.call(t,"css"))return x.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=jk,s[1]=Pk(e,t);for(var o=2;o<i;o++)s[o]=r[o];return x.createElement.apply(null,s)};function Jf(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return zb(e)}var Bk=function(){var e=Jf.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function $k(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var Pd=x.useLayoutEffect,Fk=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],oc=function(){};function Hk(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function Vk(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];var s=[].concat(r);if(e&&n)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(Hk(n,o)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var ac=function(e){return Xk(e)?e.filter(Boolean):qr(e)==="object"&&e!==null?[e]:[]},qb=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=An(e,Fk);return te({},t)},Ke=function(e,t,r){var i=e.cx,s=e.getStyles,o=e.getClassNames,a=e.className;return{css:s(t,e),className:i(r??{},o(t,e),a)}};function Uk(n,e,t){if(t){var r=t(n,e);if(typeof r=="string")return r}return n}function Jc(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function zk(n){return Jc(n)?window.innerHeight:n.clientHeight}function Gb(n){return Jc(n)?window.pageYOffset:n.scrollTop}function lc(n,e){if(Jc(n)){window.scrollTo(0,e);return}n.scrollTop=e}function Wk(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=n;i=i.parentElement;)if(e=getComputedStyle(i),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function qk(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function Do(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:oc,i=Gb(n),s=e-i,o=10,a=0;function l(){a+=o;var c=qk(a,i,s,t);lc(n,c),a<t?window.requestAnimationFrame(l):r(n)}l()}function lp(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>t.bottom?lc(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+i,n.scrollHeight)):r.top-i<t.top&&lc(n,Math.max(e.offsetTop-i,0))}function Gk(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function cp(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Kk(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Kb=!1,Zk={get passive(){return Kb=!0}},Ro=typeof window<"u"?window:{};Ro.addEventListener&&Ro.removeEventListener&&(Ro.addEventListener("p",oc,Zk),Ro.removeEventListener("p",oc,!1));var Yk=Kb;function Jk(n){return n!=null}function Xk(n){return Array.isArray(n)}function vs(n,e,t){return n?e:t}var Qk=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var a=pt(o,1),l=a[0];return!r.includes(l)});return s.reduce(function(o,a){var l=pt(a,2),c=l[0],u=l[1];return o[c]=u,o},{})},eA=["children","innerProps"],tA=["children","innerProps"];function nA(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,i=n.placement,s=n.shouldScroll,o=n.isFixedPosition,a=n.controlHeight,l=Wk(t),c={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return c;var u=l.getBoundingClientRect(),d=u.height,h=t.getBoundingClientRect(),p=h.bottom,g=h.height,m=h.top,v=t.offsetParent.getBoundingClientRect(),b=v.top,y=o?window.innerHeight:zk(l),S=Gb(l),w=parseInt(getComputedStyle(t).marginBottom,10),C=parseInt(getComputedStyle(t).marginTop,10),A=b-C,k=y-m,I=A+S,D=d-S-m,O=p-y+S+w,T=S+m-C,N=160;switch(i){case"auto":case"bottom":if(k>=g)return{placement:"bottom",maxHeight:e};if(D>=g&&!o)return s&&Do(l,O,N),{placement:"bottom",maxHeight:e};if(!o&&D>=r||o&&k>=r){s&&Do(l,O,N);var L=o?k-w:D-w;return{placement:"bottom",maxHeight:L}}if(i==="auto"||o){var P=e,H=o?A:I;return H>=r&&(P=Math.min(H-w-a,e)),{placement:"top",maxHeight:P}}if(i==="bottom")return s&&lc(l,O),{placement:"bottom",maxHeight:e};break;case"top":if(A>=g)return{placement:"top",maxHeight:e};if(I>=g&&!o)return s&&Do(l,T,N),{placement:"top",maxHeight:e};if(!o&&I>=r||o&&A>=r){var q=e;return(!o&&I>=r||o&&A>=r)&&(q=o?A-C:I-C),s&&Do(l,T,N),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}function rA(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var Zb=function(e){return e==="auto"?"bottom":e},iA=function(e,t){var r,i=e.placement,s=e.theme,o=s.borderRadius,a=s.spacing,l=s.colors;return te((r={label:"menu"},ki(r,rA(i),"100%"),ki(r,"position","absolute"),ki(r,"width","100%"),ki(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},Yb=x.createContext(null),sA=function(e){var t=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,c=x.useContext(Yb)||{},u=c.setPortalPlacement,d=x.useRef(null),h=x.useState(i),p=pt(h,2),g=p[0],m=p[1],v=x.useState(null),b=pt(v,2),y=b[0],S=b[1],w=l.spacing.controlHeight;return Pd(function(){var C=d.current;if(C){var A=o==="fixed",k=a&&!A,I=nA({maxHeight:i,menuEl:C,minHeight:r,placement:s,shouldScroll:k,isFixedPosition:A,controlHeight:w});m(I.maxHeight),S(I.placement),u?.(I.placement)}},[i,s,o,a,r,u,w]),t({ref:d,placerProps:te(te({},e),{},{placement:y||Zb(s),maxHeight:g})})},oA=function(e){var t=e.children,r=e.innerRef,i=e.innerProps;return oe("div",se({},Ke(e,"menu",{menu:!0}),{ref:r},i),t)},aA=oA,lA=function(e,t){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return te({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:i,paddingTop:i})},cA=function(e){var t=e.children,r=e.innerProps,i=e.innerRef,s=e.isMulti;return oe("div",se({},Ke(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},r),t)},Jb=function(e,t){var r=e.theme,i=r.spacing.baseUnit,s=r.colors;return te({textAlign:"center"},t?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},uA=Jb,dA=Jb,fA=function(e){var t=e.children,r=t===void 0?"No options":t,i=e.innerProps,s=An(e,eA);return oe("div",se({},Ke(te(te({},s),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},hA=function(e){var t=e.children,r=t===void 0?"Loading...":t,i=e.innerProps,s=An(e,tA);return oe("div",se({},Ke(te(te({},s),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},pA=function(e){var t=e.rect,r=e.offset,i=e.position;return{left:t.left,position:i,top:r,width:t.width,zIndex:1}},mA=function(e){var t=e.appendTo,r=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=x.useRef(null),c=x.useRef(null),u=x.useState(Zb(o)),d=pt(u,2),h=d[0],p=d[1],g=x.useMemo(function(){return{setPortalPlacement:p}},[]),m=x.useState(null),v=pt(m,2),b=v[0],y=v[1],S=x.useCallback(function(){if(i){var k=Gk(i),I=a==="fixed"?0:window.pageYOffset,D=k[h]+I;(D!==b?.offset||k.left!==b?.rect.left||k.width!==b?.rect.width)&&y({offset:D,rect:k})}},[i,a,h,b?.offset,b?.rect.left,b?.rect.width]);Pd(function(){S()},[S]);var w=x.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),i&&l.current&&(c.current=l2(i,l.current,S,{elementResize:"ResizeObserver"in window}))},[i,S]);Pd(function(){w()},[w]);var C=x.useCallback(function(k){l.current=k,w()},[w]);if(!t&&a!=="fixed"||!b)return null;var A=oe("div",se({ref:C},Ke(te(te({},e),{},{offset:b.offset,position:a,rect:b.rect}),"menuPortal",{"menu-portal":!0}),s),r);return oe(Yb.Provider,{value:g},t?Hr.createPortal(A,t):A)},gA=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},vA=function(e){var t=e.children,r=e.innerProps,i=e.isDisabled,s=e.isRtl;return oe("div",se({},Ke(e,"container",{"--is-disabled":i,"--is-rtl":s}),r),t)},bA=function(e,t){var r=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return te({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},xA=function(e){var t=e.children,r=e.innerProps,i=e.isMulti,s=e.hasValue;return oe("div",se({},Ke(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),r),t)},yA=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},wA=function(e){var t=e.children,r=e.innerProps;return oe("div",se({},Ke(e,"indicatorsContainer",{indicators:!0}),r),t)},up,SA=["size"],CA=["innerProps","isRtl","size"],kA={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Xb=function(e){var t=e.size,r=An(e,SA);return oe("svg",se({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:kA},r))},Xf=function(e){return oe(Xb,se({size:20},e),oe("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Qb=function(e){return oe(Xb,se({size:20},e),oe("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ex=function(e,t){var r=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return te({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?o.neutral60:o.neutral20,padding:s*2,":hover":{color:r?o.neutral80:o.neutral40}})},AA=ex,MA=function(e){var t=e.children,r=e.innerProps;return oe("div",se({},Ke(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||oe(Qb,null))},IA=ex,EA=function(e){var t=e.children,r=e.innerProps;return oe("div",se({},Ke(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||oe(Xf,null))},DA=function(e,t){var r=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return te({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},RA=function(e){var t=e.innerProps;return oe("span",se({},t,Ke(e,"indicatorSeparator",{"indicator-separator":!0})))},OA=Bk(up||(up=$k([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),TA=function(e,t){var r=e.isFocused,i=e.size,s=e.theme,o=s.colors,a=s.spacing.baseUnit;return te({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?o.neutral60:o.neutral20,padding:a*2})},Lu=function(e){var t=e.delay,r=e.offset;return oe("span",{css:Jf({animation:"".concat(OA," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},NA=function(e){var t=e.innerProps,r=e.isRtl,i=e.size,s=i===void 0?4:i,o=An(e,CA);return oe("div",se({},Ke(te(te({},o),{},{innerProps:t,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),oe(Lu,{delay:0,offset:r}),oe(Lu,{delay:160,offset:!0}),oe(Lu,{delay:320,offset:!r}))},PA=function(e,t){var r=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,a=s.borderRadius,l=s.spacing;return te({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?o.neutral5:o.neutral0,borderColor:r?o.neutral10:i?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},LA=function(e){var t=e.children,r=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return oe("div",se({ref:s},Ke(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":a}),o,{"aria-disabled":r||void 0}),t)},_A=LA,jA=["data"],BA=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},$A=function(e){var t=e.children,r=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return oe("div",se({},Ke(e,"group",{group:!0}),l),oe(o,se({},a,{selectProps:d,theme:u,getStyles:i,getClassNames:s,cx:r}),c),oe("div",null,t))},FA=function(e,t){var r=e.theme,i=r.colors,s=r.spacing;return te({label:"group",cursor:"default",display:"block"},t?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},HA=function(e){var t=qb(e);t.data;var r=An(t,jA);return oe("div",se({},Ke(e,"groupHeading",{"group-heading":!0}),r))},VA=$A,UA=["innerRef","isDisabled","isHidden","inputClassName"],zA=function(e,t){var r=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,a=s.colors;return te(te({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},WA),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},tx={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},WA={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":te({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},tx)},qA=function(e){return te({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},tx)},GA=function(e){var t=e.cx,r=e.value,i=qb(e),s=i.innerRef,o=i.isDisabled,a=i.isHidden,l=i.inputClassName,c=An(i,UA);return oe("div",se({},Ke(e,"input",{"input-container":!0}),{"data-value":r||""}),oe("input",se({className:t({input:!0},l),ref:s,style:qA(a),disabled:o},c)))},KA=GA,ZA=function(e,t){var r=e.theme,i=r.spacing,s=r.borderRadius,o=r.colors;return te({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},YA=function(e,t){var r=e.theme,i=r.borderRadius,s=r.colors,o=e.cropWithEllipsis;return te({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},JA=function(e,t){var r=e.theme,i=r.spacing,s=r.borderRadius,o=r.colors,a=e.isFocused;return te({alignItems:"center",display:"flex"},t?{}:{borderRadius:s/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},nx=function(e){var t=e.children,r=e.innerProps;return oe("div",r,t)},XA=nx,QA=nx;function eM(n){var e=n.children,t=n.innerProps;return oe("div",se({role:"button"},t),e||oe(Xf,{size:14}))}var tM=function(e){var t=e.children,r=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,a=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return oe(c,{data:i,innerProps:te(te({},Ke(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:l},oe(u,{data:i,innerProps:te({},Ke(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),oe(d,{data:i,innerProps:te(te({},Ke(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},a),selectProps:l}))},nM=tM,rM=function(e,t){var r=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,a=o.spacing,l=o.colors;return te({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:s?l.primary:i?l.primary25:"transparent",color:r?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:s?l.primary:l.primary50}})},iM=function(e){var t=e.children,r=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,a=e.innerProps;return oe("div",se({},Ke(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":r},a),t)},sM=iM,oM=function(e,t){var r=e.theme,i=r.spacing,s=r.colors;return te({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},aM=function(e){var t=e.children,r=e.innerProps;return oe("div",se({},Ke(e,"placeholder",{placeholder:!0}),r),t)},lM=aM,cM=function(e,t){var r=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return te({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},uM=function(e){var t=e.children,r=e.isDisabled,i=e.innerProps;return oe("div",se({},Ke(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),t)},dM=uM,Ji={ClearIndicator:EA,Control:_A,DropdownIndicator:MA,DownChevron:Qb,CrossIcon:Xf,Group:VA,GroupHeading:HA,IndicatorsContainer:wA,IndicatorSeparator:RA,Input:KA,LoadingIndicator:NA,Menu:aA,MenuList:cA,MenuPortal:mA,LoadingMessage:hA,NoOptionsMessage:fA,MultiValue:nM,MultiValueContainer:XA,MultiValueLabel:QA,MultiValueRemove:eM,Option:sM,Placeholder:lM,SelectContainer:vA,SingleValue:dM,ValueContainer:xA},fM=function(e){return te(te({},Ji),e.components)},dp=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function hM(n,e){return!!(n===e||dp(n)&&dp(e))}function pM(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!hM(n[t],e[t]))return!1;return!0}function mM(n,e){e===void 0&&(e=pM);var t=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var o=n.apply(this,i);return t={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){t=null},r}var gM={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},vM=function(e){return oe("span",se({css:gM},e))},fp=vM,bM={guidance:function(e){var t=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,i=r===void 0?"":r,s=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,a=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,v){return m&&m.length?"".concat(m.indexOf(v)+1," of ").concat(m.length):""};if(t==="value"&&a)return"value ".concat(o," focused, ").concat(d(a,r),".");if(t==="menu"&&u){var h=l?" disabled":"",p="".concat(c?" selected":"").concat(h);return"".concat(o).concat(p,", ").concat(d(i,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},xM=function(e){var t=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,h=l.getOptionLabel,p=l.inputValue,g=l.isMulti,m=l.isOptionDisabled,v=l.isSearchable,b=l.menuIsOpen,y=l.options,S=l.screenReaderStatus,w=l.tabSelectsValue,C=l.isLoading,A=l["aria-label"],k=l["aria-live"],I=x.useMemo(function(){return te(te({},bM),d||{})},[d]),D=x.useMemo(function(){var H="";if(t&&I.onChange){var q=t.option,Z=t.options,ae=t.removedValue,ee=t.removedValues,de=t.value,ge=function(Ae){return Array.isArray(Ae)?null:Ae},K=ae||q||ge(de),fe=K?h(K):"",re=Z||ee||void 0,ue=re?re.map(h):[],Q=te({isDisabled:K&&m(K,a),label:fe,labels:ue},t);H=I.onChange(Q)}return H},[t,I,m,a,h]),O=x.useMemo(function(){var H="",q=r||i,Z=!!(r&&a&&a.includes(r));if(q&&I.onFocus){var ae={focused:q,label:h(q),isDisabled:m(q,a),isSelected:Z,options:s,context:q===r?"menu":"value",selectValue:a,isAppleDevice:u};H=I.onFocus(ae)}return H},[r,i,h,m,I,s,a,u]),T=x.useMemo(function(){var H="";if(b&&y.length&&!C&&I.onFilter){var q=S({count:s.length});H=I.onFilter({inputValue:p,resultsMessage:q})}return H},[s,p,b,I,y,S,C]),N=t?.action==="initial-input-focus",L=x.useMemo(function(){var H="";if(I.guidance){var q=i?"value":b?"menu":"input";H=I.guidance({"aria-label":A,context:q,isDisabled:r&&m(r,a),isMulti:g,isSearchable:v,tabSelectsValue:w,isInitialFocus:N})}return H},[A,r,i,g,m,v,b,I,a,w,N]),P=oe(x.Fragment,null,oe("span",{id:"aria-selection"},D),oe("span",{id:"aria-focused"},O),oe("span",{id:"aria-results"},T),oe("span",{id:"aria-guidance"},L));return oe(x.Fragment,null,oe(fp,{id:c},N&&P),oe(fp,{"aria-live":k,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!N&&P))},yM=xM,Ld=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],wM=new RegExp("["+Ld.map(function(n){return n.letters}).join("")+"]","g"),rx={};for(var _u=0;_u<Ld.length;_u++)for(var ju=Ld[_u],Bu=0;Bu<ju.letters.length;Bu++)rx[ju.letters[Bu]]=ju.base;var ix=function(e){return e.replace(wM,function(t){return rx[t]})},SM=mM(ix),hp=function(e){return e.replace(/^\s+|\s+$/g,"")},CM=function(e){return"".concat(e.label," ").concat(e.value)},kM=function(e){return function(t,r){if(t.data.__isNew__)return!0;var i=te({ignoreCase:!0,ignoreAccents:!0,stringify:CM,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,a=i.stringify,l=i.trim,c=i.matchFrom,u=l?hp(r):r,d=l?hp(a(t)):a(t);return s&&(u=u.toLowerCase(),d=d.toLowerCase()),o&&(u=SM(u),d=ix(d)),c==="start"?d.substr(0,u.length)===u:d.indexOf(u)>-1}},AM=["innerRef"];function MM(n){var e=n.innerRef,t=An(n,AM),r=Qk(t,"onExited","in","enter","exit","appear");return oe("input",se({ref:e},r,{css:Jf({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var IM=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function EM(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,i=n.onTopArrive,s=n.onTopLeave,o=x.useRef(!1),a=x.useRef(!1),l=x.useRef(0),c=x.useRef(null),u=x.useCallback(function(v,b){if(c.current!==null){var y=c.current,S=y.scrollTop,w=y.scrollHeight,C=y.clientHeight,A=c.current,k=b>0,I=w-C-S,D=!1;I>b&&o.current&&(r&&r(v),o.current=!1),k&&a.current&&(s&&s(v),a.current=!1),k&&b>I?(t&&!o.current&&t(v),A.scrollTop=w,D=!0,o.current=!0):!k&&-b>S&&(i&&!a.current&&i(v),A.scrollTop=0,D=!0,a.current=!0),D&&IM(v)}},[t,r,i,s]),d=x.useCallback(function(v){u(v,v.deltaY)},[u]),h=x.useCallback(function(v){l.current=v.changedTouches[0].clientY},[]),p=x.useCallback(function(v){var b=l.current-v.changedTouches[0].clientY;u(v,b)},[u]),g=x.useCallback(function(v){if(v){var b=Yk?{passive:!1}:!1;v.addEventListener("wheel",d,b),v.addEventListener("touchstart",h,b),v.addEventListener("touchmove",p,b)}},[p,h,d]),m=x.useCallback(function(v){v&&(v.removeEventListener("wheel",d,!1),v.removeEventListener("touchstart",h,!1),v.removeEventListener("touchmove",p,!1))},[p,h,d]);return x.useEffect(function(){if(e){var v=c.current;return g(v),function(){m(v)}}},[e,g,m]),function(v){c.current=v}}var pp=["boxSizing","height","overflow","paddingRight","position"],mp={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function gp(n){n.cancelable&&n.preventDefault()}function vp(n){n.stopPropagation()}function bp(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function xp(){return"ontouchstart"in window||navigator.maxTouchPoints}var yp=!!(typeof window<"u"&&window.document&&window.document.createElement),us=0,si={capture:!1,passive:!1};function DM(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,i=x.useRef({}),s=x.useRef(null),o=x.useCallback(function(l){if(yp){var c=document.body,u=c&&c.style;if(r&&pp.forEach(function(g){var m=u&&u[g];i.current[g]=m}),r&&us<1){var d=parseInt(i.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,p=window.innerWidth-h+d||0;Object.keys(mp).forEach(function(g){var m=mp[g];u&&(u[g]=m)}),u&&(u.paddingRight="".concat(p,"px"))}c&&xp()&&(c.addEventListener("touchmove",gp,si),l&&(l.addEventListener("touchstart",bp,si),l.addEventListener("touchmove",vp,si))),us+=1}},[r]),a=x.useCallback(function(l){if(yp){var c=document.body,u=c&&c.style;us=Math.max(us-1,0),r&&us<1&&pp.forEach(function(d){var h=i.current[d];u&&(u[d]=h)}),c&&xp()&&(c.removeEventListener("touchmove",gp,si),l&&(l.removeEventListener("touchstart",bp,si),l.removeEventListener("touchmove",vp,si)))}},[r]);return x.useEffect(function(){if(e){var l=s.current;return o(l),function(){a(l)}}},[e,o,a]),function(l){s.current=l}}var RM=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},OM={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function TM(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,i=r===void 0?!0:r,s=n.onBottomArrive,o=n.onBottomLeave,a=n.onTopArrive,l=n.onTopLeave,c=EM({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:a,onTopLeave:l}),u=DM({isEnabled:t}),d=function(p){c(p),u(p)};return oe(x.Fragment,null,t&&oe("div",{onClick:RM,css:OM}),e(d))}var NM={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},PM=function(e){var t=e.name,r=e.onFocus;return oe("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:NM,value:"",onChange:function(){}})},LM=PM;function Qf(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function _M(){return Qf(/^iPhone/i)}function sx(){return Qf(/^Mac/i)}function jM(){return Qf(/^iPad/i)||sx()&&navigator.maxTouchPoints>1}function BM(){return _M()||jM()}function $M(){return sx()||BM()}var FM=function(e){return e.label},ox=function(e){return e.label},ax=function(e){return e.value},HM=function(e){return!!e.isDisabled},VM={clearIndicator:IA,container:gA,control:PA,dropdownIndicator:AA,group:BA,groupHeading:FA,indicatorsContainer:yA,indicatorSeparator:DA,input:zA,loadingIndicator:TA,loadingMessage:dA,menu:iA,menuList:lA,menuPortal:pA,multiValue:ZA,multiValueLabel:YA,multiValueRemove:JA,noOptionsMessage:uA,option:rM,placeholder:oM,singleValue:cM,valueContainer:bA},UM={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},zM=4,lx=4,WM=38,qM=lx*2,GM={baseUnit:lx,controlHeight:WM,menuGutter:qM},$u={borderRadius:zM,colors:UM,spacing:GM},KM={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:cp(),captureMenuScroll:!cp(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:kM(),formatGroupLabel:FM,getOptionLabel:ox,getOptionValue:ax,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:HM,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Kk(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function wp(n,e,t,r){var i=dx(n,e,t),s=fx(n,e,t),o=ux(n,e),a=cc(n,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:a,index:r}}function Ul(n,e){return n.options.map(function(t,r){if("options"in t){var i=t.options.map(function(o,a){return wp(n,o,e,a)}).filter(function(o){return Cp(n,o)});return i.length>0?{type:"group",data:t,options:i,index:r}:void 0}var s=wp(n,t,e,r);return Cp(n,s)?s:void 0}).filter(Jk)}function cx(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Ri(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function Sp(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Ri(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function ZM(n,e){return cx(Ul(n,e))}function Cp(n,e){var t=n.inputValue,r=t===void 0?"":t,i=e.data,s=e.isSelected,o=e.label,a=e.value;return(!px(n)||!s)&&hx(n,{label:o,value:a,data:i},r)}function YM(n,e){var t=n.focusedValue,r=n.selectValue,i=r.indexOf(t);if(i>-1){var s=e.indexOf(t);if(s>-1)return t;if(i<e.length)return e[i]}return null}function JM(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Fu=function(e,t){var r,i=(r=e.find(function(s){return s.data===t}))===null||r===void 0?void 0:r.id;return i||null},ux=function(e,t){return e.getOptionLabel(t)},cc=function(e,t){return e.getOptionValue(t)};function dx(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function fx(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=cc(n,e);return t.some(function(i){return cc(n,i)===r})}function hx(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var px=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},XM=1,io=(function(n){BC(t,n);var e=HC(t);function t(r){var i;if(_C(this,t),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,c){var u=i.props,d=u.onChange,h=u.name;c.name=h,i.ariaOnChange(l,c),d(l,c)},i.setValue=function(l,c,u){var d=i.props,h=d.closeMenuOnSelect,p=d.isMulti,g=d.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:g}),h&&(i.setState({inputIsHiddenAfterUpdate:!p}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:c,option:u})},i.selectOption=function(l){var c=i.props,u=c.blurInputOnSelect,d=c.isMulti,h=c.name,p=i.state.selectValue,g=d&&i.isOptionSelected(l,p),m=i.isOptionDisabled(l,p);if(g){var v=i.getOptionValue(l);i.setValue(p.filter(function(b){return i.getOptionValue(b)!==v}),"deselect-option",l)}else if(!m)d?i.setValue([].concat(Ri(p),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:h});return}u&&i.blurInput()},i.removeValue=function(l){var c=i.props.isMulti,u=i.state.selectValue,d=i.getOptionValue(l),h=u.filter(function(g){return i.getOptionValue(g)!==d}),p=vs(c,h,h[0]||null);i.onChange(p,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(vs(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,c=i.state.selectValue,u=c[c.length-1],d=c.slice(0,c.length-1),h=vs(l,d,d[0]||null);u&&i.onChange(h,{action:"pop-value",removedValue:u})},i.getFocusedOptionId=function(l){return Fu(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return Sp(Ul(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return Vk.apply(void 0,[i.props.classNamePrefix].concat(c))},i.getOptionLabel=function(l){return ux(i.props,l)},i.getOptionValue=function(l){return cc(i.props,l)},i.getStyles=function(l,c){var u=i.props.unstyled,d=VM[l](c,u);d.boxSizing="border-box";var h=i.props.styles[l];return h?h(d,c):d},i.getClassNames=function(l,c){var u,d;return(u=(d=i.props.classNames)[l])===null||u===void 0?void 0:u.call(d,c)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return fM(i.props)},i.buildCategorizedOptions=function(){return Ul(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return cx(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,c){i.setState({ariaSelection:te({value:l},c)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():c&&i.openMenu("first"):(c&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var c=i.props,u=c.isMulti,d=c.menuIsOpen;i.focusInput(),d?(i.setState({inputIsHiddenAfterUpdate:!u}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&Jc(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var c=l.touches,u=c&&c.item(0);u&&(i.initialTouchX=u.clientX,i.initialTouchY=u.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var c=l.touches,u=c&&c.item(0);if(u){var d=Math.abs(u.clientX-i.initialTouchX),h=Math.abs(u.clientY-i.initialTouchY),p=5;i.userIsDragging=d>p||h>p}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var c=i.props.inputValue,u=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(u,{action:"input-change",prevInputValue:c}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var c=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:c}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var c=i.getFocusableOptions(),u=c.indexOf(l);i.setState({focusedOption:l,focusedOptionId:u>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return px(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var c=i.props,u=c.isMulti,d=c.backspaceRemovesValue,h=c.escapeClearsValue,p=c.inputValue,g=c.isClearable,m=c.isDisabled,v=c.menuIsOpen,b=c.onKeyDown,y=c.tabSelectsValue,S=c.openMenuOnFocus,w=i.state,C=w.focusedOption,A=w.focusedValue,k=w.selectValue;if(!m&&!(typeof b=="function"&&(b(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!u||p)return;i.focusValue("previous");break;case"ArrowRight":if(!u||p)return;i.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(A)i.removeValue(A);else{if(!d)return;u?i.popValue():g&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!v||!y||!C||S&&i.isOptionSelected(C,k))return;i.selectOption(C);break;case"Enter":if(l.keyCode===229)break;if(v){if(!C||i.isComposing)return;i.selectOption(C);break}return;case"Escape":v?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:p}),i.onMenuClose()):g&&h&&i.clearValue();break;case" ":if(p)return;if(!v){i.openMenu("first");break}if(!C)return;i.selectOption(C);break;case"ArrowUp":v?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":v?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!v)return;i.focusOption("pageup");break;case"PageDown":if(!v)return;i.focusOption("pagedown");break;case"Home":if(!v)return;i.focusOption("first");break;case"End":if(!v)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++XM),i.state.selectValue=ac(r.value),r.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),a=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[a],i.state.focusedOptionId=Fu(s,o[a])}return i}return jC(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&lp(this.menuListRef,this.focusedOptionRef),$M()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,a=s.menuIsOpen,l=this.state.isFocused;(l&&!o&&i.isDisabled||l&&a&&!i.menuIsOpen)&&this.focusInput(),l&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(lp(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,a=o.selectValue,l=o.isFocused,c=this.buildFocusableOptions(),u=i==="first"?0:c.length-1;if(!this.props.isMulti){var d=c.indexOf(a[0]);d>-1&&(u=d)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[u],focusedOptionId:this.getFocusedOptionId(c[u])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(a);a||(l=-1);var c=o.length-1,u=-1;if(o.length){switch(i){case"previous":l===0?u=0:l===-1?u=c:u=l-1;break;case"next":l>-1&&l<c&&(u=l+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,c=a.indexOf(o);o||(c=-1),i==="up"?l=c>0?c-1:a.length-1:i==="down"?l=(c+1)%a.length:i==="pageup"?(l=c-s,l<0&&(l=0)):i==="pagedown"?(l=c+s,l>a.length-1&&(l=a.length-1)):i==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[l])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme($u):te(te({},$u),this.props.theme):$u})},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,a=this.getClassNames,l=this.getValue,c=this.selectOption,u=this.setValue,d=this.props,h=d.isMulti,p=d.isRtl,g=d.options,m=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:a,getValue:l,hasValue:m,isMulti:h,isRtl:p,options:g,selectOption:c,selectProps:d,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return dx(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return fx(this.props,i,s)}},{key:"filterOption",value:function(i,s){return hx(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:a})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,a=i.inputId,l=i.inputValue,c=i.tabIndex,u=i.form,d=i.menuIsOpen,h=i.required,p=this.getComponents(),g=p.Input,m=this.state,v=m.inputIsHidden,b=m.ariaSelection,y=this.commonProps,S=a||this.getElementId("input"),w=te(te(te({"aria-autocomplete":"list","aria-expanded":d,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},d&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?b?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?x.createElement(g,se({},y,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:S,innerRef:this.getInputRef,isDisabled:s,isHidden:v,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:u,type:"text",value:l},w)):x.createElement(MM,se({id:S,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:oc,onFocus:this.onInputFocus,disabled:s,tabIndex:c,inputMode:"none",form:u,value:""},w))})},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,a=s.MultiValueContainer,l=s.MultiValueLabel,c=s.MultiValueRemove,u=s.SingleValue,d=s.Placeholder,h=this.commonProps,p=this.props,g=p.controlShouldRenderValue,m=p.isDisabled,v=p.isMulti,b=p.inputValue,y=p.placeholder,S=this.state,w=S.selectValue,C=S.focusedValue,A=S.isFocused;if(!this.hasValue()||!g)return b?null:x.createElement(d,se({},h,{key:"placeholder",isDisabled:m,isFocused:A,innerProps:{id:this.getElementId("placeholder")}}),y);if(v)return w.map(function(I,D){var O=I===C,T="".concat(i.getOptionLabel(I),"-").concat(i.getOptionValue(I));return x.createElement(o,se({},h,{components:{Container:a,Label:l,Remove:c},isFocused:O,isDisabled:m,key:T,index:D,removeProps:{onClick:function(){return i.removeValue(I)},onTouchEnd:function(){return i.removeValue(I)},onMouseDown:function(L){L.preventDefault()}},data:I}),i.formatOptionLabel(I,"value"))});if(b)return null;var k=w[0];return x.createElement(u,se({},h,{data:k,isDisabled:m}),this.formatOptionLabel(k,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||c)return null;var d={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return x.createElement(s,se({},o,{innerProps:d,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!s||!c)return null;var d={"aria-hidden":"true"};return x.createElement(s,se({},o,{innerProps:d,isDisabled:l,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var a=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return x.createElement(o,se({},a,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return x.createElement(s,se({},o,{innerProps:c,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,a=s.GroupHeading,l=s.Menu,c=s.MenuList,u=s.MenuPortal,d=s.LoadingMessage,h=s.NoOptionsMessage,p=s.Option,g=this.commonProps,m=this.state.focusedOption,v=this.props,b=v.captureMenuScroll,y=v.inputValue,S=v.isLoading,w=v.loadingMessage,C=v.minMenuHeight,A=v.maxMenuHeight,k=v.menuIsOpen,I=v.menuPlacement,D=v.menuPosition,O=v.menuPortalTarget,T=v.menuShouldBlockScroll,N=v.menuShouldScrollIntoView,L=v.noOptionsMessage,P=v.onMenuScrollToTop,H=v.onMenuScrollToBottom;if(!k)return null;var q=function(fe,re){var ue=fe.type,Q=fe.data,ce=fe.isDisabled,Ae=fe.isSelected,Be=fe.label,he=fe.value,Je=m===Q,Me=ce?void 0:function(){return i.onOptionHover(Q)},Ie=ce?void 0:function(){return i.selectOption(Q)},_e="".concat(i.getElementId("option"),"-").concat(re),xt={id:_e,onClick:Ie,onMouseMove:Me,onMouseOver:Me,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:Ae};return x.createElement(p,se({},g,{innerProps:xt,data:Q,isDisabled:ce,isSelected:Ae,key:_e,label:Be,type:ue,value:he,isFocused:Je,innerRef:Je?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(fe.data,"menu"))},Z;if(this.hasOptions())Z=this.getCategorizedOptions().map(function(K){if(K.type==="group"){var fe=K.data,re=K.options,ue=K.index,Q="".concat(i.getElementId("group"),"-").concat(ue),ce="".concat(Q,"-heading");return x.createElement(o,se({},g,{key:Q,data:fe,options:re,Heading:a,headingProps:{id:ce,data:K.data},label:i.formatGroupLabel(K.data)}),K.options.map(function(Ae){return q(Ae,"".concat(ue,"-").concat(Ae.index))}))}else if(K.type==="option")return q(K,"".concat(K.index))});else if(S){var ae=w({inputValue:y});if(ae===null)return null;Z=x.createElement(d,g,ae)}else{var ee=L({inputValue:y});if(ee===null)return null;Z=x.createElement(h,g,ee)}var de={minMenuHeight:C,maxMenuHeight:A,menuPlacement:I,menuPosition:D,menuShouldScrollIntoView:N},ge=x.createElement(sA,se({},g,de),function(K){var fe=K.ref,re=K.placerProps,ue=re.placement,Q=re.maxHeight;return x.createElement(l,se({},g,de,{innerRef:fe,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:S,placement:ue}),x.createElement(TM,{captureEnabled:b,onTopArrive:P,onBottomArrive:H,lockEnabled:T},function(ce){return x.createElement(c,se({},g,{innerRef:function(Be){i.getMenuListRef(Be),ce(Be)},innerProps:{role:"listbox","aria-multiselectable":g.isMulti,id:i.getElementId("listbox")},isLoading:S,maxHeight:Q,focusedOption:m}),Z)}))});return O||D==="fixed"?x.createElement(u,se({},g,{appendTo:O,controlElement:this.controlRef,menuPlacement:I,menuPosition:D}),ge):ge}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,a=s.isDisabled,l=s.isMulti,c=s.name,u=s.required,d=this.state.selectValue;if(u&&!this.hasValue()&&!a)return x.createElement(LM,{name:c,onFocus:this.onValueInputFocus});if(!(!c||a))if(l)if(o){var h=d.map(function(m){return i.getOptionValue(m)}).join(o);return x.createElement("input",{name:c,type:"hidden",value:h})}else{var p=d.length>0?d.map(function(m,v){return x.createElement("input",{key:"i-".concat(v),name:c,type:"hidden",value:i.getOptionValue(m)})}):x.createElement("input",{name:c,type:"hidden",value:""});return x.createElement("div",null,p)}else{var g=d[0]?this.getOptionValue(d[0]):"";return x.createElement("input",{name:c,type:"hidden",value:g})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,a=s.focusedOption,l=s.focusedValue,c=s.isFocused,u=s.selectValue,d=this.getFocusableOptions();return x.createElement(yM,se({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:l,isFocused:c,selectValue:u,focusableOptions:d,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,a=i.SelectContainer,l=i.ValueContainer,c=this.props,u=c.className,d=c.id,h=c.isDisabled,p=c.menuIsOpen,g=this.state.isFocused,m=this.commonProps=this.getCommonProps();return x.createElement(a,se({},m,{className:u,innerProps:{id:d,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:g}),this.renderLiveRegion(),x.createElement(s,se({},m,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:g,menuIsOpen:p}),x.createElement(l,se({},m,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),x.createElement(o,se({},m,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,a=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,c=s.ariaSelection,u=s.isFocused,d=s.prevWasFocused,h=s.instancePrefix,p=i.options,g=i.value,m=i.menuIsOpen,v=i.inputValue,b=i.isMulti,y=ac(g),S={};if(o&&(g!==o.value||p!==o.options||m!==o.menuIsOpen||v!==o.inputValue)){var w=m?ZM(i,y):[],C=m?Sp(Ul(i,y),"".concat(h,"-option")):[],A=a?YM(s,y):null,k=JM(s,w),I=Fu(C,k);S={selectValue:y,focusedOption:k,focusedOptionId:I,focusableOptionsWithIds:C,focusedValue:A,clearFocusValueOnUpdate:!1}}var D=l!=null&&i!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},O=c,T=u&&d;return u&&!T&&(O={value:vs(b,y,y[0]||null),options:y,action:"initial-input-focus"},T=!d),c?.action==="initial-input-focus"&&(O=null),te(te(te({},S),D),{},{prevProps:i,ariaSelection:O,prevWasFocused:T})}}]),t})(x.Component);io.defaultProps=KM;var QM=x.forwardRef(function(n,e){var t=Gc(n);return x.createElement(io,se({ref:e},t))}),mx=QM,eI=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function gx(n){var e=n.defaultOptions,t=e===void 0?!1:e,r=n.cacheOptions,i=r===void 0?!1:r,s=n.loadOptions;n.options;var o=n.isLoading,a=o===void 0?!1:o,l=n.onInputChange,c=n.filterOption,u=c===void 0?null:c,d=An(n,eI),h=d.inputValue,p=x.useRef(void 0),g=x.useRef(!1),m=x.useState(Array.isArray(t)?t:void 0),v=pt(m,2),b=v[0],y=v[1],S=x.useState(typeof h<"u"?h:""),w=pt(S,2),C=w[0],A=w[1],k=x.useState(t===!0),I=pt(k,2),D=I[0],O=I[1],T=x.useState(void 0),N=pt(T,2),L=N[0],P=N[1],H=x.useState([]),q=pt(H,2),Z=q[0],ae=q[1],ee=x.useState(!1),de=pt(ee,2),ge=de[0],K=de[1],fe=x.useState({}),re=pt(fe,2),ue=re[0],Q=re[1],ce=x.useState(void 0),Ae=pt(ce,2),Be=Ae[0],he=Ae[1],Je=x.useState(void 0),Me=pt(Je,2),Ie=Me[0],_e=Me[1];i!==Ie&&(Q({}),_e(i)),t!==Be&&(y(Array.isArray(t)?t:void 0),he(t)),x.useEffect(function(){return g.current=!0,function(){g.current=!1}},[]);var xt=x.useCallback(function(M,E){if(!s)return E();var R=s(M,E);R&&typeof R.then=="function"&&R.then(E,function(){return E()})},[s]);x.useEffect(function(){t===!0&&xt(C,function(M){g.current&&(y(M||[]),O(!!p.current))})},[]);var Tt=x.useCallback(function(M,E){var R=Uk(M,E,l);if(!R){p.current=void 0,A(""),P(""),ae([]),O(!1),K(!1);return}if(i&&ue[R])A(R),P(R),ae(ue[R]),O(!1),K(!1);else{var F=p.current={};A(R),O(!0),K(!L),xt(R,function($){g&&F===p.current&&(p.current=void 0,O(!1),P(R),ae($||[]),K(!1),Q($?te(te({},ue),{},ki({},R,$)):ue))})}},[i,xt,L,ue,l]),sr=ge?[]:C&&L?Z:b||[];return te(te({},d),{},{options:sr,isLoading:D||a,onInputChange:Tt,filterOption:u})}var tI=x.forwardRef(function(n,e){var t=gx(n),r=Gc(t);return x.createElement(io,se({ref:e},r))}),vx=tI,nI=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],kp=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=String(e).toLowerCase(),s=String(r.getOptionValue(t)).toLowerCase(),o=String(r.getOptionLabel(t)).toLowerCase();return s===i||o===i},Hu={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,r,i){return!(!e||t.some(function(s){return kp(e,s,i)})||r.some(function(s){return kp(e,s,i)}))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};function bx(n){var e=n.allowCreateWhileLoading,t=e===void 0?!1:e,r=n.createOptionPosition,i=r===void 0?"last":r,s=n.formatCreateLabel,o=s===void 0?Hu.formatCreateLabel:s,a=n.isValidNewOption,l=a===void 0?Hu.isValidNewOption:a,c=n.getNewOptionData,u=c===void 0?Hu.getNewOptionData:c,d=n.onCreateOption,h=n.options,p=h===void 0?[]:h,g=n.onChange,m=An(n,nI),v=m.getOptionValue,b=v===void 0?ax:v,y=m.getOptionLabel,S=y===void 0?ox:y,w=m.inputValue,C=m.isLoading,A=m.isMulti,k=m.value,I=m.name,D=x.useMemo(function(){return l(w,ac(k),p,{getOptionValue:b,getOptionLabel:S})?u(w,o(w)):void 0},[o,u,S,b,w,l,p,k]),O=x.useMemo(function(){return(t||!C)&&D?i==="first"?[D].concat(Ri(p)):[].concat(Ri(p),[D]):p},[t,i,C,D,p]),T=x.useCallback(function(N,L){if(L.action!=="select-option")return g(N,L);var P=Array.isArray(N)?N:[N];if(P[P.length-1]===D){if(d)d(w);else{var H=u(w,w),q={action:"create-option",name:I,option:H};g(vs(A,[].concat(Ri(ac(k)),[H]),H),q)}return}g(N,L)},[u,w,A,I,D,d,g,k]);return te(te({},m),{},{options:O,onChange:T})}var rI=x.forwardRef(function(n,e){var t=gx(n),r=Gc(t),i=bx(r);return x.createElement(io,se({ref:e},i))}),iI=rI,sI=x.forwardRef(function(n,e){var t=Gc(n),r=bx(t);return x.createElement(io,se({ref:e},r))}),oI=sI;const aI=n=>{switch(n){case"black":return"bg-black text-white dark:bg-white dark:text-black";case"grey":return"bg-grey-300 text-black dark:bg-grey-500";case"green":return"bg-green-500 text-white";case"pink":return"bg-pink-500 text-white";default:return""}},lI=({clearBg:n,fieldStyle:e,...t})=>e==="text"?f.jsx(f.Fragment,{}):f.jsx(Ji.DropdownIndicator,{...t,children:f.jsx("div",{className:`absolute top-[14px] block h-2 w-2 rotate-45 border-[1px] border-l-0 border-t-0 border-grey-900 content-[''] dark:border-grey-400 ${n?"right-0":"right-4"} `})}),cI=({children:n,...e})=>f.jsx(Ji.Option,{...e,children:f.jsx("span",{"data-testid":"select-option",children:n})}),xx=({title:n="",clearBg:e=!1,error:t=!1,placeholder:r,color:i="grey",size:s="md",fieldStyle:o="dropdown",hint:a="",async:l,options:c,defaultOptions:u,loadOptions:d,values:h,onChange:p,canCreate:g=!1,testId:m,...v})=>{const b=x.useId(),y=_("w-full cursor-pointer appearance-none rounded-md border border-transparent transition-all dark:text-white",s==="sm"?"min-h-[36px] py-1 text-sm":"min-h-[40px] py-2",o==="dropdown"?"cursor-pointer":"cursor-text",!e&&"bg-grey-150 px-[10px] dark:bg-grey-900","outline-none",t?"border-red":"hover:bg-grey-100 dark:hover:bg-grey-925",n&&!e&&"mt-2"),S=_(s==="sm"?"text-sm":"","px-3 py-[6px] hover:cursor-pointer hover:bg-grey-100 dark:text-white dark:hover:bg-grey-900"),w={control:y,valueContainer:"gap-1",placeHolder:"text-grey-500 dark:text-grey-800",menu:"shadow py-2 rounded-b z-[10000] bg-white dark:bg-black dark:border dark:border-grey-900",option:S,multiValue:k=>`rounded-sm items-center text-[14px] py-px pl-2 pr-1 gap-1.5 ${aI(k||i)}`,noOptionsMessage:"p-3 text-grey-600",groupHeading:"py-[6px] px-3 text-2xs font-semibold uppercase tracking-wide text-grey-700"},C=x.useMemo(()=>k=>f.jsx(lI,{...k,clearBg:e,fieldStyle:o}),[e,o]),A={classNames:{menuList:()=>"z-50",valueContainer:()=>w.valueContainer,control:()=>w.control,placeholder:()=>w.placeHolder,menu:()=>w.menu,option:()=>w.option,multiValue:({data:k})=>w.multiValue(k.color),noOptionsMessage:()=>w.noOptionsMessage,groupHeading:()=>w.groupHeading},closeMenuOnSelect:!1,components:{DropdownIndicator:C,Option:cI},inputId:b,isClearable:!1,placeholder:r||"",value:h,isMulti:!0,unstyled:!0,onChange:p,...v};return f.jsxs("div",{className:"flex flex-col",children:[n&&f.jsx(ft,{htmlFor:b,grey:!0,useLabelTag:!0,children:n}),f.jsx("div",{"data-testid":m,children:l?g?f.jsx(iI,{...A,defaultOptions:u,loadOptions:d}):f.jsx(vx,{...A,defaultOptions:u,loadOptions:d}):g?f.jsx(oI,{...A,options:c}):f.jsx(mx,{...A,options:c})}),a&&f.jsx(qn,{color:t?"red":"",children:a})]})},uI=({clearBg:n,...e})=>f.jsx(Ji.DropdownIndicator,{...e,children:f.jsx("div",{className:`absolute top-1/2 mt-[-5px] block size-2 rotate-45 border-[1px] border-l-0 border-t-0 border-grey-900 content-[''] dark:border-grey-400 ${n?"right-2":"right-[14px]"} `})}),dI=n=>f.jsx(Ji.ClearIndicator,{...n,children:f.jsx(ve,{className:"mr-2",name:"close",size:"xs"})}),fI=({children:n,...e})=>f.jsxs(Ji.Option,{...e,children:[f.jsxs("span",{className:e.isSelected?"relative flex w-full items-center justify-between gap-2":"","data-testid":"select-option","data-value":e.data.value,children:[n,e.isSelected&&f.jsx("span",{children:f.jsx(ve,{name:"check",size:14})})]}),e.data.hint&&f.jsx("span",{className:"block text-xs text-grey-700 dark:text-grey-300",children:e.data.hint})]}),zr=({async:n,title:e,hideTitle:t,size:r="md",prompt:i,options:s,selectedOption:o,onSelect:a,error:l,hint:c,clearBg:u=!1,fullWidth:d=!0,isSearchable:h=!1,containerClassName:p,controlClasses:g,unstyled:m,disabled:v=!1,testId:b,...y})=>{const S=x.useId(),{setFocusState:w,isAnyTextFieldFocused:C}=Zi(),A=()=>{w(!0)},k=()=>{w(!1)};x.useEffect(()=>{if(C){const Z=ae=>{ae.key==="Escape"&&(document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),w(!1),ae.stopPropagation())};return document.addEventListener("keydown",Z),()=>{document.removeEventListener("keydown",Z)}}},[w,C]);let I="";m||(I=_("dark:text-white",d&&"w-full",v&&"cursor-not-allowed opacity-40")),I=_(I,p);const D={control:_(g?.control,"h-9 min-h-[36px] w-full appearance-none rounded-lg border outline-none md:h-[38px] md:min-h-[38px] dark:text-white",r==="xs"?"py-0 pr-2 text-xs":"py-1 pr-4",u?"":"bg-grey-150 px-3 dark:bg-grey-900",l?"border-red":`border-transparent ${!u&&"hover:bg-grey-100 dark:hover:bg-grey-925"}`,!v&&"cursor-pointer",e&&!u&&"mt-1.5"),valueContainer:_("mr-1.5 gap-1",g?.valueContainer),placeHolder:_("text-grey-700 dark:text-grey-800",g?.placeHolder),menu:_("z-[300] mt-0.5 overflow-hidden rounded-lg bg-white shadow-lg dark:border dark:border-grey-900 dark:bg-black",r==="xs"&&"text-xs",g?.menu),option:_("group px-3 py-[7px] hover:cursor-pointer hover:bg-grey-100 dark:text-white dark:hover:bg-grey-900",g?.option),noOptionsMessage:_("nowrap p-3 text-grey-600",g?.noOptionsMessage),groupHeading:_("px-3 py-[7px] text-2xs font-semibold uppercase tracking-wide text-grey-700",g?.groupHeading),clearIndicator:_("",g?.clearIndicator)},O=x.useMemo(()=>function(ae){return f.jsx(uI,{...ae,clearBg:u})},[u]),{components:T={},...N}=y,P={...{DropdownIndicator:O,Option:fI,ClearIndicator:dI},...T},H={classNames:{menuList:()=>"z-[300]",valueContainer:()=>D.valueContainer,control:()=>D.control,placeholder:()=>D.placeHolder,menu:()=>D.menu,option:Z=>Z.data.className?_(D.option,Z.data.className):D.option,noOptionsMessage:()=>D.noOptionsMessage,groupHeading:()=>D.groupHeading,clearIndicator:()=>D.clearIndicator},inputId:S,isClearable:!1,isSearchable:h,options:s,placeholder:i||"",value:o,isDisabled:v,unstyled:!0,onChange:a,onFocus:A,onBlur:k,menuPlacement:"auto"},q=f.jsxs(f.Fragment,{children:[e&&f.jsx(ft,{className:t?"sr-only":"",grey:!!(o||!i),htmlFor:S,useLabelTag:!0,children:e}),f.jsx("div",{className:I,"data-testid":b,children:n?f.jsx(vx,{...H,...y}):f.jsx(mx,{...H,...N,components:P})}),c&&f.jsx(qn,{color:l?"red":"",children:c})]});return m?q:e||c?f.jsx("div",{children:q}):q},yx=({inputRef:n,title:e,value:t,rows:r=3,maxLength:i,resize:s="none",error:o,placeholder:a,hint:l,fontStyle:c="sans",className:u,onChange:d,onFocus:h,onBlur:p,...g})=>{const m=x.useId(),{setFocusState:v}=Zi(),b=w=>{v(!0),h?.(w)},y=w=>{v(!1),p?.(w)};let S=_("order-2 rounded-lg border bg-grey-150 px-3 py-2 transition-all dark:bg-grey-900 dark:text-white",o?"border-red bg-white":"border-transparent placeholder:text-grey-500 hover:bg-grey-100 focus:border-green focus:bg-white focus:shadow-[0_0_0_2px_rgba(48,207,67,0.25)] dark:placeholder:text-grey-800 dark:hover:bg-grey-925 dark:focus:bg-grey-950",e&&"mt-1.5",c==="mono"&&"font-mono text-sm",u);switch(s){case"both":S+=" resize ";break;case"vertical":S+=" resize-y ";break;case"horizontal":S+=" resize-x ";break;case"none":S+=" resize-none ";break;default:S+=" resize ";break}return f.jsx(Id,{asChild:!0,children:f.jsxs("div",{className:"flex flex-col",children:[f.jsx(ab,{name:m,asChild:!0,children:f.jsx(lb,{asChild:!0,children:f.jsx("textarea",{ref:n,className:S,id:m,maxLength:i,placeholder:a,rows:r,value:t,onBlur:y,onChange:d,onFocus:b,...g})})}),e&&f.jsx(ft,{className:"order-1",htmlFor:m,useLabelTag:!0,children:e}),l&&f.jsx(qn,{className:"order-3",color:o?"red":"",children:l})]})})};var Xc="Switch",[hI]=ub(Xc),[pI,mI]=hI(Xc),wx=x.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=n,[h,p]=x.useState(null),g=Vc(e,S=>p(S)),m=x.useRef(!1),v=h?u||!!h.closest("form"):!0,[b,y]=cb({prop:i,defaultProp:s??!1,onChange:c,caller:Xc});return f.jsxs(pI,{scope:t,checked:b,disabled:a,children:[f.jsx($f.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":Ax(b),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:Br(n.onClick,S=>{y(w=>!w),v&&(m.current=S.isPropagationStopped(),m.current||S.stopPropagation())})}),v&&f.jsx(kx,{control:h,bubbles:!m.current,name:r,value:l,checked:b,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});wx.displayName=Xc;var Sx="SwitchThumb",Cx=x.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,i=mI(Sx,t);return f.jsx($f.span,{"data-state":Ax(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});Cx.displayName=Sx;var gI="SwitchBubbleInput",kx=x.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...i},s)=>{const o=x.useRef(null),a=Vc(o,s),l=c2(t),c=u2(e);return x.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==t&&p){const g=new Event("click",{bubbles:r});p.call(u,t),u.dispatchEvent(g)}},[l,t,r]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:a,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});kx.displayName=gI;function Ax(n){return n?"checked":"unchecked"}var vI=wx,bI=Cx;const Kt=({size:n,direction:e,label:t,labelStyle:r="value",containerClasses:i,labelClasses:s,toggleBg:o="black",hint:a,separator:l,error:c,checked:u,disabled:d,name:h,onChange:p,gap:g="gap-2",testId:m})=>{const v=x.useId();let b="",y="",S="";switch(n){case"sm":b=" h-3 w-5",y=" h-2 w-2 data-[state=checked]:translate-x-[10px]",S="mt-[-5.5px]";break;case"lg":b=" h-5 w-8",y=" h-4 w-4 data-[state=checked]:translate-x-[14px]",S="mt-[-1px]";break;default:b=" min-w-[28px] h-4 w-7",y=" h-3 w-3 data-[state=checked]:translate-x-[14px]",S="mt-[-3px]";break}S=_(s,S),r==="heading"&&(e="rtl");let w;switch(o){case"stripetest":w="data-[state=checked]:bg-[#EC6803] dark:data-[state=checked]:bg-[#EC6803]";break;case"green":w="data-[state=checked]:bg-green";break;default:w="data-[state=checked]:bg-black dark:data-[state=checked]:bg-green";break}const C=A=>{p&&p({target:{checked:A}})};return f.jsxs("div",{children:[f.jsxs("div",{className:`group flex items-start ${g} dark:text-white ${e==="rtl"&&"justify-between"} ${l&&"pb-2"} ${i}`,children:[f.jsx(vI,{className:_(w,"appearance-none rounded-full bg-grey-300 transition duration-100 dark:bg-grey-800","enabled:hover:cursor-pointer disabled:cursor-not-allowed disabled:opacity-40 enabled:group-hover:opacity-80",b,e==="rtl"&&" order-2"),"data-testid":m,defaultChecked:u,disabled:d,id:v,name:h,onCheckedChange:C,children:f.jsx(bI,{className:_(y,"block translate-x-0.5 rounded-full bg-white transition-transform duration-100 will-change-transform")})}),t&&f.jsxs("label",{className:`flex grow flex-col ${!d&&"hover:cursor-pointer"} ${e==="rtl"&&"order-1"} ${S}`,htmlFor:v,children:[r==="heading"?f.jsx("span",{className:`${bb} mt-1`,children:t}):f.jsx("span",{children:t}),a&&f.jsx("span",{className:`text-xs ${c?"text-red":"text-grey-700 dark:text-grey-600"}`,children:a})]})]}),(l||c)&&f.jsx(gt,{className:c?"border-red":""})]})};function _d(n){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(n)}function Qc(n){var e=typeof n=="string"||n instanceof String;if(!e){var t=_d(n);throw n===null?t="null":t==="object"&&(t=n.constructor.name),new TypeError("Expected a string but received a ".concat(t))}}function jd(n){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(n)}function Vu(n,e){Qc(n);var t,r;jd(e)==="object"?(t=e.min||0,r=e.max):(t=arguments[1],r=arguments[2]);var i=encodeURI(n).split(/%..|./).length-1;return i>=t&&(typeof r>"u"||i<=r)}function Mx(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;for(var t in e)typeof n[t]>"u"&&(n[t]=e[t]);return n}var xI={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function yI(n,e){Qc(n),e=Mx(e,xI),e.allow_trailing_dot&&n[n.length-1]==="."&&(n=n.substring(0,n.length-1)),e.allow_wildcard===!0&&n.indexOf("*.")===0&&(n=n.substring(2));var t=n.split("."),r=t[t.length-1];return e.require_tld&&(t.length<2||!e.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(r)||/\s/.test(r))||!e.allow_numeric_tld&&/^\d+$/.test(r)?!1:t.every(function(i){return!(i.length>63&&!e.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(i)||/[\uff01-\uff5e]/.test(i)||/^-|-$/.test(i)||!e.allow_underscores&&/_/.test(i))})}var Ap="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",ur="(".concat(Ap,"[.]){3}").concat(Ap),wI=new RegExp("^".concat(ur,"$")),et="(?:[0-9a-fA-F]{1,4})",SI=new RegExp("^("+"(?:".concat(et,":){7}(?:").concat(et,"|:)|")+"(?:".concat(et,":){6}(?:").concat(ur,"|:").concat(et,"|:)|")+"(?:".concat(et,":){5}(?::").concat(ur,"|(:").concat(et,"){1,2}|:)|")+"(?:".concat(et,":){4}(?:(:").concat(et,"){0,1}:").concat(ur,"|(:").concat(et,"){1,3}|:)|")+"(?:".concat(et,":){3}(?:(:").concat(et,"){0,2}:").concat(ur,"|(:").concat(et,"){1,4}|:)|")+"(?:".concat(et,":){2}(?:(:").concat(et,"){0,3}:").concat(ur,"|(:").concat(et,"){1,5}|:)|")+"(?:".concat(et,":){1}(?:(:").concat(et,"){0,4}:").concat(ur,"|(:").concat(et,"){1,6}|:)|")+"(?::((?::".concat(et,"){0,5}:").concat(ur,"|(?::").concat(et,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function uc(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return Qc(n),e=String(e),e?e==="4"?wI.test(n):e==="6"?SI.test(n):!1:uc(n,4)||uc(n,6)}var CI={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},kI=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,AI=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,MI=/^[a-z\d]+$/,II=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,EI=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,DI=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,RI=254;function OI(n){var e=n.replace(/^"(.+)"$/,"$1");if(!e.trim())return!1;var t=/[\.";<>]/.test(e);if(t){if(e===n)return!1;var r=e.split('"').length===e.split('\\"').length;if(!r)return!1}return!0}function TI(n,e){if(Qc(n),e=Mx(e,CI),e.require_display_name||e.allow_display_name){var t=n.match(kI);if(t){var r=t[1];if(n=n.replace(r,"").replace(/(^<|>$)/g,""),r.endsWith(" ")&&(r=r.slice(0,-1)),!OI(r))return!1}else if(e.require_display_name)return!1}if(!e.ignore_max_length&&n.length>RI)return!1;var i=n.split("@"),s=i.pop(),o=s.toLowerCase();if(e.host_blacklist.includes(o)||e.host_whitelist.length>0&&!e.host_whitelist.includes(o))return!1;var a=i.join("@");if(e.domain_specific_validation&&(o==="gmail.com"||o==="googlemail.com")){a=a.toLowerCase();var l=a.split("+")[0];if(!Vu(l.replace(/\./g,""),{min:6,max:30}))return!1;for(var c=l.split("."),u=0;u<c.length;u++)if(!MI.test(c[u]))return!1}if(e.ignore_max_length===!1&&(!Vu(a,{max:64})||!Vu(s,{max:254})))return!1;if(!yI(s,{require_tld:e.require_tld,ignore_max_length:e.ignore_max_length,allow_underscores:e.allow_underscores})){if(!e.allow_ip_domain)return!1;if(!uc(s)){if(!s.startsWith("[")||!s.endsWith("]"))return!1;var d=s.slice(1,-1);if(d.length===0||!uc(d))return!1}}if(a[0]==='"')return a=a.slice(1,a.length-1),e.allow_utf8_local_part?DI.test(a):II.test(a);for(var h=e.allow_utf8_local_part?EI:AI,p=a.split("."),g=0;g<p.length;g++)if(!h.test(p[g]))return!1;return!(e.blacklisted_chars&&a.search(new RegExp("[".concat(e.blacklisted_chars,"]+"),"g"))!==-1)}const Uu=(n,e,t)=>{if(t&&!n)return{save:null,display:""};let r=n.trim();if(!r)return e?{save:"/",display:e}:{save:"",display:""};if(TI(r))return{save:`mailto:${r}`,display:`mailto:${r}`};if(r.match(/^#/))return{save:r,display:r};if(r.match(/^(\/\/)/))return{save:r,display:r};if(e||r.startsWith("http")||(r=`https://${r}`),!r.match(/^[a-zA-Z0-9-]+:/)&&!r.match(/^(\/|\?)/))return{save:r,display:r};let o;try{o=new URL(r,e)}catch{return{save:r,display:r}}if(!e)return{save:o.toString(),display:o.toString()};const a=new URL(e);let l=o.pathname&&o.pathname.indexOf(a.pathname)===0;return`${o.pathname}/`===a.pathname&&(l=!0),o.host===a.host&&l&&(r=r.replace(/^[a-zA-Z0-9-]+:/,""),r=r.replace(/^\/\//,""),r=r.replace(a.host,""),r=r.replace(a.pathname,""),r.match(/^\//)||(r=`/${r}`)),!r.match(/\/$/)&&!r.match(/[.#?]/)&&(r=`${r}/`),{save:r,display:NI(r,e)}},NI=(n,e)=>(e.endsWith("/")||(e+="/"),n.startsWith("/")&&(n=n.substring(1)),new URL(n,e).toString()),PI=({baseUrl:n,value:e,transformPathWithoutSlash:t,nullable:r,onChange:i,...s})=>{const[o,a]=x.useState(""),{setFocusState:l}=Zi();x.useEffect(()=>{a(Uu(e||"",n,r).display)},[e,n,r]);const c=()=>{let h=Uu(o,n,r);if(t&&!h.display.includes("//")&&(o||!r)){const p=Uu("/"+o,n,r);p.display.includes("//")&&(h=p)}a(h.display),h.save!==e&&i(h.save),l(!1)},u=h=>{var p;o===n&&setTimeout(()=>h.target.setSelectionRange(h.target.value.length,h.target.value.length)),(p=s.onFocus)==null||p.call(s,h),l(!0)},d=h=>{var p;o===n&&["Backspace","Delete"].includes(h.key)&&a(""),(p=s.onKeyDown)==null||p.call(s,h)};return f.jsx(tt,{...s,value:o,onBlur:c,onChange:h=>a(h.target.value),onFocus:u,onKeyDown:d})};var[eu]=ub("Tooltip",[db]),tu=db(),Ix="TooltipProvider",LI=700,Bd="tooltip.open",[_I,eh]=eu(Ix),Ex=n=>{const{__scopeTooltip:e,delayDuration:t=LI,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,o=x.useRef(!0),a=x.useRef(!1),l=x.useRef(0);return x.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),f.jsx(_I,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:x.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:x.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};Ex.displayName=Ix;var Ls="Tooltip",[jI,nu]=eu(Ls),Dx=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=eh(Ls,n.__scopeTooltip),c=tu(e),[u,d]=x.useState(null),h=d2(),p=x.useRef(0),g=o??l.disableHoverableContent,m=a??l.delayDuration,v=x.useRef(!1),[b,y]=cb({prop:r,defaultProp:i??!1,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(Bd))):l.onClose(),s?.(k)},caller:Ls}),S=x.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),w=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,y(!0)},[y]),C=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y(!1)},[y]),A=x.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,y(!0),p.current=0},m)},[m,y]);return x.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),f.jsx(f2,{...c,children:f.jsx(jI,{scope:e,contentId:h,open:b,stateAttribute:S,trigger:u,onTriggerChange:d,onTriggerEnter:x.useCallback(()=>{l.isOpenDelayedRef.current?A():w()},[l.isOpenDelayedRef,A,w]),onTriggerLeave:x.useCallback(()=>{g?C():(window.clearTimeout(p.current),p.current=0)},[C,g]),onOpen:w,onClose:C,disableHoverableContent:g,children:t})})};Dx.displayName=Ls;var $d="TooltipTrigger",Rx=x.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=nu($d,t),s=eh($d,t),o=tu(t),a=x.useRef(null),l=Vc(e,a,i.onTriggerChange),c=x.useRef(!1),u=x.useRef(!1),d=x.useCallback(()=>c.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),f.jsx(h2,{asChild:!0,...o,children:f.jsx($f.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Br(n.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Br(n.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Br(n.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Br(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:Br(n.onBlur,i.onClose),onClick:Br(n.onClick,i.onClose)})})});Rx.displayName=$d;var BI="TooltipPortal",[cB,$I]=eu(BI,{forceMount:void 0}),Hi="TooltipContent",Ox=x.forwardRef((n,e)=>{const t=$I(Hi,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=nu(Hi,n.__scopeTooltip);return f.jsx(p2,{present:r||o.open,children:o.disableHoverableContent?f.jsx(Tx,{side:i,...s,ref:e}):f.jsx(FI,{side:i,...s,ref:e})})}),FI=x.forwardRef((n,e)=>{const t=nu(Hi,n.__scopeTooltip),r=eh(Hi,n.__scopeTooltip),i=x.useRef(null),s=Vc(e,i),[o,a]=x.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:d}=r,h=x.useCallback(()=>{a(null),d(!1)},[d]),p=x.useCallback((g,m)=>{const v=g.currentTarget,b={x:g.clientX,y:g.clientY},y=WI(b,v.getBoundingClientRect()),S=qI(b,y),w=GI(m.getBoundingClientRect()),C=ZI([...S,...w]);a(C),d(!0)},[d]);return x.useEffect(()=>()=>h(),[h]),x.useEffect(()=>{if(l&&u){const g=v=>p(v,u),m=v=>p(v,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",m)}}},[l,u,p,h]),x.useEffect(()=>{if(o){const g=m=>{const v=m.target,b={x:m.clientX,y:m.clientY},y=l?.contains(v)||u?.contains(v),S=!KI(b,o);y?h():S&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,o,c,h]),f.jsx(Tx,{...n,ref:s})}),[HI,VI]=eu(Ls,{isInside:!1}),UI=v2("TooltipContent"),Tx=x.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=nu(Hi,t),c=tu(t),{onClose:u}=l;return x.useEffect(()=>(document.addEventListener(Bd,u),()=>document.removeEventListener(Bd,u)),[u]),x.useEffect(()=>{if(l.trigger){const d=h=>{h.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),f.jsx(m2,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:f.jsxs(g2,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(UI,{children:r}),f.jsx(HI,{scope:t,isInside:!0,children:f.jsx(b2,{id:l.contentId,role:"tooltip",children:i||r})})]})})});Ox.displayName=Hi;var Nx="TooltipArrow",zI=x.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=tu(t);return VI(Nx,t).isInside?null:f.jsx(x2,{...i,...r,ref:e})});zI.displayName=Nx;function WI(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function qI(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function GI(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function KI(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,h=l.y;u>r!=h>r&&t<(d-c)*(r-u)/(h-u)+c&&(i=!i)}return i}function ZI(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),YI(e)}function YI(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var JI=Ex,XI=Dx,QI=Rx,eE=Ox;const th=({content:n,size:e="sm",children:t,containerClassName:r,tooltipClassName:i,origin:s="center"})=>(r=_("will-change-[opacity]",r),i=_("z-[9999] select-none rounded-sm bg-black px-2 py-0.5 leading-normal text-white will-change-[transform,opacity]",e==="sm"&&"text-xs",e==="md"&&"text-sm"),f.jsx(JI,{delayDuration:0,children:f.jsxs(XI,{children:[f.jsx(QI,{className:r,onClick:o=>o.preventDefault(),children:t}),f.jsx(eE,{align:s,className:i,sideOffset:4,onPointerDownOutside:o=>o.preventDefault(),children:n})]})})),_s=({size:n="md",buttons:e,link:t,linkWithPadding:r,clearBg:i=!0,outlineOnMobile:s,className:o,activeKey:a})=>{let l=_("flex items-center justify-start rounded",t?"gap-4":"gap-2",!t&&!i&&"!gap-0 rounded-lg bg-grey-100 dark:bg-grey-900",o);return t&&!i&&(l=_("transition-all hover:bg-grey-200 dark:hover:bg-grey-900",n==="sm"?"h-7 px-3":"h-[34px] px-4",s&&"border border-grey-300 hover:border-transparent md:border-transparent",l)),f.jsx("div",{className:l,children:e.map(({key:c,...u})=>{const d={...u};return!t&&!i&&(d.className=_(u.className,"w-8 rounded-lg border !px-0"),c===a?(d.color="white",d.className=_(d.className,"border-grey-300 shadow-xs dark:border-grey-800")):d.className=_(d.className,"border-transparent")),u.tooltip?f.jsx(th,{content:u.tooltip,children:f.jsx(ne,{link:t,linkWithPadding:r,size:n,...d},`btn-${c}`)},c):f.jsx(ne,{link:t,linkWithPadding:r,size:n,...d},c)})})},tE=({shiftY:n,footerBgColorClass:e="bg-white dark:bg-black",contentBgColorClass:t="bg-white dark:bg-black",height:r=96,children:i})=>{const s=_("w-100 sticky bottom-[-24px] z-[297] m-0 box-border p-0"),o=n?`calc(${n} - 24px)`:"-24px",a=`${r+24}px`,l=_("sticky z-[298] block h-[24px]",t),c="0",u=_("sticky z-[299] mb-[-24px] flex items-center justify-between","h-[96px]",e),d="0",h=`${r}px`,p="sticky mx-2 block h-[24px] rounded-full shadow-[0_0_0_1px_rgba(0,0,0,.025),0_-8px_16px_-3px_rgba(0,0,0,.08)]",g=n?`calc(${n} + ${r-24}px)`:`${r-24}px`;return f.jsxs("div",{className:s,style:{bottom:o,height:a},children:[f.jsx("div",{className:l,style:{bottom:c}}),f.jsx("div",{className:u,style:{bottom:d,height:h},children:i}),f.jsx("div",{className:p,style:{bottom:g}})]})};function js(n,e,t={}){n?Ye.show(Gr,{title:"Are you sure you want to leave this page?",prompt:f.jsxs(f.Fragment,{children:[f.jsx("p",{children:"Hey there! It looks like you didn't save the changes you made."}),f.jsx("p",{children:"Save before you go!"})]}),okLabel:"Leave",cancelLabel:"Stay",okColor:"red",onOk:r=>{e(),r?.remove()},...t}):e()}const Px="bg-[rgba(98,109,121,0.2)] backdrop-blur-[3px]",Rr=x.forwardRef(({size:n="md",align:e="center",width:t,height:r,testId:i,title:s,okLabel:o="OK",okLoading:a=!1,cancelLabel:l="Cancel",footer:c,header:u,leftButtonProps:d,buttonsDisabled:h,okDisabled:p,padding:g=!0,onOk:m,okColor:v="black",onCancel:b,topRightContent:y,hideXOnMobile:S=!1,afterClose:w,children:C,backDrop:A=!0,backDropClick:k=!0,stickyFooter:I=!1,stickyHeader:D=!1,scrolling:O=!0,dirty:T=!1,animate:N=!0,formSheet:L=!1,enableCMDS:P=!0,allowBackgroundInteraction:H=!1},q)=>{const Z=rr(),{setGlobalDirtyState:ae}=qc(),[ee,de]=x.useState(!1);x.useEffect(()=>{ae(T)},[T,ae]),x.useEffect(()=>{const Me=Ie=>{Ie.key==="Escape"&&(document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),setTimeout(()=>{b?b():js(T,()=>{Z.remove(),w?.()})}),Ie.stopPropagation())};return document.addEventListener("keydown",Me),()=>{document.removeEventListener("keydown",Me)}},[Z,T,w,b]),x.useEffect(()=>{const Me=setTimeout(()=>{de(!0)},250);return()=>clearTimeout(Me)},[]),x.useEffect(()=>{if(m){const Me=Ie=>{(Ie.metaKey||Ie.ctrlKey)&&Ie.key==="s"&&(Ie.preventDefault(),m())};if(P)return window.addEventListener("keydown",Me),()=>{window.removeEventListener("keydown",Me)}}});const ge=[];let K;const fe=()=>{js(T,()=>{Z.remove(),w?.()})};c||(l&&ge.push({key:"cancel-modal",label:l,color:"outline",onClick:b||(()=>{fe()}),disabled:h}),o&&ge.push({key:"ok-modal",label:o,color:v,className:"min-w-[80px]",onClick:m,disabled:h||p,loading:a}));let re=_("relative z-50 flex max-h-[100%] w-full flex-col justify-between overflow-x-hidden bg-white dark:bg-black",e==="center"&&"mx-auto",e==="left"&&"mr-auto",e==="right"&&"ml-auto",n!=="bleed"&&"rounded",L?"shadow-md":"shadow-xl",N&&!L&&!ee&&e==="center"&&"animate-modal-in",N&&!L&&!ee&&e==="right"&&"animate-modal-in-from-right",L&&!ee&&"animate-modal-in-reverse",O?"overflow-y-auto":"overflow-y-hidden"),ue=_("fixed inset-0 z-[1000] h-[100dvh] w-[100dvw]",H&&"pointer-events-none"),Q="",ce=_(!y||y==="close"?"":"flex items-center justify-between gap-5");switch(D&&(ce=_(ce,"sticky top-0 z-[300] -mb-4 bg-white !pb-4 dark:bg-black")),n){case"sm":re=_(re,"max-w-[480px]"),ue=_(ue,"p-4 md:p-[8vmin]"),Q="p-8",ce=_(ce,"-inset-x-8");break;case"md":re=_(re,"max-w-[720px]"),ue=_(ue,"p-4 md:p-[8vmin]"),Q="p-8",ce=_(ce,"-inset-x-8");break;case"lg":re=_(re,"max-w-[1020px]"),ue=_(ue,"p-4 md:p-[4vmin]"),Q="p-7",ce=_(ce,"-inset-x-8");break;case"xl":re=_(re,"max-w-[1240px]0"),ue=_(ue,"p-4 md:p-[3vmin]"),Q="p-10",ce=_(ce,"-inset-x-10 -top-10");break;case"full":re=_(re,"h-full"),ue=_(ue,"p-4 md:p-[3vmin]"),Q="p-10",ce=_(ce,"-inset-x-10");break;case"bleed":re=_(re,"h-full"),Q="p-10",ce=_(ce,"-inset-x-10");break;default:ue=_(ue,"p-4 md:p-[8vmin]"),Q="p-8",ce=_(ce,"-inset-x-8");break}g||(Q="p-0"),re=_(re),ce=_(ce,Q,"pb-0"),K=_(Q,"py-0"),ue=_(ue,"max-[800px]:!pb-20");const Ae=_(`${Q} ${I?"py-6":""}`,"flex w-full items-center justify-between");K=_(K,(n==="full"||n==="bleed"||r==="full"||typeof r=="number")&&"grow");const Be=Me=>{Me.target===Me.currentTarget&&k&&fe()},he={};typeof t=="number"?(he.width="100%",he.maxWidth=t+"px"):t==="full"?re=_(re,"w-full"):t==="toSidebar"&&(re=_(re,"w-full max-w-[calc(100dvw_-_280px)] lg:max-w-full min-[1280px]:max-w-[calc(100dvw_-_320px)]")),typeof r=="number"?(he.height="100%",he.maxHeight=r+"px"):r==="full"&&(re=_(re,"h-full"));let Je;return c?Je=c:c===!1?K+=" pb-0 ":Je=f.jsxs("div",{className:Ae,children:[f.jsx("div",{children:d&&f.jsx(ne,{...d})}),f.jsx("div",{className:"flex gap-3",children:f.jsx(_s,{buttons:ge})})]}),Je=I?f.jsx(tE,{height:84,children:Je}):f.jsx(f.Fragment,{children:Je}),f.jsxs("div",{className:ue,id:"modal-backdrop",onMouseDown:Be,children:[f.jsx("div",{className:_("pointer-events-none fixed inset-0 z-0",A&&!L&&Px,L&&"bg-[rgba(98,109,121,0.08)]")}),f.jsxs("section",{ref:q,className:_(re,H&&"pointer-events-auto"),"data-testid":i,style:he,children:[u===!1?"":!y||y==="close"?f.jsxs("header",{className:ce,children:[s&&f.jsx(ft,{level:3,children:s}),f.jsx("div",{className:`${y!=="close"&&"md:!invisible md:!hidden"} ${S&&"hidden"} absolute right-6 top-6`,children:f.jsx(ne,{className:"-m-2 cursor-pointer p-2 opacity-50 hover:opacity-100",icon:"close",iconColorClass:"text-black dark:text-white",size:"sm",testId:"close-modal",unstyled:!0,onClick:fe})})]}):f.jsxs("header",{className:ce,children:[s&&f.jsx(ft,{level:3,children:s}),y]}),f.jsx("div",{className:K,children:C}),Je]})]})});Rr.displayName="Modal";const nE=({title:n="Are you sure?",prompt:e,cancelLabel:t="Cancel",okLabel:r="OK",okRunningLabel:i="...",okColor:s="black",onCancel:o,onOk:a,customFooter:l,formSheet:c=!0})=>{const u=rr(),[d,h]=x.useState("");return f.jsx(Rr,{backDropClick:!1,buttonsDisabled:d==="running",cancelLabel:t,footer:l,formSheet:c,okColor:s,okLabel:d==="running"?i:r,testId:"confirmation-modal",title:n,width:540,onCancel:o,onOk:async()=>{h("running");try{await a?.(u)}catch(p){console.error("Unhandled Promise Rejection. Make sure you catch errors in your onOk handler.",p)}h("")},children:f.jsx("div",{className:"py-4 leading-9",children:e})})},Gr=Ye.create(nE),rE=({title:n="Upgrade your plan",prompt:e,okLabel:t="Upgrade",formSheet:r=!1,onOk:i})=>f.jsx(Rr,{backDropClick:!1,formSheet:r,okColor:"green",okLabel:t,testId:"limit-modal",title:n,width:540,onOk:i,children:f.jsx("div",{className:"py-4 leading-9",children:typeof e=="string"&&e.includes("<")?f.jsx("div",{dangerouslySetInnerHTML:{__html:e}}):e})}),Lx=Ye.create(rE),iE=({id:n,title:e,onClick:t,border:r,icon:i,counter:s})=>f.jsxs(Y2,{className:_("-m-b-px cursor-pointer appearance-none whitespace-nowrap py-1 text-md font-semibold text-grey-700 transition-all after:invisible after:block after:h-px after:overflow-hidden after:font-bold after:text-transparent after:content-[attr(title)] data-[state=active]:text-black dark:text-white [&>span]:data-[state=active]:text-black [&>span]:data-[state=active]:dark:text-white",r&&"border-b-2 border-transparent hover:border-grey-500 data-[state=active]:border-black data-[state=active]:dark:border-white data-[state=active]:dark:text-white"),id:n,role:"tab",title:e,value:n,onClick:t,children:[i&&f.jsx(ve,{className:"mb-0.5 mr-1.5 inline",name:i,size:"sm"}),e,typeof s=="number"&&f.jsx("span",{className:"ml-1.5 rounded-full bg-grey-200 px-1.5 py-[2px] text-xs font-medium text-grey-800 dark:bg-grey-900 dark:text-grey-300",children:new Intl.NumberFormat().format(s)})]}),sE=({tabs:n,width:e="normal",handleTabChange:t,border:r,buttonBorder:i,topRightContent:s,stickyHeader:o})=>{const a=_("no-scrollbar mb-px flex w-full overflow-x-auto",e==="narrow"&&"gap-3",e==="normal"&&"gap-5",e==="wide"&&"gap-7",r&&"border-b border-grey-300 dark:border-grey-900");return f.jsx(Z2,{className:`${o?"sticky top-0 z-50 bg-white dark:bg-black":""}`,children:f.jsxs("div",{className:a,role:"tablist",children:[n.map(l=>f.jsx("div",{children:f.jsx(iE,{border:i,counter:l.counter,icon:l.icon,id:l.id,title:l.title,onClick:t})})),s!==null?f.jsx("div",{className:"ml-auto",children:s}):null]})})};function Gn({testId:n,tabs:e,onTabChange:t,selectedTab:r,border:i=!0,buttonBorder:s=i,width:o="normal",containerClassName:a,topRightContent:l,stickyHeader:c}){if(e.length!==0&&r===void 0&&(r=e[0].id),e.length===0)return f.jsx(f.Fragment,{});const u=d=>{const h=d.currentTarget.id;t(h)};return f.jsxs(G2,{className:a,"data-testid":n,value:r,children:[f.jsx(sE,{border:i,buttonBorder:s,handleTabChange:u,selectedTab:r,stickyHeader:c,tabs:e,topRightContent:l,width:o}),e.map(d=>f.jsx(K2,{className:d.tabWrapperClassName,value:d.id,children:f.jsx("div",{className:d.containerClassName,children:d.contents})}))]})}const nh=({image:n,label:e,labelColor:t,bgColor:r,size:i,className:s})=>{let o="",a=" -mb-2 ";switch(i){case"sm":o=" w-7 h-7 text-sm ";break;case"lg":o=" w-12 h-12 text-xl ";break;case"xl":o=" w-16 h-16 text-2xl ",a=" -mb-3 ";break;case"2xl":o=" w-20 h-20 text-2xl ",a=" -mb-3 ";break;default:o=" w-10 h-10 text-md ";break}return f.jsxs(y2,{className:`relative inline-flex select-none items-center justify-center overflow-hidden rounded-full align-middle ${o}`,children:[n?f.jsx(w2,{className:`absolute z-20 h-full w-full object-cover ${s&&s}`,src:n}):f.jsx("span",{className:`${t&&`text-${t}`} relative z-10 inline-flex h-full w-full items-center justify-center p-2 font-semibold ${s&&s}`,style:r?{backgroundColor:r}:{},children:e}),f.jsx(S2,{asChild:!0,children:f.jsx(C2,{className:`${a} absolute z-0 h-full w-full text-grey-300`})})]})},oE=({icon:n,iconColorClass:e,children:t})=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ve,{colorClass:e,name:n,size:"sm"}),t]}),dc=({href:n,color:e,className:t,children:r,...i})=>{e||(e="green");let s=e==="black"?"transition text-black hover:text-black-700":`text-${e} hover:text-${e}-400`;return t&&(s=`${s} ${t}`),f.jsx("a",{className:s,href:n,...i,children:r})},aE=({title:n,titleSize:e="sm",actions:t,titleSeparator:r})=>{let i;if(n){const s=e==="sm"?f.jsx(ft,{grey:!0,level:6,children:n}):f.jsx(ft,{level:5,children:n});i=t?f.jsxs("div",{className:"flex items-end justify-between gap-2",children:[s,t]}):s}return i||r?f.jsxs("div",{className:"flex flex-col items-stretch gap-1",children:[i,r&&f.jsx(gt,{})]}):f.jsx(f.Fragment,{})},Xi=({title:n,titleSeparator:e=!0,titleSize:t="sm",children:r,actions:i,hint:s,hintSeparator:o=!0,borderTop:a,pageTitle:l,className:c})=>{const u=_((a||l)&&"border-t border-grey-300",l&&"mt-5",c);return f.jsxs(f.Fragment,{children:[l&&f.jsx(ft,{children:l}),f.jsxs("section",{className:u,children:[n&&f.jsx(aE,{actions:i,title:n,titleSeparator:!l&&e&&!a,titleSize:t}),f.jsx("div",{className:"flex flex-col",children:r}),s&&f.jsxs("div",{className:"-mt-px",children:[o&&f.jsx(gt,{}),f.jsx(qn,{children:s})]})]})]})},ru=({id:n,title:e,detail:t,action:r,hideActions:i,avatar:s,className:o,testId:a,separator:l=!0,bgOnHover:c=!0,paddingRight:u=!0,onClick:d,children:h})=>{const p=m=>{d?.(m)},g=_("group/list-item relative flex items-center justify-between",c&&"hover:bg-grey-50 dark:hover:bg-grey-950",l?"border-b border-grey-100 last-of-type:border-b-transparent dark:border-grey-900":"border-y border-transparent",d&&'cursor-pointer before:absolute before:inset-0 before:content-[""]',"hover:z-10 hover:border-b-transparent","-mb-px pb-px",o);return f.jsxs("div",{className:g,"data-testid":a,onClick:p,children:[c&&f.jsx("div",{className:"absolute inset-0 -z-10 -mx-4 rounded-lg bg-grey-50 opacity-0 group-hover/list-item:opacity-100 dark:bg-grey-950"}),f.jsxs("div",{className:"relative flex w-full items-center justify-between",children:[h||f.jsxs("div",{className:"flex grow items-center gap-3",children:[s&&s,f.jsxs("div",{className:"flex grow flex-col py-3 pr-6",id:n,children:[f.jsx("span",{children:e}),t&&f.jsx("span",{className:"text-xs text-grey-700",children:t})]})]}),r&&f.jsx("div",{className:`visible py-3 md:pl-2 ${u&&"md:pr-2"} ${i?"group-hover/list-item:visible md:invisible":""}`,children:r})]})]})},lE=({trigger:n,children:e,position:t="start",side:r="bottom",closeOnItemClick:i,open:s,setOpen:o})=>{const[a,l]=x.useState(!1),c=s!==void 0?s:a,u=o||l,d=()=>{i&&u(!1)};return f.jsxs(k2,{open:c,onOpenChange:u,children:[f.jsx(A2,{asChild:!0,children:f.jsx(M2,{asChild:!0,onClick:h=>h.stopPropagation(),children:n})}),f.jsx(I2,{align:t,className:"z-[9999] mt-2 origin-top-right rounded bg-white shadow-md ring-1 ring-[rgba(0,0,0,0.01)] focus:outline-none dark:bg-grey-900 dark:text-white","data-testid":"popover-content",side:r,sideOffset:8,onClick:d,children:e})]})},ei=({icon:n,children:e})=>f.jsxs("div",{className:"my-10 flex flex-col items-center gap-1 text-sm text-grey-600",children:[n&&f.jsx(ve,{className:"stroke-[1px]",colorClass:"text-grey-500",name:n,size:"lg"}),e]}),cE=({page:n,limit:e,total:t,prevPage:r,nextPage:i})=>{const s=(n-1)*e+1,o=t?Math.min(t,s+e-1):s+e-1,a=t?o<t:!1,l=n>1;return t&&e<t?f.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-grey-700",children:["Showing ",s,"-",o," of ",t,f.jsx("button",{type:"button",onClick:r,children:f.jsx(ve,{className:`size-[10px] [&>path]:stroke-[3px] ${l?"hover:text-green-700 cursor-pointer":"cursor-default opacity-50"}`,colorClass:"text-green",name:"chevron-left"})}),f.jsx("button",{type:"button",onClick:i,children:f.jsx(ve,{className:`size-[10px] [&>path]:stroke-[3px] ${a?"hover:text-green-700 cursor-pointer":"cursor-default opacity-50"}`,colorClass:"text-green",name:"chevron-right"})})]}):f.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-grey-700",children:["Showing ",t??"?"," in total"]})};function uE(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return x.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const iu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qi(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function rh(n){return"nodeType"in n}function Ft(n){var e,t;return n?Qi(n)?n:rh(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function ih(n){const{Document:e}=Ft(n);return n instanceof e}function so(n){return Qi(n)?!1:n instanceof Ft(n).HTMLElement}function _x(n){return n instanceof Ft(n).SVGElement}function es(n){return n?Qi(n)?n.document:rh(n)?ih(n)?n:so(n)||_x(n)?n.ownerDocument:document:document:document}const Cn=iu?x.useLayoutEffect:x.useEffect;function su(n){const e=x.useRef(n);return Cn(()=>{e.current=n}),x.useCallback(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function dE(){const n=x.useRef(null),e=x.useCallback((r,i)=>{n.current=setInterval(r,i)},[]),t=x.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function Bs(n,e){e===void 0&&(e=[n]);const t=x.useRef(n);return Cn(()=>{t.current!==n&&(t.current=n)},e),t}function oo(n,e){const t=x.useRef();return x.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function fc(n){const e=su(n),t=x.useRef(null),r=x.useCallback(i=>{i!==t.current&&e?.(i,t.current),t.current=i},[]);return[t,r]}function hc(n){const e=x.useRef();return x.useEffect(()=>{e.current=n},[n]),e.current}let zu={};function ao(n,e){return x.useMemo(()=>{if(e)return e;const t=zu[n]==null?0:zu[n]+1;return zu[n]=t,n+"-"+t},[n,e])}function jx(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,c]of a){const u=s[l];u!=null&&(s[l]=u+n*c)}return s},{...e})}}const Ti=jx(1),pc=jx(-1);function fE(n){return"clientX"in n&&"clientY"in n}function ou(n){if(!n)return!1;const{KeyboardEvent:e}=Ft(n.target);return e&&n instanceof e}function hE(n){if(!n)return!1;const{TouchEvent:e}=Ft(n.target);return e&&n instanceof e}function mc(n){if(hE(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return fE(n)?{x:n.clientX,y:n.clientY}:null}const Sr=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Sr.Translate.toString(n),Sr.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),Mp="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pE(n){return n.matches(Mp)?n:n.querySelector(Mp)}const mE={display:"none"};function gE(n){let{id:e,value:t}=n;return X.createElement("div",{id:e,style:mE},t)}function vE(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return X.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},t)}function bE(){const[n,e]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const Bx=x.createContext(null);function xE(n){const e=x.useContext(Bx);x.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function yE(){const[n]=x.useState(()=>new Set),e=x.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[x.useCallback(r=>{let{type:i,event:s}=r;n.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[n]),e]}const wE={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},SE={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function CE(n){let{announcements:e=SE,container:t,hiddenTextDescribedById:r,screenReaderInstructions:i=wE}=n;const{announce:s,announcement:o}=bE(),a=ao("DndLiveRegion"),[l,c]=x.useState(!1);if(x.useEffect(()=>{c(!0)},[]),xE(x.useMemo(()=>({onDragStart(d){let{active:h}=d;s(e.onDragStart({active:h}))},onDragMove(d){let{active:h,over:p}=d;e.onDragMove&&s(e.onDragMove({active:h,over:p}))},onDragOver(d){let{active:h,over:p}=d;s(e.onDragOver({active:h,over:p}))},onDragEnd(d){let{active:h,over:p}=d;s(e.onDragEnd({active:h,over:p}))},onDragCancel(d){let{active:h,over:p}=d;s(e.onDragCancel({active:h,over:p}))}}),[s,e])),!l)return null;const u=X.createElement(X.Fragment,null,X.createElement(gE,{id:r,value:i.draggable}),X.createElement(vE,{id:a,announcement:o}));return t?Hr.createPortal(u,t):u}var lt;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(lt||(lt={}));function gc(){}const kn=Object.freeze({x:0,y:0});function kE(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function AE(n,e){const t=mc(n);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function ME(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return t-r}function IE(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function EE(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function Ip(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const DE=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const i=Ip(e,e.left,e.top),s=[];for(const o of r){const{id:a}=o,l=t.get(a);if(l){const c=kE(Ip(l),i);s.push({id:a,data:{droppableContainer:o,value:c}})}}return s.sort(ME)};function RE(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),i=Math.min(e.left+e.width,n.left+n.width),s=Math.min(e.top+e.height,n.top+n.height),o=i-r,a=s-t;if(r<i&&t<s){const l=e.width*e.height,c=n.width*n.height,u=o*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const OE=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const i=[];for(const s of r){const{id:o}=s,a=t.get(o);if(a){const l=RE(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(IE)};function TE(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function $x(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:kn}function NE(n){return function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+n*a.y,bottom:o.bottom+n*a.y,left:o.left+n*a.x,right:o.right+n*a.x}),{...t})}}const PE=NE(1);function Fx(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function LE(n,e,t){const r=Fx(e);if(!r)return n;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=n.left-o-(1-i)*parseFloat(t),c=n.top-a-(1-s)*parseFloat(t.slice(t.indexOf(" ")+1)),u=i?n.width/i:n.width,d=s?n.height/s:n.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const _E={ignoreTransform:!1};function ts(n,e){e===void 0&&(e=_E);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=Ft(n).getComputedStyle(n);c&&(t=LE(t,c,u))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=t;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function Ep(n){return ts(n,{ignoreTransform:!0})}function jE(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function BE(n,e){return e===void 0&&(e=Ft(n).getComputedStyle(n)),e.position==="fixed"}function $E(n,e){e===void 0&&(e=Ft(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?t.test(s):!1})}function sh(n,e){const t=[];function r(i){if(e!=null&&t.length>=e||!i)return t;if(ih(i)&&i.scrollingElement!=null&&!t.includes(i.scrollingElement))return t.push(i.scrollingElement),t;if(!so(i)||_x(i)||t.includes(i))return t;const s=Ft(n).getComputedStyle(i);return i!==n&&$E(i,s)&&t.push(i),BE(i,s)?t:r(i.parentNode)}return n?r(n):t}function Hx(n){const[e]=sh(n,1);return e??null}function Wu(n){return!iu||!n?null:Qi(n)?n:rh(n)?ih(n)||n===es(n).scrollingElement?window:so(n)?n:null:null}function Vx(n){return Qi(n)?n.scrollX:n.scrollLeft}function Ux(n){return Qi(n)?n.scrollY:n.scrollTop}function Fd(n){return{x:Vx(n),y:Ux(n)}}var mt;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(mt||(mt={}));function zx(n){return!iu||!n?!1:n===document.scrollingElement}function Wx(n){const e={x:0,y:0},t=zx(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},i=n.scrollTop<=e.y,s=n.scrollLeft<=e.x,o=n.scrollTop>=r.y,a=n.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const FE={x:.2,y:.2};function HE(n,e,t,r,i){let{top:s,left:o,right:a,bottom:l}=t;r===void 0&&(r=10),i===void 0&&(i=FE);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=Wx(n),p={x:0,y:0},g={x:0,y:0},m={height:e.height*i.y,width:e.width*i.x};return!c&&s<=e.top+m.height?(p.y=mt.Backward,g.y=r*Math.abs((e.top+m.height-s)/m.height)):!u&&l>=e.bottom-m.height&&(p.y=mt.Forward,g.y=r*Math.abs((e.bottom-m.height-l)/m.height)),!h&&a>=e.right-m.width?(p.x=mt.Forward,g.x=r*Math.abs((e.right-m.width-a)/m.width)):!d&&o<=e.left+m.width&&(p.x=mt.Backward,g.x=r*Math.abs((e.left+m.width-o)/m.width)),{direction:p,speed:g}}function VE(n){if(n===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:t,right:r,bottom:i}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:i,width:n.clientWidth,height:n.clientHeight}}function qx(n){return n.reduce((e,t)=>Ti(e,Fd(t)),kn)}function UE(n){return n.reduce((e,t)=>e+Vx(t),0)}function zE(n){return n.reduce((e,t)=>e+Ux(t),0)}function Gx(n,e){if(e===void 0&&(e=ts),!n)return;const{top:t,left:r,bottom:i,right:s}=e(n);Hx(n)&&(i<=0||s<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const WE=[["x",["left","right"],UE],["y",["top","bottom"],zE]];class oh{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=sh(t),i=qx(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of WE)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=i[s]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ks{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var i;(i=this.target)==null||i.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function qE(n){const{EventTarget:e}=Ft(n);return n instanceof e?n:es(n)}function qu(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var un;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(un||(un={}));function Dp(n){n.preventDefault()}function GE(n){n.stopPropagation()}var Oe;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Oe||(Oe={}));const Kx={start:[Oe.Space,Oe.Enter],cancel:[Oe.Esc],end:[Oe.Space,Oe.Enter,Oe.Tab]},KE=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Oe.Right:return{...t,x:t.x+25};case Oe.Left:return{...t,x:t.x-25};case Oe.Down:return{...t,y:t.y+25};case Oe.Up:return{...t,y:t.y-25}}};class Zx{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new ks(es(t)),this.windowListeners=new ks(Ft(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(un.Resize,this.handleCancel),this.windowListeners.add(un.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(un.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&Gx(r),t(kn)}handleKeyDown(e){if(ou(e)){const{active:t,context:r,options:i}=this.props,{keyboardCodes:s=Kx,coordinateGetter:o=KE,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:kn;this.referenceCoordinates||(this.referenceCoordinates=u);const d=o(e,{active:t,context:r.current,currentCoordinates:u});if(d){const h=pc(d,u),p={x:0,y:0},{scrollableAncestors:g}=r.current;for(const m of g){const v=e.code,{isTop:b,isRight:y,isLeft:S,isBottom:w,maxScroll:C,minScroll:A}=Wx(m),k=VE(m),I={x:Math.min(v===Oe.Right?k.right-k.width/2:k.right,Math.max(v===Oe.Right?k.left:k.left+k.width/2,d.x)),y:Math.min(v===Oe.Down?k.bottom-k.height/2:k.bottom,Math.max(v===Oe.Down?k.top:k.top+k.height/2,d.y))},D=v===Oe.Right&&!y||v===Oe.Left&&!S,O=v===Oe.Down&&!w||v===Oe.Up&&!b;if(D&&I.x!==d.x){const T=m.scrollLeft+h.x,N=v===Oe.Right&&T<=C.x||v===Oe.Left&&T>=A.x;if(N&&!h.y){m.scrollTo({left:T,behavior:a});return}N?p.x=m.scrollLeft-T:p.x=v===Oe.Right?m.scrollLeft-C.x:m.scrollLeft-A.x,p.x&&m.scrollBy({left:-p.x,behavior:a});break}else if(O&&I.y!==d.y){const T=m.scrollTop+h.y,N=v===Oe.Down&&T<=C.y||v===Oe.Up&&T>=A.y;if(N&&!h.x){m.scrollTo({top:T,behavior:a});return}N?p.y=m.scrollTop-T:p.y=v===Oe.Down?m.scrollTop-C.y:m.scrollTop-A.y,p.y&&m.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(e,Ti(pc(d,this.referenceCoordinates),p))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Zx.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=Kx,onActivation:i}=e,{active:s}=t;const{code:o}=n.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),i?.({event:n.nativeEvent}),!0)}return!1}}];function Rp(n){return!!(n&&"distance"in n)}function Op(n){return!!(n&&"delay"in n)}class ah{constructor(e,t,r){var i;r===void 0&&(r=qE(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:o}=s;this.props=e,this.events=t,this.document=es(o),this.documentListeners=new ks(this.document),this.listeners=new ks(r),this.windowListeners=new ks(Ft(o)),this.initialCoordinates=(i=mc(s))!=null?i:kn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(un.Resize,this.handleCancel),this.windowListeners.add(un.DragStart,Dp),this.windowListeners.add(un.VisibilityChange,this.handleCancel),this.windowListeners.add(un.ContextMenu,Dp),this.documentListeners.add(un.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Op(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(Rp(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(un.Click,GE,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(un.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(t=mc(e))!=null?t:kn,c=pc(i,l);if(!r&&a){if(Rp(a)){if(a.tolerance!=null&&qu(c,a.tolerance))return this.handleCancel();if(qu(c,a.distance))return this.handleStart()}if(Op(a)&&qu(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Oe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const ZE={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Yx extends ah{constructor(e){const{event:t}=e,r=es(t.target);super(e,ZE,r)}}Yx.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r?.({event:t}),!0)}}];const YE={move:{name:"mousemove"},end:{name:"mouseup"}};var Hd;(function(n){n[n.RightClick=2]="RightClick"})(Hd||(Hd={}));class JE extends ah{constructor(e){super(e,YE,es(e.event.target))}}JE.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===Hd.RightClick?!1:(r?.({event:t}),!0)}}];const Gu={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class XE extends ah{constructor(e){super(e,Gu)}static setup(){return window.addEventListener(Gu.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Gu.move.name,e)};function e(){}}}XE.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:i}=t;return i.length>1?!1:(r?.({event:t}),!0)}}];var As;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(As||(As={}));var vc;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(vc||(vc={}));function QE(n){let{acceleration:e,activator:t=As.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=vc.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:h}=n;const p=tD({delta:d,disabled:!s}),[g,m]=dE(),v=x.useRef({x:0,y:0}),b=x.useRef({x:0,y:0}),y=x.useMemo(()=>{switch(t){case As.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case As.DraggableRect:return i}},[t,i,l]),S=x.useRef(null),w=x.useCallback(()=>{const A=S.current;if(!A)return;const k=v.current.x*b.current.x,I=v.current.y*b.current.y;A.scrollBy(k,I)},[]),C=x.useMemo(()=>a===vc.TreeOrder?[...c].reverse():c,[a,c]);x.useEffect(()=>{if(!s||!c.length||!y){m();return}for(const A of C){if(r?.(A)===!1)continue;const k=c.indexOf(A),I=u[k];if(!I)continue;const{direction:D,speed:O}=HE(A,I,y,e,h);for(const T of["x","y"])p[T][D[T]]||(O[T]=0,D[T]=0);if(O.x>0||O.y>0){m(),S.current=A,g(w,o),v.current=O,b.current=D;return}}v.current={x:0,y:0},b.current={x:0,y:0},m()},[e,w,r,m,s,o,JSON.stringify(y),JSON.stringify(p),g,c,C,u,JSON.stringify(h)])}const eD={x:{[mt.Backward]:!1,[mt.Forward]:!1},y:{[mt.Backward]:!1,[mt.Forward]:!1}};function tD(n){let{delta:e,disabled:t}=n;const r=hc(e);return oo(i=>{if(t||!r||!i)return eD;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[mt.Backward]:i.x[mt.Backward]||s.x===-1,[mt.Forward]:i.x[mt.Forward]||s.x===1},y:{[mt.Backward]:i.y[mt.Backward]||s.y===-1,[mt.Forward]:i.y[mt.Forward]||s.y===1}}},[t,e,r])}function nD(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return oo(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function rD(n,e){return x.useMemo(()=>n.reduce((t,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...t,...s]},[]),[n,e])}var $s;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})($s||($s={}));var Vd;(function(n){n.Optimized="optimized"})(Vd||(Vd={}));const Tp=new Map;function iD(n,e){let{dragging:t,dependencies:r,config:i}=e;const[s,o]=x.useState(null),{frequency:a,measure:l,strategy:c}=i,u=x.useRef(n),d=v(),h=Bs(d),p=x.useCallback(function(b){b===void 0&&(b=[]),!h.current&&o(y=>y===null?b:y.concat(b.filter(S=>!y.includes(S))))},[h]),g=x.useRef(null),m=oo(b=>{if(d&&!t)return Tp;if(!b||b===Tp||u.current!==n||s!=null){const y=new Map;for(let S of n){if(!S)continue;if(s&&s.length>0&&!s.includes(S.id)&&S.rect.current){y.set(S.id,S.rect.current);continue}const w=S.node.current,C=w?new oh(l(w),w):null;S.rect.current=C,C&&y.set(S.id,C)}return y}return b},[n,s,t,d,l]);return x.useEffect(()=>{u.current=n},[n]),x.useEffect(()=>{d||p()},[t,d]),x.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),x.useEffect(()=>{d||typeof a!="number"||g.current!==null||(g.current=setTimeout(()=>{p(),g.current=null},a))},[a,d,p,...r]),{droppableRects:m,measureDroppableContainers:p,measuringScheduled:s!=null};function v(){switch(c){case $s.Always:return!1;case $s.BeforeDragging:return t;default:return!t}}}function lh(n,e){return oo(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function sD(n,e){return lh(n,e)}function oD(n){let{callback:e,disabled:t}=n;const r=su(e),i=x.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,t]);return x.useEffect(()=>()=>i?.disconnect(),[i]),i}function au(n){let{callback:e,disabled:t}=n;const r=su(e),i=x.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[t]);return x.useEffect(()=>()=>i?.disconnect(),[i]),i}function aD(n){return new oh(ts(n),n)}function Np(n,e,t){e===void 0&&(e=aD);const[r,i]=x.useState(null);function s(){i(l=>{if(!n)return null;if(n.isConnected===!1){var c;return(c=l??t)!=null?c:null}const u=e(n);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const o=oD({callback(l){if(n)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(n)){s();break}}}}),a=au({callback:s});return Cn(()=>{s(),n?(a?.observe(n),o?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),o?.disconnect())},[n]),r}function lD(n){const e=lh(n);return $x(n,e)}const Pp=[];function cD(n){const e=x.useRef(n),t=oo(r=>n?r&&r!==Pp&&n&&e.current&&n.parentNode===e.current.parentNode?r:sh(n):Pp,[n]);return x.useEffect(()=>{e.current=n},[n]),t}function uD(n){const[e,t]=x.useState(null),r=x.useRef(n),i=x.useCallback(s=>{const o=Wu(s.target);o&&t(a=>a?(a.set(o,Fd(o)),new Map(a)):null)},[]);return x.useEffect(()=>{const s=r.current;if(n!==s){o(s);const a=n.map(l=>{const c=Wu(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,Fd(c)]):null}).filter(l=>l!=null);t(a.length?new Map(a):null),r.current=n}return()=>{o(n),o(s)};function o(a){a.forEach(l=>{const c=Wu(l);c?.removeEventListener("scroll",i)})}},[i,n]),x.useMemo(()=>n.length?e?Array.from(e.values()).reduce((s,o)=>Ti(s,o),kn):qx(n):kn,[n,e])}function Lp(n,e){e===void 0&&(e=[]);const t=x.useRef(null);return x.useEffect(()=>{t.current=null},e),x.useEffect(()=>{const r=n!==kn;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?pc(n,t.current):kn}function dD(n){x.useEffect(()=>{if(!iu)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function fD(n,e){return x.useMemo(()=>n.reduce((t,r)=>{let{eventName:i,handler:s}=r;return t[i]=o=>{s(o,e)},t},{}),[n,e])}function Jx(n){return x.useMemo(()=>n?jE(n):null,[n])}const _p=[];function hD(n,e){e===void 0&&(e=ts);const[t]=n,r=Jx(t?Ft(t):null),[i,s]=x.useState(_p);function o(){s(()=>n.length?n.map(l=>zx(l)?r:new oh(e(l),l)):_p)}const a=au({callback:o});return Cn(()=>{a?.disconnect(),o(),n.forEach(l=>a?.observe(l))},[n]),i}function Xx(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return so(e)?e:n}function pD(n){let{measure:e}=n;const[t,r]=x.useState(null),i=x.useCallback(c=>{for(const{target:u}of c)if(so(u)){r(d=>{const h=e(u);return d?{...d,width:h.width,height:h.height}:h});break}},[e]),s=au({callback:i}),o=x.useCallback(c=>{const u=Xx(c);s?.disconnect(),u&&s?.observe(u),r(u?e(u):null)},[e,s]),[a,l]=fc(o);return x.useMemo(()=>({nodeRef:a,rect:t,setRef:l}),[t,a,l])}const mD=[{sensor:Yx,options:{}},{sensor:Zx,options:{}}],gD={current:{}},zl={draggable:{measure:Ep},droppable:{measure:Ep,strategy:$s.WhileDragging,frequency:Vd.Optimized},dragOverlay:{measure:ts}};class Ms extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const vD={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ms,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:gc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:zl,measureDroppableContainers:gc,windowRect:null,measuringScheduled:!1},Qx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:gc,draggableNodes:new Map,over:null,measureDroppableContainers:gc},lo=x.createContext(Qx),e1=x.createContext(vD);function bD(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ms}}}function xD(n,e){switch(e.type){case lt.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case lt.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case lt.DragEnd:case lt.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case lt.RegisterDroppable:{const{element:t}=e,{id:r}=t,i=new Ms(n.droppable.containers);return i.set(r,t),{...n,droppable:{...n.droppable,containers:i}}}case lt.SetDroppableDisabled:{const{id:t,key:r,disabled:i}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const o=new Ms(n.droppable.containers);return o.set(t,{...s,disabled:i}),{...n,droppable:{...n.droppable,containers:o}}}case lt.UnregisterDroppable:{const{id:t,key:r}=e,i=n.droppable.containers.get(t);if(!i||r!==i.key)return n;const s=new Ms(n.droppable.containers);return s.delete(t),{...n,droppable:{...n.droppable,containers:s}}}default:return n}}function yD(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:i}=x.useContext(lo),s=hc(r),o=hc(t?.id);return x.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!ou(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=pE(u);if(d){d.focus();break}}})}},[r,e,i,o,s]),null}function t1(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((i,s)=>s({transform:i,...r}),t):t}function wD(n){return x.useMemo(()=>({draggable:{...zl.draggable,...n?.draggable},droppable:{...zl.droppable,...n?.droppable},dragOverlay:{...zl.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function SD(n){let{activeNode:e,measure:t,initialRect:r,config:i=!0}=n;const s=x.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;Cn(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e?.node.current;if(!c||c.isConnected===!1)return;const u=t(c),d=$x(u,r);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=Hx(c);h&&h.scrollBy({top:d.y,left:d.x})}},[e,o,a,r,t])}const lu=x.createContext({...kn,scaleX:1,scaleY:1});var dr;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(dr||(dr={}));const CD=x.memo(function(e){var t,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:u=mD,collisionDetection:d=OE,measuring:h,modifiers:p,...g}=e;const m=x.useReducer(xD,void 0,bD),[v,b]=m,[y,S]=yE(),[w,C]=x.useState(dr.Uninitialized),A=w===dr.Initialized,{draggable:{active:k,nodes:I,translate:D},droppable:{containers:O}}=v,T=k!=null?I.get(k):null,N=x.useRef({initial:null,translated:null}),L=x.useMemo(()=>{var ht;return k!=null?{id:k,data:(ht=T?.data)!=null?ht:gD,rect:N}:null},[k,T]),P=x.useRef(null),[H,q]=x.useState(null),[Z,ae]=x.useState(null),ee=Bs(g,Object.values(g)),de=ao("DndDescribedBy",o),ge=x.useMemo(()=>O.getEnabled(),[O]),K=wD(h),{droppableRects:fe,measureDroppableContainers:re,measuringScheduled:ue}=iD(ge,{dragging:A,dependencies:[D.x,D.y],config:K.droppable}),Q=nD(I,k),ce=x.useMemo(()=>Z?mc(Z):null,[Z]),Ae=Ou(),Be=sD(Q,K.draggable.measure);SD({activeNode:k!=null?I.get(k):null,config:Ae.layoutShiftCompensation,initialRect:Be,measure:K.draggable.measure});const he=Np(Q,K.draggable.measure,Be),Je=Np(Q?Q.parentElement:null),Me=x.useRef({activatorEvent:null,active:null,activeNode:Q,collisionRect:null,collisions:null,droppableRects:fe,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ie=O.getNodeFor((t=Me.current.over)==null?void 0:t.id),_e=pD({measure:K.dragOverlay.measure}),xt=(r=_e.nodeRef.current)!=null?r:Q,Tt=A?(i=_e.rect)!=null?i:he:null,sr=!!(_e.nodeRef.current&&_e.rect),M=lD(sr?null:he),E=Jx(xt?Ft(xt):null),R=cD(A?Ie??Q:null),F=hD(R),$=t1(p,{transform:{x:D.x-M.x,y:D.y-M.y,scaleX:1,scaleY:1},activatorEvent:Z,active:L,activeNodeRect:he,containerNodeRect:Je,draggingNodeRect:Tt,over:Me.current.over,overlayNodeRect:_e.rect,scrollableAncestors:R,scrollableAncestorRects:F,windowRect:E}),z=ce?Ti(ce,D):null,ie=uD(R),me=Lp(ie),we=Lp(ie,[he]),Ee=Ti($,me),Vt=Tt?PE(Tt,$):null,Nt=L&&Vt?d({active:L,collisionRect:Vt,droppableRects:fe,droppableContainers:ge,pointerCoordinates:z}):null,Qt=EE(Nt,"id"),[Ut,or]=x.useState(null),Jn=sr?$:Ti($,we),ar=TE(Jn,(s=Ut?.rect)!=null?s:null,he),lr=x.useRef(null),as=x.useCallback((ht,Pt)=>{let{sensor:Lt,options:In}=Pt;if(P.current==null)return;const zt=I.get(P.current);if(!zt)return;const _t=ht.nativeEvent,ln=new Lt({active:P.current,activeNode:zt,event:_t,options:In,context:Me,onAbort(st){if(!I.get(st))return;const{onDragAbort:cn}=ee.current,bn={id:st};cn?.(bn),y({type:"onDragAbort",event:bn})},onPending(st,vn,cn,bn){if(!I.get(st))return;const{onDragPending:Nr}=ee.current,En={id:st,constraint:vn,initialCoordinates:cn,offset:bn};Nr?.(En),y({type:"onDragPending",event:En})},onStart(st){const vn=P.current;if(vn==null)return;const cn=I.get(vn);if(!cn)return;const{onDragStart:bn}=ee.current,Tr={activatorEvent:_t,active:{id:vn,data:cn.data,rect:N}};Hr.unstable_batchedUpdates(()=>{bn?.(Tr),C(dr.Initializing),b({type:lt.DragStart,initialCoordinates:st,active:vn}),y({type:"onDragStart",event:Tr}),q(lr.current),ae(_t)})},onMove(st){b({type:lt.DragMove,coordinates:st})},onEnd:cr(lt.DragEnd),onCancel:cr(lt.DragCancel)});lr.current=ln;function cr(st){return async function(){const{active:cn,collisions:bn,over:Tr,scrollAdjustedTranslate:Nr}=Me.current;let En=null;if(cn&&Nr){const{cancelDrop:Pr}=ee.current;En={activatorEvent:_t,active:cn,collisions:bn,delta:Nr,over:Tr},st===lt.DragEnd&&typeof Pr=="function"&&await Promise.resolve(Pr(En))&&(st=lt.DragCancel)}P.current=null,Hr.unstable_batchedUpdates(()=>{b({type:st}),C(dr.Uninitialized),or(null),q(null),ae(null),lr.current=null;const Pr=st===lt.DragEnd?"onDragEnd":"onDragCancel";if(En){const ls=ee.current[Pr];ls?.(En),y({type:Pr,event:En})}})}}},[I]),Eu=x.useCallback((ht,Pt)=>(Lt,In)=>{const zt=Lt.nativeEvent,_t=I.get(In);if(P.current!==null||!_t||zt.dndKit||zt.defaultPrevented)return;const ln={active:_t};ht(Lt,Pt.options,ln)===!0&&(zt.dndKit={capturedBy:Pt.sensor},P.current=In,as(Lt,Pt))},[I,as]),Mo=rD(u,Eu);dD(u),Cn(()=>{he&&w===dr.Initializing&&C(dr.Initialized)},[he,w]),x.useEffect(()=>{const{onDragMove:ht}=ee.current,{active:Pt,activatorEvent:Lt,collisions:In,over:zt}=Me.current;if(!Pt||!Lt)return;const _t={active:Pt,activatorEvent:Lt,collisions:In,delta:{x:Ee.x,y:Ee.y},over:zt};Hr.unstable_batchedUpdates(()=>{ht?.(_t),y({type:"onDragMove",event:_t})})},[Ee.x,Ee.y]),x.useEffect(()=>{const{active:ht,activatorEvent:Pt,collisions:Lt,droppableContainers:In,scrollAdjustedTranslate:zt}=Me.current;if(!ht||P.current==null||!Pt||!zt)return;const{onDragOver:_t}=ee.current,ln=In.get(Qt),cr=ln&&ln.rect.current?{id:ln.id,rect:ln.rect.current,data:ln.data,disabled:ln.disabled}:null,st={active:ht,activatorEvent:Pt,collisions:Lt,delta:{x:zt.x,y:zt.y},over:cr};Hr.unstable_batchedUpdates(()=>{or(cr),_t?.(st),y({type:"onDragOver",event:st})})},[Qt]),Cn(()=>{Me.current={activatorEvent:Z,active:L,activeNode:Q,collisionRect:Vt,collisions:Nt,droppableRects:fe,draggableNodes:I,draggingNode:xt,draggingNodeRect:Tt,droppableContainers:O,over:Ut,scrollableAncestors:R,scrollAdjustedTranslate:Ee},N.current={initial:Tt,translated:Vt}},[L,Q,Nt,Vt,I,xt,Tt,fe,O,Ut,R,Ee]),QE({...Ae,delta:D,draggingRect:Vt,pointerCoordinates:z,scrollableAncestors:R,scrollableAncestorRects:F});const Du=x.useMemo(()=>({active:L,activeNode:Q,activeNodeRect:he,activatorEvent:Z,collisions:Nt,containerNodeRect:Je,dragOverlay:_e,draggableNodes:I,droppableContainers:O,droppableRects:fe,over:Ut,measureDroppableContainers:re,scrollableAncestors:R,scrollableAncestorRects:F,measuringConfiguration:K,measuringScheduled:ue,windowRect:E}),[L,Q,he,Z,Nt,Je,_e,I,O,fe,Ut,re,R,F,K,ue,E]),Ru=x.useMemo(()=>({activatorEvent:Z,activators:Mo,active:L,activeNodeRect:he,ariaDescribedById:{draggable:de},dispatch:b,draggableNodes:I,over:Ut,measureDroppableContainers:re}),[Z,Mo,L,he,b,de,I,Ut,re]);return X.createElement(Bx.Provider,{value:S},X.createElement(lo.Provider,{value:Ru},X.createElement(e1.Provider,{value:Du},X.createElement(lu.Provider,{value:ar},c)),X.createElement(yD,{disabled:a?.restoreFocus===!1})),X.createElement(CE,{...a,hiddenTextDescribedById:de}));function Ou(){const ht=H?.autoScrollEnabled===!1,Pt=typeof l=="object"?l.enabled===!1:l===!1,Lt=A&&!ht&&!Pt;return typeof l=="object"?{...l,enabled:Lt}:{enabled:Lt}}}),kD=x.createContext(null),jp="button",AD="Draggable";function MD(n){let{id:e,data:t,disabled:r=!1,attributes:i}=n;const s=ao(AD),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:h}=x.useContext(lo),{role:p=jp,roleDescription:g="draggable",tabIndex:m=0}=i??{},v=l?.id===e,b=x.useContext(v?lu:kD),[y,S]=fc(),[w,C]=fc(),A=fD(o,e),k=Bs(t);Cn(()=>(d.set(e,{id:e,key:s,node:y,activatorNode:w,data:k}),()=>{const D=d.get(e);D&&D.key===s&&d.delete(e)}),[d,e]);const I=x.useMemo(()=>({role:p,tabIndex:m,"aria-disabled":r,"aria-pressed":v&&p===jp?!0:void 0,"aria-roledescription":g,"aria-describedby":u.draggable}),[r,p,m,v,g,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:I,isDragging:v,listeners:r?void 0:A,node:y,over:h,setNodeRef:S,setActivatorNodeRef:C,transform:b}}function n1(){return x.useContext(e1)}const ID="Droppable",ED={timeout:25};function DD(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:i}=n;const s=ao(ID),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=x.useContext(lo),u=x.useRef({disabled:t}),d=x.useRef(!1),h=x.useRef(null),p=x.useRef(null),{disabled:g,updateMeasurementsFor:m,timeout:v}={...ED,...i},b=Bs(m??r),y=x.useCallback(()=>{if(!d.current){d.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(b.current)?b.current:[b.current]),p.current=null},v)},[v]),S=au({callback:y,disabled:g||!o}),w=x.useCallback((I,D)=>{S&&(D&&(S.unobserve(D),d.current=!1),I&&S.observe(I))},[S]),[C,A]=fc(w),k=Bs(e);return x.useEffect(()=>{!S||!C.current||(S.disconnect(),d.current=!1,S.observe(C.current))},[C,S]),x.useEffect(()=>(a({type:lt.RegisterDroppable,element:{id:r,key:s,disabled:t,node:C,rect:h,data:k}}),()=>a({type:lt.UnregisterDroppable,key:s,id:r})),[r]),x.useEffect(()=>{t!==u.current.disabled&&(a({type:lt.SetDroppableDisabled,id:r,key:s,disabled:t}),u.current.disabled=t)},[r,s,t,a]),{active:o,rect:h,isOver:l?.id===r,node:C,over:l,setNodeRef:A}}function RD(n){let{animation:e,children:t}=n;const[r,i]=x.useState(null),[s,o]=x.useState(null),a=hc(t);return!t&&!r&&a&&i(a),Cn(()=>{if(!s)return;const l=r?.key,c=r?.props.id;if(l==null||c==null){i(null);return}Promise.resolve(e(c,s)).then(()=>{i(null)})},[e,r,s]),X.createElement(X.Fragment,null,t,r?x.cloneElement(r,{ref:o}):null)}const OD={x:0,y:0,scaleX:1,scaleY:1};function TD(n){let{children:e}=n;return X.createElement(lo.Provider,{value:Qx},X.createElement(lu.Provider,{value:OD},e))}const ND={position:"fixed",touchAction:"none"},PD=n=>ou(n)?"transform 250ms ease":void 0,LD=x.forwardRef((n,e)=>{let{as:t,activatorEvent:r,adjustScale:i,children:s,className:o,rect:a,style:l,transform:c,transition:u=PD}=n;if(!a)return null;const d=i?c:{...c,scaleX:1,scaleY:1},h={...ND,width:a.width,height:a.height,top:a.top,left:a.left,transform:Sr.Transform.toString(d),transformOrigin:i&&r?AE(r,a):void 0,transition:typeof u=="function"?u(r):u,...l};return X.createElement(t,{className:o,style:h,ref:e},s)}),_D=n=>e=>{let{active:t,dragOverlay:r}=e;const i={},{styles:s,className:o}=n;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(i[a]=t.node.style.getPropertyValue(a),t.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return o!=null&&o.active&&t.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[l,c]of Object.entries(i))t.node.style.setProperty(l,c);o!=null&&o.active&&t.node.classList.remove(o.active)}},jD=n=>{let{transform:{initial:e,final:t}}=n;return[{transform:Sr.Transform.toString(e)},{transform:Sr.Transform.toString(t)}]},BD={duration:250,easing:"ease",keyframes:jD,sideEffects:_D({styles:{active:{opacity:"0"}}})};function $D(n){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:i}=n;return su((s,o)=>{if(e===null)return;const a=t.get(s);if(!a)return;const l=a.node.current;if(!l)return;const c=Xx(o);if(!c)return;const{transform:u}=Ft(o).getComputedStyle(o),d=Fx(u);if(!d)return;const h=typeof e=="function"?e:FD(e);return Gx(l,i.draggable.measure),h({active:{id:s,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:t,dragOverlay:{node:o,rect:i.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:i,transform:d})})}function FD(n){const{duration:e,easing:t,sideEffects:r,keyframes:i}={...BD,...n};return s=>{let{active:o,dragOverlay:a,transform:l,...c}=s;if(!e)return;const u={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},d={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/a.rect.height:1},h={x:l.x-u.x,y:l.y-u.y,...d},p=i({...c,active:o,dragOverlay:a,transform:{initial:l,final:h}}),[g]=p,m=p[p.length-1];if(JSON.stringify(g)===JSON.stringify(m))return;const v=r?.({active:o,dragOverlay:a,...c}),b=a.node.animate(p,{duration:e,easing:t,fill:"forwards"});return new Promise(y=>{b.onfinish=()=>{v?.(),y()}})}}let Bp=0;function HD(n){return x.useMemo(()=>{if(n!=null)return Bp++,Bp},[n])}const VD=X.memo(n=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:i,transition:s,modifiers:o,wrapperElement:a="div",className:l,zIndex:c=999}=n;const{activatorEvent:u,active:d,activeNodeRect:h,containerNodeRect:p,draggableNodes:g,droppableContainers:m,dragOverlay:v,over:b,measuringConfiguration:y,scrollableAncestors:S,scrollableAncestorRects:w,windowRect:C}=n1(),A=x.useContext(lu),k=HD(d?.id),I=t1(o,{activatorEvent:u,active:d,activeNodeRect:h,containerNodeRect:p,draggingNodeRect:v.rect,over:b,overlayNodeRect:v.rect,scrollableAncestors:S,scrollableAncestorRects:w,transform:A,windowRect:C}),D=lh(h),O=$D({config:r,draggableNodes:g,droppableContainers:m,measuringConfiguration:y}),T=D?v.setRef:void 0;return X.createElement(TD,null,X.createElement(RD,{animation:O},d&&k?X.createElement(LD,{key:k,id:d.id,ref:T,as:a,activatorEvent:u,adjustScale:e,className:l,transition:s,rect:D,style:{zIndex:c,...i},transform:I},t):null))});function ch(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function UD(n,e){return n.reduce((t,r,i)=>{const s=e.get(r);return s&&(t[i]=s),t},Array(n.length))}function Oo(n){return n!==null&&n>=0}function zD(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function WD(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const r1=n=>{let{rects:e,activeIndex:t,overIndex:r,index:i}=n;const s=ch(e,r,t),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},To={scaleX:1,scaleY:1},qD=n=>{var e;let{activeIndex:t,activeNodeRect:r,index:i,rects:s,overIndex:o}=n;const a=(e=s[t])!=null?e:r;if(!a)return null;if(i===t){const c=s[o];return c?{x:0,y:t<o?c.top+c.height-(a.top+a.height):c.top-a.top,...To}:null}const l=GD(s,i,t);return i>t&&i<=o?{x:0,y:-a.height-l,...To}:i<t&&i>=o?{x:0,y:a.height+l,...To}:{x:0,y:0,...To}};function GD(n,e,t){const r=n[e],i=n[e-1],s=n[e+1];return r?t<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const i1="Sortable",s1=X.createContext({activeIndex:-1,containerId:i1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:r1,disabled:{draggable:!1,droppable:!1}});function KD(n){let{children:e,id:t,items:r,strategy:i=r1,disabled:s=!1}=n;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=n1(),d=ao(i1,t),h=a.rect!==null,p=x.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),g=o!=null,m=o?p.indexOf(o.id):-1,v=c?p.indexOf(c.id):-1,b=x.useRef(p),y=!zD(p,b.current),S=v!==-1&&m===-1||y,w=WD(s);Cn(()=>{y&&g&&u(p)},[y,p,g,u]),x.useEffect(()=>{b.current=p},[p]);const C=x.useMemo(()=>({activeIndex:m,containerId:d,disabled:w,disableTransforms:S,items:p,overIndex:v,useDragOverlay:h,sortedRects:UD(p,l),strategy:i}),[m,d,w.draggable,w.droppable,S,p,v,l,h,i]);return X.createElement(s1.Provider,{value:C},e)}const ZD=n=>{let{id:e,items:t,activeIndex:r,overIndex:i}=n;return ch(t,r,i).indexOf(e)},YD=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=n;return!c||!r||a!==s&&i===o?!1:t?!0:o!==i&&e===l},JD={duration:200,easing:"ease"},o1="transform",XD=Sr.Transition.toString({property:o1,duration:0,easing:"linear"}),QD={roleDescription:"sortable"};function eR(n){let{disabled:e,index:t,node:r,rect:i}=n;const[s,o]=x.useState(null),a=x.useRef(t);return Cn(()=>{if(!e&&t!==a.current&&r.current){const l=i.current;if(l){const c=ts(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&o(u)}}t!==a.current&&(a.current=t)},[e,t,r,i]),x.useEffect(()=>{s&&o(null)},[s]),s}function tR(n){let{animateLayoutChanges:e=YD,attributes:t,disabled:r,data:i,getNewIndex:s=ZD,id:o,strategy:a,resizeObserverConfig:l,transition:c=JD}=n;const{items:u,containerId:d,activeIndex:h,disabled:p,disableTransforms:g,sortedRects:m,overIndex:v,useDragOverlay:b,strategy:y}=x.useContext(s1),S=nR(r,p),w=u.indexOf(o),C=x.useMemo(()=>({sortable:{containerId:d,index:w,items:u},...i}),[d,i,w,u]),A=x.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:k,node:I,isOver:D,setNodeRef:O}=DD({id:o,data:C,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...l}}),{active:T,activatorEvent:N,activeNodeRect:L,attributes:P,setNodeRef:H,listeners:q,isDragging:Z,over:ae,setActivatorNodeRef:ee,transform:de}=MD({id:o,data:C,attributes:{...QD,...t},disabled:S.draggable}),ge=uE(O,H),K=!!T,fe=K&&!g&&Oo(h)&&Oo(v),re=!b&&Z,ue=re&&fe?de:null,ce=fe?ue??(a??y)({rects:m,activeNodeRect:L,activeIndex:h,overIndex:v,index:w}):null,Ae=Oo(h)&&Oo(v)?s({id:o,items:u,activeIndex:h,overIndex:v}):w,Be=T?.id,he=x.useRef({activeId:Be,items:u,newIndex:Ae,containerId:d}),Je=u!==he.current.items,Me=e({active:T,containerId:d,isDragging:Z,isSorting:K,id:o,index:w,items:u,newIndex:he.current.newIndex,previousItems:he.current.items,previousContainerId:he.current.containerId,transition:c,wasDragging:he.current.activeId!=null}),Ie=eR({disabled:!Me,index:w,node:I,rect:k});return x.useEffect(()=>{K&&he.current.newIndex!==Ae&&(he.current.newIndex=Ae),d!==he.current.containerId&&(he.current.containerId=d),u!==he.current.items&&(he.current.items=u)},[K,Ae,d,u]),x.useEffect(()=>{if(Be===he.current.activeId)return;if(Be&&!he.current.activeId){he.current.activeId=Be;return}const xt=setTimeout(()=>{he.current.activeId=Be},50);return()=>clearTimeout(xt)},[Be]),{active:T,activeIndex:h,attributes:P,data:C,rect:k,index:w,newIndex:Ae,items:u,isOver:D,isSorting:K,isDragging:Z,listeners:q,node:I,overIndex:v,over:ae,setNodeRef:ge,setActivatorNodeRef:ee,setDroppableNodeRef:O,setDraggableNodeRef:H,transform:Ie??ce,transition:_e()};function _e(){if(Ie||Je&&he.current.newIndex===w)return XD;if(!(re&&!ou(N)||!c)&&(K||Me))return Sr.Transition.toString({...c,property:o1})}}function nR(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(r=n?.droppable)!=null?r:e.droppable}}Oe.Down,Oe.Right,Oe.Up,Oe.Left;const a1=({isDragging:n,dragHandleAttributes:e,dragHandleListeners:t,dragHandleClass:r,className:i,...s})=>f.jsx("button",{className:_("opacity-50 group-hover:opacity-100",n?"cursor-grabbing":"cursor-grab",r,i),type:"button",...e,...t,...s,children:f.jsx(ve,{colorClass:"text-grey-500",name:"hamburger",size:"sm"})}),rR=({setRef:n,isDragging:e,style:t,separator:r,children:i,...s})=>f.jsxs("div",{ref:n,className:_("group flex w-full items-center gap-3 bg-white py-1 dark:bg-black",r&&"border-b border-grey-200",e&&"opacity-75"),style:t,children:[f.jsx(a1,{className:"h-7",isDragging:e,...s}),i]}),iR=({id:n,children:e,separator:t,dragHandleClass:r,container:i})=>{const{attributes:s,listeners:o,setNodeRef:a,transform:l,transition:c}=tR({id:n}),u={transform:Sr.Transform.toString(l),transition:c};return i({id:n,setRef:a,isDragging:!1,separator:t,dragHandleClass:r,dragHandleAttributes:s,dragHandleListeners:o,style:u,children:e})},sR=({title:n,titleSeparator:e,hint:t,items:r,itemSeparator:i=!0,dragHandleClass:s,onMove:o,renderItem:a,container:l=h=>f.jsx(rR,{...h}),wrapper:c=X.Fragment,dragOverlayWrapper:u,...d})=>{const[h,p]=x.useState(null);return r.length?f.jsxs("div",{...d,children:[n&&f.jsx(ft,{level:6,separator:e,grey:!0,children:n}),f.jsx("div",{className:`${n&&e?"-mt-2":""}`,children:f.jsxs(CD,{collisionDetection:DE,onDragEnd:g=>{var m;o(g.active.id,(m=g.over)==null?void 0:m.id),p(null)},onDragStart:g=>p(g.active.id),children:[f.jsx(c,{children:f.jsx(KD,{items:r,strategy:qD,children:r.map(g=>f.jsx(iR,{container:l,dragHandleClass:s,id:g.id,separator:i,children:a(g)},g.id))})}),f.jsx(VD,{wrapperElement:u,children:h?l({id:h,isDragging:!0,children:a(r.find(({id:g})=>g===h))}):null})]})}),t&&f.jsxs(f.Fragment,{children:[!i&&f.jsx(gt,{}),f.jsx(qn,{children:t})]})]}):f.jsx(f.Fragment,{})},oR="before:absolute before:inset-x-[-16px] before:top-[-1px] before:bottom-0 before:bg-grey-50 before:opacity-0 hover:before:opacity-100 before:rounded-md before:transition-opacity before:dark:bg-grey-950 hover:z-10",cu=x.forwardRef(function({id:e,action:t,hideActions:r,className:i,style:s,testId:o,separator:a,bgOnHover:l=!0,onClick:c,children:u},d){const h=g=>{c?.(g)};a=a===void 0?!0:a;const p=_("group/table-row relative transform-gpu [clip-path:inset(0_-16px)]",l&&oR,c&&"cursor-pointer",a?"border-b border-grey-100 last-of-type:border-b-transparent dark:border-grey-950":"border-y border-none first-of-type:hover:border-t-transparent","hover:border-b-transparent",i);return f.jsx("tr",{ref:d,className:p,"data-testid":o,id:e,style:s,onClick:h,children:f.jsx("td",{className:"p-0",colSpan:1e3,children:f.jsxs("div",{className:"relative z-10 flex items-center",children:[f.jsx("div",{className:"grow py-2",children:u}),t&&f.jsx("div",{className:`flex items-center justify-end p-2${r?" opacity-0 group-hover/table-row:opacity-100":""}`,children:t})]})})})}),Kr=({title:n,description:e,children:t,beta:r=!1})=>f.jsxs("div",{className:"flex items-start justify-between gap-4",children:[(n||e)&&f.jsxs("div",{children:[f.jsxs(ft,{className:"font-semibold",level:5,children:[n,r&&f.jsx("sup",{className:"ml-0.5 text-[10px] font-semibold uppercase tracking-wide",children:"Beta"})]}),e&&f.jsx("p",{className:"mr-5 mt-1 hidden text-pretty group-[.is-not-editing]/setting-group:!visible group-[.is-not-editing]/setting-group:!block md:!visible md:!block",children:e})]}),f.jsx("div",{children:t})]}),aR=x.forwardRef(function({navid:e,testId:t,title:r,description:i,isVisible:s=!0,isEditing:o,saveState:a,customHeader:l,customButtons:c,beta:u=!1,children:d,hideEditButton:h,alwaysShowSaveButton:p=!0,border:g=!0,highlight:m=!1,highlightOnModalClose:v=!0,styles:b,onEditingChange:y,onSave:S,onCancel:w,enableCMDS:C=!0},A){const k=()=>{y?.(!0)},I=()=>{w?.(),y?.(!1)},D=()=>{S?.()};b+=" border-grey-250 dark:border-grey-925";const O=[];if(h)a==="saved"&&O.push({label:"Saved",key:"edit",color:"green",onClick:k});else{let L="Edit";a==="saved"&&(L="Saved"),O.push({label:L,key:"edit",color:"clear",onClick:k})}const T=[{label:"Cancel",key:"cancel",onClick:I}];if(a==="unsaved"||p){let L="Save";a==="saving"&&(L="Saving..."),T.push({label:L,key:"save",color:a==="unsaved"?"green":"light-grey",disabled:a!=="unsaved",onClick:D})}x.useEffect(()=>{const L=P=>{(P.metaKey||P.ctrlKey)&&P.key==="s"&&(P.preventDefault(),D())};if(C)return window.addEventListener("keydown",L),()=>{window.removeEventListener("keydown",L)}});const N=_("relative flex-col gap-6 rounded-xl transition-all hover:border-grey-200",g&&"border p-5 hover:shadow-sm md:p-7",s?"flex":"hidden",m&&v&&"border-grey-200 shadow-sm",o?"border-grey-200 shadow-sm":"is-not-editing group/setting-group",b);return o?f.jsxs("div",{className:N,"data-testid":t,children:[f.jsx("div",{ref:A,className:"absolute",id:e&&e}),l||f.jsx(Kr,{beta:u,description:i,title:r,children:c||y&&f.jsx(_s,{buttons:o?T:O,className:o?"mt-[-5px]  ":"-mr-1 mt-[-5px]",size:"sm"})}),d]}):f.jsxs("div",{className:N,"data-testid":t,children:[f.jsx("div",{ref:A,className:"absolute",id:e&&e}),l||f.jsx(Kr,{beta:u,description:i,title:r,children:c||y&&f.jsx(_s,{buttons:o?T:O,className:o?"mt-[-5px]  ":"-mr-1 mt-[-5px]",size:"sm"})}),d]})}),lR=x.forwardRef(function({title:e,navid:t="",icon:r,isCurrent:i=!1,isVisible:s=!0,onClick:o=()=>{},...a},l){const c=_("w-100 mt-px flex h-[36px] cursor-pointer items-center rounded-md px-3 py-2 text-left text-[14px] font-medium transition-all hover:bg-grey-200 focus:bg-grey-100 dark:text-grey-600 dark:hover:bg-grey-950 dark:focus:bg-grey-925",i?"bg-grey-200 text-black dark:bg-grey-950 dark:text-white":"text-grey-800",!s&&"hidden");return f.jsx("li",{ref:l,...a,children:f.jsxs("a",{className:c,id:t,onClick:o,children:[r&&f.jsx(ve,{className:"mr-[7px] h-[16px] w-[16px]",name:r,size:"custom"}),e]})})}),cR=({items:n,direction:e,onSortChange:t,onDirectionChange:r,trigger:i,triggerButtonProps:s,position:o="start"})=>{var a;const[l,c]=x.useState(n),[u,d]=x.useState(e||"desc");x.useEffect(()=>{c(n)},[n]);const h=g=>{var m,v;const b=l.map(y=>({...y,selected:y.id===g}));c(b),(m=l.find(y=>y.id===g))!=null&&m.direction&&(d(((v=l.find(y=>y.id===g))==null?void 0:v.direction)||"desc"),r(u)),t(g)},p=g=>{g?.stopPropagation(),d(m=>m==="desc"?"asc":"desc"),r(u)};return i||(i=f.jsx(ne,{className:"flex-row-reverse",icon:`${u==="asc"?"arrow-up":"arrow-down"}`,iconColorClass:"!w-3 !h-3 !mr-0 ml-1.5",label:`${(a=l.find(g=>g.selected))==null?void 0:a.label}`,...s})),f.jsx(lE,{position:o,trigger:i,children:f.jsxs("div",{className:"flex flex-col",children:[f.jsx("div",{className:"cursor-default select-none border-b border-b-grey-200 p-2 pl-3 text-sm font-semibold dark:border-b-grey-800",children:"Sort by"}),f.jsx("div",{className:"flex min-w-[160px] flex-col justify-stretch py-1",role:"none",children:l.map(g=>f.jsxs("button",{className:"group relative mx-1 flex grow cursor-pointer items-center rounded-[2.5px] px-8 py-1.5 pr-12 text-left text-sm hover:bg-grey-100 dark:hover:bg-grey-800",type:"button",onClick:()=>{h(g.id)},children:[g.selected?f.jsx(ve,{className:"absolute left-2",name:"check",size:"xs"}):null,g.label,g.selected?f.jsx("button",{className:"absolute right-1 flex size-6 cursor-pointer items-center justify-center rounded-full hover:bg-grey-300 dark:hover:bg-grey-700",title:`${u==="asc"?"Ascending":"Descending"}`,type:"button",onClick:p,children:u==="asc"?f.jsx(ve,{name:"arrow-up",size:"xs"}):f.jsx(ve,{name:"arrow-down",size:"xs"})}):null]},g.id))})]})})},uR=({pagination:n})=>n?f.jsx(cE,{...n}):null,dR=({showMore:n})=>{if(n){if(!n.hasMore)return f.jsx("div",{})}else return null;return f.jsx("div",{className:"mt-1 flex items-center gap-2 text-sm font-bold text-green hover:text-green-400",children:f.jsx("button",{type:"button",onClick:n.loadMore,children:"Show all"})})},Ni=({header:n,children:e,borderTop:t,hint:r,hintSeparator:i,pageTitle:s,className:o,pagination:a,showMore:l,isLoading:c,fillContainer:u=!1,horizontalScroll:d=!1,paddingXClassName:h})=>{const p=X.useRef(null),g=X.useRef(0),[m,v]=X.useState(void 0),b=a&&a.pages&&a.pages>1;X.useEffect(()=>{if(p.current){const D=new ResizeObserver(O=>{const T=O[0].target.clientHeight;v(T),T>g.current&&(g.current=T)});return D.observe(p.current),()=>{D.disconnect()}}},[c,a]);const y=X.useMemo(()=>m===void 0?{height:"auto"}:{height:g.current},[m]),S=X.useMemo(()=>m===void 0?{height:0}:{height:g.current-m},[m]),w=_("h-9 border-b border-grey-200 dark:border-grey-600"),C=_("w-full",u?"min-w-full":"w-full",(t||s)&&"border-t border-grey-300",s?"mb-0 mt-14":"my-0",o),A=_(d?"overflow-x-auto":"",u?"absolute inset-0 min-w-full":"w-full"),k=_(u?"max-h-[calc(100%-38px)] w-full overflow-y-auto":"w-full",h),I=_("sticky bottom-0 -mt-px bg-white pb-3 dark:bg-black",h);return f.jsx(f.Fragment,{children:f.jsxs("div",{className:A,children:[s&&f.jsx(ft,{children:s}),f.jsx("div",{className:k,children:f.jsxs("table",{className:C,children:[n&&f.jsx("thead",{className:w,children:f.jsx(cu,{bgOnHover:!1,separator:!1,children:n})}),!c&&f.jsx("tbody",{ref:p,children:e}),b&&f.jsx("div",{style:S})]})}),c&&f.jsx("div",{className:"p-5",children:f.jsx(xb,{delay:200,size:"lg",style:y})}),(r||a||l)&&f.jsxs("footer",{className:I,children:[(i||a)&&f.jsx(gt,{}),f.jsxs("div",{className:"mt-1 flex flex-col-reverse items-start justify-between gap-1 pt-2 md:flex-row md:items-center md:gap-0 md:pt-0",children:[f.jsx(dR,{showMore:l}),f.jsx(qn,{children:r??" "}),f.jsx(uR,{pagination:a})]})]})]})})},$n=({className:n,children:e,padding:t=!0,align:r="left",valign:i="top",...s})=>{const o=_(t?"!py-3 !pl-0 !pr-6":"",r==="center"&&"text-center",r==="right"&&"text-right",i==="top"&&"align-top",i==="center"&&"align-center",i==="bottom"&&"align-bottom",s.onClick&&"hover:cursor-pointer",n);return f.jsx("td",{className:o,...s,children:e})},fR=({heading:n,value:e,hint:t,hideEmptyValue:r,...i})=>!e&&r?f.jsx(f.Fragment,{}):f.jsxs("div",{className:"flex flex-col",...i,children:[n&&f.jsx(ft,{grey:!1,level:6,children:n}),f.jsx("div",{className:`flex items-center ${n&&"mt-1"}`,children:e}),t&&f.jsx("p",{className:"mt-1 text-xs",children:t})]}),Ze=({columns:n,values:e,children:t,className:r})=>{let i="flex flex-col gap-x-5";return n===2&&(i="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6"),i+=r?` ${r}`:" gap-y-7",f.jsxs("div",{className:i,children:[e&&e.map(({key:s,...o})=>f.jsx(fR,{...o},s)),t]})},ds=({title:n,isVisible:e,children:t})=>e?f.jsxs(f.Fragment,{children:[n&&f.jsx("h2",{className:"mb-4 ml-2 text-base font-semibold tracking-normal text-black dark:text-grey-400",children:n}),t&&f.jsxs(f.Fragment,{children:[f.jsx("ul",{className:"-mt-1 mb-7",children:t}),f.jsx(gt,{className:"mx-2 mb-7 border-grey-300 dark:border-grey-950"})]})]}):null,hR=({title:n,sticky:e=!1})=>{const t=_("z-20 mb-px pb-10 text-3xl font-bold tracking-tight",e?"sticky top-0 mt-[calc(-8vmin-4px)] bg-gradient-to-t from-transparent via-white via-20% to-white pt-[calc(8vmin-4px)] dark:bg-black":"mt-[-5px]");return f.jsx("h2",{className:t,children:n})},pR=({title:n,isVisible:e=!0,children:t})=>{const r=_("mb-[10vh]",e?"":"hidden");return f.jsxs("div",{className:r,children:[n&&f.jsx(hR,{title:n}),t&&f.jsx("div",{className:"mb-10 flex flex-col gap-12",children:t})]})},$p=({label:n,className:e,...t})=>{const r=_("inline-block cursor-pointer rounded-md bg-[#625BF6] font-semibold text-white transition-all hover:opacity-90",n?"px-5 py-2 text-sm":"px-6 py-[9px]",e);return n||(n=f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"sr-only",children:"Connect with Stripe"}),f.jsxs("svg",{fill:"none",height:"16",width:"132",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("g",{clipPath:"url(#clip0_1443_3527)",fill:"#fff",children:f.jsx("path",{d:"M2 7.6c0-2.3 1.3-3.9 3-3.9 1.3 0 2.2.8 2.5 2l1.8-.6C8.7 3.2 7.2 2 5 2 2.1 2 0 4.3 0 7.6s2.1 5.6 5 5.6c2.2 0 3.7-1.2 4.3-3.1l-1.8-.6c-.3 1.3-1.2 2-2.5 2-1.8 0-3-1.6-3-3.9zm15.6 1.5C17.6 6.7 16 5 13.8 5 11.6 5 10 6.6 10 9.1c0 2.5 1.6 4.1 3.8 4.1 2.3 0 3.8-1.7 3.8-4.1zm-5.7 0c0-1.6.8-2.6 2-2.6s2 1 2 2.6-.8 2.6-2 2.6-2-1-2-2.6zM19 13h1.8V8.4c0-1.1.8-1.7 1.6-1.7 1 0 1.4.7 1.4 1.7V13h1.8V7.8c0-1.7-1-2.8-2.6-2.8-1 0-1.7.5-2.2 1v-.8H19V13zm8.5 0h1.8V8.4c0-1.1.8-1.7 1.6-1.7 1 0 1.4.7 1.4 1.7V13h1.8V7.8c0-1.7-1-2.8-2.6-2.8-1 0-1.7.5-2.2 1v-.8h-1.8V13zm11.8.2c1.6 0 2.8-.8 3.4-2.2l-1.5-.6c-.2.8-.9 1.3-1.8 1.3-1.2 0-2-.8-2.1-2.2h5.5v-.6c0-2.2-1.2-3.9-3.5-3.9-2.2 0-3.8 1.8-3.8 4.1 0 2.4 1.5 4.1 3.8 4.1zm-.1-6.7c1.1 0 1.7.8 1.7 1.6h-3.6c.2-1.1 1-1.6 1.9-1.6zm6.2 2.6c0-1.6.8-2.5 2.1-2.5 1 0 1.5.6 1.8 1.5l1.5-.8c-.4-1.3-1.6-2.2-3.3-2.2-2.2 0-3.9 1.7-3.9 4.1 0 2.4 1.6 4.1 3.9 4.1 1.7 0 2.9-1 3.3-2.3l-1.5-.8c-.2.9-.8 1.5-1.8 1.5-1.3-.1-2.1-1-2.1-2.6zM52 11c0 1.6.8 2.1 2.3 2.1.5 0 .9 0 1.2-.1v-1.5h-.7c-.6 0-1.1-.1-1.1-.8V6.6h1.7V5.1h-1.7V2.8h-1.8v2.3h-1.1v1.5h1.1L52 11zm11.7-5.9l-1.4 5.2-1.4-5.2h-1.8l2.4 7.9h1.6l1.4-5.2 1.4 5.2h1.6l2.4-7.9h-1.8l-1.5 5.2-1.4-5.2h-1.5zm7.1-1h1.8V2.3h-1.9l.1 1.8zm1.8 1h-1.8V13h1.8V5.1zm2 5.9c0 1.6.8 2.1 2.3 2.1.5 0 .9 0 1.2-.1v-1.5h-.7c-.6 0-1.1-.1-1.1-.8V6.6H78V5.1h-1.7V2.8h-1.7v2.3h-1.1v1.5h1.1V11zm4.9 2h1.8V8.4c0-1.1.8-1.7 1.6-1.7 1 0 1.4.7 1.4 1.7V13h1.8V7.8c0-1.7-1-2.8-2.6-2.8-1 0-1.7.5-2.2 1V2.3h-1.8V13zM117.1 15.4v-3c.4.3.9.7 1.9.7 1.9 0 3.6-1.5 3.6-4.9 0-3.1-1.7-4.8-3.6-4.8-1 0-1.7.5-2.1.9l-.1-.6h-2.3V16l2.6-.6zm1.2-9.7c1 0 1.6 1.1 1.6 2.5 0 1.5-.6 2.5-1.6 2.5-.6 0-1-.2-1.3-.5v-4c.4-.2.7-.5 1.3-.5zM127.701 13.2c1.3 0 2.2-.3 3-.7v-2.2c-.7.4-1.5.6-2.6.6s-1.9-.4-2.1-1.7h5.2v-1c0-2.8-1.3-4.9-3.8-4.9s-4.1 2.2-4.1 4.9c0 3.3 1.8 5 4.4 5zm-.3-7.7c.6 0 1.3.5 1.3 1.7h-2.8c.1-1.1.8-1.7 1.5-1.7zM107.6 6.5c.6-.9 1.7-.7 2-.6V3.4c-.4-.1-1.6-.4-2.1.8l-.2-.8H105v9.4h2.6V6.5zM95.602 10.2c0 .5-.4.6-1 .6-.9 0-2-.4-2.9-.9v2.6c1 .4 2 .6 2.9.6 2.2 0 3.7-1.1 3.7-3 0-3.2-4-2.6-4-3.8 0-.4.3-.6.9-.6.8 0 1.8.2 2.6.7V3.8c-.9-.4-1.7-.5-2.6-.5-2.1 0-3.6 1.1-3.6 3 0 3.1 4 2.6 4 3.9zM102.001 13.2c.8 0 1.5-.2 1.9-.4v-2.2c-.3.1-2 .6-2-1V5.8h2V3.5h-2V1.2l-2.6.6v8.6c0 1.6 1.1 2.8 2.7 2.8zM110.5.6v2.1l2.7-.5V0l-2.7.6zM113.1 3.5h-2.6v9.3h2.6V3.5z"})}),f.jsx("defs",{children:f.jsx("clipPath",{id:"clip0_1443_3527",children:f.jsx("path",{d:"M0 0h132v16H0z",fill:"#fff"})})})]})]})),f.jsx(ne,{className:r,label:n,unstyled:!0,...t})},mR=({darkMode:n,fetchKoenigLexical:e,className:t,children:r,...i})=>{const s=_("admin-x-base",t);return f.jsx("div",{className:s,...i,children:f.jsx(SC,{darkMode:n,fetchKoenigLexical:e,children:r})})},gR=n=>x.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},x.createElement("title",null,"social-facebook"),x.createElement("path",{d:"M20 40.004c11.046 0 20-8.955 20-20 0-11.046-8.954-20-20-20s-20 8.954-20 20c0 11.045 8.954 20 20 20z",fill:"#1977F3"}),x.createElement("path",{d:"m27.785 25.785.886-5.782h-5.546V16.25c0-1.58.773-3.125 3.26-3.125h2.522V8.204s-2.29-.39-4.477-.39c-4.568 0-7.555 2.767-7.555 7.781v4.408h-5.08v5.782h5.08v13.976a20.08 20.08 0 0 0 3.125.242c1.063 0 2.107-.085 3.125-.242V25.785h4.66z",fill:"#fff"})),uB=n=>x.createElement("svg",{viewBox:"0 0 770 294",style:{backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundImage:"url(https://assets.ghost.io/admin/1597/assets/img/logos/ghost-logo-black-1-fb561a374422b405ec90fa586b05ebdf.png)"},alt:"Ghost",...n}),dB=n=>x.createElement("svg",{fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",...n},x.createElement("path",{clipRule:"evenodd",d:"M24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12ZM11.8326 2.33879C6.37785 2.95189 3.95901 5.20797 3.41126 9.74699C3.34896 10.2632 3.22642 10.7805 3.10443 11.2954C2.93277 12.02 2.76221 12.74 2.76221 13.4458C2.76221 17.9885 6.5856 21.556 11.1283 21.556C12.8959 21.556 14.4433 20.8144 15.8756 20.048C19.0536 18.3478 22.0328 16.2597 22.0328 12.5411C22.0328 9.91512 20.1051 7.56932 18.466 5.5747C18.3834 5.47416 18.3015 5.37451 18.2206 5.27577C17.3866 4.25742 14.4333 2.04643 11.8326 2.33879Z",fill:"currentColor",fillRule:"evenodd"})),vR=n=>x.createElement("svg",{fill:"none",viewBox:"0 0 92 31",...n},x.createElement("title",null,"google"),x.createElement("path",{d:"M39.15 15.898c0 4.303-3.378 7.473-7.525 7.473s-7.526-3.17-7.526-7.473c0-4.334 3.38-7.474 7.526-7.474 4.147 0 7.526 3.14 7.526 7.474zm-3.294 0c0-2.69-1.958-4.529-4.231-4.529-2.273 0-4.231 1.84-4.231 4.529 0 2.662 1.958 4.528 4.231 4.528 2.273 0 4.231-1.87 4.231-4.528z",fill:"#EA4335"}),x.createElement("path",{d:"M55.386 15.898c0 4.303-3.379 7.473-7.526 7.473-4.146 0-7.526-3.17-7.526-7.473 0-4.33 3.38-7.474 7.526-7.474 4.147 0 7.526 3.14 7.526 7.474zm-3.294 0c0-2.69-1.959-4.529-4.232-4.529s-4.231 1.84-4.231 4.529c0 2.662 1.958 4.528 4.231 4.528 2.273 0 4.232-1.87 4.232-4.528z",fill:"#FBBC05"}),x.createElement("path",{d:"M70.945 8.875v13.418c0 5.52-3.267 7.774-7.13 7.774-3.636 0-5.825-2.423-6.65-4.404l2.868-1.19c.511 1.217 1.763 2.652 3.779 2.652 2.472 0 4.004-1.52 4.004-4.38V21.67h-.115c-.737.906-2.158 1.698-3.95 1.698-3.751 0-7.188-3.255-7.188-7.443 0-4.22 3.437-7.501 7.188-7.501 1.789 0 3.21.792 3.95 1.671h.115V8.88h3.129v-.004zm-2.895 7.05c0-2.632-1.763-4.556-4.005-4.556-2.273 0-4.177 1.924-4.177 4.556 0 2.604 1.904 4.501 4.177 4.501 2.242 0 4.005-1.897 4.005-4.501z",fill:"#4285F4"}),x.createElement("path",{d:"M76.103 1.01v21.903H72.89V1.011h3.213z",fill:"#34A853"}),x.createElement("path",{d:"M88.624 18.357l2.558 1.699c-.826 1.216-2.815 3.312-6.251 3.312-4.262 0-7.445-3.282-7.445-7.474 0-4.444 3.21-7.473 7.076-7.473 3.893 0 5.798 3.086 6.42 4.754l.341.85-10.028 4.137c.768 1.5 1.962 2.264 3.636 2.264 1.678 0 2.841-.822 3.693-2.069zm-7.87-2.688l6.703-2.774c-.368-.933-1.478-1.583-2.783-1.583-1.674 0-4.005 1.472-3.92 4.357z",fill:"#EA4335"}),x.createElement("path",{d:"M11.936 13.953v-3.17h10.726c.105.552.159 1.206.159 1.914 0 2.378-.653 5.32-2.757 7.416-2.046 2.123-4.66 3.255-8.124 3.255-6.42 0-11.818-5.21-11.818-11.605C.122 5.368 5.52.158 11.94.158c3.551 0 6.081 1.389 7.982 3.198l-2.246 2.237c-1.363-1.273-3.21-2.264-5.74-2.264-4.688 0-8.354 3.764-8.354 8.434s3.666 8.434 8.354 8.434c3.041 0 4.773-1.216 5.882-2.322.9-.896 1.492-2.176 1.725-3.925l-7.607.003z",fill:"#4285F4"})),bR=n=>x.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",...n},x.createElement("g",null,x.createElement("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z",fill:"currentColor"}))),uh=({initialState:n,savingDelay:e,savedDelay:t=2e3,onSave:r,onSaveError:i,onSavedStateReset:s,onValidate:o})=>{const[a,l]=x.useState(n),[c,u]=x.useState(""),[d,h]=x.useState({});x.useEffect(()=>{c==="saved"&&setTimeout(()=>{s?.(),u(w=>w==="saved"?"":w)},t)},[c,t]);const p=w=>Object.values(w).filter(Boolean).length===0,g=x.useCallback(()=>{if(!o)return!0;const w=o(a);return h(w),p(w)},[a,o]),m=x.useCallback(async(w={})=>{if(!g())return u("error"),!1;if(c!=="unsaved"&&!w.force&&!w.fakeWhenUnchanged)return!0;const C=Date.now();u("saving");try{(c==="unsaved"||w.force)&&await r(a);const A=Date.now()-C;return e&&A<e&&await new Promise(k=>{setTimeout(k,e-A)}),u("saved"),!0}catch(A){throw await i?.(A),u("unsaved"),A}},[a,c,e,r,i,g]),v=x.useCallback(w=>{l(w),u("unsaved")},[]);let b="black";c==="saved"?b="green":c==="error"&&(b="red");let y="";c==="saved"?y="Saved":c==="saving"?y="Saving...":c==="error"&&(y="Retry");const S={disabled:c==="saving",color:b,label:y||void 0};return{formState:a,saveState:c,handleSave:m,updateForm:v,setFormState:l,reset(){l(n),u("")},validate:g,isValid:p(d),clearError:w=>{h(C=>({...C,[w]:""}))},errors:d,setErrors:h,okProps:S}},xR=n=>"'"+n.replace(/'/g,"\\'")+"'",Ku=({path:n,filterKey:e,responseKey:t,limit:r=20})=>{const i=E2(),s=x.useRef({}),o=async l=>{var c;if((s.current.allLoaded||s.current.lastInput===l)&&s.current.data)return s.current.data.filter(d=>{var h;return(h=d[e])==null?void 0:h.toLowerCase().includes(l.toLowerCase())});const u=await i(Jh(n,{filter:l?`${e}:~${xR(l)}`:"",limit:r.toString()}));return s.current.data=u[t],s.current.allLoaded=!l&&!((c=u.meta)!=null&&c.pagination.next),s.current.lastInput=l,u[t]};return{loadData:o,loadInitialValues:async(l,c)=>{await o("");const u=[...s.current.data||[]],d=l.filter(h=>{var p;return!((p=s.current.data)!=null&&p.find(g=>g[c]===h))});if(d.length){const h=await i(Jh(n,{filter:`${c}:[${d.join(",")}]`,limit:"100"}));u.push(...h[t])}return l.map(h=>u.find(p=>p[c]===h))}}};class Ce{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),jn.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),jn.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Is(this),s=new Is(e);for(let o=t,a=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Is(this,e)}iterRange(e,t=this.length){return new l1(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new c1(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ce.empty:e.length<=32?new Qe(e):jn.from(Qe.split(e,[]))}}class Qe extends Ce{constructor(e,t=yR(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((t?r:a)>=e)return new wR(i,a,r,o);i=a+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new Qe(Fp(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Wl(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Qe(a,o.length+s.length));else{let l=a.length>>1;r.push(new Qe(a.slice(0,l)),new Qe(a.slice(l)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof Qe))return super.replace(e,t,r);let i=Wl(this.text,Wl(r.text,Fp(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new Qe(i,s):jn.from(Qe.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new Qe(r,i)),r=[],i=-1);return i>-1&&t.push(new Qe(r,i)),t}}class jn extends Ce{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let c=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!c?r.push(a):a.decompose(e-o,t-o,r,c)}o=l+1}}replace(e,t,r){if(r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new jn(u,this.length-(t-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.sliceString(e-o,t-o,r)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof jn))return 0;let r=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let p of e)r+=p.lines;if(r<32){let p=[];for(let g of e)g.flatten(p);return new Qe(p,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>s&&p instanceof jn)for(let m of p.children)d(m);else p.lines>o&&(l>o||!l)?(h(),a.push(p)):p instanceof Qe&&l&&(g=u[u.length-1])instanceof Qe&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new Qe(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>i&&h(),l+=p.lines,c+=p.length+1,u.push(p))}function h(){l!=0&&(a.push(u.length==1?u[0]:jn.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return h(),a.length==1?a[0]:new jn(a,t)}}Ce.empty=new Qe([""],0);function yR(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Wl(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let a=n[s],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function Fp(n,e,t){return Wl(n,[""],e,t)}class Is{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Qe?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Qe?i.text.length:i.children.length;if(o==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Qe){let l=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Qe?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class l1{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Is(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class c1{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ce.prototype[Symbol.iterator]=function(){return this.iter()},Is.prototype[Symbol.iterator]=l1.prototype[Symbol.iterator]=c1.prototype[Symbol.iterator]=function(){return this});class wR{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}let Pi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Pi.length;n++)Pi[n]+=Pi[n-1];function SR(n){for(let e=1;e<Pi.length;e+=2)if(Pi[e]>n)return Pi[e-1]<=n;return!1}function Hp(n){return n>=127462&&n<=127487}const Vp=8205;function Et(n,e,t=!0,r=!0){return(t?u1:CR)(n,e,r)}function u1(n,e,t){if(e==n.length)return e;e&&d1(n.charCodeAt(e))&&f1(n.charCodeAt(e-1))&&e--;let r=St(n,e);for(e+=dn(r);e<n.length;){let i=St(n,e);if(r==Vp||i==Vp||t&&SR(i))e+=dn(i),r=i;else if(Hp(i)){let s=0,o=e-2;for(;o>=0&&Hp(St(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function CR(n,e,t){for(;e>0;){let r=u1(n,e-2,t);if(r<e)return r;e--}return 0}function d1(n){return n>=56320&&n<57344}function f1(n){return n>=55296&&n<56320}function St(n,e){let t=n.charCodeAt(e);if(!f1(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return d1(r)?(t-55296<<10)+(r-56320)+65536:t}function dh(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function dn(n){return n<65536?1:2}const Ud=/\r\n?|\n/;var kt=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(kt||(kt={}));class zn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){zd(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new zn(e)}composeDesc(e){return this.empty?e:e.empty?this:h1(this,e)}mapDesc(e,t=!1){return e.empty?this:Wd(this,e,t)}mapPos(e,t=-1,r=kt.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=kt.Simple&&c>=e&&(r==kt.TrackDel&&i<e&&c>e||r==kt.TrackBefore&&i<e||r==kt.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!a)return e==i||t<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new zn(e)}static create(e){return new zn(e)}}class ct extends zn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return zd(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return Wd(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Ce.empty);r.push(o?e.slice(s,s+o):Ce.empty)}s+=o}return new ct(t,r)}compose(e){return this.empty?e:e.empty?this:h1(this,e,!0)}map(e,t=!1){return e.empty?this:Wd(this,e,t,!0)}iterChanges(e,t=!1){zd(this,e,t)}get desc(){return zn.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new Fs(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);It(i,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;It(t,u,d),d>0&&vr(r,t,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);It(t,u,-1),It(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new ct(t,r),filtered:zn.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<t&&It(i,t-o,-1);let d=new ct(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof ct){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:h=d,insert:p}=u;if(d>h||d<0||h>t)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${t})`);let g=p?typeof p=="string"?Ce.of(p.split(r||Ud)):p:Ce.empty,m=g.length;if(d==h&&m==0)return;d<o&&l(),d>o&&It(i,d-o,-1),It(i,h-d,m),vr(s,i,g),o=h}}return c(e),l(!a),a}static empty(e){return new ct(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(Ce.empty);r[i]=Ce.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new ct(t,r)}static createSet(e,t){return new ct(e,t)}}function It(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function vr(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Ce.empty);n.push(t)}}function zd(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,d=Ce.empty;for(;c+=a,u+=l,l&&r&&(d=d.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(i,c,s,u,d),i=c,s=u}}}function Wd(n,e,t,r=!1){let i=[],s=r?[]:null,o=new Fs(n),a=new Fs(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);It(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let c=a.len;for(It(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(It(i,0,o.ins),s&&vr(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;It(i,c,l<o.i?o.ins:0),s&&l<o.i&&vr(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?ct.createSet(i,s):zn.create(i);throw new Error("Mismatched change set lengths")}}function h1(n,e,t=!1){let r=[],i=t?[]:null,s=new Fs(n),o=new Fs(e);for(let a=!1;;){if(s.done&&o.done)return i?ct.createSet(r,i):zn.create(r);if(s.ins==0)It(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)It(r,0,o.ins,a),i&&vr(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;It(r,l,u,a),i&&u&&vr(i,r,o.text)}else o.ins==-1?(It(r,s.off?0:s.len,l,a),i&&vr(i,r,s.textBit(l))):(It(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&vr(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class Fs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ce.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Ce.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Vr{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Vr(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return B.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return B.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return B.range(e.anchor,e.head)}static create(e,t,r){return new Vr(e,t,r)}}class B{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:B.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new B([this.main],0)}addRange(e,t=!0){return B.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,B.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new B(e.ranges.map(t=>Vr.fromJSON(t)),e.main)}static single(e,t=e){return new B([B.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return B.normalized(e.slice(),t);r=s.to}return new B(e,t)}static cursor(e,t=0,r,i){return Vr.create(e,e,(t==0?0:t<0?4:8)|(r==null?3:Math.min(2,r))|(i??33554431)<<5)}static range(e,t,r,i){let s=(r??33554431)<<5|(i==null?3:Math.min(2,i));return t<e?Vr.create(t,e,24|s):Vr.create(e,t,(t>e?4:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?B.range(l,a):B.range(a,l))}}return new B(e,t)}}function p1(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let fh=0;class Y{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=fh++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new Y(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:hh),!!e.static,e.enables)}of(e){return new ql([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ql(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ql(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function hh(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class ql{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=fh++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:(((t=e[d.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||qd(d,u)){let p=r(d);if(a?!Up(p,d.values[o],i):!i(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,h)=>{let p,g=h.config.address[s];if(g!=null){let m=xc(h,g);if(this.dependencies.every(v=>v instanceof Y?h.facet(v)===d.facet(v):v instanceof bt?h.field(v,!1)==d.field(v,!1):!0)||(a?Up(p=r(d),m,i):i(p=r(d),m)))return d.values[o]=m,0}else p=r(d);return d.values[o]=p,1}}}}function Up(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function qd(n,e){let t=!1;for(let r of e)Es(n,r)&1&&(t=!0);return t}function kR(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),s=r.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let d=xc(l,r[u]);if(i[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(l){for(let c of r)Es(l,c);return l.values[o]=a(l),1},update(l,c){if(!qd(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=qd(l,r),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&hh(t,d))return l.values[o]=h,0;let p=a(l);return e.compare(p,h)?(l.values[o]=h,0):(l.values[o]=p,1)}}}const zp=Y.define({static:!0});class bt{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new bt(fh++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(zp).find(r=>r.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,zp.of({field:this,create:e})]}get extension(){return this}}const $r={lowest:4,low:3,default:2,high:1,highest:0};function fs(n){return e=>new m1(e,n)}const ti={highest:fs($r.highest),high:fs($r.high),default:fs($r.default),low:fs($r.low),lowest:fs($r.lowest)};class m1{constructor(e,t){this.inner=e,this.prec=t}}class uu{of(e){return new Gd(this,e)}reconfigure(e){return uu.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Gd{constructor(e,t){this.compartment=e,this.inner=t}}class bc{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let h of AR(e,t,o))h instanceof bt?i.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],c=[];for(let h of i)a[h.id]=c.length<<1,c.push(p=>h.slot(p));let u=r?.config.facets;for(let h in s){let p=s[h],g=p[0].facet,m=u&&u[h]||[];if(p.every(v=>v.type==0))if(a[g.id]=l.length<<1|1,hh(m,p))l.push(r.facet(g));else{let v=g.combine(p.map(b=>b.value));l.push(r&&g.compare(v,r.facet(g))?r.facet(g):v)}else{for(let v of p)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(b=>v.dynamicSlot(b)));a[g.id]=c.length<<1,c.push(v=>kR(v,g,p))}}let d=c.map(h=>h(a));return new bc(e,o,d,a,l,s)}}function AR(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof Gd&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof Gd){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,a)}else if(o instanceof m1)s(o.inner,o.prec);else if(o instanceof bt)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof ql)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,$r.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(n,$r.default),r.reduce((o,a)=>o.concat(a))}function Es(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function xc(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const g1=Y.define(),v1=Y.define({combine:n=>n.some(e=>e),static:!0}),b1=Y.define({combine:n=>n.length?n[0]:void 0,static:!0}),x1=Y.define(),y1=Y.define(),w1=Y.define(),S1=Y.define({combine:n=>n.length?n[0]:!1});class Kn{constructor(e,t){this.type=e,this.value=t}static define(){return new MR}}class MR{of(e){return new Kn(this,e)}}class IR{constructor(e){this.map=e}of(e){return new pe(this,e)}}class pe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new pe(this.type,t)}is(e){return this.type==e}static define(e={}){return new IR(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}pe.reconfigure=pe.define();pe.appendConfig=pe.define();class ut{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&p1(r,t.newLength),s.some(a=>a.type==ut.time)||(this.annotations=s.concat(ut.time.of(Date.now())))}static create(e,t,r,i,s,o){return new ut(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(ut.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}ut.time=Kn.define();ut.userEvent=Kn.define();ut.addToHistory=Kn.define();ut.remote=Kn.define();function ER(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function C1(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=ct.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:pe.mapEffects(n.effects,i).concat(pe.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Kd(n,e,t){let r=e.selection,i=Li(e.annotations);return e.userEvent&&(i=i.concat(ut.userEvent.of(e.userEvent))),{changes:e.changes instanceof ct?e.changes:ct.of(e.changes||[],t,n.facet(b1)),selection:r&&(r instanceof B?r:B.single(r.anchor,r.head)),effects:Li(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function k1(n,e,t){let r=Kd(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=C1(r,Kd(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=ut.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return RR(t?DR(i):i)}function DR(n){let e=n.startState,t=!0;for(let i of e.facet(x1)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:ER(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=ct.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=ut.create(e,i,n.selection&&n.selection.map(s),pe.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(y1);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof ut?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof ut?n=s[0]:n=k1(e,Li(s),!1)}return n}function RR(n){let e=n.startState,t=e.facet(w1),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=C1(r,Kd(e,s,n.changes.newLength),!0))}return r==n?n:ut.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const OR=[];function Li(n){return n==null?OR:Array.isArray(n)?n:[n]}var ze=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(ze||(ze={}));const TR=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Zd;try{Zd=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function NR(n){if(Zd)return Zd.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||TR.test(t)))return!0}return!1}function PR(n){return e=>{if(!/\S/.test(e))return ze.Space;if(NR(e))return ze.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ze.Word;return ze.Other}}class ye{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Es(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Es(this,r),xc(this,r)}update(...e){return k1(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let o of e.effects)o.is(uu.reconfigure)?(t&&(i=new Map,t.compartments.forEach((a,l)=>i.set(l,a)),t=null),i.set(o.value.compartment,o.value.extension)):o.is(pe.reconfigure)?(t=null,r=o.value):o.is(pe.appendConfig)&&(t=null,r=Li(r).concat(o.value));let s;t?s=e.startState.values.slice():(t=bc.resolve(r,i,this),s=new ye(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new ye(t,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:B.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Li(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let h=0;h<a;h++)s[h]=s[h].map(u);let d=i.mapDesc(c,!0);s.push(l.range.map(d)),i=i.compose(u),o=pe.mapEffects(o,u).concat(pe.mapEffects(Li(l.effects),d))}return{changes:i,selection:B.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ct?e:ct.of(e,this.doc.length,this.facet(ye.lineSeparator))}toText(e){return Ce.of(e.split(this.facet(ye.lineSeparator)||Ud))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Es(this,t),xc(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof bt&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ye.create({doc:e.doc,selection:B.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=bc.resolve(e.extensions||[],new Map),r=e.doc instanceof Ce?e.doc:Ce.of((e.doc||"").split(t.staticFacet(ye.lineSeparator)||Ud)),i=e.selection?e.selection instanceof B?e.selection:B.single(e.selection.anchor,e.selection.head):B.single(0);return p1(i,r.length),t.staticFacet(v1)||(i=i.asSingle()),new ye(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ye.tabSize)}get lineBreak(){return this.facet(ye.lineSeparator)||`
`}get readOnly(){return this.facet(S1)}phrase(e,...t){for(let r of this.facet(ye.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(g1))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return PR(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Et(t,o,!1);if(s(t.slice(l,o))!=ze.Word)break;o=l}for(;a<i;){let l=Et(t,a);if(s(t.slice(a,l))!=ze.Word)break;a=l}return o==a?null:B.range(o+r,a+r)}}ye.allowMultipleSelections=v1;ye.tabSize=Y.define({combine:n=>n.length?n[0]:4});ye.lineSeparator=b1;ye.readOnly=S1;ye.phrases=Y.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});ye.languageData=g1;ye.changeFilter=x1;ye.transactionFilter=y1;ye.transactionExtender=w1;uu.reconfigure=pe.define();function Zn(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Zr{eq(e){return this==e}range(e,t=e){return Yd.create(e,t,this)}}Zr.prototype.startSide=Zr.prototype.endSide=0;Zr.prototype.point=!1;Zr.prototype.mapMode=kt.TrackDel;let Yd=class A1{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new A1(e,t,r)}};function Jd(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class ph{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,h,p;if(u==d){let g=t.mapPos(u,c.startSide,c.mapMode);if(g==null||(h=p=g,c.startSide!=c.endSide&&(p=t.mapPos(u,c.endSide),p<h)))continue}else if(h=t.mapPos(u,c.startSide),p=t.mapPos(d,c.endSide),h>p||h==p&&c.startSide>0&&c.endSide<=0)continue;(p-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(a=Math.max(a,p-h)),r.push(c),i.push(h-o),s.push(p-o))}return{mapped:r.length?new ph(i,s,r,a):null,pos:o}}}class Ne{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Ne(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(Jd)),this.isEmpty)return t.length?Ne.of(t):this;let a=new M1(this,null,-1).goto(0),l=0,c=[],u=new Cr;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let d=t[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(Yd.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Ne.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),t.push(u),r.push(d))}}let s=this.nextLayer.map(e);return t.length==0?s:new Ne(r,t,s||Ne.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Hs.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Hs.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=Wp(o,a,r),c=new hs(o,l,s),u=new hs(a,l,s);r.iterGaps((d,h,p)=>qp(c,d,u,h,p,i)),r.empty&&r.length==0&&qp(c,0,u,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Wp(s,o),l=new hs(s,a,0).goto(r),c=new hs(o,a,0).goto(r);for(;;){if(l.to!=c.to||!Xd(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,t,r,i,s=-1){let o=new hs(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<t?u.length+1:Math.min(u.length,l);i.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,t=!1){let r=new Cr;for(let i of e instanceof Yd?[e]:t?LR(e):e)r.add(i.from,i.to,i.value);return r.finish()}}Ne.empty=new Ne([],[],null,-1);function LR(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(Jd(e,r)>0)return n.slice().sort(Jd);e=r}return n}Ne.empty.nextLayer=Ne.empty;class Cr{finishChunk(e){this.chunks.push(new ph(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Cr)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Ne.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ne.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Wp(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!t?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class M1{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Hs{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new M1(o,t,r,s));return i.length==1?i[0]:new Hs(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Zu(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Zu(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Zu(this.heap,0)}}}function Zu(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class hs{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Hs.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){No(this.active,e),No(this.activeTo,e),No(this.activeRank,e),this.minActive=Gp(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;Po(this.active,t,r),Po(this.activeTo,t,i),Po(this.activeRank,t,s),e&&Po(e,t,this.cursor.from),this.minActive=Gp(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&No(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function qp(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=n.to+l-t.to||n.endSide-t.endSide,u=c<0?n.to+l:t.to,d=Math.min(u,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Xd(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(a,d,n.point,t.point):d>a&&!Xd(n.active,t.active)&&s.compareRange(a,d,n.active,t.active),u>o)break;a=u,c<=0&&n.next(),c>=0&&t.next()}}function Xd(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function No(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Po(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function Gp(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function co(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Et(n,i));return r}function Qd(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=Et(n,i)}return r===!0?-1:n.length}const ef="",Kp=typeof Symbol>"u"?"__"+ef:Symbol.for(ef),tf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Zp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class kr{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(i(p),g,u,h)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(u.length||h)&&l.push((r&&!d&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Zp[Kp]||1;return Zp[Kp]=e+1,ef+e.toString(36)}static mount(e,t,r){let i=e[tf],s=r&&r.nonce;i?s&&i.setNonce(s):i=new _R(e,s),i.mount(Array.isArray(t)?t:[t])}}let Yp=new Map;class _R{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=Yp.get(r);if(s)return e.adoptedStyleSheets=[s.sheet,...e.adoptedStyleSheets],e[tf]=s;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Yp.set(r,this)}else{this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);let s=e.head||e;s.insertBefore(this.styleTag,s.firstChild)}this.modules=[],e[tf]=this}mount(e){let t=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),t)for(let l=0;l<o.rules.length;l++)t.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!t){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ar={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},jR=typeof navigator<"u"&&/Mac/.test(navigator.platform),BR=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ct=0;Ct<10;Ct++)Ar[48+Ct]=Ar[96+Ct]=String(Ct);for(var Ct=1;Ct<=24;Ct++)Ar[Ct+111]="F"+Ct;for(var Ct=65;Ct<=90;Ct++)Ar[Ct]=String.fromCharCode(Ct+32),Vs[Ct]=String.fromCharCode(Ct);for(var Yu in Ar)Vs.hasOwnProperty(Yu)||(Vs[Yu]=Ar[Yu]);function $R(n){var e=jR&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||BR&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Vs:Ar)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function yc(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function nf(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function FR(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Gl(n,e){if(!e.anchorNode)return!1;try{return nf(n,e.anchorNode)}catch{return!1}}function Vi(n){return n.nodeType==3?Yr(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function wc(n,e,t,r){return t?Jp(n,e,t,r,-1)||Jp(n,e,t,r,1):!1}function Sc(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Jp(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Mr(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Sc(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Mr(n):0}else return!1}}function Mr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function du(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function HR(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function VR(n,e,t,r,i,s,o,a){let l=n.ownerDocument,c=l.defaultView||window;for(let u=n,d=!1;u&&!d;)if(u.nodeType==1){let h,p=u==l.body;if(p)h=HR(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let v=u.getBoundingClientRect();h={left:v.left,right:v.left+u.clientWidth,top:v.top,bottom:v.top+u.clientHeight}}let g=0,m=0;if(i=="nearest")e.top<h.top?(m=-(h.top-e.top+o),t>0&&e.bottom>h.bottom+m&&(m=e.bottom-h.bottom+m+o)):e.bottom>h.bottom&&(m=e.bottom-h.bottom+o,t<0&&e.top-m<h.top&&(m=-(h.top+m-e.top+o)));else{let v=e.bottom-e.top,b=h.bottom-h.top;m=(i=="center"&&v<=b?e.top+v/2-b/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-b+o)-h.top}if(r=="nearest"?e.left<h.left?(g=-(h.left-e.left+s),t>0&&e.right>h.right+g&&(g=e.right-h.right+g+s)):e.right>h.right&&(g=e.right-h.right+s,t<0&&e.left<h.left+g&&(g=-(h.left+g-e.left+s))):g=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,g||m)if(p)c.scrollBy(g,m);else{let v=0,b=0;if(m){let y=u.scrollTop;u.scrollTop+=m,b=u.scrollTop-y}if(g){let y=u.scrollLeft;u.scrollLeft+=g,v=u.scrollLeft-y}e={left:e.left-v,top:e.top-b,right:e.right-v,bottom:e.bottom-b},v&&Math.abs(v-g)<1&&(r="nearest"),b&&Math.abs(b-m)<1&&(i="nearest")}if(p)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function UR(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class zR{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?Mr(t):0),r,Math.min(e.focusOffset,r?Mr(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let oi=null;function I1(n){if(n.setActive)return n.setActive();if(oi)return n.focus(oi);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(oi==null?{get preventScroll(){return oi={preventScroll:!0},!0}}:void 0),!oi){oi=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Xp;function Yr(n,e,t=e){let r=Xp||(Xp=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function _i(n,e,t){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,n.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function WR(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function E1(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function qR(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,Mr(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=Mr(t))}else{if(t==n)return!0;r=Sc(t),t=t.parentNode}}function D1(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}class Bt{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new Bt(e.parentNode,Sc(e),t)}static after(e,t){return new Bt(e.parentNode,Sc(e)+1,t)}}const mh=[];class Fe{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=Fe.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=Qp(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=Qp(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=Mr(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Fe.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let d=this.children[l],h=c+d.length;if(c<e&&h>t)return d.domBoundsAround(e,t,c);if(h>=e&&i==-1&&(i=l,s=c),c>t&&d.dom.parentNode==this.dom){o=l,a=u;break}u=h,c=h+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=mh){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new R1(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}Fe.prototype.breakAfter=0;function Qp(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class R1{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function O1(n,e,t,r,i,s,o,a,l){let{children:c}=n,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==r&&u&&!o&&!h&&s.length<2&&u.merge(t,i,s.length?d:null,t==0,a,l))){if(r<c.length){let p=c[r];p&&i<p.length?(e==r&&(p=p.split(i),i=0),!h&&d&&p.merge(0,i,d,!0,0,l)?s[s.length-1]=p:(i&&p.merge(0,i,null,!1,0,l),s.push(p))):p?.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function T1(n,e,t,r,i,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),d=e-t;for(let h of r)d+=h.length;n.length+=d,O1(n,c,u,a,l,r,0,i,s)}const Ai="";class N1{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ye.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ai}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let a=Fe.get(i),l=Fe.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:em(i))||em(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=Fe.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}}function em(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class tm{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}let sn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},rf=typeof document<"u"?document:{documentElement:{style:{}}};const sf=/Edge\/(\d+)/.exec(sn.userAgent),P1=/MSIE \d/.test(sn.userAgent),of=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(sn.userAgent),fu=!!(P1||of||sf),nm=!fu&&/gecko\/(\d+)/i.test(sn.userAgent),Ju=!fu&&/Chrome\/(\d+)/.exec(sn.userAgent),GR="webkitFontSmoothing"in rf.documentElement.style,L1=!fu&&/Apple Computer/.test(sn.vendor),rm=L1&&(/Mobile\/\w+/.test(sn.userAgent)||sn.maxTouchPoints>2);var J={mac:rm||/Mac/.test(sn.platform),windows:/Win/.test(sn.platform),linux:/Linux|X11/.test(sn.platform),ie:fu,ie_version:P1?rf.documentMode||6:of?+of[1]:sf?+sf[1]:0,gecko:nm,gecko_version:nm?+(/Firefox\/(\d+)/.exec(sn.userAgent)||[0,0])[1]:0,chrome:!!Ju,chrome_version:Ju?+Ju[1]:0,ios:rm,android:/Android\b/.test(sn.userAgent),safari:L1,webkit_version:GR?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:rf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const KR=256;class Wn extends Fe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof Wn)||this.length-(t-e)+r.length>KR||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Wn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Bt(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return ZR(this.dom,e,t)}}class tr extends Fe{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(E1(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof tr&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(T1(this,e,t,r?r.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new tr(this.mark,t,o)}domAtPos(e){return _1(this,e)}coordsAt(e,t){return B1(this,e,t)}}function ZR(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?J.chrome||J.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let a=Yr(n,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return J.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?du(l,o<0):l||null}class br extends Fe{static create(e,t,r){return new br(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=br.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof br)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof br&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ce.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Ce.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Bt.before(this.dom):Bt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return du(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ui extends Fe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ui&&e.side==this.side}split(){return new Ui(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Bt.before(this.dom):Bt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ce.empty}get isHidden(){return!0}}Wn.prototype.children=br.prototype.children=Ui.prototype.children=mh;function _1(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new Bt(t,0)}function j1(n,e,t){let r,{children:i}=n;t>0&&e instanceof tr&&i.length&&(r=i[i.length-1])instanceof tr&&r.mark.eq(e.mark)?j1(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function B1(n,e,t){let r=null,i=-1,s=null,o=-1;function a(c,u){for(let d=0,h=0;d<c.children.length&&h<=u;d++){let p=c.children[d],g=h+p.length;g>=u&&(p.children.length?a(p,u-h):(!s||s.isHidden&&t>0)&&(g>u||h==g&&p.getSide()>0)?(s=p,o=u-h):(h<u||h==g&&p.getSide()<0&&!p.isHidden)&&(r=p,i=u-h)),h=g}}a(n,e);let l=(t<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),t):YR(n)}function YR(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Vi(e);return t[t.length-1]||null}function af(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const im=Object.create(null);function gh(n,e,t){if(n==e)return!0;n||(n=im),e||(e=im);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function lf(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function JR(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class ir{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}destroy(e){}}var Ge=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Ge||(Ge={}));class le extends Zr{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new uo(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ir(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=$1(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new Ir(e,r,i,t,e.widget||null,!0)}static line(e){return new fo(e)}static set(e,t=!1){return Ne.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}le.none=Ne.empty;class uo extends le{constructor(e){let{start:t,end:r}=$1(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof uo&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&gh(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}uo.prototype.point=!1;class fo extends le{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof fo&&this.spec.class==e.spec.class&&gh(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}fo.prototype.mapMode=kt.TrackBefore;fo.prototype.point=!0;class Ir extends le{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?kt.TrackBefore:kt.TrackAfter:kt.TrackDel}get type(){return this.startSide<this.endSide?Ge.WidgetRange:this.startSide<=0?Ge.WidgetBefore:Ge.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ir&&XR(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Ir.prototype.point=!0;function $1(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function XR(n,e){return n==e||!!(n&&e&&n.compare(e))}function cf(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class jt extends Fe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof jt))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),T1(this,e,t,r?r.children:[],s,o),!0}split(e){let t=new jt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){gh(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){j1(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=af(t,this.attrs||{})),r&&(this.attrs=af({class:r},this.attrs||{}))}domAtPos(e){return _1(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(E1(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(lf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Fe.get(i)instanceof tr;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Fe.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!J.ios||!this.children.some(s=>s instanceof Wn))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof Wn)||/[^ -~]/.test(r.text))return null;let i=Vi(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=B1(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return!1}get type(){return Ge.Text}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof jt)return s;if(o>t)break}i=o+s.breakAfter}return null}}class Wr extends Fe{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof Wr)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Bt.before(this.dom):Bt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Wr(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return mh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ce.empty}domBoundsAround(){return null}become(e){return e instanceof Wr&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ds{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Wr&&e.type==Ge.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new jt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Lo(new Ui(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Lo(new Wn(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Ir){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof Ir)if(r.block){let{type:l}=r;l==Ge.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Wr(r.widget||new sm("div"),a,l))}else{let l=br.create(r.widget||new sm("span"),a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||r.startSide>0),u=!l.isEditable&&(e<t||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(d.append(Lo(new Ui(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(Lo(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new Ds(e,t,r,s);return o.openEnd=Ne.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Lo(n,e){for(let t of e)n=new tr(t,[n],n.length);return n}class sm extends ir{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const F1=Y.define(),H1=Y.define(),V1=Y.define(),U1=Y.define(),uf=Y.define(),z1=Y.define(),W1=Y.define(),q1=Y.define({combine:n=>n.some(e=>e)}),G1=Y.define({combine:n=>n.some(e=>e)});class Cc{constructor(e,t="nearest",r="nearest",i=5,s=5){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s}map(e){return e.empty?this:new Cc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const om=pe.define({map:(n,e)=>n.map(e)});function pn(n,e,t){let r=n.facet(U1);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const hu=Y.define({combine:n=>n.length?n[0]:!0});let QR=0;const bs=Y.define();class it{constructor(e,t,r,i){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:r,provide:i,decorations:s}=t||{};return new it(QR++,e,r,o=>{let a=[bs.of(o)];return s&&a.push(Us.of(l=>{let c=l.plugin(o);return c?s(c):le.none})),i&&a.push(i(o)),a})}static fromClass(e,t){return it.define(r=>new e(r),t)}}class Xu{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(pn(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){pn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){pn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const K1=Y.define(),vh=Y.define(),Us=Y.define(),bh=Y.define(),Z1=Y.define();function am(n,e,t){let r=n.state.facet(Z1);if(!r.length)return r;let i=r.map(o=>o instanceof Function?o(n):o),s=[];return Ne.spans(i,e,t,{point(){},span(o,a,l,c){let u=s;for(let d=l.length-1;d>=0;d--,c--){let h=l[d].spec.bidiIsolate,p;if(h!=null)if(c>0&&u.length&&(p=u[u.length-1]).to==o&&p.direction==h)p.to=a,u=p.inner;else{let g={from:o,to:a,direction:h,inner:[]};u.push(g),u=g.inner}}}}),s}const Y1=Y.define();function J1(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(Y1)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}const xs=Y.define();class mn{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new mn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<t.length&&t[s]<u;){let d=t[s],h=t[s+1],p=Math.max(a,d),g=Math.min(u,h);if(p<=g&&new mn(p+c,g+c,p,g).addToSet(r),h>u)break;s+=2}if(!l)return r;new mn(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class kc{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=ct.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new mn(s,o,a,l))),this.changedRanges=i}static create(e,t,r){return new kc(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var qe=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(qe||(qe={}));const zs=qe.LTR,X1=qe.RTL;function Q1(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const eO=Q1("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),tO=Q1("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),df=Object.create(null),Rn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);df[e]=t,df[t]=-e}function nO(n){return n<=247?eO[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?tO[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const rO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class xr{get dir(){return this.level%2?X1:zs}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function ey(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!ey(r.inner,i.inner))return!1}return!0}const je=[];function iO(n,e,t,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:t,l=s?256:i;for(let c=o,u=l,d=l;c<a;c++){let h=nO(n.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),je[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=o,u=l,d=l;c<a;c++){let h=je[c];if(h==128)c<a-1&&u==je[c+1]&&u&24?h=je[c]=u:je[c]=256;else if(h==64){let p=c+1;for(;p<a&&je[p]==64;)p++;let g=c&&u==8||p<t&&je[p]==8?d==1?1:8:256;for(let m=c;m<p;m++)je[m]=g;c=p-1}else h==8&&d==1&&(je[c]=1);u=h,h&7&&(d=h)}}}function sO(n,e,t,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:t;for(let d=c,h,p,g;d<u;d++)if(p=df[h=n.charCodeAt(d)])if(p<0){for(let m=a-3;m>=0;m-=3)if(Rn[m+1]==-p){let v=Rn[m+2],b=v&2?i:v&4?v&1?s:i:0;b&&(je[d]=je[Rn[m]]=b),a=m;break}}else{if(Rn.length==189)break;Rn[a++]=d,Rn[a++]=h,Rn[a++]=l}else if((g=je[d])==2||g==1){let m=g==i;l=m?0:1;for(let v=a-3;v>=0;v-=3){let b=Rn[v+2];if(b&2)break;if(m)Rn[v+2]|=2;else{if(b&4)break;Rn[v+2]|=4}}}}}function oO(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let o=i?t[i-1].to:n,a=i<t.length?t[i].from:e;for(let l=o;l<a;){let c=je[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==t.length)break;u=t[i++].to,a=i<t.length?t[i].from:e}else if(je[u]==256)u++;else break;let d=s==1,h=(u<e?je[u]:r)==1,p=d==h?d?1:2:r;for(let g=u,m=i,v=m?t[m-1].to:n;g>l;)g==v&&(g=t[--m].from,v=m?t[m-1].to:n),je[--g]=p;l=u}else s=c,l++}}}function ff(n,e,t,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,c=0;l<t;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=je[l];m!=a&&(u=!1,d=m==16)}let h=!u&&a==1?[]:null,p=u?r:r+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(d)break e;let m=s[c];if(!u)for(let v=m.to,b=c+1;;){if(v==t)break e;if(b<s.length&&s[b].from==v)v=s[b++].to;else{if(je[v]==a)break e;break}}if(c++,h)h.push(m);else{m.from>l&&o.push(new xr(l,m.from,p));let v=m.direction==zs!=!(p%2);hf(n,v?r+1:r,i,m.inner,m.from,m.to,o),l=m.to}g=m.to}else{if(g==t||(u?je[g]!=a:je[g]==a))break;g++}h?ff(n,l,g,r+1,i,h,o):l<g&&o.push(new xr(l,g,p)),l=g}else for(let l=t,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=je[l-1];m!=a&&(u=!1,d=m==16)}let h=!u&&a==1?[]:null,p=u?r:r+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let v=m.from,b=c;;){if(v==e)break e;if(b&&s[b-1].to==v)v=s[--b].from;else{if(je[v-1]==a)break e;break}}if(h)h.push(m);else{m.to<l&&o.push(new xr(m.to,l,p));let v=m.direction==zs!=!(p%2);hf(n,v?r+1:r,i,m.inner,m.from,m.to,o),l=m.from}g=m.from}else{if(g==e||(u?je[g-1]!=a:je[g-1]==a))break;g--}h?ff(n,g,l,r+1,i,h,o):g<l&&o.push(new xr(g,l,p)),l=g}}function hf(n,e,t,r,i,s,o){let a=e%2?2:1;iO(n,i,s,r,a),sO(n,i,s,r,a),oO(i,s,r,a),ff(n,i,s,e,t,r,o)}function aO(n,e,t){if(!n)return[new xr(0,0,e==X1?1:0)];if(e==zs&&!t.length&&!rO.test(n))return ty(n.length);if(t.length)for(;n.length>je.length;)je[je.length]=256;let r=[],i=e==zs?0:1;return hf(n,i,i,t,0,n.length,r),r}function ty(n){return[new xr(0,n,0)]}let ny="";function lO(n,e,t,r,i){var s;let o=r.head-n.from,a=-1;if(o==0){if(!i||!n.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),a=0)}else if(o==n.length){if(i)return null;let h=e[e.length-1];h.level!=t&&(o=h.side(!0,t),a=e.length-1)}a<0&&(a=xr.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc));let l=e[a];o==l.side(i,t)&&(l=e[a+=i?1:-1],o=l.side(!i,t));let c=i==(l.dir==t),u=Et(n.text,o,c);if(ny=n.text.slice(Math.min(o,u),Math.max(o,u)),u!=l.side(i,t))return B.cursor(u+n.from,c?-1:1,l.level);let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return!d&&l.level!=t?B.cursor(i?n.to:n.from,i?-1:1,t):d&&d.level<l.level?B.cursor(d.side(!i,t)+n.from,i?1:-1,d.level):B.cursor(u+n.from,i?-1:1,l.level)}class lm extends Fe{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new jt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new mn(0,0,0,e.state.doc.length)],0,null)}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=this.view.inputState.composing<0?null:uO(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:a,to:l}=this.hasComposition;t=new mn(a,l,e.changes.mapPos(a,-1),e.changes.mapPos(l,1)).addToSet(t.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(J.ie||J.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,s=this.updateDeco(),o=hO(i,s,e.changes);return t=mn.extendWithRanges(t,o),!(this.flags&7)&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=J.chrome||J.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Wr&&o.widget instanceof cm&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,h,p,g,m;if(r&&r.range.fromB<d&&r.range.toB>u){let w=Ds.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),C=Ds.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);p=w.breakAtStart,g=w.openStart,m=C.openEnd;let A=this.compositionView(r);C.breakAtStart?A.breakAfter=1:C.content.length&&A.merge(A.length,A.length,C.content[0],!1,C.openStart,0)&&(A.breakAfter=C.content[0].breakAfter,C.content.shift()),w.content.length&&A.merge(0,0,w.content[w.content.length-1],!0,0,w.openEnd)&&w.content.pop(),h=w.content.concat(A).concat(C.content)}else({content:h,breakAtStart:p,openStart:g,openEnd:m}=Ds.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:b}=s.findPos(c,1),{i:y,off:S}=s.findPos(l,-1);O1(this,y,S,v,b,h,p,g,m)}r&&this.fixCompositionDOM(r)}compositionView(e){let t=new Wn(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new tr(i,[t],t.length);let r=new jt;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let a=Fe.get(s);a!=o&&(a&&(a.dom=null),o.setDOM(s))},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&Gl(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.domAtPos(a.anchor),c=a.empty?l:this.domAtPos(a.head);if(J.gecko&&a.empty&&!this.hasComposition&&cO(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new Bt(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||!wc(l.node,l.offset,u.anchorNode,u.anchorOffset)||!wc(c.node,c.offset,u.focusNode,u.focusOffset))&&(this.view.observer.ignore(()=>{J.android&&J.chrome&&this.dom.contains(u.focusNode)&&pO(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=yc(this.view.root);if(d)if(a.empty){if(J.gecko){let h=dO(l.node,l.offset);if(h&&h!=3){let p=iy(l.node,l.offset,h==1?1:-1);p&&(l=new Bt(p,h==1?0:p.nodeValue.length))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&u.caretBidiLevel!=null&&(u.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),h.setEnd(c.node,c.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new Bt(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new Bt(u.focusNode,u.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=yc(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=jt.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);r.collapse(u.node,u.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&r.collapse(i,s)}nearest(e){for(let t=e;t;){let r=Fe.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof jt)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,i=this.children.length-1;;i--){let s=this.children[i],o=r-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Ge.WidgetBefore&&s.type!=Ge.WidgetAfter&&(!i||t==2||this.children[i-1].breakAfter||this.children[i-1].type==Ge.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);r=o}}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof jt))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof Wn))return null;let s=Et(i.text,r);if(s==r)return null;let o=Yr(i.dom,r,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==qe.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(h>i)break;if(c>=r){let p=d.dom.getBoundingClientRect();if(t.push(p.height),o){let g=d.dom.lastChild,m=g?Vi(g):[];if(m.length){let v=m[m.length-1],b=l?v.right-p.left:p.right-v.left;b>a&&(a=b,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?qe.RTL:qe.LTR}measureTextSize(){for(let s of this.children)if(s instanceof jt){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Vi(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new R1(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=t.lineBlockAt(o).bottom-t.lineBlockAt(r).top;e.push(le.replace({widget:new cm(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return le.set(e)}updateDeco(){let e=this.view.state.facet(Us).map((t,r)=>(this.dynamicDecorationMap[r]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=J1(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom};VR(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==qe.LTR)}}function cO(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class cm extends ir{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function ry(n){let e=n.observer.selectionRange,t=e.focusNode&&iy(e.focusNode,e.focusOffset,0);if(!t)return null;let r=Fe.get(t),i,s;if(r instanceof Wn)i=r.posAtStart,s=i+r.length;else e:for(let o=0,a=t;;){for(let c=a.previousSibling,u;c;c=c.previousSibling){if(u=Fe.get(c)){i=s=u.posAtEnd+o;break e}let d=new N1([],n.state);if(d.readNode(c),d.text.indexOf(Ai)>-1)return null;o+=d.text.length}if(a=a.parentNode,!a)return null;let l=Fe.get(a);if(l){i=s=l.posAtStart+o;break}}return{from:i,to:s,node:t}}function uO(n,e){let t=ry(n);if(!t)return null;let{from:r,to:i,node:s}=t,o=e.mapPos(r,-1),a=e.mapPos(i,1),l=s.nodeValue;if(/[\n\r]/.test(l))return null;if(a-o!=l.length){let h=e.mapPos(r,1),p=e.mapPos(i,-1);if(p-h==l.length)o=h,a=p;else if(n.state.doc.sliceString(a-l.length,a)==l)o=a-l.length;else if(n.state.doc.sliceString(o,o+l.length)==l)a=o+l.length;else return null}let{main:c}=n.state.selection;if(n.state.doc.sliceString(o,a)!=l||o>c.head||a<c.head)return null;let u=[],d=new mn(r,i,o,a);for(let h=s.parentNode;;h=h.parentNode){let p=Fe.get(h);if(p instanceof tr)u.push({node:h,deco:p.mark});else{if(p instanceof jt||h.nodeName=="DIV"&&h.parentNode==n.contentDOM)return{range:d,text:s,marks:u,line:h};if(h!=n.contentDOM)u.push({node:h,deco:new uo({inclusive:!0,attributes:JR(h),tagName:h.tagName.toLowerCase()})});else return null}}}function iy(n,e,t){if(t<=0)for(let r=n,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i>0)r=r.childNodes[i-1],i=Mr(r);else break}if(t>=0)for(let r=n,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i<r.childNodes.length&&t>=0)r=r.childNodes[i],i=0;else break}return null}function dO(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let fO=class{constructor(){this.changes=[]}compareRange(e,t){cf(e,t,this.changes)}comparePoint(e,t){cf(e,t,this.changes)}};function hO(n,e,t){let r=new fO;return Ne.compare(n,e,t,r),r.changes}function pO(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function mO(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return B.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,a=s;t<0?o=Et(i.text,s,!1):a=Et(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Et(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Et(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return B.range(o+i.from,a+i.from)}function gO(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function vO(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Qu(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function um(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function dm(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function pf(n,e,t){let r,i,s,o,a=!1,l,c,u,d;for(let g=n.firstChild;g;g=g.nextSibling){let m=Vi(g);for(let v=0;v<m.length;v++){let b=m[v];i&&Qu(i,b)&&(b=um(dm(b,i.bottom),i.top));let y=gO(e,b),S=vO(t,b);if(y==0&&S==0)return g.nodeType==3?fm(g,e,t):pf(g,e,t);if(!r||o>S||o==S&&s>y){r=g,i=b,s=y,o=S;let w=S?t<b.top?-1:1:y?e<b.left?-1:1:0;a=!w||(w>0?v<m.length-1:v>0)}y==0?t>b.bottom&&(!u||u.bottom<b.bottom)?(l=g,u=b):t<b.top&&(!d||d.top>b.top)&&(c=g,d=b):u&&Qu(u,b)?u=dm(u,b.bottom):d&&Qu(d,b)&&(d=um(d,b.top))}}if(u&&u.bottom>=t?(r=l,i=u):d&&d.top<=t&&(r=c,i=d),!r)return{node:n,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return fm(r,h,t);if(a&&r.contentEditable!="false")return pf(r,h,t);let p=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:p}}function fm(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Yr(n,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let h=e>=(u.left+u.right)/2,p=h;if((J.chrome||J.gecko)&&Yr(n,a).getBoundingClientRect().left==u.right&&(p=!h),d<=0)return{node:n,offset:a+(p?1:0)};i=a+(p?1:0),s=d}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function sy(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:c}=n.viewState,{x:u,y:d}=e,h=d-a;if(h<0)return 0;if(h>c)return n.state.doc.length;for(let w=n.viewState.heightOracle.textHeight/2,C=!1;l=n.elementAtHeight(h),l.type!=Ge.Text;)for(;h=r>0?l.bottom+w:l.top-w,!(h>=0&&h<=c);){if(C)return t?null:0;C=!0,r=-r}d=a+h;let p=l.from;if(p<n.viewport.from)return n.viewport.from==0?0:t?null:hm(n,o,l,u,d);if(p>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:hm(n,o,l,u,d);let g=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:g,v=m.elementFromPoint(u,d);v&&!n.contentDOM.contains(v)&&(v=null),v||(u=Math.max(o.left+1,Math.min(o.right-1,u)),v=m.elementFromPoint(u,d),v&&!n.contentDOM.contains(v)&&(v=null));let b,y=-1;if(v&&((i=n.docView.nearest(v))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let w=g.caretPositionFromPoint(u,d);w&&({offsetNode:b,offset:y}=w)}else if(g.caretRangeFromPoint){let w=g.caretRangeFromPoint(u,d);w&&({startContainer:b,startOffset:y}=w,(!n.contentDOM.contains(b)||J.safari&&bO(b,y,u)||J.chrome&&xO(b,y,u))&&(b=void 0))}}if(!b||!n.docView.dom.contains(b)){let w=jt.find(n.docView,p);if(!w)return h>l.top+l.height/2?l.to:l.from;({node:b,offset:y}=pf(w.dom,u,d))}let S=n.docView.nearest(b);if(!S)return null;if(S.isWidget&&((s=S.dom)===null||s===void 0?void 0:s.nodeType)==1){let w=S.dom.getBoundingClientRect();return e.y<w.top||e.y<=w.bottom&&e.x<=(w.left+w.right)/2?S.posAtStart:S.posAtEnd}else return S.localPosFromDOM(b,y)+S.posAtStart}function hm(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-a)*.5)/a);s+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+Qd(o,s,n.state.tabSize)}function bO(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Yr(n,r-1,r).getBoundingClientRect().left>t}function xO(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():Yr(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function mf(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==Ge.Text))return r}return t}function yO(n,e,t,r){let i=mf(n,e.head),s=!r||i.type!=Ge.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(a==qe.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return B.cursor(l,t?-1:1)}return B.cursor(t?i.to:i.from,t?-1:1)}function pm(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let a=e,l=null;;){let c=lO(i,s,o,a,t),u=ny;if(!c){if(i.number==(t?n.state.doc.lines:1))return a;u=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),c=B.cursor(t?i.from:i.to)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function wO(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==ze.Space&&(i=o),i==o}}function SO(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return B.cursor(i,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(i),u=n.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,h=r??n.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(h+p)*s,m=sy(n,{x:d,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?m<i:m>i))return B.cursor(m,e.assoc,void 0,o)}}function Kl(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||t||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function ed(n,e,t){let r=Kl(n.state.facet(bh).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:B.cursor(r,r<t.from?1:-1)}class CO{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(r,i)=>{this.ignoreDuringComposition(i)||i.type=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():r(e,i))};for(let r in rt){let i=rt[r];e.contentDOM.addEventListener(r,s=>{mm(e,s)&&t(i,s)},gf[r]),this.registeredEvents.push(r)}e.scrollDOM.addEventListener("mousedown",r=>{if(r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(rt.mousedown,r),!r.defaultPrevented&&r.button==2)){let i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=i,200)}}),e.scrollDOM.addEventListener("drop",r=>{r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(rt.drop,r)}),J.chrome&&J.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,J.safari&&e.contentDOM.addEventListener("input",()=>null)}ensureHandlers(e,t){var r;let i;this.customHandlers=[];for(let s of t)if(i=(r=s.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});for(let o in i)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{mm(e,a)&&this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,t,r){for(let i of this.customHandlers){let s=i.handlers[e];if(s)try{if(s.call(i.plugin,r,t)||r.defaultPrevented)return!0}catch(o){pn(t.state,o)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(s){pn(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(t.keyCode!=27&&ay.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0),J.android&&J.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return J.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((r=oy.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||kO.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=r||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,_i(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:J.safari&&!J.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const oy=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],kO="dthko",ay=[16,17,18,20,91,92,224,225],_o=6;function jo(n){return Math.max(0,n)*.7+8}function AO(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class MO{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=UR(e.contentDOM),this.atoms=e.state.facet(bh).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ye.allowMultipleSelections)&&IO(e,t),this.dragging=DO(e,t)&&dy(t)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&AO(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,s=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=J1(this.view);e.clientX-o.left<=s.left+_o?r=-jo(s.left-e.clientX):e.clientX+o.right>=s.right-_o&&(r=jo(e.clientX-s.right)),e.clientY-o.top<=s.top+_o?i=-jo(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-_o&&(i=jo(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Kl(this.atoms,i.from,0);o!=i.from&&(s=B.cursor(o,-1))}else{let o=Kl(this.atoms,i.from,-1),a=Kl(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=B.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?B.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection)||r.main.assoc!=t.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function IO(n,e){let t=n.state.facet(F1);return t.length?t[0](e):J.mac?e.metaKey:e.ctrlKey}function EO(n,e){let t=n.state.facet(H1);return t.length?t[0](e):J.mac?!e.altKey:!e.ctrlKey}function DO(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=yc(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function mm(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Fe.get(t))&&r.ignoreEvent(e))return!1;return!0}const rt=Object.create(null),gf=Object.create(null),ly=J.ie&&J.ie_version<15||J.ios&&J.webkit_version<604;function RO(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),cy(n,t.value)},50)}function cy(n,e){let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(vf!=null&&t.selection.ranges.every(l=>l.empty)&&vf==s.toString()){let l=-1;r=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:d},range:B.cursor(c.from+d.length)}})}else o?r=t.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:B.cursor(l.from+c.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}rt.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27&&(n.inputState.lastEscPress=Date.now())};rt.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};rt.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};gf.touchstart=gf.touchmove={passive:!0};rt.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let r of n.state.facet(V1))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=NO(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new MO(n,e,t,r)),r&&n.observer.ignore(()=>I1(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};function gm(n,e,t,r){if(r==1)return B.cursor(e,t);if(r==2)return mO(n.state,e,t);{let i=jt.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,B.range(o,a)}}let uy=(n,e)=>n>=e.top&&n<=e.bottom,vm=(n,e,t)=>uy(e,t)&&n>=t.left&&n<=t.right;function OO(n,e,t,r){let i=jt.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&vm(t,r,o))return-1;let a=i.coordsAt(s,1);return a&&vm(t,r,a)?1:o&&uy(r,o)?-1:1}function bm(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:OO(n,t,e.clientX,e.clientY)}}const TO=J.ie&&J.ie_version<=11;let xm=null,ym=0,wm=0;function dy(n){if(!TO)return n.detail;let e=xm,t=wm;return xm=n,wm=Date.now(),ym=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(ym+1)%3:1}function NO(n,e){let t=bm(n,e),r=dy(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,a){let l=bm(n,s),c,u=gm(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!o){let d=gm(n,t.pos,t.bias,r),h=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=h<u.from?B.range(h,p):B.range(p,h)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&r==1&&i.ranges.length>1&&(c=PO(i,l.pos))?c:a?i.addRange(u):B.create([u])}}}function PO(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return B.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}rt.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:r}=n.inputState;r&&(r.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function Sm(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=n.inputState,o=r&&s&&s.dragging&&EO(n,e)?{from:s.dragging.from,to:s.dragging.to}:null,a={from:i,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"})}rt.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let r=Array(t.length),i=0,s=()=>{++i==t.length&&Sm(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(t[o])}}else Sm(n,e,e.dataTransfer.getData("Text"),!0)};rt.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=ly?null:e.clipboardData;t?(cy(n,t.getData("text/plain")||t.getData("text/uri-text")),e.preventDefault()):RO(n)};function LO(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function _O(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}let vf=null;rt.copy=rt.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=_O(n.state);if(!t&&!i)return;vf=i?t:null;let s=ly?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):LO(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const fy=Kn.define();function hy(n,e){let t=[];for(let r of n.facet(W1)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:fy.of(!0)}):null}function py(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=hy(n.state,e);t?n.dispatch(t):n.update([])}},10)}rt.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),py(n)};rt.blur=n=>{n.observer.clearSelectionRange(),py(n)};rt.compositionstart=rt.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};rt.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,J.chrome&&J.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50)};rt.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};rt.beforeinput=(n,e)=>{var t;let r;if(J.chrome&&J.android&&(r=oy.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const Cm=["pre-wrap","normal","pre-line","break-spaces"];class jO{constructor(e){this.lineWrapping=e,this.doc=Ce.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Cm.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let a=Cm.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class BO{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Bn{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Ge.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ir?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Bn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var He=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(He||(He={}));const Zl=.001;class $t{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Zl&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return $t.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=i[a],h=s.lineAt(l,He.ByPosNoHeight,r.setDoc(t),0,0),p=h.to>=c?h:s.lineAt(c,He.ByPosNoHeight,r,0,0);for(d+=p.to-c,c=p.to;a>0&&h.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,He.ByPosNoHeight,r,0,0));u+=h.from-l,l=h.from;let g=xh.build(r.setDoc(o),e,u,d);s=s.replace(l,c,g)}return s.updateHeight(r,0)}static empty(){return new tn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new $O($t.of(e.slice(0,t)),o,$t.of(e.slice(r)))}}$t.prototype.size=1;class my extends $t{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new Bn(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class tn extends my{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new Bn(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof tn||i instanceof yt&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof yt?i=new tn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):$t.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class yt extends $t{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let c=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),u=t.doc.lineAt(c),d=a+u.length*l,h=Math.max(r,e-d/2);return new Bn(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:u,length:d}=t.doc.line(s+c);return new Bn(u,d,r+a*c,a,0)}}lineAt(e,t,r,i,s){if(t==He.ByHeight)return this.blockAt(e,r,i,s);if(t==He.ByPosNoHeight){let{from:p,to:g}=r.doc.lineAt(e);return new Bn(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=a+c.length*l,d=c.number-o,h=i+a*d+l*(c.from-s-d);return new Bn(c.from,c.length,Math.max(i,Math.min(h,i+this.height-u)),u,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let u=e,d=i;u<=t;){let h=r.doc.lineAt(u);if(u==e){let g=h.number-a;d+=l*g+c*(e-s-g)}let p=l+c*h.length;o(new Bn(h.from,h.length,d,p,0)),d+=p,u=h.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof yt?r[r.length-1]=new yt(s.length+i):r.push(null,new yt(i-1))}if(e>0){let s=r[0];s instanceof yt?r[0]=new yt(e+s.length):r.unshift(new yt(e-1),null)}return $t.of(r)}decomposeLeft(e,t){t.push(new yt(e-1),null)}decomposeRight(e,t){t.push(null,new yt(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new yt(i.from-t-1).updateHeight(e,t));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=Zl&&(l=-2);let h=new tn(u,d);h.outdated=!1,o.push(h),a+=u+1}a<=s&&o.push(null,new yt(s-a).updateHeight(e,a));let c=$t.of(o);return(l<0||Math.abs(c.height-this.height)>=Zl||Math.abs(l-this.heightMetrics(e,t).perLine)>=Zl)&&(e.heightChanged=!0),c}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class $O extends $t{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=t==He.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=t==He.ByPosNoHeight?He.ByPosNoHeight:He.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,t,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,s,o),t>=l&&this.right.forEachLine(e,t,r,a,l,o);else{let c=this.lineAt(l,He.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,r,a,l,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&km(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),km(s,a)}return $t.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?$t.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function km(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof yt&&(r=n[e+1])instanceof yt&&n.splice(e-1,3,new yt(t.length+1+r.length))}const FO=5;class xh{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof tn?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new tn(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new my(o,i,r)):(o||s||i>=FO)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new tn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new yt(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof tn)return e;let t=new tn(0,-1);return this.nodes.push(t),t}addBlock(e){var t;this.enterLine();let r=(t=e.deco)===null||t===void 0?void 0:t.type;r==Ge.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r!=Ge.WidgetBefore&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof tn)&&!this.isCovered?this.nodes.push(new tn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof tn&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new xh(r,e);return Ne.spans(t,r,i,s,0),s.finish(r)}}function HO(n,e,t){let r=new VO;return Ne.compare(n,e,t,r,0),r.changes}class VO{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&cf(e,t,this.changes,5)}}function UO(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=c==n.parentNode?h.bottom:Math.min(l,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function zO(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class td{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e){return le.replace({widget:new WO(this.size,e)}).range(this.from,this.to)}}class WO extends ir{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Am{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Mm,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=qe.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(vh).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new jO(t),this.stateDeco=e.facet(Us).filter(r=>typeof r!="function"),this.heightMap=$t.empty().applyChanges(this.stateDeco,Ce.empty,this.heightOracle.setDoc(e.doc),[new mn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=le.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Bo(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?Mm:new KO(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:ys(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Us).filter(u=>typeof u!="function");let i=e.changedRanges,s=mn.extendWithRanges(i,HO(r,this.stateDeco,e?e.changes:ct.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let c=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(G1)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?qe.RTL:qe.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0,d=parseInt(r.paddingTop)||0,h=parseInt(r.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=D1(e.scrollDOM);let p=(this.printing?zO:UO)(t,this.paddingTop),g=p.top-this.pixelViewport.top,m=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),l){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(o=!0),o||i.lineWrapping&&Math.abs(b-this.contentDOMWidth)>i.charWidth){let{lineHeight:w,charWidth:C,textHeight:A}=e.docView.measureTextSize();o=w>0&&i.refresh(s,w,C,A,b/C,S),o&&(e.docView.minWidth=0,c|=8)}g>0&&m>0?u=Math.max(g,m):g<0&&m<0&&(u=Math.min(g,m)),i.heightChanged=!1;for(let w of this.viewports){let C=w.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(w);this.heightMap=(o?$t.empty().applyChanges(this.stateDeco,Ce.empty,this.heightOracle,[new mn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new BO(w.from,C))}i.heightChanged&&(c|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Bo(i.lineAt(o-r*1e3,He.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,He.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(c,He.ByPos,s,0,0),h;t.y=="center"?h=(d.top+d.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<l.from?h=d.top:h=d.bottom-u,l=new Bo(i.lineAt(h-1e3/2,He.ByHeight,s,0,0).from,i.lineAt(h+u+1e3/2,He.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Bo(this.heightMap.lineAt(r,He.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,He.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,He.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,He.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new td(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=qe.LTR&&!r)return[];let a=[],l=(c,u,d,h)=>{if(u-c<s)return;let p=this.state.selection.main,g=[p.from];p.empty||g.push(p.to);for(let v of g)if(v>c&&v<u){l(c,v-10,d,h),l(v+10,u,d,h);return}let m=GO(e,v=>v.from>=d.from&&v.to<=d.to&&Math.abs(v.from-c)<s&&Math.abs(v.to-u)<s&&!g.some(b=>v.from<b&&v.to>b));if(!m){if(u<d.to&&t&&r&&t.visibleRanges.some(v=>v.from<=u&&v.to>=u)){let v=t.moveToLineBoundary(B.cursor(u),!1,!0).head;v>c&&(u=v)}m=new td(c,u,this.gapSize(d,c,u,h))}a.push(m)};for(let c of this.viewportLines){if(c.length<o)continue;let u=qO(c.from,c.to,this.stateDeco);if(u.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,h,p;if(r){let g=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,v;if(d!=null){let b=Fo(u,d),y=((this.visibleBottom-this.visibleTop)/2+g)/c.height;m=b-y,v=b+y}else m=(this.visibleTop-c.top-g)/c.height,v=(this.visibleBottom-c.top+g)/c.height;h=$o(u,m),p=$o(u,v)}else{let g=u.total*this.heightOracle.charWidth,m=i*this.heightOracle.charWidth,v,b;if(d!=null){let y=Fo(u,d),S=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/g;v=y-S,b=y+S}else v=(this.pixelViewport.left-m)/g,b=(this.pixelViewport.right+m)/g;h=$o(u,v),p=$o(u,b)}h>c.from&&l(c.from,h,c,u),p<c.to&&l(p,c.to,c,u)}return a}gapSize(e,t,r,i){let s=Fo(i,r)-Fo(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){td.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=le.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Ne.spans(e,this.viewport.from,this.viewport.to,{span(i,s){t.push({from:i,to:s})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=t[s].from||i.to!=t[s].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||ys(this.heightMap.lineAt(e,He.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return ys(this.heightMap.lineAt(this.scaler.fromDOM(e),He.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return ys(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Bo{constructor(e,t){this.from=e,this.to=t}}function qO(n,e,t){let r=[],i=n,s=0;return Ne.spans(t,n,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function $o({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function Fo(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function GO(n,e){for(let t of n)if(e(t))return t}const Mm={toDOM(n){return n},fromDOM(n){return n},scale:1};class KO{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=t.lineAt(a,He.ByPos,e,0,0).top,u=t.lineAt(l,He.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function ys(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Bn(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>ys(i,e)):n._content)}const Ho=Y.define({combine:n=>n.join(" ")}),bf=Y.define({combine:n=>n.indexOf(!0)>-1}),xf=kr.newName(),gy=kr.newName(),vy=kr.newName(),by={"&light":"."+gy,"&dark":"."+vy};function yf(n,e,t){return new kr(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const ZO=yf("."+xf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},by);class YO{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=s||o?[]:QO(e),l=new N1(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=eT(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!nf(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!nf(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=B.single(c,l)}}}function xy(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||J.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=XO(n.state.doc.sliceString(o,a,Ai),e.text,l-o,c);u&&(J.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Ai+Ai&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:Ce.of(e.text.slice(u.from,u.toB).split(Ai))})}else r&&(!n.hasFocus&&n.state.facet(hu)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(J.mac||J.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=B.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Ce.of([" "])}):J.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=B.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Ce.of([" "])}),t){if(J.ios&&n.inputState.flushIOSKey(n)||J.android&&(t.from==i.from&&t.to==i.to&&t.insert.length==1&&t.insert.lines==2&&_i(n.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&t.insert.length==0||s==8&&t.insert.length<t.to-t.from)&&_i(n.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&t.insert.length==0&&_i(n.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,l=()=>a||(a=JO(n,t,r));return n.state.facet(z1).some(c=>c(n,t.from,t.to,o,l))||n.dispatch(l()),!0}else if(r&&!r.main.eq(i)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function JO(n,e,t){let r,i=n.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let a=i.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=n.state.sliceDoc(e.from,e.to),u=ry(n)||n.state.doc.lineAt(s.head),d=s.to-e.to,h=s.to-s.from;r=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let g=p.to-d,m=g-c.length;if(p.to-p.from!=h||n.state.sliceDoc(m,g)!=c||u&&p.to>=u.from&&p.from<=u.to)return{range:p};let v=i.changes({from:m,to:g,insert:e.insert}),b=p.to-s.to;return{changes:v,range:l?B.range(Math.max(0,l.anchor+b),Math.max(0,l.head+b)):p.map(v)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function XO(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}if(o<s&&n.length<e.length){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function QO(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new tm(t,r)),(i!=t||s!=r)&&e.push(new tm(i,s))),e}function eT(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?B.single(t+e,r+e):null}const tT={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},nd=J.ie&&J.ie_version<=11;class nT{constructor(e){this.view=e,this.active=!1,this.selectionRange=new zR,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(J.ie&&J.ie_version<=11||J.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),nd&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(hu)?r.root.activeElement!=this.dom:!Gl(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(J.ie&&J.ie_version<=11||J.android&&J.chrome)&&!r.state.selection.main.empty&&i.focusNode&&wc(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=J.safari&&e.root.nodeType==11&&FR(this.dom.ownerDocument)==this.dom&&rT(this.view)||yc(e.root);if(!t||this.selectionRange.eq(t))return!1;let r=Gl(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&qR(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,tT),nd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),nd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&_i(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Gl(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new YO(this.view,e,t,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let r=this.view.state,i=xy(this.view,t);return this.view.state==r&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=Im(t,e.previousSibling||e.target.previousSibling,-1),i=Im(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,r,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect(),(i=this.resizeContent)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Im(n,e,t){for(;e;){let r=Fe.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function rT(n){let e=null;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return wc(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class G{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(r=>r.forEach(i=>t(i,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||WR(e.parent)||document,this.viewState=new Am(e.state||ye.create(e)),this.plugins=this.state.facet(bs).map(r=>new Xu(r));for(let r of this.plugins)r.update(this);this.observer=new nT(this),this.inputState=new CO(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new lm(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}dispatch(...e){let t=e.length==1&&e[0]instanceof ut?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(fy))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=hy(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(ye.phrases)!=this.state.facet(ye.phrases))return this.setState(s);i=kc.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:p}=h.state.selection;d=new Cc(p.empty?p:B.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of h.effects)p.is(om)&&(d=p.value)}this.viewState.update(i,d),this.bidiCache=Ac.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(xs)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Ho)!=i.state.facet(Ho)&&(this.viewState.mustMeasureContent=!0),(t||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let h of this.state.facet(uf))h(i);(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!xy(this,u)&&c.force&&_i(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Am(e),this.plugins=e.facet(bs).map(r=>new Xu(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new lm(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(bs),r=e.state.facet(bs);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new Xu(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,{scrollTop:i}=r,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;i!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(D1(r))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return pn(this.state,g),Em}}),d=kc.create(this,this.state,[]),h=!1;d.flags|=l,t?t.flags|=l:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let p=0;p<c.length;p++)if(u[p]!=Em)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){pn(this.state,g)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){i=r.scrollTop=i+g,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(uf))a(t)}get themeClasses(){return xf+" "+(this.state.facet(bf)?vy:gy)+" "+this.state.facet(Ho)}updateAttrs(){let e=Dm(this,K1,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(hu)?"true":"false",class:"cm-content",style:`${J.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Dm(this,vh,t);let r=this.observer.ignore(()=>{let i=lf(this.contentDOM,this.contentAttrs,t),s=lf(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(G.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(xs);let e=this.state.facet(G.cspNonce);kr.mount(this.root,this.styleModules.concat(ZO).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return ed(this,e,pm(this,e,t,r))}moveByGroup(e,t){return ed(this,e,pm(this,e,t,r=>wO(this,e.head,r)))}moveToLineBoundary(e,t,r=!0){return yO(this,e,t,r)}moveVertically(e,t,r){return ed(this,e,SO(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),sy(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[xr.find(s,e-i.from,-1,t)];return du(r,o.dir==qe.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(q1)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>iT)return ty(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||ey(s.isolates,r=am(this,e.from,e.to))))return s.order;r||(r=am(this,e.from,e.to));let i=aO(e.text,t,r);return this.bidiCache.push(new Ac(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||J.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{I1(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return om.of(new Cc(typeof e=="number"?B.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return it.define(()=>({}),{eventHandlers:e})}static theme(e,t){let r=kr.newName(),i=[Ho.of(r),xs.of(yf(`.${r}`,e))];return t&&t.dark&&i.push(bf.of(!0)),i}static baseTheme(e){return ti.lowest(xs.of(yf("."+xf,e,by)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Fe.get(r)||Fe.get(e);return((t=i?.rootView)===null||t===void 0?void 0:t.view)||null}}G.styleModule=xs;G.inputHandler=z1;G.focusChangeEffect=W1;G.perLineTextDirection=q1;G.exceptionSink=U1;G.updateListener=uf;G.editable=hu;G.mouseSelectionStyle=V1;G.dragMovesSelection=H1;G.clickAddsSelectionRange=F1;G.decorations=Us;G.atomicRanges=bh;G.bidiIsolatedRanges=Z1;G.scrollMargins=Y1;G.darkTheme=bf;G.cspNonce=Y.define({combine:n=>n.length?n[0]:""});G.contentAttributes=vh;G.editorAttributes=K1;G.lineWrapping=G.contentAttributes.of({class:"cm-lineWrapping"});G.announce=pe.define();const iT=4096,Em={};class Ac{constructor(e,t,r,i,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:qe.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new Ac(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function Dm(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&af(o,t)}return t}const sT=J.mac?"mac":J.windows?"win":J.linux?"linux":"key";function oT(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Vo(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const aT=ti.default(G.domEventHandlers({keydown(n,e){return wy(yy(e.state),n,e,"editor")}})),ho=Y.define({enables:aT}),Rm=new WeakMap;function yy(n){let e=n.facet(ho),t=Rm.get(e);return t||Rm.set(e,t=uT(e.reduce((r,i)=>r.concat(i),[]))),t}function lT(n,e,t){return wy(yy(n.state),e,n,t)}let pr=null;const cT=4e3;function uT(n,e=sT){let t=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,h;let p=t[o]||(t[o]=Object.create(null)),g=a.split(/ (?!$)/).map(b=>oT(b,e));for(let b=1;b<g.length;b++){let y=g.slice(0,b).join(" ");i(y,!0),p[y]||(p[y]={preventDefault:!0,stopPropagation:!1,run:[S=>{let w=pr={view:S,prefix:y,scope:o};return setTimeout(()=>{pr==w&&(pr=null)},cT),!0}]})}let m=g.join(" ");i(m,!1);let v=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((h=(d=p._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in u)u[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}function wy(n,e,t,r){let i=$R(e),s=St(i,0),o=dn(s)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;pr&&pr.view==t&&pr.scope==r&&(a=pr.prefix+" ",ay.indexOf(e.keyCode)<0&&(c=!0,pr=null));let d=new Set,h=v=>{if(v){for(let b of v.run)if(!d.has(b)&&(d.add(b),b(t,e)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},p=n[r],g,m;return p&&(h(p[a+Vo(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(J.windows&&e.ctrlKey&&e.altKey)&&(g=Ar[e.keyCode])&&g!=i?(h(p[a+Vo(g,e,!0)])||e.shiftKey&&(m=Vs[e.keyCode])!=i&&m!=g&&h(p[a+Vo(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(p[a+Vo(i,e,!0)])&&(l=!0),!l&&h(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),l}class po{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=Sy(e);return[new po(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return dT(e,t,r)}}function Sy(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==qe.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function Om(n,e,t){let r=B.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(r,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(r,!0,!0).from),type:Ge.Text}}function dT(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==qe.LTR,o=n.contentDOM,a=o.getBoundingClientRect(),l=Sy(n),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=a.right-(u?parseInt(u.paddingRight):0),p=mf(n,r),g=mf(n,i),m=p.type==Ge.Text?p:null,v=g.type==Ge.Text?g:null;if(m&&(n.lineWrapping||p.widgetLineBreaks)&&(m=Om(n,r,m)),v&&(n.lineWrapping||g.widgetLineBreaks)&&(v=Om(n,i,v)),m&&v&&m.from==v.from)return y(S(t.from,t.to,m));{let C=m?S(t.from,null,m):w(p,!1),A=v?S(null,t.to,v):w(g,!0),k=[];return(m||p).to<(v||g).from-(m&&v?1:0)||p.widgetLineBreaks>1&&C.bottom+n.defaultLineHeight/2<A.top?k.push(b(d,C.bottom,h,A.top)):C.bottom<A.top&&n.elementAtHeight((C.bottom+A.top)/2).type==Ge.Text&&(C.bottom=A.top=(C.bottom+A.top)/2),y(C).concat(k).concat(y(A))}function b(C,A,k,I){return new po(e,C-l.left,A-l.top-.01,k-C,I-A+.01)}function y({top:C,bottom:A,horizontal:k}){let I=[];for(let D=0;D<k.length;D+=2)I.push(b(k[D],C,k[D+1],A));return I}function S(C,A,k){let I=1e9,D=-1e9,O=[];function T(P,H,q,Z,ae){let ee=n.coordsAtPos(P,P==k.to?-2:2),de=n.coordsAtPos(q,q==k.from?2:-2);!ee||!de||(I=Math.min(ee.top,de.top,I),D=Math.max(ee.bottom,de.bottom,D),ae==qe.LTR?O.push(s&&H?d:ee.left,s&&Z?h:de.right):O.push(!s&&Z?d:de.left,!s&&H?h:ee.right))}let N=C??k.from,L=A??k.to;for(let P of n.visibleRanges)if(P.to>N&&P.from<L)for(let H=Math.max(P.from,N),q=Math.min(P.to,L);;){let Z=n.state.doc.lineAt(H);for(let ae of n.bidiSpans(Z)){let ee=ae.from+Z.from,de=ae.to+Z.from;if(ee>=q)break;de>H&&T(Math.max(ee,H),C==null&&ee<=N,Math.min(de,q),A==null&&de>=L,ae.dir)}if(H=Z.to+1,H>=q)break}return O.length==0&&T(N,C==null,L,A==null,n.textDirection),{top:I,bottom:D,horizontal:O}}function w(C,A){let k=a.top+(A?C.top:C.bottom);return{top:k,bottom:k,horizontal:[]}}}function fT(n,e){return n.constructor==e.constructor&&n.eq(e)}class hT{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Yl)!=e.state.facet(Yl)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Yl);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!fT(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Yl=Y.define();function Cy(n){return[it.define(e=>new hT(e,n)),Yl.of(n)]}const ky=!J.ios,Ws=Y.define({combine(n){return Zn(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function pT(n={}){return[Ws.of(n),mT,gT,vT,G1.of(!0)]}function Ay(n){return n.startState.facet(Ws)!=n.state.facet(Ws)}const mT=Cy({above:!0,markers(n){let{state:e}=n,t=e.facet(Ws),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||ky:t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:B.cursor(i.head,i.head>i.anchor?-1:1);for(let l of po.forRange(n,o,a))r.push(l)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Ay(n);return t&&Tm(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){Tm(e.state,n)},class:"cm-cursorLayer"});function Tm(n,e){e.style.animationDuration=n.facet(Ws).cursorBlinkRate+"ms"}const gT=Cy({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:po.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Ay(n)},class:"cm-selectionLayer"}),My={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};ky&&(My[".cm-line"].caretColor="transparent !important");const vT=ti.highest(G.theme(My)),Iy=pe.define({map(n,e){return n==null?null:e.mapPos(n)}}),ws=bt.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(Iy)?r.value:t,n)}}),bT=it.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(ws);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(ws)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(ws),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(ws)!=n&&this.view.dispatch({effects:Iy.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function xT(){return[ws,bT]}function Nm(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function yT(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class wT{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,c,u)=>i(u,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,u)=>{let d=r(a,l,c);d&&u(c,c+a[0].length,d)};else if(r)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new Cr,r=t.add.bind(t);for(let{from:i,to:s}of yT(e,this.maxLength))Nm(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let h=[],p,g=(m,v,b)=>h.push(b.range(m,v));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else Nm(e.state.doc,this.regexp,u,d,(m,v)=>this.addMatch(v,e,m,g));t=t.update({filterFrom:u,filterTo:d,filter:(m,v)=>m<u||v>d,add:h})}}return t}}const wf=/x/.unicode!=null?"gu":"g",ST=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,wf),CT={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let rd=null;function kT(){var n;if(rd==null&&typeof document<"u"&&document.body){let e=document.body.style;rd=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return rd||!1}const Jl=Y.define({combine(n){let e=Zn(n,{render:null,specialChars:ST,addSpecialChars:null});return(e.replaceTabs=!kT())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,wf)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,wf)),e}});function AT(n={}){return[Jl.of(n),MT()]}let Pm=null;function MT(){return Pm||(Pm=it.fromClass(class{constructor(n){this.view=n,this.decorations=le.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Jl)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new wT({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=St(e[0],0);if(s==9){let o=i.lineAt(r),a=t.state.tabSize,l=co(o.text,a,r-o.from);return le.replace({widget:new RT((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=le.replace({widget:new DT(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Jl);n.startState.facet(Jl)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const IT="";function ET(n){return n>=32?IT:n==10?"":String.fromCharCode(9216+n)}class DT extends ir{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=ET(this.code),r=e.state.phrase("Control character")+" "+(CT[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class RT extends ir{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function OT(){return NT}const TT=le.line({class:"cm-activeLine"}),NT=it.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(TT.range(i.from)),e=i.from)}return le.set(t)}},{decorations:n=>n.decorations});class PT extends ir{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?Vi(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),i=du(t[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function LT(n){return it.fromClass(class{constructor(e){this.view=e,this.placeholder=n?le.set([le.widget({widget:new PT(n),side:1}).range(0)]):le.none}get decorations(){return this.view.state.doc.length?le.none:this.placeholder}},{decorations:e=>e.decorations})}const Sf=2e3;function _T(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>Sf||t.off>Sf||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let c=n.doc.line(l);c.length<=a&&s.push(B.range(c.from+o,c.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let c=n.doc.line(l),u=Qd(c.text,o,n.tabSize,!0);if(u<0)s.push(B.cursor(c.to));else{let d=Qd(c.text,a,n.tabSize);s.push(B.range(c.from+u,c.from+d))}}}return s}function jT(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function Lm(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>Sf?-1:i==r.length?jT(n,e.clientX):co(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function BT(n,e){let t=Lm(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=Lm(n,i);if(!a)return r;let l=_T(n.state,t,a);return l.length?o?B.create(l.concat(r.ranges)):B.create(l):r}}:null}function $T(n){let e=(t=>t.altKey&&t.button==0);return G.mouseSelectionStyle.of((t,r)=>e(r)?BT(t,r):null)}const FT={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},HT={style:"cursor: crosshair"};function VT(n={}){let[e,t]=FT[n.key||"Alt"],r=it.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,G.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?HT:null})]}const Uo="-10000px";class Ey{constructor(e,t,r){this.facet=t,this.createTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var t;let r=e.state.facet(this.facet),i=r.filter(o=>o);if(r===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<i.length;o++){let a=i[o],l=-1;if(a){for(let c=0;c<this.tooltips.length;c++){let u=this.tooltips[c];u&&u.create==a.create&&(l=c)}if(l<0)s[o]=this.createTooltipView(a);else{let c=s[o]=this.tooltipViews[l];c.update&&c.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(t=o.destroy)===null||t===void 0||t.call(o));return this.input=r,this.tooltips=i,this.tooltipViews=s,!0}}function UT(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const id=Y.define({combine:n=>{var e,t,r;return{position:J.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||UT}}}),_m=new WeakMap,Dy=it.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(id);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Ey(n,yh,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(id);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=Uo,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(id).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:t,space:r}=n,i=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,c=n.pos[s],u=n.size[s];if(!c||c.bottom<=Math.max(t.top,r.top)||c.top>=Math.min(t.bottom,r.bottom)||c.right<Math.max(t.left,r.left)-.1||c.left>Math.min(t.right,r.right)+.1){l.style.top=Uo;continue}let d=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,h=d?7:0,p=u.right-u.left,g=(e=_m.get(a))!==null&&e!==void 0?e:u.bottom-u.top,m=a.offset||WT,v=this.view.textDirection==qe.LTR,b=u.width>r.right-r.left?v?r.left:r.right-u.width:v?Math.min(c.left-(d?14:0)+m.x,r.right-p):Math.max(r.left,c.left-p+(d?14:0)-m.x),y=!!o.above;!o.strictSide&&(y?c.top-(u.bottom-u.top)-m.y<r.top:c.bottom+(u.bottom-u.top)+m.y>r.bottom)&&y==r.bottom-c.bottom>c.top-r.top&&(y=!y);let S=(y?c.top-r.top:r.bottom-c.bottom)-h;if(S<g&&a.resize!==!1){if(S<this.view.defaultLineHeight){l.style.top=Uo;continue}_m.set(a,g),l.style.height=(g=S)+"px"}else l.style.height&&(l.style.height="");let w=y?c.top-g-h-m.y:c.bottom+h+m.y,C=b+p;if(a.overlap!==!0)for(let A of i)A.left<C&&A.right>b&&A.top<w+g&&A.bottom>w&&(w=y?A.top-g-2-h:A.bottom+h+2);this.position=="absolute"?(l.style.top=w-n.parent.top+"px",l.style.left=b-n.parent.left+"px"):(l.style.top=w+"px",l.style.left=b+"px"),d&&(d.style.left=`${c.left+(v?m.x:-m.x)-(b+14-7)}px`),a.overlap!==!0&&i.push({left:b,top:w,right:C,bottom:w+g}),l.classList.toggle("cm-tooltip-above",y),l.classList.toggle("cm-tooltip-below",!y),a.positioned&&a.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Uo}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),zT=G.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),WT={x:0,y:0},yh=Y.define({enables:[Dy,zT]}),Mc=Y.define();class wh{static create(e){return new wh(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ey(e,Mc,t=>this.createHostedView(t))}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}}const qT=yh.compute([Mc],n=>{let e=n.facet(Mc).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:wh.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class GT{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,s=1;if(r instanceof br)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let a=e.coordsAtPos(i);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=l&&l.dir==qe.RTL?-1:1;s=t.x<a.left?-c:c}let o=this.source(e,i,s);if(o?.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&e.dispatch({effects:this.setHover.of(l)}))},l=>pn(e.state,l,"hover tooltip"))}else o&&e.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!jm(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,s=(t=r?.end)!==null&&t!==void 0?t:i;(i==s?this.view.posAtCoords(this.lastMove)!=i:!KT(this.view,i,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!jm(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function jm(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function KT(n,e,t,r,i,s){let o=document.createRange(),a=n.domAtPos(e),l=n.domAtPos(t);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let c=o.getClientRects();o.detach();for(let u=0;u<c.length;u++){let d=c[u];if(Math.max(d.top-i,i-d.bottom,d.left-r,r-d.right)<=s)return!0}return!1}function ZT(n,e={}){let t=pe.define(),r=bt.define({create(){return null},update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let o=s.changes.mapPos(i.pos,-1,kt.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),i);a.pos=o,i.end!=null&&(a.end=s.changes.mapPos(i.end)),i=a}for(let o of s.effects)o.is(t)&&(i=o.value),o.is(YT)&&(i=null);return i},provide:i=>Mc.from(i)});return[r,it.define(i=>new GT(i,n,r,t,e.hoverTime||300)),qT]}function Ry(n,e){let t=n.plugin(Dy);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const YT=pe.define(),Bm=Y.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function qs(n,e){let t=n.plugin(Oy),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const Oy=it.fromClass(class{constructor(n){this.input=n.state.facet(Gs),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(Bm);this.top=new zo(n,!0,e.topContainer),this.bottom=new zo(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(Bm);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new zo(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new zo(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Gs);if(t!=this.input){let r=t.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(n.view),a.push(u)):(u=this.panels[c],u.update&&u.update(n)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>G.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class zo{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=$m(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=$m(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function $m(n){let e=n.nextSibling;return n.remove(),e}const Gs=Y.define({enables:Oy});class nr extends Zr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}nr.prototype.elementClass="";nr.prototype.toDOM=void 0;nr.prototype.mapMode=kt.TrackBefore;nr.prototype.startSide=nr.prototype.endSide=-1;nr.prototype.point=!0;const Xl=Y.define(),JT={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ne.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Rs=Y.define();function XT(n){return[Ty(),Rs.of(Object.assign(Object.assign({},JT),n))]}const Fm=Y.define({combine:n=>n.some(e=>e)});function Ty(n){return[QT]}const QT=it.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(Rs).map(e=>new Vm(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Fm),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Fm)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Ne.iter(this.view.state.facet(Xl),this.view.viewport.from),r=[],i=this.gutters.map(s=>new eN(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Ge.Text&&o){Cf(t,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Ge.Text){Cf(t,r,s.from);for(let o of i)o.line(this.view,s,r)}for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Rs),t=n.state.facet(Rs),r=n.docChanged||n.heightChanged||n.viewportChanged||!Ne.eq(n.startState.facet(Xl),n.state.facet(Xl),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new Vm(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>G.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==qe.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function Hm(n){return Array.isArray(n)?n:[n]}function Cf(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class eN{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Ne.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=t.top-this.height;if(this.i==i.elements.length){let o=new Ny(e,t.height,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,t.height,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];Cf(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t);r&&this.addElement(e,t,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Vm{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=Hm(t.markers(e)),t.initialSpacer&&(this.spacer=new Ny(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Hm(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Ne.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Ny{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),tN(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function tN(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const nN=Y.define(),Mi=Y.define({combine(n){return Zn(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class sd extends nr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function od(n,e){return n.state.facet(Mi).formatNumber(e,n.state)}const rN=Rs.compute([Mi],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(nN)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new sd(od(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Mi)!=e.state.facet(Mi),initialSpacer(e){return new sd(od(e,Um(e.state.doc.lines)))},updateSpacer(e,t){let r=od(t.view,Um(t.view.state.doc.lines));return r==e.number?e:new sd(r)},domEventHandlers:n.facet(Mi).domEventHandlers}));function iN(n={}){return[Mi.of(n),Ty(),rN]}function Um(n){let e=9;for(;e<n;)e=e*10+9;return e}const sN=new class extends nr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},oN=Xl.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(sN.range(i)))}return Ne.of(e)});function aN(){return oN}const lN=1024;let cN=0;class fn{constructor(e,t){this.from=e,this.to=t}}class xe{constructor(e={}){this.id=cN++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Xt.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}xe.closedBy=new xe({deserialize:n=>n.split(" ")});xe.openedBy=new xe({deserialize:n=>n.split(" ")});xe.group=new xe({deserialize:n=>n.split(" ")});xe.isolate=new xe({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});xe.contextHash=new xe({perNode:!0});xe.lookAhead=new xe({perNode:!0});xe.mounted=new xe({perNode:!0});class Ks{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[xe.mounted.id]}}const uN=Object.create(null);class Xt{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):uN,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Xt(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(xe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(xe.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}Xt.none=new Xt("",Object.create(null),0,8);class Py{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new Xt(r.name,i,r.id,r.flags):r)}return new Py(t)}}const Wo=new WeakMap,zm=new WeakMap;var We;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(We||(We={}));class dt{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Ks.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Ic(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Wo.get(this)||this.topNode,s=new Ic(i);return s.moveTo(e,t),Wo.set(this,s._tree),s}get topNode(){return new Dt(this,0,0,null)}resolve(e,t=0){let r=Zs(Wo.get(this)||this.topNode,e,t,!1);return Wo.set(this,r),r}resolveInner(e,t=0){let r=Zs(zm.get(this)||this.topNode,e,t,!0);return zm.set(this,r),r}resolveStack(e,t=0){return hN(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&We.IncludeAnonymous)>0;for(let l=this.cursor(o|We.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:kh(Xt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new dt(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new dt(Xt.none,t,r,i)))}static build(e){return pN(e)}}dt.empty=new dt(Xt.none,[],[],0);class Sh{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Sh(this.buffer,this.index)}}class Er{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Xt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(Ly(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new Er(s,o,this.set)}}function Ly(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Zs(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof Dt&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:We.IgnoreOverlays;if(r)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof Dt&&o.index<0&&((i=a.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class _y{cursor(e=0){return new Ic(this,e)}getChild(e,t=null,r=null){let i=Wm(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Wm(this,e,t,r)}resolve(e,t=0){return Zs(this,e,t,!1)}resolveInner(e,t=0){return Zs(this,e,t,!0)}matchContext(e){return kf(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class Dt extends _y{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=t>0?a.length:-1;e!=c;e+=t){let u=a[e],d=l[e]+o.from;if(Ly(i,r,d,d+u.length)){if(u instanceof Er){if(s&We.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,t,r-d,i);if(h>-1)return new Fn(new dN(o,u,e,d),null,h)}else if(s&We.IncludeAnonymous||!u.type.isAnonymous||Ch(u)){let h;if(!(s&We.IgnoreMounts)&&(h=Ks.get(u))&&!h.overlay)return new Dt(h.tree,d,e,o);let p=new Dt(u,d,e,o);return s&We.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?u.children.length-1:0,t,r,i)}}}if(s&We.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&We.IgnoreOverlays)&&(i=Ks.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new Dt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Wm(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function kf(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class dN{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Fn extends _y{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new Fn(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&We.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Fn(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Fn(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Fn(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new dt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function jy(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof Dt&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new fN(i,t)}class fN{constructor(e,t){this.heads=e,this.node=t}get next(){return jy(this.heads)}}function hN(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof Dt?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=Ks.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Dt(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Zs(a,e,t,!1))}}return i?jy(i):r}class Ic{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Dt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Dt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&We.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&We.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&We.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&We.IncludeAnonymous||a instanceof Er||!a.type.isAnonymous||Ch(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new Fn(this.buffer,t,this.stack[i]);return this.bufferNode=new Fn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return kf(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return kf(this._tree,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function Ch(n){return n.children.some(e=>e instanceof Er||!e.type.isAnonymous||Ch(e))}function pN(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=lN,reused:s=[],minRepeatType:o=r.types.length}=n,a=Array.isArray(t)?new Sh(t,t.length):t,l=r.types,c=0,u=0;function d(C,A,k,I,D,O){let{id:T,start:N,end:L,size:P}=a,H=u,q=c;for(;P<0;)if(a.next(),P==-1){let ge=s[T];k.push(ge),I.push(N-C);return}else if(P==-3){c=T;return}else if(P==-4){u=T;return}else throw new RangeError(`Unrecognized record size: ${P}`);let Z=l[T],ae,ee,de=N-C;if(L-N<=i&&(ee=v(a.pos-A,D))){let ge=new Uint16Array(ee.size-ee.skip),K=a.pos-ee.size,fe=ge.length;for(;a.pos>K;)fe=b(ee.start,ge,fe);ae=new Er(ge,L-ee.start,r),de=ee.start-C}else{let ge=a.pos-P;a.next();let K=[],fe=[],re=T>=o?T:-1,ue=0,Q=L;for(;a.pos>ge;)re>=0&&a.id==re&&a.size>=0?(a.end<=Q-i&&(g(K,fe,N,ue,a.end,Q,re,H,q),ue=K.length,Q=a.end),a.next()):O>2500?h(N,ge,K,fe):d(N,ge,K,fe,re,O+1);if(re>=0&&ue>0&&ue<K.length&&g(K,fe,N,ue,N,Q,re,H,q),K.reverse(),fe.reverse(),re>-1&&ue>0){let ce=p(Z,q);ae=kh(Z,K,fe,0,K.length,0,L-N,ce,ce)}else ae=m(Z,K,fe,L-N,H-L,q)}k.push(ae),I.push(de)}function h(C,A,k,I){let D=[],O=0,T=-1;for(;a.pos>A;){let{id:N,start:L,end:P,size:H}=a;if(H>4)a.next();else{if(T>-1&&L<T)break;T<0&&(T=P-i),D.push(N,L,P),O++,a.next()}}if(O){let N=new Uint16Array(O*4),L=D[D.length-2];for(let P=D.length-3,H=0;P>=0;P-=3)N[H++]=D[P],N[H++]=D[P+1]-L,N[H++]=D[P+2]-L,N[H++]=H;k.push(new Er(N,D[2]-L,r)),I.push(L-C)}}function p(C,A){return(k,I,D)=>{let O=0,T=k.length-1,N,L;if(T>=0&&(N=k[T])instanceof dt){if(!T&&N.type==C&&N.length==D)return N;(L=N.prop(xe.lookAhead))&&(O=I[T]+N.length+L)}return m(C,k,I,D,O,A)}}function g(C,A,k,I,D,O,T,N,L){let P=[],H=[];for(;C.length>I;)P.push(C.pop()),H.push(A.pop()+k-D);C.push(m(r.types[T],P,H,O-D,N-O,L)),A.push(D-k)}function m(C,A,k,I,D,O,T){if(O){let N=[xe.contextHash,O];T=T?[N].concat(T):[N]}if(D>25){let N=[xe.lookAhead,D];T=T?[N].concat(T):[N]}return new dt(C,A,k,I,T)}function v(C,A){let k=a.fork(),I=0,D=0,O=0,T=k.end-i,N={size:0,start:0,skip:0};e:for(let L=k.pos-C;k.pos>L;){let P=k.size;if(k.id==A&&P>=0){N.size=I,N.start=D,N.skip=O,O+=4,I+=4,k.next();continue}let H=k.pos-P;if(P<0||H<L||k.start<T)break;let q=k.id>=o?4:0,Z=k.start;for(k.next();k.pos>H;){if(k.size<0)if(k.size==-3)q+=4;else break e;else k.id>=o&&(q+=4);k.next()}D=Z,I+=P,O+=q}return(A<0||I==C)&&(N.size=I,N.start=D,N.skip=O),N.size>4?N:void 0}function b(C,A,k){let{id:I,start:D,end:O,size:T}=a;if(a.next(),T>=0&&I<o){let N=k;if(T>4){let L=a.pos-(T-4);for(;a.pos>L;)k=b(C,A,k)}A[--k]=N,A[--k]=O-C,A[--k]=D-C,A[--k]=I}else T==-3?c=I:T==-4&&(u=I);return k}let y=[],S=[];for(;a.pos>0;)d(n.start||0,n.bufferStart||0,y,S,-1,0);let w=(e=n.length)!==null&&e!==void 0?e:y.length?S[0]+y[0].length:0;return new dt(l[n.topID],y.reverse(),S.reverse(),w)}const qm=new WeakMap;function Ql(n,e){if(!n.isAnonymous||e instanceof Er||e.type!=n)return 1;let t=qm.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof dt)){t=1;break}t+=Ql(n,r)}qm.set(e,t)}return t}function kh(n,e,t,r,i,s,o,a,l){let c=0;for(let g=r;g<i;g++)c+=Ql(n,e[g]);let u=Math.ceil(c*1.5/8),d=[],h=[];function p(g,m,v,b,y){for(let S=v;S<b;){let w=S,C=m[S],A=Ql(n,g[S]);for(S++;S<b;S++){let k=Ql(n,g[S]);if(A+k>=u)break;A+=k}if(S==w+1){if(A>u){let k=g[w];p(k.children,k.positions,0,k.children.length,m[w]+y);continue}d.push(g[w])}else{let k=m[S-1]+g[S-1].length-C;d.push(kh(n,g,m,w,S,C,k,null,l))}h.push(C+y-s)}}return p(e,t,r,i,0),(a||l)(d,h,o)}class hB{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof Fn?this.setBuffer(e.context.buffer,e.index,t):e instanceof Dt&&this.map.set(e.tree,t)}get(e){return e instanceof Fn?this.getBuffer(e.context.buffer,e.index):e instanceof Dt?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Qn{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new Qn(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<t.length?t[a]:null,d=u?u.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||c){let p=Math.max(h.from,l)-c,g=Math.min(h.to,d)-c;h=p>=g?null:new Qn(p,g,h.tree,h.offset+c,a>0,!!u)}if(h&&i.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class mN{startParse(e,t,r){return typeof e=="string"&&(e=new gN(e)),r=r?r.length?r.map(i=>new fn(i.from,i.to)):[new fn(0,0)]:[new fn(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class gN{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function pB(n){return(e,t,r,i)=>new bN(e,n,t,r,i)}class Gm{constructor(e,t,r,i,s){this.parser=e,this.parse=t,this.overlay=r,this.target=i,this.from=s}}function Km(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}class vN{constructor(e,t,r,i,s,o,a){this.parser=e,this.predicate=t,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const Af=new xe({perNode:!0});class bN{constructor(e,t,r,i,s){this.nest=t,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new dt(r.type,r.children,r.positions,r.length,r.propValues.concat([[Af,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[xe.mounted.id]=new Ks(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new wN(this.fragments),t=null,r=null,i=new Ic(new Dt(this.baseTree,this.ranges[0].from,0,null),We.IncludeAnonymous|We.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(t){let c=t.mounts.find(u=>u.frag.from<=i.from&&u.frag.to>=i.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let d=u.from+c.pos,h=u.to+c.pos;d>=i.from&&h<=i.to&&!t.ranges.some(p=>p.from<h&&p.to>d)&&t.ranges.push({from:d,to:h})}}a=!1}else if(r&&(o=xN(r.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||yN(i);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")t=new vN(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,t);else{let u=Jm(this.ranges,s.overlay||(i.from<i.to?[new fn(i.from,i.to)]:[]));u.length&&Km(u),(u.length||!s.overlay)&&this.inner.push(new Gm(s.parser,u.length?s.parser.startParse(this.input,Xm(c,u),u):s.parser.startParse(""),s.overlay?s.overlay.map(d=>new fn(d.from-i.from,d.to-i.from)):null,i.tree,u.length?u[0].from:i.from)),s.overlay?u.length&&(r={ranges:u,depth:0,prev:r}):a=!1}}else if(t&&(l=t.predicate(i))&&(l===!0&&(l=new fn(i.from,i.to)),l.from<l.to)){let c=t.ranges.length-1;c>=0&&t.ranges[c].to==l.from?t.ranges[c]={from:t.ranges[c].from,to:l.to}:t.ranges.push(l)}if(a&&i.firstChild())t&&t.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let c=Jm(this.ranges,t.ranges);c.length&&(Km(c),this.inner.splice(t.index,0,new Gm(t.parser,t.parser.startParse(this.input,Xm(t.mounts,c),c),t.ranges.map(u=>new fn(u.from-t.start,u.to-t.start)),t.target,c[0].from))),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}}function xN(n,e,t){for(let r of n){if(r.from>=t)break;if(r.to>e)return r.from<=e&&r.to>=t?2:1}return 0}function Zm(n,e,t,r,i,s){if(e<t){let o=n.buffer[e+1];r.push(n.slice(e,t,o)),i.push(o-s)}}function yN(n){let{node:e}=n,t=[],r=e.context.buffer;do t.push(n.index),n.parent();while(!n.tree);let i=n.tree,s=i.children.indexOf(r),o=i.children[s],a=o.buffer,l=[s];function c(u,d,h,p,g,m){let v=t[m],b=[],y=[];Zm(o,u,v,b,y,p);let S=a[v+1],w=a[v+2];l.push(b.length);let C=m?c(v+4,a[v+3],o.set.types[a[v]],S,w-S,m-1):e.toTree();return b.push(C),y.push(S-p),Zm(o,a[v+3],d,b,y,p),new dt(h,b,y,g)}i.children[s]=c(0,a.length,Xt.none,0,o.length,t.length-1);for(let u of l){let d=n.tree.children[u],h=n.tree.positions[u];n.yield(new Dt(d,h+n.from,u,n._tree))}}class Ym{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(We.IncludeAnonymous|We.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,We.IgnoreOverlays|We.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof dt)t=t.children[0];else break}return!1}}class wN{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(t=r.tree.prop(Af))!==null&&t!==void 0?t:r.to,this.inner=new Ym(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Af))!==null&&e!==void 0?e:t.to,this.inner=new Ym(t.tree,-t.offset)}}findMounts(e,t){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(xe.mounted);if(o&&o.parser==t)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}}function Jm(n,e){let t=null,r=e;for(let i=1,s=0;i<n.length;i++){let o=n[i-1].to,a=n[i].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(t||(r=t=e.slice()),l.from<o?(t[s]=new fn(l.from,o),l.to>a&&t.splice(s+1,0,new fn(a,l.to))):l.to>a?t[s--]=new fn(a,l.to):t.splice(s--,1))}}return r}function SN(n,e,t,r){let i=0,s=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==n.length?1e9:o?n[i].to:n[i].from,d=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let h=Math.max(l,t),p=Math.min(u,d,r);h<p&&c.push(new fn(h,p))}if(l=Math.min(u,d),l==1e9)break;u==l&&(o?(o=!1,i++):o=!0),d==l&&(a?(a=!1,s++):a=!0)}return c}function Xm(n,e){let t=[];for(let{pos:r,mount:i,frag:s}of n){let o=r+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),c=Math.min(s.to,a);if(i.overlay){let u=i.overlay.map(h=>new fn(h.from+r,h.to+r)),d=SN(e,u,l,c);for(let h=0,p=l;;h++){let g=h==d.length,m=g?c:d[h].from;if(m>p&&t.push(new Qn(p,m,i.tree,-o,s.from>=p||s.openStart,s.to<=m||s.openEnd)),g)break;p=d[h].to}}else t.push(new Qn(l,c,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return t}let CN=0;class _n{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=CN++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new _n([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new Ec;return t=>t.modified.indexOf(e)>-1?t:Ec.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let kN=0;class Ec{constructor(){this.instances=[],this.id=kN++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&AN(t,a.modified));if(r)return r;let i=[],s=new _n(i,e,t);for(let a of t)a.instances.push(s);let o=MN(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Ec.get(a,l));return s}}function AN(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function MN(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function IN(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+i);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==i.length)break;let p=i[d++];if(d==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new Dc(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return By.add(e)}const By=new xe;class Dc{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Dc.empty=new Dc([],2,null);function $y(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=t[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function EN(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function DN(n,e,t,r=0,i=n.length){let s=new RN(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class RN{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=t)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=i,u=ON(e)||Dc.empty,d=EN(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(t,a),c),u.opaque)return;let h=e.tree&&e.tree.prop(xe.mounted);if(h&&h.overlay){let p=e.node.enter(h.overlay[0].from+a,1),g=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),m=e.firstChild();for(let v=0,b=a;;v++){let y=v<h.overlay.length?h.overlay[v]:null,S=y?y.from+a:l,w=Math.max(t,b),C=Math.min(r,S);if(w<C&&m)for(;e.from<C&&(this.highlightRange(e,w,C,i,s),this.startSpan(Math.min(C,e.to),c),!(e.to>=S||!e.nextSibling())););if(!y||S>r)break;b=y.to+a,b>t&&(this.highlightRange(p.cursor(),Math.max(t,y.from+a),Math.min(r,b),"",g),this.startSpan(Math.min(r,b),c))}m&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function ON(n){let e=n.type.prop(By);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const W=_n.define,qo=W(),fr=W(),Qm=W(fr),eg=W(fr),hr=W(),Go=W(hr),ad=W(hr),Nn=W(),_r=W(Nn),On=W(),Tn=W(),Mf=W(),ps=W(Mf),Ko=W(),j={comment:qo,lineComment:W(qo),blockComment:W(qo),docComment:W(qo),name:fr,variableName:W(fr),typeName:Qm,tagName:W(Qm),propertyName:eg,attributeName:W(eg),className:W(fr),labelName:W(fr),namespace:W(fr),macroName:W(fr),literal:hr,string:Go,docString:W(Go),character:W(Go),attributeValue:W(Go),number:ad,integer:W(ad),float:W(ad),bool:W(hr),regexp:W(hr),escape:W(hr),color:W(hr),url:W(hr),keyword:On,self:W(On),null:W(On),atom:W(On),unit:W(On),modifier:W(On),operatorKeyword:W(On),controlKeyword:W(On),definitionKeyword:W(On),moduleKeyword:W(On),operator:Tn,derefOperator:W(Tn),arithmeticOperator:W(Tn),logicOperator:W(Tn),bitwiseOperator:W(Tn),compareOperator:W(Tn),updateOperator:W(Tn),definitionOperator:W(Tn),typeOperator:W(Tn),controlOperator:W(Tn),punctuation:Mf,separator:W(Mf),bracket:ps,angleBracket:W(ps),squareBracket:W(ps),paren:W(ps),brace:W(ps),content:Nn,heading:_r,heading1:W(_r),heading2:W(_r),heading3:W(_r),heading4:W(_r),heading5:W(_r),heading6:W(_r),contentSeparator:W(Nn),list:W(Nn),quote:W(Nn),emphasis:W(Nn),strong:W(Nn),link:W(Nn),monospace:W(Nn),strikethrough:W(Nn),inserted:W(),deleted:W(),changed:W(),invalid:W(),meta:Ko,documentMeta:W(Ko),annotation:W(Ko),processingInstruction:W(Ko),definition:_n.defineModifier(),constant:_n.defineModifier(),function:_n.defineModifier(),standard:_n.defineModifier(),local:_n.defineModifier(),special:_n.defineModifier()};$y([{tag:j.link,class:"tok-link"},{tag:j.heading,class:"tok-heading"},{tag:j.emphasis,class:"tok-emphasis"},{tag:j.strong,class:"tok-strong"},{tag:j.keyword,class:"tok-keyword"},{tag:j.atom,class:"tok-atom"},{tag:j.bool,class:"tok-bool"},{tag:j.url,class:"tok-url"},{tag:j.labelName,class:"tok-labelName"},{tag:j.inserted,class:"tok-inserted"},{tag:j.deleted,class:"tok-deleted"},{tag:j.literal,class:"tok-literal"},{tag:j.string,class:"tok-string"},{tag:j.number,class:"tok-number"},{tag:[j.regexp,j.escape,j.special(j.string)],class:"tok-string2"},{tag:j.variableName,class:"tok-variableName"},{tag:j.local(j.variableName),class:"tok-variableName tok-local"},{tag:j.definition(j.variableName),class:"tok-variableName tok-definition"},{tag:j.special(j.variableName),class:"tok-variableName2"},{tag:j.definition(j.propertyName),class:"tok-propertyName tok-definition"},{tag:j.typeName,class:"tok-typeName"},{tag:j.namespace,class:"tok-namespace"},{tag:j.className,class:"tok-className"},{tag:j.macroName,class:"tok-macroName"},{tag:j.propertyName,class:"tok-propertyName"},{tag:j.operator,class:"tok-operator"},{tag:j.comment,class:"tok-comment"},{tag:j.meta,class:"tok-meta"},{tag:j.invalid,class:"tok-invalid"},{tag:j.punctuation,class:"tok-punctuation"}]);var ld;const Ii=new xe;function TN(n){return Y.define({combine:n?e=>e.concat(n):void 0})}const NN=new xe;class yn{constructor(e,t,r=[],i=""){this.data=e,this.name=i,ye.prototype.hasOwnProperty("tree")||Object.defineProperty(ye.prototype,"tree",{get(){return At(this)}}),this.parser=t,this.extension=[Dr.of(this),ye.languageData.of((s,o,a)=>{let l=tg(s,o,a),c=l.type.prop(Ii);if(!c)return[];let u=s.facet(c),d=l.type.prop(NN);if(d){let h=l.resolve(o-l.from,a);for(let p of d)if(p.test(h,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(r)}isActiveAt(e,t,r=-1){return tg(e,t,r).type.prop(Ii)==this.data}findRegions(e){let t=e.facet(Dr);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Ii)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(xe.mounted);if(a){if(a.tree.prop(Ii)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof dt&&i(c,s.positions[l]+o)}};return i(At(e),0),r}get allowsNesting(){return!0}}yn.setState=pe.define();function tg(n,e,t){let r=n.facet(Dr),i=At(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,We.ExcludeBuffers))s.type.isTop&&(i=s);return i}class If extends yn{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=TN(e.languageData);return new If(t,e.parser.configure({props:[Ii.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new If(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function At(n){let e=n.field(yn.state,!1);return e?e.tree:dt.empty}class PN{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let ms=null;class Rc{constructor(e,t,r=[],i,s,o,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Rc(e,t,[],dt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new PN(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=dt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Qn.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Qn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ms;ms=this;try{return e()}finally{ms=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=ng(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,h)=>l.push({fromA:c,toA:u,fromB:d,toB:h})),r=Qn.applyChanges(r,l),i=dt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new Rc(this.parser,t,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=ng(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends mN{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=ms;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new dt(Xt.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return ms}}function ng(n,e,t){return Qn.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class zi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new zi(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Rc.create(e.facet(Dr).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new zi(r)}}yn.state=bt.define({create:zi.init,update(n,e){for(let t of e.effects)if(t.is(yn.setState))return t.value;return e.startState.facet(Dr)!=e.state.facet(Dr)?zi.init(e.state):n.apply(e)}});let Fy=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Fy=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const cd=typeof navigator<"u"&&(!((ld=navigator.scheduling)===null||ld===void 0)&&ld.isInputPending)?()=>navigator.scheduling.isInputPending():null,LN=it.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(yn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(yn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Fy(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(yn.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!cd?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>cd&&cd()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:yn.setState.of(new zi(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>pn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Dr=Y.define({combine(n){return n.length?n[0]:null},enables:n=>[yn.state,LN,G.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class gB{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const _N=Y.define(),mo=Y.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Oc(n){let e=n.facet(mo);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Ys(n,e){let t="",r=n.tabSize,i=n.facet(mo)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function Ah(n,e){n instanceof ye&&(n=new pu(n));for(let r of n.state.facet(_N)){let i=r(n,e);if(i!==void 0)return i}let t=At(n.state);return t?BN(n,t,e):null}class pu{constructor(e,t={}){this.state=e,this.options=t,this.unit=Oc(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return co(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const jN=new xe;function BN(n,e,t){return Hy(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function $N(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function FN(n){let e=n.type.prop(jN);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(xe.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Vy(o,!0,1,void 0,s&&!$N(o)?i.from:void 0)}return n.parent==null?HN:null}function Hy(n,e,t){for(;n;n=n.parent){let r=FN(n);if(r)return r(Mh.create(t,e,n))}return null}function HN(){return 0}class Mh extends pu{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new Mh(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(VN(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){let e=this.node.parent;return e?Hy(e,this.pos,this.base):0}}function VN(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function UN(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?t:null;a=l.to}}function vB({closing:n,align:e=!0,units:t=1}){return r=>Vy(r,e,t,n)}function Vy(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==n.pos+o,l=e?UN(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const bB=n=>n.baseIndent;function xB({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const zN=200;function WN(){return ye.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+zN)return n;let s=t.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let d=Ah(o,u.from);if(d==null)continue;let h=/^\s*/.exec(u.text)[0],p=Ys(o,d);h!=p&&l.push({from:u.from,to:u.from+h.length,insert:p})}return l.length?[n,{changes:l,sequential:!0}]:n})}const qN=Y.define(),GN=new xe;function yB(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function KN(n,e,t){let r=At(n);if(r.length<t)return null;let i=r.resolveInner(t,1),s=null;for(let o=i;o;o=o.parent){if(o.to<=t||o.from>t)continue;if(s&&o.from<e)break;let a=o.type.prop(GN);if(a&&(o.to<r.length-50||r.length==n.doc.length||!ZN(o))){let l=a(o,n);l&&l.from<=t&&l.from>=e&&l.to>t&&(s=l)}}return s}function ZN(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Tc(n,e,t){for(let r of n.facet(qN)){let i=r(n,e,t);if(i)return i}return KN(n,e,t)}function Uy(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const mu=pe.define({map:Uy}),go=pe.define({map:Uy});function zy(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Jr=bt.define({create(){return le.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(mu)&&!YN(n,t.value.from,t.value.to)?n=n.update({add:[rg.range(t.value.from,t.value.to)]}):t.is(go)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,s)=>{i<r&&s>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return n},provide:n=>G.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(rg.range(r,i))}return le.set(e,!0)}});function Nc(n,e,t){var r;let i=null;return(r=n.field(Jr,!1))===null||r===void 0||r.between(e,t,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function YN(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function Wy(n,e){return n.field(Jr,!1)?e:e.concat(pe.appendConfig.of(Gy()))}const JN=n=>{for(let e of zy(n)){let t=Tc(n.state,e.from,e.to);if(t)return n.dispatch({effects:Wy(n.state,[mu.of(t),qy(n,t)])}),!0}return!1},XN=n=>{if(!n.state.field(Jr,!1))return!1;let e=[];for(let t of zy(n)){let r=Nc(n.state,t.from,t.to);r&&e.push(go.of(r),qy(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function qy(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return G.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const QN=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=Tc(e,i.from,i.to);s&&t.push(mu.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:Wy(n.state,t)}),!!t.length},eP=n=>{let e=n.state.field(Jr,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(go.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},tP=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:JN},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:XN},{key:"Ctrl-Alt-[",run:QN},{key:"Ctrl-Alt-]",run:eP}],nP={placeholderDOM:null,placeholderText:""},rP=Y.define({combine(n){return Zn(n,nP)}});function Gy(n){return[Jr,oP]}const rg=le.replace({widget:new class extends ir{toDOM(n){let{state:e}=n,t=e.facet(rP),r=s=>{let o=n.lineBlockAt(n.posAtDOM(s.target)),a=Nc(n.state,o.from,o.to);a&&n.dispatch({effects:go.of(a)}),s.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,r);let i=document.createElement("span");return i.textContent=t.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),iP={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ud extends nr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function sP(n={}){let e=Object.assign(Object.assign({},iP),n),t=new ud(e,!0),r=new ud(e,!1),i=it.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Dr)!=o.state.facet(Dr)||o.startState.field(Jr,!1)!=o.state.field(Jr,!1)||At(o.startState)!=At(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Cr;for(let l of o.viewportLineBlocks){let c=Nc(o.state,l.from,l.to)?r:Tc(o.state,l.from,l.to)?t:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[i,XT({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||Ne.empty},initialSpacer(){return new ud(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=Nc(o.state,a.from,a.to);if(c)return o.dispatch({effects:go.of(c)}),!0;let u=Tc(o.state,a.from,a.to);return u?(o.dispatch({effects:mu.of(u)}),!0):!1}})}),Gy()]}const oP=G.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class vo{constructor(e,t){this.specs=e;let r;function i(a){let l=kr.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof yn?a=>a.prop(Ii)==o.data:o?a=>a==o:void 0,this.style=$y(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new kr(r):null,this.themeType=t.themeType}static define(e,t){return new vo(e,t||{})}}const Ef=Y.define(),Ky=Y.define({combine(n){return n.length?[n[0]]:null}});function dd(n){let e=n.facet(Ef);return e.length?e:n.facet(Ky)}function Zy(n,e){let t=[lP],r;return n instanceof vo&&(n.module&&t.push(G.styleModule.of(n.module)),r=n.themeType),e?.fallback?t.push(Ky.of(n)):r?t.push(Ef.computeN([G.darkTheme],i=>i.facet(G.darkTheme)==(r=="dark")?[n]:[])):t.push(Ef.of(n)),t}class aP{constructor(e){this.markCache=Object.create(null),this.tree=At(e.state),this.decorations=this.buildDeco(e,dd(e.state))}update(e){let t=At(e.state),r=dd(e.state),i=r!=dd(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return le.none;let r=new Cr;for(let{from:i,to:s}of e.visibleRanges)DN(this.tree,t,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=le.mark({class:l})))},i,s);return r.finish()}}const lP=ti.high(it.fromClass(aP,{decorations:n=>n.decorations})),cP=vo.define([{tag:j.meta,color:"#404740"},{tag:j.link,textDecoration:"underline"},{tag:j.heading,textDecoration:"underline",fontWeight:"bold"},{tag:j.emphasis,fontStyle:"italic"},{tag:j.strong,fontWeight:"bold"},{tag:j.strikethrough,textDecoration:"line-through"},{tag:j.keyword,color:"#708"},{tag:[j.atom,j.bool,j.url,j.contentSeparator,j.labelName],color:"#219"},{tag:[j.literal,j.inserted],color:"#164"},{tag:[j.string,j.deleted],color:"#a11"},{tag:[j.regexp,j.escape,j.special(j.string)],color:"#e40"},{tag:j.definition(j.variableName),color:"#00f"},{tag:j.local(j.variableName),color:"#30a"},{tag:[j.typeName,j.namespace],color:"#085"},{tag:j.className,color:"#167"},{tag:[j.special(j.variableName),j.macroName],color:"#256"},{tag:j.definition(j.propertyName),color:"#00c"},{tag:j.comment,color:"#940"},{tag:j.invalid,color:"#f00"}]),uP=G.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Yy=1e4,Jy="()[]{}",Xy=Y.define({combine(n){return Zn(n,{afterCursor:!0,brackets:Jy,maxScanDistance:Yy,renderMatch:hP})}}),dP=le.mark({class:"cm-matchingBracket"}),fP=le.mark({class:"cm-nonmatchingBracket"});function hP(n){let e=[],t=n.matched?dP:fP;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const pP=bt.define({create(){return le.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(Xy);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Hn(e.state,i.head,-1,r)||i.head>0&&Hn(e.state,i.head-1,1,r)||r.afterCursor&&(Hn(e.state,i.head,1,r)||i.head<e.state.doc.length&&Hn(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return le.set(t,!0)},provide:n=>G.decorations.from(n)}),mP=[pP,uP];function gP(n={}){return[Xy.of(n),mP]}const vP=new xe;function Df(n,e,t){let r=n.prop(e<0?xe.openedBy:xe.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function Rf(n){let e=n.type.prop(vP);return e?e(n.node):n}function Hn(n,e,t,r={}){let i=r.maxScanDistance||Yy,s=r.brackets||Jy,o=At(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let c=Df(l.type,t,s);if(c&&l.from<l.to){let u=Rf(l);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return bP(n,e,t,l,u,c,s)}}return xP(n,e,t,o,a.type,i,s)}function bP(n,e,t,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,u=a?.cursor();if(u&&(t<0?u.childBefore(r.from):u.childAfter(r.to)))do if(t<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=Rf(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Df(u.type,t,o))c++;else if(Df(u.type,-t,o)){if(c==0){let d=Rf(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function xP(n,e,t,r,i,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=n.doc.iterRange(e,t>0?n.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=s;){let p=u.value;t<0&&(h+=p.length);let g=e+h*t;for(let m=t>0?0:p.length-1,v=t>0?p.length:-1;m!=v;m+=t){let b=o.indexOf(p[m]);if(!(b<0||r.resolveInner(g+m,1).type!=i))if(b%2==0==t>0)d++;else{if(d==1)return{start:c,end:{from:g+m,to:g+m+1},matched:b>>1==l>>1};d--}}t>0&&(h+=p.length)}return u.done?{start:c,matched:!1}:null}const yP=Object.create(null),ig=[Xt.none],sg=[],wP=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])wP[n]=SP(yP,e);function fd(n,e){sg.indexOf(n)>-1||(sg.push(n),console.warn(e))}function SP(n,e){let t=null;for(let s of e.split(".")){let o=n[s]||j[s];o?typeof o=="function"?t?t=o(t):fd(s,`Modifier ${s} used at start of tag`):t?fd(s,`Tag ${s} used as modifier`):t=o:fd(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let r=e.replace(/ /g,"_"),i=Xt.define({id:ig.length,name:r,props:[IN({[r]:t})]});return ig.push(i),i.id}const CP=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=Eh(n.state,t.from);return r.line?kP(n):r.block?MP(n):!1};function Ih(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const kP=Ih(DP,0),AP=Ih(Qy,0),MP=Ih((n,e)=>Qy(n,e,EP(e)),0);function Eh(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const gs=50;function IP(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-gs,r),o=n.sliceDoc(i,i+gs),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,d;i-r<=2*gs?u=d=n.sliceDoc(r,i):(u=n.sliceDoc(r,r+gs),d=n.sliceDoc(i-gs,i));let h=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-t.length;return u.slice(h,h+e.length)==e&&d.slice(g,g+t.length)==t?{open:{pos:r+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function EP(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Qy(n,e,t=e.selection.ranges){let r=t.map(s=>Eh(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>IP(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function DP(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let a=r.length,l=1e9,c=Eh(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>i&&(s==o||o>d.from)){i=d.from;let h=/^\s*/.exec(d.text)[0].length,p=h==d.length,g=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<l&&(l=h),r.push({line:d,comment:g,token:c,indent:h,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of r)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Of=Kn.define(),RP=Kn.define(),OP=Y.define(),ew=Y.define({combine(n){return Zn(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}});function TP(n){let e=0;return n.iterChangedRanges((t,r)=>e=r),e}const tw=bt.define({create(){return Vn.empty},update(n,e){let t=e.state.facet(ew),r=e.annotation(Of);if(r){let l=e.docChanged?B.single(TP(e.changes)):void 0,c=Zt.fromTransaction(e,l),u=r.side,d=u==0?n.undone:n.done;return c?d=Pc(d,d.length,t.minDepth,c):d=iw(d,e.startState.selection),new Vn(u==0?r.rest:d,u==0?d:r.rest)}let i=e.annotation(RP);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(ut.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Zt.fromTransaction(e),o=e.annotation(ut.time),a=e.annotation(ut.userEvent);return s?n=n.addChanges(s,o,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Vn(n.done.map(Zt.fromJSON),n.undone.map(Zt.fromJSON))}});function NP(n={}){return[tw,ew.of(n),G.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?nw:e.inputType=="historyRedo"?Tf:null;return r?(e.preventDefault(),r(t)):!1}})]}function gu(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(tw,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const nw=gu(0,!1),Tf=gu(1,!1),PP=gu(0,!0),LP=gu(1,!0);class Zt{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Zt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Zt(e.changes&&ct.fromJSON(e.changes),[],e.mapped&&zn.fromJSON(e.mapped),e.startSelection&&B.fromJSON(e.startSelection),e.selectionsAfter.map(B.fromJSON))}static fromTransaction(e,t){let r=hn;for(let i of e.startState.facet(OP)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Zt(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,hn)}static selection(e){return new Zt(void 0,hn,void 0,void 0,e)}}function Pc(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function _P(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<t.length;){let c=t[l++],u=t[l++];a>=c&&o<=u&&(r=!0)}}),r}function jP(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function rw(n,e){return n.length?e.length?n.concat(e):n:e}const hn=[],BP=200;function iw(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-BP));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),Pc(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Zt.selection([e])]}function $P(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function hd(n,e){if(!n.length)return n;let t=n.length,r=hn;for(;t;){let i=FP(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Zt.selection(r)]:hn}function FP(n,e,t){let r=rw(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):hn,t);if(!n.changes)return Zt.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Zt(i,pe.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const HP=/^(input\.type|delete)($|\.)/;class Vn{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Vn(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||HP.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,_P(a.changes,e.changes))||r=="input.type.compose")?o=Pc(o,o.length-1,i.minDepth,new Zt(e.changes.compose(a.changes),rw(e.effects,a.effects),a.mapped,a.startSelection,hn)):o=Pc(o,o.length,i.minDepth,e),new Vn(o,hn,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:hn;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&jP(s[s.length-1],e)?this:new Vn(iw(this.done,e),this.undone,t,r)}addMapping(e){return new Vn(hd(this.done,e),hd(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1];if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Of.of({side:e,rest:$P(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?hn:i.slice(0,i.length-1);return s.mapped&&(o=hd(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Of.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Vn.empty=new Vn(hn,hn);const VP=[{key:"Mod-z",run:nw,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Tf,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Tf,preventDefault:!0},{key:"Mod-u",run:PP,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:LP,preventDefault:!0}];function ns(n,e){return B.create(n.ranges.map(e),n.mainIndex)}function Yn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Mn({state:n,dispatch:e},t){let r=ns(n.selection,t);return r.eq(n.selection)?!1:(e(Yn(n,r)),!0)}function vu(n,e){return B.cursor(e?n.to:n.from)}function sw(n,e){return Mn(n,t=>t.empty?n.moveByChar(t,e):vu(t,e))}function Rt(n){return n.textDirectionAt(n.state.selection.main.head)==qe.LTR}const ow=n=>sw(n,!Rt(n)),aw=n=>sw(n,Rt(n));function lw(n,e){return Mn(n,t=>t.empty?n.moveByGroup(t,e):vu(t,e))}const UP=n=>lw(n,!Rt(n)),zP=n=>lw(n,Rt(n));function WP(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function bu(n,e,t){let r=At(n).resolveInner(e.head),i=t?xe.closedBy:xe.openedBy;for(let l=e.head;;){let c=t?r.childAfter(l):r.childBefore(l);if(!c)break;WP(n,c,i)?r=c:l=t?c.to:c.from}let s=r.type.prop(i),o,a;return s&&(o=t?Hn(n,r.from,1):Hn(n,r.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?r.to:r.from,B.cursor(a,t?-1:1)}const qP=n=>Mn(n,e=>bu(n.state,e,!Rt(n))),GP=n=>Mn(n,e=>bu(n.state,e,Rt(n)));function cw(n,e){return Mn(n,t=>{if(!t.empty)return vu(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const uw=n=>cw(n,!1),dw=n=>cw(n,!0);function fw(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(G.scrollMargins)){let o=s(n);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function hw(n,e){let t=fw(n),{state:r}=n,i=ns(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):vu(o,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,c=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<c&&(s=G.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return n.dispatch(Yn(r,i),{effects:s}),!0}const og=n=>hw(n,!1),Nf=n=>hw(n,!0);function Or(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=B.cursor(r.from+s))}return i}const KP=n=>Mn(n,e=>Or(n,e,!0)),ZP=n=>Mn(n,e=>Or(n,e,!1)),YP=n=>Mn(n,e=>Or(n,e,!Rt(n))),JP=n=>Mn(n,e=>Or(n,e,Rt(n))),XP=n=>Mn(n,e=>B.cursor(n.lineBlockAt(e.head).from,1)),QP=n=>Mn(n,e=>B.cursor(n.lineBlockAt(e.head).to,-1));function e9(n,e,t){let r=!1,i=ns(n.selection,s=>{let o=Hn(n,s.head,-1)||Hn(n,s.head,1)||s.head>0&&Hn(n,s.head-1,1)||s.head<n.doc.length&&Hn(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return B.cursor(a)});return r?(e(Yn(n,i)),!0):!1}const t9=({state:n,dispatch:e})=>e9(n,e);function gn(n,e){let t=ns(n.state.selection,r=>{let i=e(r);return B.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Yn(n.state,t)),!0)}function pw(n,e){return gn(n,t=>n.moveByChar(t,e))}const mw=n=>pw(n,!Rt(n)),gw=n=>pw(n,Rt(n));function vw(n,e){return gn(n,t=>n.moveByGroup(t,e))}const n9=n=>vw(n,!Rt(n)),r9=n=>vw(n,Rt(n)),i9=n=>gn(n,e=>bu(n.state,e,!Rt(n))),s9=n=>gn(n,e=>bu(n.state,e,Rt(n)));function bw(n,e){return gn(n,t=>n.moveVertically(t,e))}const xw=n=>bw(n,!1),yw=n=>bw(n,!0);function ww(n,e){return gn(n,t=>n.moveVertically(t,e,fw(n).height))}const ag=n=>ww(n,!1),lg=n=>ww(n,!0),o9=n=>gn(n,e=>Or(n,e,!0)),a9=n=>gn(n,e=>Or(n,e,!1)),l9=n=>gn(n,e=>Or(n,e,!Rt(n))),c9=n=>gn(n,e=>Or(n,e,Rt(n))),u9=n=>gn(n,e=>B.cursor(n.lineBlockAt(e.head).from)),d9=n=>gn(n,e=>B.cursor(n.lineBlockAt(e.head).to)),cg=({state:n,dispatch:e})=>(e(Yn(n,{anchor:0})),!0),ug=({state:n,dispatch:e})=>(e(Yn(n,{anchor:n.doc.length})),!0),dg=({state:n,dispatch:e})=>(e(Yn(n,{anchor:n.selection.main.anchor,head:0})),!0),fg=({state:n,dispatch:e})=>(e(Yn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),f9=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),h9=({state:n,dispatch:e})=>{let t=yu(n).map(({from:r,to:i})=>B.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:B.create(t),userEvent:"select"})),!0},p9=({state:n,dispatch:e})=>{let t=ns(n.selection,r=>{var i;let s=At(n).resolveInner(r.head,1);for(;!(s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from||!(!((i=s.parent)===null||i===void 0)&&i.parent));)s=s.parent;return B.range(s.to,s.from)});return e(Yn(n,t)),!0},m9=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=B.create([t.main]):t.main.empty||(r=B.create([B.cursor(t.main.head)])),r?(e(Yn(n,r)),!0):!1};function xu(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(t="delete.backward",l=Zo(n,l,!1)):l>o&&(t="delete.forward",l=Zo(n,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Zo(n,o,!1),a=Zo(n,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:B.cursor(o)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?G.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Zo(n,e,t){if(n instanceof G)for(let r of n.state.facet(G.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const Sw=(n,e)=>xu(n,t=>{let{state:r}=n,i=r.doc.lineAt(t),s,o;if(!e&&t>i.from&&t<i.from+200&&!/[^ \t]/.test(s=i.text.slice(0,t-i.from))){if(s[s.length-1]=="	")return t-1;let a=co(s,r.tabSize),l=a%Oc(r)||Oc(r);for(let c=0;c<l&&s[s.length-1-c]==" ";c++)t--;o=t}else o=Et(i.text,t-i.from,e,e)+i.from,o==t&&i.number!=(e?r.doc.lines:1)&&(o+=e?1:-1);return o}),Pf=n=>Sw(n,!1),Cw=n=>Sw(n,!0),kw=(n,e)=>xu(n,t=>{let r=t,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==t&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Et(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=t)&&(a=u),r=l}return r}),Aw=n=>kw(n,!1),g9=n=>kw(n,!0),Mw=n=>xu(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)}),v9=n=>xu(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),b9=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Ce.of(["",""])},range:B.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},x9=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:Et(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Et(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(o,i))},range:B.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function yu(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function Iw(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of yu(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)i.push(B.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)i.push(B.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:B.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const y9=({state:n,dispatch:e})=>Iw(n,e,!1),w9=({state:n,dispatch:e})=>Iw(n,e,!0);function Ew(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of yu(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const S9=({state:n,dispatch:e})=>Ew(n,e,!1),C9=({state:n,dispatch:e})=>Ew(n,e,!0),k9=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(yu(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=ns(e.selection,i=>n.moveVertically(i,!0)).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function A9(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=At(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(xe.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const M9=Dw(!1),I9=Dw(!0);function Dw(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!n&&s==o&&A9(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new pu(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=Ah(c,s);for(u==null&&(u=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Ys(e,u)];return l&&d.push(Ys(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Ce.of(d)},range:B.cursor(s+1+d[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Dh(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=n.doc.lineAt(o);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),o=a.to+1}let s=n.changes(i);return{changes:i,range:B.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const E9=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new pu(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),i=Dh(n,(s,o,a)=>{let l=Ah(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=Ys(n,l);(c!=u||a.from<s.from+c.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},Rw=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Dh(n,(t,r)=>{r.push({from:t.from,insert:n.facet(mo)})}),{userEvent:"input.indent"})),!0),Ow=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Dh(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=co(i,n.tabSize),o=0,a=Ys(n,Math.max(0,s-Oc(n)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),D9=[{key:"Ctrl-b",run:ow,shift:mw,preventDefault:!0},{key:"Ctrl-f",run:aw,shift:gw},{key:"Ctrl-p",run:uw,shift:xw},{key:"Ctrl-n",run:dw,shift:yw},{key:"Ctrl-a",run:XP,shift:u9},{key:"Ctrl-e",run:QP,shift:d9},{key:"Ctrl-d",run:Cw},{key:"Ctrl-h",run:Pf},{key:"Ctrl-k",run:Mw},{key:"Ctrl-Alt-h",run:Aw},{key:"Ctrl-o",run:b9},{key:"Ctrl-t",run:x9},{key:"Ctrl-v",run:Nf}],R9=[{key:"ArrowLeft",run:ow,shift:mw,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:UP,shift:n9,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:YP,shift:l9,preventDefault:!0},{key:"ArrowRight",run:aw,shift:gw,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:zP,shift:r9,preventDefault:!0},{mac:"Cmd-ArrowRight",run:JP,shift:c9,preventDefault:!0},{key:"ArrowUp",run:uw,shift:xw,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cg,shift:dg},{mac:"Ctrl-ArrowUp",run:og,shift:ag},{key:"ArrowDown",run:dw,shift:yw,preventDefault:!0},{mac:"Cmd-ArrowDown",run:ug,shift:fg},{mac:"Ctrl-ArrowDown",run:Nf,shift:lg},{key:"PageUp",run:og,shift:ag},{key:"PageDown",run:Nf,shift:lg},{key:"Home",run:ZP,shift:a9,preventDefault:!0},{key:"Mod-Home",run:cg,shift:dg},{key:"End",run:KP,shift:o9,preventDefault:!0},{key:"Mod-End",run:ug,shift:fg},{key:"Enter",run:M9},{key:"Mod-a",run:f9},{key:"Backspace",run:Pf,shift:Pf},{key:"Delete",run:Cw},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Aw},{key:"Mod-Delete",mac:"Alt-Delete",run:g9},{mac:"Mod-Backspace",run:v9},{mac:"Mod-Delete",run:Mw}].concat(D9.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),O9=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:qP,shift:i9},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:GP,shift:s9},{key:"Alt-ArrowUp",run:y9},{key:"Shift-Alt-ArrowUp",run:S9},{key:"Alt-ArrowDown",run:w9},{key:"Shift-Alt-ArrowDown",run:C9},{key:"Escape",run:m9},{key:"Mod-Enter",run:I9},{key:"Alt-l",mac:"Ctrl-l",run:h9},{key:"Mod-i",run:p9,preventDefault:!0},{key:"Mod-[",run:Ow},{key:"Mod-]",run:Rw},{key:"Mod-Alt-\\",run:E9},{key:"Shift-Mod-k",run:k9},{key:"Shift-Mod-\\",run:t9},{key:"Mod-/",run:CP},{key:"Alt-A",run:AP}].concat(R9),T9={key:"Tab",run:Rw,shift:Ow};function $e(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)Tw(n,arguments[e]);return n}function Tw(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Tw(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const hg=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Wi{constructor(e,t,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(hg(a)):hg,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return St(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=dh(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=dn(e);let i=this.normalize(t);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<t.length&&t.charCodeAt(s)==a&&o++}}}match(e,t){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:t+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:t+1}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(Wi.prototype[Symbol.iterator]=function(){return this});const Nw={from:-1,to:-1,match:/.*/.exec("")},Rh="gm"+(/x/.unicode==null?"":"u");class Pw{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Nw,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Lw(e,t,r,i,s);this.re=new RegExp(t,Rh+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Lc(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=Lc(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const pd=new WeakMap;class ji{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=pd.get(e);if(!i||i.from>=r||i.to<=t){let a=new ji(t,e.sliceString(t,r));return pd.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:s,from:o}=i;return o>t&&(s=e.sliceString(t,o)+s,o=t),i.to<r&&(s+=e.sliceString(i.to,r)),pd.set(e,new ji(o,s)),new ji(t,s.slice(t-o,r-o))}}class Lw{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=Nw,this.matchPos=Lc(e,i),this.re=new RegExp(t,Rh+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=ji.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=Lc(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ji.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Pw.prototype[Symbol.iterator]=Lw.prototype[Symbol.iterator]=function(){return this});function N9(n){try{return new RegExp(n,Rh),!0}catch{return!1}}function Lc(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function Lf(n){let e=$e("input",{class:"cm-textfield",name:"line"}),t=$e("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),n.dispatch({effects:_c.of(!1)}),n.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},$e("label",n.state.phrase("Go to line"),": ",e)," ",$e("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:s}=n,o=s.doc.lineAt(s.selection.main.head),[,a,l,c,u]=i,d=c?+c.slice(1):0,h=l?+l:o.number;if(l&&u){let m=h/100;a&&(m=m*(a=="-"?-1:1)+o.number/s.doc.lines),h=Math.round(s.doc.lines*m)}else l&&a&&(h=h*(a=="-"?-1:1)+o.number);let p=s.doc.line(Math.max(1,Math.min(s.doc.lines,h))),g=B.cursor(p.from+Math.max(0,Math.min(d,p.length)));n.dispatch({effects:[_c.of(!1),G.scrollIntoView(g.from,{y:"center"})],selection:g}),n.focus()}return{dom:t}}const _c=pe.define(),pg=bt.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(_c)&&(n=t.value);return n},provide:n=>Gs.from(n,e=>e?Lf:null)}),P9=n=>{let e=qs(n,Lf);if(!e){let t=[_c.of(!0)];n.state.field(pg,!1)==null&&t.push(pe.appendConfig.of([pg,L9])),n.dispatch({effects:t}),e=qs(n,Lf)}return e&&e.dom.querySelector("input").focus(),!0},L9=G.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),_9={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},j9=Y.define({combine(n){return Zn(n,_9,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function B9(n){return[U9,V9]}const $9=le.mark({class:"cm-selectionMatch"}),F9=le.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function mg(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=ze.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=ze.Word)}function H9(n,e,t,r){return n(e.sliceDoc(t,t+1))==ze.Word&&n(e.sliceDoc(r-1,r))==ze.Word}const V9=it.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(j9),{state:t}=n,r=t.selection;if(r.ranges.length>1)return le.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return le.none;let l=t.wordAt(i.head);if(!l)return le.none;o=t.charCategorizer(i.head),s=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return le.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(mg(o,t,i.from,i.to)&&H9(o,t,i.from,i.to)))return le.none}else if(s=t.sliceDoc(i.from,i.to).trim(),!s)return le.none}let a=[];for(let l of n.visibleRanges){let c=new Wi(t.doc,s,l.from,l.to);for(;!c.next().done;){let{from:u,to:d}=c.value;if((!o||mg(o,t,u,d))&&(i.empty&&u<=i.from&&d>=i.to?a.push(F9.range(u,d)):(u>=i.to||d<=i.from)&&a.push($9.range(u,d)),a.length>e.maxMatches))return le.none}}return le.set(a)}},{decorations:n=>n.decorations}),U9=G.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),z9=({state:n,dispatch:e})=>{let{selection:t}=n,r=B.create(t.ranges.map(i=>n.wordAt(i.head)||B.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function W9(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let o=!1,a=new Wi(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Wi(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const q9=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return z9({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=W9(n,r);return i?(e(n.update({selection:n.selection.addRange(B.range(i.from,i.to),!1),effects:G.scrollIntoView(i.to)})),!0):!1},rs=Y.define({combine(n){return Zn(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new i3(e),scrollToMatch:e=>G.scrollIntoView(e)})}});class _w{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||N9(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Y9(this):new K9(this)}getCursor(e,t=0,r){let i=e.doc?e:ye.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?wi(this,i,t,r):yi(this,i,t,r)}}class jw{constructor(e){this.spec=e}}function yi(n,e,t,r){return new Wi(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?G9(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function G9(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),(e(jc(i,t-s))!=ze.Word||e(Bc(i,t-s))!=ze.Word)&&(e(Bc(i,r-s))!=ze.Word||e(jc(i,r-s))!=ze.Word))}class K9 extends jw{constructor(e){super(e)}nextMatch(e,t,r){let i=yi(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=yi(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),o=yi(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=yi(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=yi(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function wi(n,e,t,r){return new Pw(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?Z9(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function jc(n,e){return n.slice(Et(n,e,!1),e)}function Bc(n,e){return n.slice(e,Et(n,e))}function Z9(n){return(e,t,r)=>!r[0].length||(n(jc(r.input,r.index))!=ze.Word||n(Bc(r.input,r.index))!=ze.Word)&&(n(Bc(r.input,r.index+r[0].length))!=ze.Word||n(jc(r.input,r.index+r[0].length))!=ze.Word)}class Y9 extends jw{nextMatch(e,t,r){let i=wi(this.spec,e,r,e.doc.length).next();return i.done&&(i=wi(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),o=wi(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==t||a.from>s+10))return a;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t))}matchAll(e,t){let r=wi(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=wi(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Js=pe.define(),Oh=pe.define(),yr=bt.define({create(n){return new md(_f(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Js)?n=new md(t.value.create(),n.panel):t.is(Oh)&&(n=new md(n.query,t.value?Th:null));return n},provide:n=>Gs.from(n,e=>e.panel)});class md{constructor(e,t){this.query=e,this.panel=t}}const J9=le.mark({class:"cm-searchMatch"}),X9=le.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Q9=it.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(yr))}update(n){let e=n.state.field(yr);(e!=n.startState.field(yr)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return le.none;let{view:t}=this,r=new Cr;for(let i=0,s=t.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-500;)l=s[++i].to;n.highlight(t.state,a,l,(c,u)=>{let d=t.state.selection.ranges.some(h=>h.from==c&&h.to==u);r.add(c,u,d?X9:J9)})}return r.finish()}},{decorations:n=>n.decorations});function bo(n){return e=>{let t=e.state.field(yr,!1);return t&&t.query.spec.valid?n(e,t):Fw(e)}}const $c=bo((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=B.single(r.from,r.to),s=n.state.facet(rs);return n.dispatch({selection:i,effects:[Nh(n,r),s.scrollToMatch(i.main,n)],userEvent:"select.search"}),$w(n),!0}),Fc=bo((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let s=B.single(i.from,i.to),o=n.state.facet(rs);return n.dispatch({selection:s,effects:[Nh(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),$w(n),!0}),e3=bo((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:B.create(t.map(r=>B.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),t3=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],o=0;for(let a=new Wi(n.doc,n.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(B.range(a.value.from,a.value.to))}return e(n.update({selection:B.create(s,o),userEvent:"select.search.matches"})),!0},gg=bo((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let o=[],a,l,c=[];if(s.from==r&&s.to==i&&(l=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(t,s.from,s.to),c.push(G.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=B.single(s.from-u,s.to-u),c.push(Nh(n,s)),c.push(t.facet(rs).scrollToMatch(a.main,n))}return n.dispatch({changes:o,selection:a,effects:c,userEvent:"input.replace"}),!0}),n3=bo((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:G.announce.of(r),userEvent:"input.replace.all"}),!0});function Th(n){return n.state.facet(rs).createPanel(n)}function _f(n,e){var t,r,i,s,o;let a=n.selection.main,l=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=n.facet(rs);return new _w({search:((t=e?.literal)!==null&&t!==void 0?t:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function Bw(n){let e=qs(n,Th);return e&&e.dom.querySelector("[main-field]")}function $w(n){let e=Bw(n);e&&e==n.root.activeElement&&e.select()}const Fw=n=>{let e=n.state.field(yr,!1);if(e&&e.panel){let t=Bw(n);if(t&&t!=n.root.activeElement){let r=_f(n.state,e.query.spec);r.valid&&n.dispatch({effects:Js.of(r)}),t.focus(),t.select()}}else n.dispatch({effects:[Oh.of(!0),e?Js.of(_f(n.state,e.query.spec)):pe.appendConfig.of(o3)]});return!0},Hw=n=>{let e=n.state.field(yr,!1);if(!e||!e.panel)return!1;let t=qs(n,Th);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Oh.of(!1)}),!0},r3=[{key:"Mod-f",run:Fw,scope:"editor search-panel"},{key:"F3",run:$c,shift:Fc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:$c,shift:Fc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Hw,scope:"editor search-panel"},{key:"Mod-Shift-l",run:t3},{key:"Alt-g",run:P9},{key:"Mod-d",run:q9,preventDefault:!0}];class i3{constructor(e){this.view=e;let t=this.query=e.state.field(yr).query.spec;this.commit=this.commit.bind(this),this.searchField=$e("input",{value:t.search,placeholder:en(e,"Find"),"aria-label":en(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=$e("input",{value:t.replace,placeholder:en(e,"Replace"),"aria-label":en(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=$e("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=$e("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=$e("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,s,o){return $e("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=$e("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>$c(e),[en(e,"next")]),r("prev",()=>Fc(e),[en(e,"previous")]),r("select",()=>e3(e),[en(e,"all")]),$e("label",null,[this.caseField,en(e,"match case")]),$e("label",null,[this.reField,en(e,"regexp")]),$e("label",null,[this.wordField,en(e,"by word")]),...e.state.readOnly?[]:[$e("br"),this.replaceField,r("replace",()=>gg(e),[en(e,"replace")]),r("replaceAll",()=>n3(e),[en(e,"replace all")])],$e("button",{name:"close",onclick:()=>Hw(e),"aria-label":en(e,"close"),type:"button"},[""])])}commit(){let e=new _w({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Js.of(e)}))}keydown(e){lT(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Fc:$c)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),gg(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(Js)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(rs).top}}function en(n,e){return n.state.phrase(e)}const Yo=30,Jo=/[\s\.,:;?!]/;function Nh(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-Yo),o=Math.min(i,t+Yo),a=n.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Yo;l++)if(!Jo.test(a[l+1])&&Jo.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Yo;l--)if(!Jo.test(a[l-1])&&Jo.test(a[l])){a=a.slice(0,l);break}}return G.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const s3=G.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),o3=[yr,ti.lowest(Q9),s3];class Vw{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=At(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(Uw(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function vg(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function a3(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=vg(e)+vg(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function l3(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:a3(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}function wB(n,e){return t=>{for(let r=At(t.state).resolveInner(t.pos,-1);r;r=r.parent){if(n.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(t)}}class bg{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function wr(n){return n.selection.main.from}function Uw(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const zw=Kn.define();function c3(n,e,t,r){let{main:i}=n.selection,s=t-i.from,o=r-i.from;return Object.assign(Object.assign({},n.changeByRange(a=>a!=i&&t!=r&&n.sliceDoc(a.from+s,a.from+o)!=n.sliceDoc(t,r)?{range:a}:{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:e},range:B.cursor(a.from+s+e.length)})),{userEvent:"input.complete"})}const xg=new WeakMap;function u3(n){if(!Array.isArray(n))return n;let e=xg.get(n);return e||xg.set(n,e=l3(n)),e}const Ph=pe.define(),Xs=pe.define();class d3{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=St(e,t),i=dn(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(St(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let y=St(e,0),S=dn(y),w=S==e.length?0:-100;if(y!=t[0])if(y==r[0])w+=-200;else return!1;return this.ret(w,[0,S])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,c=0;if(a<0){for(let y=0,S=Math.min(e.length,200);y<S&&c<l;){let w=St(e,y);(w==t[c]||w==r[c])&&(i[c++]=y),y+=dn(w)}if(c<l)return!1}let u=0,d=0,h=!1,p=0,g=-1,m=-1,v=/[a-z]/.test(e),b=!0;for(let y=0,S=Math.min(e.length,200),w=0;y<S&&d<l;){let C=St(e,y);a<0&&(u<l&&C==t[u]&&(s[u++]=y),p<l&&(C==t[p]||C==r[p]?(p==0&&(g=y),m=y+1,p++):p=0));let A,k=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(A=dh(C))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!y||k==1&&v||w==0&&k!=0)&&(t[d]==C||r[d]==C&&(h=!0)?o[d++]=y:o.length&&(b=!1)),w=k,y+=dn(C)}return d==l&&o[0]==0&&b?this.result(-100+(h?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,m]):d==l?this.result(-100+(h?-200:0)+-700+(b?0:-1100),o,e):t.length==2?!1:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],s=0;for(let o of t){let a=o+(this.astral?dn(St(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}const Yt=Y.define({combine(n){return Zn(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:f3,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>yg(e(r),t(r)),optionClass:(e,t)=>r=>yg(e(r),t(r)),addToOptions:(e,t)=>e.concat(t)})}});function yg(n,e){return n?e?n+" "+e:n:e}function f3(n,e,t,r,i){let s=n.textDirection==qe.RTL,o=s,a=!1,l="top",c,u,d=e.left-i.left,h=i.right-e.right,p=r.right-r.left,g=r.bottom-r.top;if(o&&d<Math.min(p,h)?o=!1:!o&&h<Math.min(p,d)&&(o=!0),p<=(o?d:h))c=Math.max(i.top,Math.min(t.top,i.bottom-g))-e.top,u=Math.min(400,o?d:h);else{a=!0,u=Math.min(400,(s?e.right:i.right-e.left)-30);let m=i.bottom-e.bottom;m>=g||m>e.top?c=t.bottom-e.top:(l="bottom",c=e.bottom-t.top)}return{style:`${l}: ${c}px; max-width: ${u}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":o?"left":"right")}}function h3(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i){let s=document.createElement("span");s.className="cm-completionLabel";let o=t.displayLabel||t.label,a=0;for(let l=0;l<i.length;){let c=i[l++],u=i[l++];c>a&&s.appendChild(document.createTextNode(o.slice(a,c)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(o.slice(c,u))),d.className="cm-completionMatchedText",a=u}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function wg(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class p3{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:o}=i.open,a=e.state.facet(Yt);this.optionContent=h3(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=wg(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let c=l.target,u;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(u=/-(\d+)$/.exec(c.id))&&+u[1]<s.length){this.applyCompletion(e,s[+u[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Yt).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Xs.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var t,r,i;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((t=s.open)===null||t===void 0?void 0:t.disabled)!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((i=s.open)===null||i===void 0)&&i.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=wg(t.options.length,t.selected,this.view.state.facet(Yt).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>pn(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&g3(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(Yt).positionInfo(this.view,t,i,r,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let h=typeof c=="string"?c:c.name;if(h!=s&&(o>r.from||r.from==0))if(s=h,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let p=i.appendChild(document.createElement("completion-section"));p.textContent=h}}const u=i.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let h of this.optionContent){let p=h(a,this.view.state,l);p&&u.appendChild(p)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function m3(n,e){return t=>new p3(t,n,e)}function g3(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<t.top?n.scrollTop-=t.top-r.top:r.bottom>t.bottom&&(n.scrollTop+=r.bottom-t.bottom)}function Sg(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function v3(n,e){let t=[],r=null,i=l=>{t.push(l);let{section:c}=l.completion;if(c){r||(r=[]);let u=typeof c=="string"?c:c.name;r.some(d=>d.name==u)||r.push(typeof c=="string"?{name:u}:c)}};for(let l of n)if(l.hasResult()){let c=l.result.getMatch;if(l.result.filter===!1)for(let u of l.result.options)i(new bg(u,l.source,c?c(u):[],1e9-t.length));else{let u=new d3(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(u.match(d.label)){let h=d.displayLabel?c?c(d,u.matched):[]:u.matched;i(new bg(d,l.source,h,u.score+(d.boost||0)))}}}if(r){let l=Object.create(null),c=0,u=(d,h)=>{var p,g;return((p=d.rank)!==null&&p!==void 0?p:1e9)-((g=h.rank)!==null&&g!==void 0?g:1e9)||(d.name<h.name?-1:1)};for(let d of r.sort(u))c-=1e5,l[d.name]=c;for(let d of t){let{section:h}=d.completion;h&&(d.score+=l[typeof h=="string"?h:h.name])}}let s=[],o=null,a=e.facet(Yt).compareCompletions;for(let l of t.sort((c,u)=>u.score-c.score||a(c.completion,u.completion))){let c=l.completion;!o||o.label!=c.label||o.detail!=c.detail||o.type!=null&&c.type!=null&&o.type!=c.type||o.apply!=c.apply||o.boost!=c.boost?s.push(l):Sg(l.completion)>Sg(o)&&(s[s.length-1]=l),o=l.completion}return s}class Ei{constructor(e,t,r,i,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ei(this.options,Cg(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s){let o=v3(e,t);if(!o.length)return i&&e.some(l=>l.state==1)?new Ei(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=t.facet(Yt).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new Ei(o,Cg(r,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:m3(rn,Gw),above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Ei(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Hc{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new Hc(y3,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(Yt),s=(r.override||t.languageDataAt("autocomplete",wr(t)).map(u3)).map(a=>(this.active.find(c=>c.source==a)||new Gt(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!b3(s,this.active)?o=Ei.build(s,t,this.id,o,r):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Gt(a.source,0):a));for(let a of e.effects)a.is(qw)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Hc(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:x3}}function b3(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const x3={"aria-autocomplete":"list"};function Cg(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const y3=[];function jf(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Gt{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=jf(e),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Gt(i.source,0));for(let s of e.effects)if(s.is(Ph))i=new Gt(i.source,1,s.value?wr(e.state):-1);else if(s.is(Xs))i=new Gt(i.source,0);else if(s.is(Ww))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,t,r){return t=="delete"||!r.activateOnTyping?this.map(e.changes):new Gt(this.source,1)}handleChange(e){return e.changes.touchesRange(wr(e.startState))?new Gt(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Gt(this.source,this.state,e.mapPos(this.explicitPos))}}class Bi extends Gt{constructor(e,t,r,i,s){super(e,2,t),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,t,r){var i;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=wr(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||t=="delete"&&wr(e.startState)==this.from)return new Gt(this.source,t=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return w3(this.result.validFor,e.state,s,o)?new Bi(this.source,l,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new Vw(e.state,a,l>=0)))?new Bi(this.source,l,c,c.from,(i=c.to)!==null&&i!==void 0?i:wr(e.state)):new Gt(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Gt(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Bi(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function w3(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):Uw(n,!0).test(i)}const Ww=pe.define({map(n,e){return n.map(t=>t.map(e))}}),qw=pe.define(),rn=bt.define({create(){return Hc.start()},update(n,e){return n.update(e)},provide:n=>[yh.from(n,e=>e.tooltip),G.contentAttributes.from(n,e=>e.attrs)]});function Gw(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(rn).active.find(i=>i.source==e.source);return r instanceof Bi?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},c3(n.state,t,r.from,r.to)),{annotations:zw.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}function Xo(n,e="option"){return t=>{let r=t.state.field(rn,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(Yt).interactionDelay)return!1;let i=1,s;e=="page"&&(s=Ry(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),t.dispatch({effects:qw.of(a)}),!0}}const S3=n=>{let e=n.state.field(rn,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Yt).interactionDelay?!1:Gw(n,e.open.options[e.open.selected])},C3=n=>n.state.field(rn,!1)?(n.dispatch({effects:Ph.of(!0)}),!0):!1,k3=n=>{let e=n.state.field(rn,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Xs.of(null)}),!0)};class A3{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const kg=50,M3=50,I3=1e3,E3=it.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(rn).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(rn);if(!n.selectionSet&&!n.docChanged&&n.startState.field(rn)==e)return;let t=n.transactions.some(r=>(r.selection||r.docChanged)&&!jf(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(t||i.updates.length+n.transactions.length>M3&&Date.now()-i.time>I3){for(let s of i.context.abortListeners)try{s()}catch(o){pn(this.view.state,o)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),kg):-1,this.composing!=0)for(let r of n.transactions)jf(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(rn);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=wr(e),r=new Vw(e,t,n.explicitPos==t),i=new A3(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Xs.of(null)}),pn(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),kg))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Yt);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let o=new Bi(i.active.source,i.active.explicitPos,i.done,i.done.from,(n=i.done.to)!==null&&n!==void 0?n:wr(i.updates.length?i.updates[0].startState:this.view.state));for(let a of i.updates)o=o.update(a,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(rn).active.find(o=>o.source==i.active.source);if(s&&s.state==1)if(i.done==null){let o=new Gt(i.active.source,0);for(let a of i.updates)o=o.update(a,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:Ww.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(rn,!1);if(e&&e.tooltip&&this.view.state.facet(Yt).closeOnBlur){let t=e.open&&Ry(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&this.view.dispatch({effects:Xs.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ph.of(!1)}),20),this.composing=0}}}),Kw=G.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class D3{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}}class Lh{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,kt.TrackDel),r=e.mapPos(this.to,1,kt.TrackDel);return t==null||r==null?null:new Lh(this.field,t,r)}}class _h{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let d=0;d<u;d++)c+=e.facet(mo);i.push(t+c.length-u),l=c+l.slice(u)}r.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new Lh(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let t=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1;for(let u=0;u<t.length;u++)(a!=null?t[u].seq==a:l&&t[u].name==l)&&(c=u);if(c<0){let u=0;for(;u<t.length&&(a==null||t[u].seq!=null&&t[u].seq<a);)u++;t.splice(u,0,{seq:a,name:l}),c=u;for(let d of i)d.field>=c&&d.field++}i.push(new D3(c,r.length,s.index,s.index+l.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}for(let a;a=/\\([{}])/.exec(o);){o=o.slice(0,a.index)+a[1]+o.slice(a.index+a[0].length);for(let l of i)l.line==r.length&&l.from>a.index&&(l.from--,l.to--)}r.push(o)}return new _h(r,i)}}let R3=le.widget({widget:new class extends ir{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),O3=le.mark({class:"cm-snippetField"});class is{constructor(e,t){this.ranges=e,this.active=t,this.deco=le.set(e.map(r=>(r.from==r.to?R3:O3).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new is(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}}const xo=pe.define({map(n,e){return n&&n.map(e)}}),T3=pe.define(),Qs=bt.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(xo))return t.value;if(t.is(T3)&&n)return new is(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>G.decorations.from(n,e=>e?e.deco:le.none)});function jh(n,e){return B.create(n.filter(t=>t.field==e).map(t=>B.range(t.from,t.to)))}function N3(n){let e=_h.parse(n);return(t,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(t.state,i),l={changes:{from:i,to:s,insert:Ce.of(o)},scrollIntoView:!0,annotations:r?zw.of(r):void 0};if(a.length&&(l.selection=jh(a,0)),a.length>1){let c=new is(a,0),u=l.effects=[xo.of(c)];t.state.field(Qs,!1)===void 0&&u.push(pe.appendConfig.of([Qs,B3,$3,Kw]))}t.dispatch(t.state.update(l))}}function Zw(n){return({state:e,dispatch:t})=>{let r=e.field(Qs,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,s=n>0&&!r.ranges.some(o=>o.field==i+n);return t(e.update({selection:jh(r.ranges,i),effects:xo.of(s?null:new is(r.ranges,i))})),!0}}const P3=({state:n,dispatch:e})=>n.field(Qs,!1)?(e(n.update({effects:xo.of(null)})),!0):!1,L3=Zw(1),_3=Zw(-1),j3=[{key:"Tab",run:L3,shift:_3},{key:"Escape",run:P3}],Ag=Y.define({combine(n){return n.length?n[0]:j3}}),B3=ti.highest(ho.compute([Ag],n=>n.facet(Ag)));function SB(n,e){return Object.assign(Object.assign({},e),{apply:N3(n)})}const $3=G.domEventHandlers({mousedown(n,e){let t=e.state.field(Qs,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:jh(t.ranges,i.field),effects:xo.of(t.ranges.some(s=>s.field>i.field)?new is(t.ranges,i.field):null)}),!0)}}),eo={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ur=pe.define({map(n,e){let t=e.mapPos(n,-1,kt.TrackAfter);return t??void 0}}),Bh=new class extends Zr{};Bh.startSide=1;Bh.endSide=-1;const Yw=bt.define({create(){return Ne.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(r,-1)&&(n=Ne.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(Ur)&&(n=n.update({add:[Bh.range(t.value,t.value+1)]}));return n}});function F3(){return[V3,Yw]}const gd="()[]{}<>";function Jw(n){for(let e=0;e<gd.length;e+=2)if(gd.charCodeAt(e)==n)return gd.charAt(e+1);return dh(n<128?n:n+1)}function Xw(n,e){return n.languageDataAt("closeBrackets",e)[0]||eo}const H3=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),V3=G.inputHandler.of((n,e,t,r)=>{if((H3?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&dn(St(r,0))==1||e!=i.from||t!=i.to)return!1;let s=W3(n.state,r);return s?(n.dispatch(s),!0):!1}),U3=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=Xw(n,n.selection.main.head).brackets||eo.brackets,i=null,s=n.changeByRange(o=>{if(o.empty){let a=q3(n.doc,o.head);for(let l of r)if(l==a&&wu(n.doc,o.head)==Jw(St(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:B.cursor(o.head-l.length)}}return{range:i=o}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},z3=[{key:"Backspace",run:U3}];function W3(n,e){let t=Xw(n,n.selection.main.head),r=t.brackets||eo.brackets;for(let i of r){let s=Jw(St(i,0));if(e==i)return s==i?Z3(n,i,r.indexOf(i+i+i)>-1,t):G3(n,i,s,t.before||eo.before);if(e==s&&Qw(n,n.selection.main.from))return K3(n,i,s)}return null}function Qw(n,e){let t=!1;return n.field(Yw).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function wu(n,e){let t=n.sliceString(e,e+2);return t.slice(0,dn(St(t,0)))}function q3(n,e){let t=n.sliceString(e-2,e);return dn(St(t,0))==t.length?t:t.slice(1)}function G3(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Ur.of(o.to+e.length),range:B.range(o.anchor+e.length,o.head+e.length)};let a=wu(n.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:Ur.of(o.head+e.length),range:B.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function K3(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&wu(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:B.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Z3(n,e,t,r){let i=r.stringPrefixes||eo.stringPrefixes,s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Ur.of(a.to+e.length),range:B.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=wu(n.doc,l),u;if(c==e){if(Mg(n,l))return{changes:{insert:e+e,from:l},effects:Ur.of(l+e.length),range:B.cursor(l+e.length)};if(Qw(n,l)){let h=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:B.cursor(l+h.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(u=Ig(n,l-2*e.length,i))>-1&&Mg(n,u))return{changes:{insert:e+e+e+e,from:l},effects:Ur.of(l+e.length),range:B.cursor(l+e.length)};if(n.charCategorizer(l)(c)!=ze.Word&&Ig(n,l,i)>-1&&!Y3(n,l,e,i))return{changes:{insert:e+e,from:l},effects:Ur.of(l+e.length),range:B.cursor(l+e.length)}}return{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Mg(n,e){let t=At(n).resolveInner(e+1);return t.parent&&t.from==e}function Y3(n,e,t,r){let i=At(n).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),l=a.indexOf(t);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>t.length+l;){if(n.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function Ig(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=ze.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=ze.Word)return s}return-1}function J3(n={}){return[rn,Yt.of(n),E3,X3,Kw]}const eS=[{key:"Ctrl-Space",run:C3},{key:"Escape",run:k3},{key:"ArrowDown",run:Xo(!0)},{key:"ArrowUp",run:Xo(!1)},{key:"PageDown",run:Xo(!0,"page")},{key:"PageUp",run:Xo(!1,"page")},{key:"Enter",run:S3}],X3=ti.highest(ho.computeN([Yt],n=>n.facet(Yt).defaultKeymap?[eS]:[]));class Q3{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class Fr{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,s=r.facet(rS).markerFilter;s&&(i=s(i));let o=le.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?le.widget({widget:new lL(a),diagnostic:a}).range(a.from):le.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new Fr(o,t,qi(o))}}function qi(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new Q3(i,s,o.diagnostic),!1}),r}function eL(n,e){let t=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(r=>r.is(tS))||n.changes.touchesRange(t.from,t.to))}function tL(n,e){return n.field(on,!1)?e:e.concat(pe.appendConfig.of(dL))}const tS=pe.define(),$h=pe.define(),nS=pe.define(),on=bt.define({create(){return new Fr(le.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),r=null;if(n.selected){let i=e.changes.mapPos(n.selected.from,1);r=qi(t,n.selected.diagnostic,i)||qi(t,null,i)}n=new Fr(t,n.panel,r)}for(let t of e.effects)t.is(tS)?n=Fr.init(t.value,n.panel,e.state):t.is($h)?n=new Fr(n.diagnostics,t.value?Su.open:null,n.selected):t.is(nS)&&(n=new Fr(n.diagnostics,n.panel,t.value));return n},provide:n=>[Gs.from(n,e=>e.panel),G.decorations.from(n,e=>e.diagnostics)]}),nL=le.mark({class:"cm-lintRange cm-lintRange-active"});function rL(n,e,t){let{diagnostics:r}=n.state.field(on),i=[],s=2e8,o=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,c,{spec:u})=>{e>=l&&e<=c&&(l==c||(e>l||t>0)&&(e<c||t<0))&&(i.push(u.diagnostic),s=Math.min(l,s),o=Math.max(c,o))});let a=n.state.facet(rS).tooltipFilter;return a&&(i=a(i)),i.length?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:iL(n,i)}}}:null}function iL(n,e){return $e("ul",{class:"cm-tooltip-lint"},e.map(t=>sS(n,t,!1)))}const sL=n=>{let e=n.state.field(on,!1);(!e||!e.panel)&&n.dispatch({effects:tL(n.state,[$h.of(!0)])});let t=qs(n,Su.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Eg=n=>{let e=n.state.field(on,!1);return!e||!e.panel?!1:(n.dispatch({effects:$h.of(!1)}),!0)},oL=n=>{let e=n.state.field(on,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},aL=[{key:"Mod-Shift-m",run:sL,preventDefault:!0},{key:"F8",run:oL}],rS=Y.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},Zn(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function iS(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function sS(n,e,t){var r;let i=t?iS(e.actions):[];return $e("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},$e("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let p=qi(n.state.field(on).diagnostics,e);p&&s.apply(n,p.from,p.to)},{name:c}=s,u=i[o]?c.indexOf(i[o]):-1,d=u<0?c:[c.slice(0,u),$e("u",c.slice(u,u+1)),c.slice(u+1)];return $e("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&$e("div",{class:"cm-diagnosticSource"},e.source))}class lL extends ir{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return $e("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Dg{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=sS(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Su{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)Eg(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=iS(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=qi(this.view.state.field(on).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=$e("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=$e("div",{class:"cm-panel-lint"},this.list,$e("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Eg(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(on).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(on),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let c=-1,u;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){c=d;break}c<0?(u=new Dg(this.view,l.diagnostic),this.items.splice(r,0,u),i=!0):(u=this.items[c],c>r&&(this.items.splice(r,c-r),i=!0)),t&&u.diagnostic==t.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),s=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new Dg(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(on),r=qi(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:nS.of(r)})}static open(e){return new Su(e)}}function cL(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Qo(n){return cL(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const uL=G.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Qo("#d11")},".cm-lintRange-warning":{backgroundImage:Qo("orange")},".cm-lintRange-info":{backgroundImage:Qo("#999")},".cm-lintRange-hint":{backgroundImage:Qo("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),dL=[on,G.decorations.compute([on],n=>{let{selected:e,panel:t}=n.field(on);return!e||!t||e.from==e.to?le.none:le.set([nL.range(e.from,e.to)])}),ZT(rL,{hideOn:eL}),uL];var Rg=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(z3)),e.defaultKeymap!==!1&&(r=r.concat(O9)),e.searchKeymap!==!1&&(r=r.concat(r3)),e.historyKeymap!==!1&&(r=r.concat(VP)),e.foldKeymap!==!1&&(r=r.concat(tP)),e.completionKeymap!==!1&&(r=r.concat(eS)),e.lintKeymap!==!1&&(r=r.concat(aL));var i=[];return e.lineNumbers!==!1&&i.push(iN()),e.highlightActiveLineGutter!==!1&&i.push(aN()),e.highlightSpecialChars!==!1&&i.push(AT()),e.history!==!1&&i.push(NP()),e.foldGutter!==!1&&i.push(sP()),e.drawSelection!==!1&&i.push(pT()),e.dropCursor!==!1&&i.push(xT()),e.allowMultipleSelections!==!1&&i.push(ye.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(WN()),e.syntaxHighlighting!==!1&&i.push(Zy(cP,{fallback:!0})),e.bracketMatching!==!1&&i.push(gP()),e.closeBrackets!==!1&&i.push(F3()),e.autocompletion!==!1&&i.push(J3()),e.rectangularSelection!==!1&&i.push($T()),t!==!1&&i.push(VT()),e.highlightActiveLine!==!1&&i.push(OT()),e.highlightSelectionMatches!==!1&&i.push(B9()),e.tabSize&&typeof e.tabSize=="number"&&i.push(mo.of(" ".repeat(e.tabSize))),i.concat([ho.of(r.flat())]).filter(Boolean)};const fL="#e5c07b",Og="#e06c75",hL="#56b6c2",pL="#ffffff",ec="#abb2bf",Bf="#7d8799",mL="#61afef",gL="#98c379",Tg="#d19a66",vL="#c678dd",bL="#21252b",Ng="#2c313a",Pg="#282c34",vd="#353a42",xL="#3E4451",Lg="#528bff",yL=G.theme({"&":{color:ec,backgroundColor:Pg},".cm-content":{caretColor:Lg},".cm-cursor, .cm-dropCursor":{borderLeftColor:Lg},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:xL},".cm-panels":{backgroundColor:bL,color:ec},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Pg,color:Bf,border:"none"},".cm-activeLineGutter":{backgroundColor:Ng},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:vd},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:vd,borderBottomColor:vd},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ng,color:ec}}},{dark:!0}),wL=vo.define([{tag:j.keyword,color:vL},{tag:[j.name,j.deleted,j.character,j.propertyName,j.macroName],color:Og},{tag:[j.function(j.variableName),j.labelName],color:mL},{tag:[j.color,j.constant(j.name),j.standard(j.name)],color:Tg},{tag:[j.definition(j.name),j.separator],color:ec},{tag:[j.typeName,j.className,j.number,j.changed,j.annotation,j.modifier,j.self,j.namespace],color:fL},{tag:[j.operator,j.operatorKeyword,j.url,j.escape,j.regexp,j.link,j.special(j.string)],color:hL},{tag:[j.meta,j.comment],color:Bf},{tag:j.strong,fontWeight:"bold"},{tag:j.emphasis,fontStyle:"italic"},{tag:j.strikethrough,textDecoration:"line-through"},{tag:j.link,color:Bf,textDecoration:"underline"},{tag:j.heading,fontWeight:"bold",color:Og},{tag:[j.atom,j.bool,j.special(j.variableName)],color:Tg},{tag:[j.processingInstruction,j.string,j.inserted],color:gL},{tag:j.invalid,color:pL}]),SL=[yL,Zy(wL)];var CL=G.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),kL=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:r=!0,readOnly:i=!1,theme:s="light",placeholder:o="",basicSetup:a=!0}=e,l=[];switch(t&&l.unshift(ho.of([T9])),a&&(typeof a=="boolean"?l.unshift(Rg()):l.unshift(Rg(a))),o&&l.unshift(LT(o)),s){case"light":l.push(CL);break;case"dark":l.push(SL);break;case"none":break;default:l.push(s);break}return r===!1&&l.push(G.editable.of(!1)),i&&l.push(ye.readOnly.of(!0)),[...l]},AL=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)});class ML{constructor(e,t){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=t,this.timeoutMS=t,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(t=>{try{t()}catch(r){console.error("TimeoutLatch callback error:",r)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class _g{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var bd=null,IL=()=>typeof window>"u"?new _g:(bd||(bd=new _g),bd),jg=Kn.define(),EL=200,DL=[];function RL(n){var{value:e,selection:t,onChange:r,onStatistics:i,onCreateEditor:s,onUpdate:o,extensions:a=DL,autoFocus:l,theme:c="light",height:u=null,minHeight:d=null,maxHeight:h=null,width:p=null,minWidth:g=null,maxWidth:m=null,placeholder:v="",editable:b=!0,readOnly:y=!1,indentWithTab:S=!0,basicSetup:w=!0,root:C,initialState:A}=n,[k,I]=x.useState(),[D,O]=x.useState(),[T,N]=x.useState(),L=x.useState(()=>({current:null}))[0],P=x.useState(()=>({current:null}))[0],H=G.theme({"&":{height:u,minHeight:d,maxHeight:h,width:p,minWidth:g,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),q=G.updateListener.of(ee=>{if(ee.docChanged&&typeof r=="function"&&!ee.transactions.some(K=>K.annotation(jg))){L.current?L.current.reset():(L.current=new ML(()=>{if(P.current){var K=P.current;P.current=null,K()}L.current=null},EL),IL().add(L.current));var de=ee.state.doc,ge=de.toString();r(ge,ee)}i&&i(AL(ee))}),Z=kL({theme:c,editable:b,readOnly:y,placeholder:v,indentWithTab:S,basicSetup:w}),ae=[q,H,...Z];return o&&typeof o=="function"&&ae.push(G.updateListener.of(o)),ae=ae.concat(a),x.useLayoutEffect(()=>{if(k&&!T){var ee={doc:e,selection:t,extensions:ae},de=A?ye.fromJSON(A.json,ee,A.fields):ye.create(ee);if(N(de),!D){var ge=new G({state:de,parent:k,root:C});O(ge),s&&s(ge,de)}}return()=>{D&&(N(void 0),O(void 0))}},[k,T]),x.useEffect(()=>{n.container&&I(n.container)},[n.container]),x.useEffect(()=>()=>{D&&(D.destroy(),O(void 0)),L.current&&(L.current.cancel(),L.current=null)},[D]),x.useEffect(()=>{l&&D&&D.focus()},[l,D]),x.useEffect(()=>{D&&D.dispatch({effects:pe.reconfigure.of(ae)})},[c,a,u,d,h,p,g,m,v,b,y,S,w,r,o]),x.useEffect(()=>{if(e!==void 0){var ee=D?D.state.doc.toString():"";if(D&&e!==ee){var de=L.current&&!L.current.isDone,ge=()=>{D&&e!==D.state.doc.toString()&&D.dispatch({changes:{from:0,to:D.state.doc.toString().length,insert:e||""},annotations:[jg.of(!0)]})};de?P.current=ge:ge()}}},[e,D]),{state:T,setState:N,view:D,setView:O,container:k,setContainer:I}}var OL=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],TL=x.forwardRef((n,e)=>{var{className:t,value:r="",selection:i,extensions:s=[],onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:c,autoFocus:u,theme:d="light",height:h,minHeight:p,maxHeight:g,width:m,minWidth:v,maxWidth:b,basicSetup:y,placeholder:S,indentWithTab:w,editable:C,readOnly:A,root:k,initialState:I}=n,D=Nb(n,OL),O=x.useRef(null),{state:T,view:N,container:L,setContainer:P}=RL({root:k,value:r,autoFocus:u,theme:d,height:h,minHeight:p,maxHeight:g,width:m,minWidth:v,maxWidth:b,basicSetup:y,placeholder:S,indentWithTab:w,editable:C,readOnly:A,selection:i,onChange:o,onStatistics:a,onCreateEditor:l,onUpdate:c,extensions:s,initialState:I});x.useImperativeHandle(e,()=>({editor:O.current,state:T,view:N}),[O,L,T,N]);var H=x.useCallback(Z=>{O.current=Z,P(Z)},[P]);if(typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var q=typeof d=="string"?"cm-theme-"+d:"cm-theme";return f.jsx("div",se({ref:H,className:""+q+(t?" "+t:"")},D))});TL.displayName="CodeMirror";const NL=()=>{const{isDirty:n}=qc(),e=()=>{window.location.hash="/"};return f.jsx(ne,{className:"text-grey-700 hover:!text-grey-900","data-testid":"exit-settings",icon:"close",id:"done-button",label:"",link:!0,title:"Close (ESC)",onClick:()=>js(n,e)})},PL="/ghost/assets/logo-loader-88VPEpXE.mp4",LL="/ghost/assets/logo-loader-dark-CuSPz-zc.mp4",oS=x.createContext(void 0),_L=({children:n})=>{const e=D2(),t=R2(),r=O2(),i=fb(),[s,o]=x.useState(!1);x.useEffect(()=>{o(document.documentElement.classList.contains("dark"))},[]);const a=[e,t,r,i],l=a.map(c=>c.error).find(Boolean);if(l)throw l;return a.some(c=>c.isLoading)?f.jsx("div",{className:"gh-loading-orb-container",style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:"8vh"},children:f.jsx("video",{autoPlay:!0,className:"gh-loading-orb",height:"100",preload:"metadata",style:{width:"100px",height:"100px"},width:"100",loop:!0,muted:!0,playsInline:!0,children:f.jsx("source",{src:s?LL:PL,type:"video/mp4"})})}):f.jsx(oS.Provider,{value:{settings:e.data.settings,siteData:t.data.site,config:r.data.config,currentUser:i.data},children:n})},Pe=()=>x.useContext(oS),Ot=({savingDelay:n,onValidate:e}={})=>{const t=x.useRef(null),{siteData:r,settings:i}=Pe(),{mutateAsync:s}=Xr(),o=vt(),[a,l]=x.useState(!1),{formState:c,saveState:u,handleSave:d,updateForm:h,setFormState:p,reset:g,validate:m,errors:v,clearError:b,okProps:y}=uh({initialState:i||[],savingDelay:n,onSave:async()=>{await s?.(w())},onSaveError:o,onValidate:e}),{setGlobalDirtyState:S}=qc();x.useEffect(()=>{S(c.some(I=>I.dirty))},[c,S]),x.useEffect(()=>{a&&t.current&&t.current.focus()},[a]),x.useEffect(()=>{(!a||u==="saving")&&p(()=>i)},[i]);const w=()=>c?.filter(I=>I.dirty)?.map(I=>({key:I.key,value:I.value}));return{localSettings:c,isEditing:a,saveState:u,focusRef:t,siteData:r,handleSave:async()=>{const I=await d();return I&&l(!1),I},handleCancel:()=>{g(),l(!1)},updateSetting:(I,D)=>{h(O=>O.some(T=>T.key===I)?O.map(T=>T.key===I?{...T,value:D,dirty:!0}:T):[...O,{key:I,value:D,dirty:!0}])},handleEditingChange:I=>{l(I)},validate:m,errors:v,clearError:b,okProps:y}},jL=(n,e)=>{const[t,r]=x.useState("Save"),[i,s]=x.useState(!1);return{savingTitle:t,isSaving:i,onSaveClick:async()=>{s(!0),r("Saving"),await n({fakeWhenUnchanged:e}),setTimeout(()=>{r("Saved"),setTimeout(()=>{r("Save"),s(!1)},1e3)},1e3)}}},BL=({afterClose:n})=>{const{localSettings:e,handleSave:t,updateSetting:r}=Ot(),i=rr(),[s,o]=Te(e,["codeinjection_head","codeinjection_foot"]),[a,l]=x.useState("header"),c=x.useRef(null),u=x.useRef(null),d=x.useMemo(()=>no(()=>import("./index-nC0DduzN.js"),__vite__mapDeps([7,1,2,3,4,5,6])).then(y=>y.html()),[]),h={extensions:[d],hint:"Code here will be injected into the {{ghost_head}} tag on every page of the site",value:s||"",onChange:y=>r("codeinjection_head",y)},p={extensions:[d],hint:"Code here will be injected into the {{ghost_foot}} tag on every page of the site",value:o||"",onChange:y=>r("codeinjection_foot",y)},g=[{id:"header",title:"Site header",contents:f.jsx(Xh,{height:"full",...h,ref:c,className:"mt-2","data-testid":"header-code",autoFocus:!0}),tabWrapperClassName:"flex-auto",containerClassName:"h-full"},{id:"footer",title:"Site footer",contents:f.jsx(Xh,{height:"full",...p,ref:u,className:"mt-2","data-testid":"footer-code"}),tabWrapperClassName:"flex-auto",containerClassName:"h-full"}],{savingTitle:m,isSaving:v,onSaveClick:b}=jL(t,!0);return x.useEffect(()=>{const y=S=>{(S.metaKey||S.ctrlKey)&&S.key==="s"&&(S.preventDefault(),b())};return window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}}),f.jsx(Rr,{afterClose:n,backDropClick:!1,cancelLabel:"Close",footer:f.jsx(f.Fragment,{}),height:"full",size:"full",testId:"modal-code-injection",children:f.jsxs("div",{className:"flex h-full flex-col",children:[f.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[f.jsx(ft,{level:2,children:"Code injection"}),f.jsx(_s,{buttons:[{label:"Close",color:"outline",onClick:()=>{i.remove(),n?.()}},{disabled:v,label:m,color:m==="Saved"?"green":"black",onClick:b}]})]}),f.jsx(Gn,{containerClassName:"flex-auto flex flex-col mb-16",selectedTab:a,tabs:g,onTabChange:l})]})})},$L=Ye.create(BL),FL=(n,e)=>`${n}-${e}`,HL=()=>{const[n,e]=x.useState(""),[t,r]=x.useState(!1),i=x.useRef(new Map),[s,o]=x.useState(new Set),a=p=>p.length?p.some(g=>g.toLowerCase().includes(n.toLowerCase())):!0,l=x.useCallback((p,g)=>{i.current.set(p,g),(!n||g.some(v=>v.toLowerCase().includes(n.toLowerCase())))&&o(v=>new Set(v).add(p))},[n]),c=x.useCallback(p=>{i.current.delete(p),o(g=>{const m=new Set(g);return m.delete(p),m})},[]);x.useEffect(()=>{const p=new Set;i.current.forEach((g,m)=>{(!n||g.some(b=>b.toLowerCase().includes(n.toLowerCase())))&&p.add(m)}),o(p)},[n]);const u=x.useCallback(p=>s.size===1&&s.has(p),[s]),d=x.useCallback(()=>s,[s]),h=p=>{if(!n)return p;if(typeof p=="string"){const g=n.split(/\s+/).map(b=>b.toLowerCase()),m=g.map(b=>b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|");return p.split(new RegExp(`(${m})`,"gi")).map(b=>g.includes(b.toLowerCase())?f.jsx("span",{className:"bg-yellow-500/40",children:b}):b)}else return Array.isArray(p)?p.map(g=>h(g)):p&&typeof p=="object"&&p?X.Children.map(p,g=>g&&typeof g=="object"&&"props"in g?h(g.props.children):g):p};return{filter:n,setFilter:e,checkVisible:a,highlightKeywords:h,noResult:t,setNoResult:r,registerComponent:l,unregisterComponent:c,getVisibleComponents:d,isOnlyVisibleComponent:u}},aS=x.createContext({route:"",updateRoute:()=>{},loadingModal:!1,eventTarget:new EventTarget});function VL(n,e){if(!e)return null;const t=new RegExp(`/${n}/(.*)`),r=e?.match(t);return r?r[1]:null}const UL=(n,e,t,r)=>{let i=window.location.hash;i=i.substring(1);const s=`${window.location.protocol}//${window.location.hostname}`,o=new URL(i,s),a=VL(n,o.pathname);if(!r||!t)return{pathName:a||""};const l=o.searchParams;if(a&&r&&t){const[,c]=Object.entries(r).find(([h])=>xd(e||"",h))||[],[u,d]=Object.entries(r).find(([h])=>xd(a,h))||[];return{pathName:a,changingModal:d&&d!==c,modal:u&&d?t().then(({default:h})=>{Ye.show(h[d],{pathName:a,params:xd(a,u),searchParams:l})}):void 0}}return{pathName:""}},xd=(n,e)=>{const t=new RegExp("^"+e.replace(/:(\w+)/g,"(?<$1>[^/]+)")+"/?$"),r=n.match(t);if(r)return r.groups||{}},zL=({basePath:n,modals:e,children:t})=>{const{externalNavigate:r}=T2(),[i,s]=x.useState(void 0),[o,a]=x.useState(!1),[l]=x.useState(new EventTarget),c=x.useCallback(u=>{const d=typeof u=="string"?{route:u}:u;if(d.isExternal){r(d);return}const h=d.route.replace(/^\//,"");h===i||(h?window.location.hash=`/${n}/${h}`:window.location.hash=`/${n}`),l.dispatchEvent(new CustomEvent("routeChange",{detail:{newPath:h,oldPath:i}}))},[n,l,r,i]);return x.useEffect(()=>{setTimeout(()=>{e?.load()},1e3)},[]),x.useEffect(()=>{const u=()=>{s(d=>{const{pathName:h,modal:p,changingModal:g}=UL(n,d,e?.load,e?.paths);return p&&g&&(a(!0),p.then(()=>a(!1))),h})};return u(),window.addEventListener("hashchange",u),()=>{window.removeEventListener("hashchange",u)}},[]),i===void 0?null:f.jsx(aS.Provider,{value:{route:i,updateRoute:c,loadingModal:o,eventTarget:l},children:t})};function be(){return x.useContext(aS)}function WL(n,e){const{eventTarget:t}=be(),r=x.useCallback(n,e);x.useEffect(()=>{const i=s=>{const o=s;r(o.detail.newPath,o.detail.oldPath)};return t.addEventListener("routeChange",i),()=>t.removeEventListener("routeChange",i)},[t,r])}const lS=x.createContext({updateSection:()=>{},updateNav:()=>{},currentSection:null,updateNavigatedSection:()=>{},scrollToSection:()=>{}}),Cu=()=>x.useContext(lS),cS=193,yd=(n,e)=>{const t=document.getElementById("admin-x-settings-scroller"),r=n.getBoundingClientRect().top+t.scrollTop;t.scrollTo({behavior:e?"smooth":"instant",top:r-cS})},qL=(n,e)=>{const t=document.getElementById("admin-x-settings-sidebar-scroller"),r=n.getBoundingClientRect(),i=t.getBoundingClientRect(),s=i.top+40;if(r.top>=s&&r.left>=i.left&&r.right<=i.right&&r.bottom<=i.bottom||!["auto","scroll"].includes(getComputedStyle(t).overflowY))return;const o=e?"smooth":"instant";t.querySelector("[data-setting-nav-item]")===n?t.scrollTo({top:0,behavior:o}):r.top<s?t.scrollTo({top:t.scrollTop+r.top-s,behavior:o}):t.scrollTo({top:t.scrollTop+r.top-i.top-i.height+r.height+4,behavior:o})},GL=(n,e,t)=>{const r=e.map(({isIntersecting:a,target:l})=>({isIntersecting:a,id:Object.entries(t).find(([,c])=>c===l)?.[0]})).filter(a=>a.id),i=r.filter(a=>!n.includes(a.id)&&a.isIntersecting).map(a=>a.id),s=r.filter(a=>!a.isIntersecting).map(a=>a.id),o=n.filter(a=>!s.includes(a)).concat(i);return o.sort((a,l)=>{const c=t[a],u=t[l];return!c||!u?0:c.getBoundingClientRect().top-u.getBoundingClientRect().top}),o},KL=({children:n})=>{const[e,t]=x.useState(null),r=x.useRef({}),i=x.useRef(null),[s,o]=x.useState([]),[a,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState(!1),[,p]=x.useState(!1),g=x.useCallback(C=>{t(C),u(!0)},[]),m=x.useRef({}),v=x.useCallback(()=>{const C=new IntersectionObserver(A=>{o(k=>{const I=GL(k,A,r.current);return I.length&&l(I[0]),I})},{rootMargin:`-${cS-50}px 0px -40% 0px`});return Object.values(r.current).forEach(A=>C.observe(A)),C},[]),b=x.useCallback((C,A)=>{r.current[C]!==A&&(r.current[C]&&i.current?.unobserve(r.current[C]),r.current[C]=A,i.current?.observe(A),!d&&C===e&&(yd(A,!1),h(!0)))},[i,e,d]),y=x.useCallback((C,A)=>{m.current[C]=A},[]),S=x.useCallback(C=>{r.current[C]&&yd(r.current[C],!0)},[]),w=x.useMemo(()=>e&&s.includes(e)?e:s.length?s[0]:a,[s,a,e]);return x.useEffect(()=>{c&&(e&&r.current[e]?h(C=>(yd(r.current[e],C),!0)):h(!0),setTimeout(()=>v()))},[c,e,v]),x.useEffect(()=>{c&&w&&m.current[w]&&p(C=>(qL(m.current[w],C),!0))},[c,w]),f.jsx(lS.Provider,{value:{updateSection:b,updateNav:y,currentSection:w,updateNavigatedSection:g,scrollToSection:S},children:n})},ZL=n=>{const{updateSection:e}=Cu(),t=x.useRef(null);return x.useEffect(()=>{n&&t.current&&e(n,t.current)},[n,e]),{ref:t}},YL=n=>{const{updateNav:e}=Cu(),t=x.useRef(null);return x.useEffect(()=>{n&&t.current&&(Array.isArray(n)?n:[n]).forEach(i=>{e(i,t.current)})},[n,e]),{ref:t,props:{"data-setting-nav-item":!0}}},yo="IntegrationsResponseType",CB=yo,JL=Qr({dataType:yo,path:"/integrations/",defaultSearchParams:{include:"api_keys,webhooks",limit:"50"}}),kB=Ve({method:"POST",path:()=>"/integrations/",body:n=>({integrations:[n]}),searchParams:()=>({include:"api_keys,webhooks"}),updateQueries:{dataType:yo,emberUpdateType:"createOrUpdate",update:(n,e)=>e&&{...e,integrations:e.integrations.concat(n.integrations)}}}),AB=Ve({method:"PUT",path:n=>`/integrations/${n.id}/`,body:n=>({integrations:[n]}),searchParams:()=>({include:"api_keys,webhooks"}),updateQueries:{dataType:yo,emberUpdateType:"createOrUpdate",update:(n,e)=>e&&{...e,integrations:e.integrations.map(t=>n.integrations.find(({id:i})=>i===t.id)||t)}}}),XL=Ve({method:"DELETE",path:n=>`/integrations/${n}/`,updateQueries:{dataType:yo,emberUpdateType:"delete",update:(n,e,t)=>({...e,integrations:e.integrations.filter(r=>r.id!==t)})}}),QL="/ghost/assets/Alto-DUBY3bpV.png",e_="/ghost/assets/Bulletin-Dk9xtKp1.png",t_="/ghost/assets/Casper-DD4Wf4m4.png",n_="/ghost/assets/Dawn-LGQGnvjr.png",r_="/ghost/assets/Digest-BLKH5JOV.png",i_="/ghost/assets/Dope-CSZZPvqs.png",s_="/ghost/assets/Ease-DYfAZLvD.png",o_="/ghost/assets/Edge-_GS6qiG-.png",a_="/ghost/assets/Edition-BvM1Yi9K.png",l_="/ghost/assets/Episode-Cwq-Mrvr.png",c_="/ghost/assets/Headline-DcIZ47eY.png",u_="/ghost/assets/Journal-BLX3grkP.png",d_="/ghost/assets/London-D_cZW51W.png",f_="/ghost/assets/Ruby-rSwalIMT.png",h_="/ghost/assets/Solo-D2tiac6Z.png",p_="/ghost/assets/Source-B2xHWmHB.png",m_="/ghost/assets/Source-Magazine-DpXmb6XM.png",g_="/ghost/assets/Source-Newsletter-DPpaH3AQ.png",v_="/ghost/assets/Taste-DFhBlbR7.png",b_="/ghost/assets/Wave-DajHSkAT.png",uS=[{name:"Source",category:"News",previewUrl:"https://source.ghost.io/",ref:"default",image:p_,variants:[{category:"Magazine",previewUrl:"https://source-magazine.ghost.io/",image:m_},{category:"Newsletter",previewUrl:"https://source-newsletter.ghost.io/",image:g_}]},{name:"Casper",category:"Blog",previewUrl:"https://demo.ghost.io/",ref:"TryGhost/Casper",image:t_},{name:"Edition",category:"Newsletter",url:"https://github.com/TryGhost/Edition",previewUrl:"https://edition.ghost.io/",ref:"TryGhost/Edition",image:a_},{name:"Solo",category:"Blog",url:"https://github.com/TryGhost/Solo",previewUrl:"https://solo.ghost.io",ref:"TryGhost/Solo",image:h_},{name:"Taste",category:"Blog",url:"https://github.com/TryGhost/Taste",previewUrl:"https://taste.ghost.io",ref:"TryGhost/Taste",image:v_},{name:"Episode",category:"Podcast",url:"https://github.com/TryGhost/Episode",previewUrl:"https://episode.ghost.io",ref:"TryGhost/Episode",image:l_},{name:"Digest",category:"Newsletter",url:"https://github.com/TryGhost/Digest",previewUrl:"https://digest.ghost.io/",ref:"TryGhost/Digest",image:r_},{name:"Bulletin",category:"Newsletter",url:"https://github.com/TryGhost/Bulletin",previewUrl:"https://bulletin.ghost.io/",ref:"TryGhost/Bulletin",image:e_},{name:"Alto",category:"Blog",url:"https://github.com/TryGhost/Alto",previewUrl:"https://alto.ghost.io",ref:"TryGhost/Alto",image:QL},{name:"Dope",category:"Magazine",url:"https://github.com/TryGhost/Dope",previewUrl:"https://dope.ghost.io",ref:"TryGhost/Dope",image:i_},{name:"Wave",category:"Podcast",url:"https://github.com/TryGhost/Wave",previewUrl:"https://wave.ghost.io",ref:"TryGhost/Wave",image:b_},{name:"Edge",category:"Photography",url:"https://github.com/TryGhost/Edge",previewUrl:"https://edge.ghost.io",ref:"TryGhost/Edge",image:o_},{name:"Dawn",category:"Newsletter",url:"https://github.com/TryGhost/Dawn",previewUrl:"https://dawn.ghost.io/",ref:"TryGhost/Dawn",image:n_},{name:"Ease",category:"Documentation",url:"https://github.com/TryGhost/Ease",previewUrl:"https://ease.ghost.io",ref:"TryGhost/Ease",image:s_},{name:"Headline",category:"News",url:"https://github.com/TryGhost/Headline",previewUrl:"https://headline.ghost.io",ref:"TryGhost/Headline",image:c_},{name:"Ruby",category:"Magazine",url:"https://github.com/TryGhost/Ruby",previewUrl:"https://ruby.ghost.io",ref:"TryGhost/Ruby",image:f_},{name:"London",category:"Photography",url:"https://github.com/TryGhost/London",previewUrl:"https://london.ghost.io",ref:"TryGhost/London",image:d_},{name:"Journal",category:"Newsletter",url:"https://github.com/TryGhost/Journal",previewUrl:"https://journal.ghost.io/",ref:"TryGhost/Journal",image:u_}],Bg="/ghost/assets/orb-black-1-44nQS0Zf.png",x_="/ghost/assets/orb-black-2-ua9uyJck.png",$g="/ghost/assets/orb-black-3-4B29Ahnj.png",Fg="/ghost/assets/orb-black-4-BoaEuayq.png",y_="/ghost/assets/orb-black-5-CC4bN-9P.png",w_="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201818.2%202500'%20style='enable-background:new%200%200%201818.2%202500'%20xml:space='preserve'%3e%3ctitle%3egoogle-docs%3c/title%3e%3cpath%20d='M1136.4%200h-966C79.6%200%200%2079.5%200%20170.5v2159.1c0%2090.9%2079.5%20170.5%20170.5%20170.5h1477.3c90.9%200%20170.5-79.5%20170.5-170.5V681.8l-397.7-284.1L1136.4%200z'%20style='fill:%234285f4'/%3e%3cpath%20d='M454.5%201818.2h909.1v-113.6h-909l-.1%20113.6zm0%20227.3h681.8v-113.6H454.5v113.6zm0-795.5v113.6h909.1V1250H454.5zm0%20340.9h909.1v-113.6h-909l-.1%20113.6z'%20style='fill:%23f1f1f1'/%3e%3cpath%20d='M1136.4%200v511.4c0%2090.9%2079.5%20170.4%20170.4%20170.4h511.4L1136.4%200z'%20style='fill:%23a1c2fa'/%3e%3c/svg%3e",S_="/ghost/assets/mailchimp-DwTEN-tS.svg",C_="data:image/svg+xml,%3csvg%20height='546'%20viewBox='0%200%20569%20546'%20width='569'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3epatreon%3c/title%3e%3cg%20fill='%23FF424D'%3e%3ccircle%20cx='362.59'%20cy='204.59'%20data-fill='1'%20r='204.59'/%3e%3cpath%20data-fill='1'%20d='M0%200h100v545.8H0z'/%3e%3c/g%3e%3c/svg%3e",Hg="data:image/svg+xml,%3csvg%20width='152'%20height='179'%20viewBox='0%200%20152%20179'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3epaypal%3c/title%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M136.492%2045.453c2.179-13.894-.015-23.348-7.53-31.911C120.688%204.114%20105.741.075%2086.617.075H31.105a7.943%207.943%200%200%200-7.846%206.705L.144%20153.36a4.765%204.765%200%200%200%204.707%205.507h34.27l-2.365%2015a4.168%204.168%200%200%200%204.118%204.818H69.76a6.948%206.948%200%200%200%206.863-5.865l.283-1.468%205.442-34.507.351-1.907a6.947%206.947%200%200%201%206.862-5.865h4.322c27.984%200%2049.896-11.37%2056.299-44.25%202.675-13.74%201.292-25.208-5.783-33.27-2.14-2.439-4.802-4.455-7.907-6.1'%20fill='%23238EC2'/%3e%3cpath%20d='M136.492%2045.453c2.179-13.894-.015-23.348-7.53-31.911C120.688%204.114%20105.741.075%2086.617.075H31.105a7.943%207.943%200%200%200-7.846%206.705L.144%20153.36a4.765%204.765%200%200%200%204.707%205.507h34.27l8.609-54.588-.267%201.711c.609-3.86%203.909-6.704%207.817-6.704h16.288c31.989%200%2057.037-12.996%2064.356-50.582.217-1.113.402-2.191.568-3.251'%20fill='%2320274F'/%3e%3cpath%20d='M56.978%2045.638a6.945%206.945%200%200%201%206.863-5.866h43.514c5.155%200%209.961.337%2014.356%201.045%201.256.202%202.478.435%203.665.698a53.92%2053.92%200%200%201%203.455.885c.558.162%201.106.333%201.646.512%202.157.717%204.166%201.562%206.015%202.541%202.179-13.894-.015-23.348-7.53-31.911C120.688%204.114%20105.741.075%2086.617.075H31.105a7.943%207.943%200%200%200-7.846%206.705L.144%20153.36a4.765%204.765%200%200%200%204.707%205.507h34.27L56.978%2045.638'%20fill='%23253667'/%3e%3c/g%3e%3c/svg%3e",k_="/ghost/assets/slackicon-CBMgLWU6.png",A_="data:image/svg+xml,%3csvg%20width='86'%20height='89'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3etypeform%3c/title%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M40.28%2087.561c12.464.154%2021.16-3.994%2030.135-12.175%208.975-8.18%2014.306-16.867%2014.741-28.73.436-11.862-3.412-21.43-12.564-30.581C63.441%206.923%2051.64.9%2039.4.899%2027.158.898%2018.967%206.252%2011.385%2016.07c-7.581%209.818-9.237%2022.212-9.894%2033.921-.657%2011.71-1.15%2017.111%206.608%2024.625%207.758%207.514%2019.718%2012.791%2032.182%2012.945z'%20stroke='%23262627'/%3e%3cpath%20d='M29.136%2037.976v-4.885h25.918v4.885H44.679v27.998H39.51V37.976z'%20fill='%23262627'%20fill-rule='nonzero'/%3e%3c/g%3e%3c/svg%3e",M_="/ghost/assets/zero-bounce-ChbZnu35.png",dS=[{ghostImage:x_,appImage:k_,title:"Share scheduled posts with your team in Slack",url:"https://zapier.com/webintent/create-zap?template=359499"},{ghostImage:$g,appImage:C_,title:"Connect Patreon to your Ghost membership site",url:"https://zapier.com/webintent/create-zap?template=75801"},{ghostImage:Fg,appImage:M_,title:"Protect email delivery with email verification",url:"https://zapier.com/webintent/create-zap?template=359415"},{ghostImage:y_,appImage:Hg,title:"Add members for successful sales in PayPal",url:"https://zapier.com/webintent/create-zap?template=184423"},{ghostImage:$g,appImage:Hg,title:"Unsubscribe members who cancel a subscription in PayPal",url:"https://zapier.com/webintent/create-zap?template=359348"},{ghostImage:Bg,appImage:w_,title:"Send new post drafts from Google Docs to Ghost",url:"https://zapier.com/webintent/create-zap?template=50924"},{ghostImage:Fg,appImage:A_,title:"Survey new members using Typeform",url:"https://zapier.com/webintent/create-zap?template=359407"},{ghostImage:Bg,appImage:S_,title:"Sync email subscribers in Ghost + Mailchimp",url:"https://zapier.com/webintent/create-zap?template=359342"}],fS=x.createContext({officialThemes:uS,zapierTemplates:dS,search:{filter:"",setFilter:()=>{},checkVisible:()=>!0,highlightKeywords:()=>"",noResult:!1,setNoResult:()=>{},registerComponent:()=>{},unregisterComponent:()=>{},getVisibleComponents:()=>new Set,isOnlyVisibleComponent:()=>!1},sortingState:[]}),I_=({children:n,...e})=>{const t=HL(),[r,i]=x.useState([{type:"offers",option:"date-added",direction:"desc"}]);return f.jsx(fS.Provider,{value:{officialThemes:uS,zapierTemplates:dS,...e,search:t,sortingState:r,setSortingState:i},children:f.jsx(_L,{children:f.jsx(KL,{children:n})})})},ku=()=>x.useContext(fS),MB=()=>ku().officialThemes,wo=()=>ku().search,IB=()=>ku().upgradeStatus,E_=()=>{const{sortingState:n,setSortingState:e}=ku();return{sortingState:n,setSortingState:e}},Se=({keywords:n,navid:e,children:t,...r})=>{const{checkVisible:i,noResult:s,registerComponent:o,unregisterComponent:a}=wo(),{route:l}=be(),[c,u]=x.useState(!1),{ref:d}=ZL(e),h=x.useId(),p=FL(e||"component",h);x.useEffect(()=>(o(p,n),()=>{a(p)}),[p,n,o,a]),x.useEffect(()=>{if(u(l===e),l===e){const v=setTimeout(()=>u(!1),2e3);return()=>clearTimeout(v)}},[l,e]);const m=X.Children.toArray(t).some(v=>X.isValidElement(v)&&v.type==="img")?f.jsx("div",{className:"-mx-5 -mb-5 overflow-hidden rounded-b-xl bg-grey-50 md:-mx-7 md:-mb-7",children:X.Children.map(t,v=>X.isValidElement(v)&&v.type==="img"?X.cloneElement(v,{className:`${v.props.className||""} h-full w-full rounded-b-xl`.trim()}):v)}):t;return f.jsx(aR,{ref:d,highlight:c,isVisible:i(n)||s,navid:e,...r,children:m})},D_=({keywords:n})=>f.jsx(Se,{customHeader:f.jsxs("div",{className:"z-10 flex items-start justify-between",children:[f.jsx(Kr,{description:"Add custom code to your publication.",title:"Code injection"}),f.jsx(ne,{className:"mt-[-5px]",color:"clear",label:"Open",size:"sm",onClick:()=>{Ye.show($L)}})]}),description:"Add custom code to your publication",keywords:n,navid:"code-injection",testId:"code-injection",title:"Code injection"}),R_=ke(D_,"Code injection"),O_=Ve({method:"POST",path:()=>"/db/",body:n=>{const e=new FormData;return e.append("importfile",n),e}}),T_=Ve({method:"DELETE",path:()=>"/db/"}),N_=()=>Ff("/db/"),P_=({keywords:n})=>{const{mutateAsync:e}=T_(),t=Hf(),r=vt(),i=()=>{Ye.show(Gr,{title:"Would you really like to delete all content from your blog?",prompt:"This is permanent! No backups, no restores, no magic undo button. We warned you, k?",okColor:"red",okLabel:"Delete",onOk:async s=>{try{await e(null),er({title:"All content deleted from database.",type:"success"}),s?.remove(),await t.refetchQueries()}catch(o){r(o)}}})};return f.jsx(Se,{customHeader:f.jsx(Kr,{description:"Permanently delete all posts and tags from the database, a hard reset",title:"Danger zone"}),keywords:n,navid:"dangerzone",testId:"dangerzone",children:f.jsx("div",{children:f.jsx(ne,{color:"red",label:"Delete all content",onClick:i})})})},L_=ke(P_,"Danger zone"),__=({keywords:n})=>{const{updateRoute:e}=be(),t=()=>{e("history/view")};return f.jsx(Se,{customButtons:f.jsx(ne,{className:"mt-[-5px]",color:"clear",label:"View history",size:"sm",onClick:t}),description:"View system event log",keywords:n,navid:"history",testId:"history",title:"History"})},j_=ke(__,"History"),B_="/ghost/assets/integrations-settings-B7r1LnOP.png";function hS(){const{config:n,settings:e}=Pe(),[t]=Te(e,["pintura"]),[r,i]=x.useState(!1),[s,o]=x.useState(!1),[a,l]=x.useState(!1),c=x.useRef(!1),[u]=Te(e,["pintura_js_url"]),[d]=Te(e,["pintura_css_url"]);let h=t&&r&&s||!1;const p=n?.pintura;x.useEffect(()=>{let v=p?.js?p?.js:u||null;if(v){if(v.startsWith("/")){const{adminRoot:b}=Ed();v=window.location.origin+b.replace(/\/$/,"")+v}if(window.pintura){i(!0);return}try{const b=new URL(v);import(`${b.protocol}//${b.host}${b.pathname}`).then(()=>{i(!0)}).catch(w=>{Ss(w)})}catch(b){Ss(b)}}},[u,p?.js]),x.useEffect(()=>{let v=p?.css?p?.css:d||null;if(v){if(v.startsWith("/")){const{adminRoot:b}=Ed();v=window.location.origin+b.replace(/\/$/,"")+v}try{if(document.querySelector(`link[href="${v}"]`))o(!0);else{let y=document.createElement("link");y.rel="stylesheet",y.type="text/css",y.href=v,y.onload=()=>{o(!0)},document.head.appendChild(y)}}catch(b){Ss(b)}}},[d,p?.css]);const g=x.useCallback(({image:m,handleSave:v})=>{if(m&&h){const b=new URL(m);b.searchParams.has("v")||b.searchParams.set("v",Date.now().toString());const y=b.href,S=window.pintura.openDefaultEditor({src:y,enableTransparencyGrid:!0,util:"crop",utils:["crop","filter","finetune","redact","annotate","trim","frame","resize"],frameOptions:[[void 0,w=>w.labelNone],["solidSharp",w=>w.frameLabelMatSharp],["solidRound",w=>w.frameLabelMatRound],["lineSingle",w=>w.frameLabelLineSingle],["hook",w=>w.frameLabelCornerHooks],["polaroid",w=>w.frameLabelPolaroid]],cropSelectPresetFilter:"landscape",cropSelectPresetOptions:[[void 0,"Custom"],[1,"Square"],[2/1,"2:1"],[3/2,"3:2"],[4/3,"4:3"],[16/10,"16:10"],[16/9,"16:9"],[1/2,"1:2"],[2/3,"2:3"],[3/4,"3:4"],[10/16,"10:16"],[9/16,"9:16"]],locale:{labelButtonExport:"Save and close"},previewPad:!0,willClose:()=>c.current?(l(!1),!0):!1});S.on("loaderror",()=>{N2("Pintura editor failed to load")}),S.on("process",w=>{v(w.dest)}),l(!0)}},[h]);return x.useEffect(()=>{const m=b=>{b.key==="Escape"&&b.stopPropagation()};if(!a)return;const v=b=>{b.target instanceof Element&&b.target.closest('.PinturaModal button[title="Close"]')&&(c.current=!0)};return window.addEventListener("click",v,{capture:!0}),window.addEventListener("keydown",m,{capture:!0}),()=>{window.removeEventListener("click",v,{capture:!0}),window.removeEventListener("keydown",m,{capture:!0})}},[a]),{isEnabled:h,openEditor:g}}const Si=({icon:n,title:e,detail:t,action:r,onDelete:i,active:s,disabled:o,testId:a,custom:l=!1})=>{const{updateRoute:c}=be(),u=p=>{p?.stopPropagation(),o?c({route:"pro",isExternal:!0}):r()},d=p=>{p?.stopPropagation(),i?.()},h=l?f.jsx(ne,{color:"red",label:"Delete",link:!0,onClick:d}):o?f.jsx(ne,{icon:"lock-locked",label:"Upgrade",link:!0,onClick:u}):f.jsx(ne,{color:"green",label:"Configure",link:!0,onClick:u});return f.jsx(ru,{action:h,avatar:n,className:o?"opacity-50 saturate-0":"",detail:t,hideActions:!o,testId:a,title:s?f.jsxs("span",{className:"inline-flex items-center gap-1",children:[e," ",f.jsx("span",{className:"inline-flex items-center rounded-full bg-[rgba(48,207,67,0.15)] px-1.5 py-0.5 text-2xs font-semibold uppercase tracking-wide text-green",children:"Active"})]}):e,onClick:u})},$_=()=>{const{config:n}=Pe(),{updateRoute:e}=be(),t=u=>{e(u)},r=n.hostSettings?.limits?.customIntegrations?.disabled,i=hS(),{settings:s}=Pe(),[o,a,l,c]=Te(s,["unsplash","firstpromoter","slack_url","slack_username"]);return f.jsxs(Xi,{titleSeparator:!1,children:[f.jsx(Si,{action:()=>{t("integrations/zapier")},detail:"Automation for your apps",disabled:r,icon:f.jsx(ve,{name:"zapier",size:32}),testId:"zapier-integration",title:"Zapier"}),f.jsx(Si,{action:()=>{t("integrations/slack")},active:l&&c,detail:"A messaging app for teams",icon:f.jsx(ve,{name:"slack",size:32}),testId:"slack-integration",title:"Slack"}),f.jsx(Si,{action:()=>{t("integrations/unsplash")},active:o,detail:"Beautiful, free photos",icon:f.jsx(ve,{name:"unsplash",size:32}),testId:"unsplash-integration",title:"Unsplash"}),f.jsx(Si,{action:()=>{t("integrations/firstpromoter")},active:a,detail:"Launch your member referral program",icon:f.jsx(ve,{name:"firstpromoter",size:32}),testId:"firstpromoter-integration",title:"FirstPromoter"}),f.jsx(Si,{action:()=>{t("integrations/pintura")},active:i.isEnabled,detail:"Advanced image editing",icon:f.jsx(ve,{name:"pintura",size:32}),testId:"pintura-integration",title:"Pintura"})]})},F_=({integrations:n})=>{const{updateRoute:e}=be(),{mutateAsync:t}=XL(),r=vt();return n.length?f.jsx(Xi,{borderTop:!1,children:n.map(i=>f.jsx(Si,{action:()=>e({route:`integrations/${i.id}`}),detail:f.jsx("div",{className:"line-clamp-2 break-words",children:f.jsx("span",{title:`${i.name}: ${i.description||"No description"}`,children:i.description||"No description"})}),icon:i.icon_image?f.jsx("img",{className:"size-8 shrink-0 object-cover",role:"presentation",src:i.icon_image}):f.jsx(ve,{className:"w-8 shrink-0",name:"integration"}),title:i.name,custom:!0,onDelete:()=>{Ye.show(Gr,{title:"Are you sure?",prompt:"Deleting this integration will remove all webhooks and api keys associated with it.",okColor:"red",okLabel:"Delete Integration",onOk:async s=>{try{await t(i.id),s?.remove(),er({title:"Integration deleted",type:"info",options:{position:"bottom-left"}})}catch(o){r(o)}}})}}))}):f.jsx(ei,{icon:"integration",children:"No custom integration."})},H_=({keywords:n})=>{const[e,t]=x.useState("built-in"),{data:{integrations:r}={integrations:[]}}=JL(),{updateRoute:i}=be(),s=[{id:"built-in",title:"Built-in",contents:f.jsx($_,{})},{id:"custom",title:"Custom",contents:f.jsx(F_,{integrations:r.filter(a=>a.type==="custom")})}],o=f.jsx(ne,{className:"mt-[-5px] inline-flex h-7 cursor-pointer items-center justify-center whitespace-nowrap rounded px-3 text-sm font-semibold text-grey-900 transition hover:bg-grey-200 dark:text-white dark:hover:bg-grey-900 [&:hover]:text-black",color:"clear",label:"Add custom integration",link:!0,onClick:()=>{i("integrations/new"),t("custom")}});return f.jsx(Se,{customButtons:o,customHeader:f.jsxs("div",{className:"sm:-mt-5 md:-mt-7",children:[f.jsx("div",{className:"-mx-5 overflow-hidden rounded-t-xl border-b border-grey-200 md:-mx-7 dark:border-grey-800",children:f.jsx("img",{className:"size-full",src:B_})}),f.jsxs("div",{className:" z-10 mt-6 flex items-start justify-between",children:[f.jsx(Kr,{description:"Make Ghost work with apps and tools.",title:"Integrations"}),f.jsx(ne,{className:"mt-[-5px] inline-flex h-7 cursor-pointer items-center justify-center whitespace-nowrap rounded px-3 text-sm font-semibold text-grey-900 transition hover:bg-grey-200 dark:text-white dark:hover:bg-grey-900 [&:hover]:text-black",color:"clear",label:"Add custom integration",link:!0,onClick:()=>{i("integrations/new"),t("custom")}})]})]}),keywords:n,navid:"integrations",testId:"integrations",children:f.jsx(Gn,{selectedTab:e,tabs:s,onTabChange:t})})},V_=ke(H_,"Integrations");function U_(n,e={}){window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)},window.plausible(n,{props:e})}const tc=({label:n,flag:e,disabled:t})=>{const{settings:r}=Pe(),i=JSON.parse(hb(r,"labs")||"{}"),{mutateAsync:s}=Xr(),o=Hf(),a=vt();return f.jsx(Kt,{checked:i[e],disabled:t,label:n,labelClasses:"sr-only",name:`feature-${e}`,onChange:async()=>{const l=!i[e];try{await s([{key:"labs",value:JSON.stringify({...i,[e]:l})}]),U_("Feature Toggled",{state:l?"on":"off",feature:e}),o.setQueriesData([P2],c=>({config:{...c.config,labs:{...c.config.labs,[e]:l}}}))}catch(c){a(c)}}})},Ci=({title:n,detail:e,action:t})=>f.jsx(ru,{action:t,bgOnHover:!1,detail:e,paddingRight:!1,title:n}),z_=Ve({method:"POST",path:()=>"/redirects/upload/",body:n=>{const e=new FormData;return e.append("redirects",n),e}}),W_=()=>Ff("/redirects/download/"),q_=Ve({method:"POST",path:()=>"/settings/routes/yaml/",body:n=>{const e=new FormData;return e.append("routes",n),e}}),G_=()=>Ff("/settings/routes/yaml/"),K_=()=>{const{mutateAsync:n}=z_(),{mutateAsync:e}=q_(),t=vt(),[r,i]=x.useState(!1),[s,o]=x.useState(!1);return f.jsxs(Xi,{titleSeparator:!1,children:[f.jsx(Ci,{action:f.jsx(tc,{flag:"superEditors"}),detail:f.jsx(f.Fragment,{children:"Allows newly-assigned editors to manage members and comments in addition to regular roles."}),title:"Enhanced Editor role (beta)"}),f.jsx(Ci,{action:f.jsx(tc,{flag:"editorExcerpt"}),detail:f.jsx(f.Fragment,{children:"Adds the excerpt input below the post title in the editor"}),title:"Show post excerpt inline"}),f.jsx(Ci,{action:f.jsx(tc,{flag:"additionalPaymentMethods"}),detail:f.jsxs(f.Fragment,{children:["Enable support for CashApp, iDEAL, Bancontact, and others. ",f.jsx("a",{className:"text-green",href:"https://ghost.org/help/payment-methods",rel:"noopener noreferrer",target:"_blank",children:"Learn more "})]}),title:"Additional payment methods"}),f.jsx(Ci,{action:f.jsxs("div",{className:"flex flex-col items-end gap-1",children:[f.jsx(rc,{id:"upload-redirects",onUpload:async a=>{try{i(!0),await n(a),er({title:"Redirects uploaded",type:"success"})}catch(l){t(l)}finally{i(!1)}},children:f.jsx(ne,{color:"grey",label:r?"Uploading ...":"Upload redirects file",size:"sm",tag:"div"})}),f.jsx(ne,{color:"green",label:"Download current redirects",link:!0,onClick:()=>W_()})]}),detail:f.jsxs(f.Fragment,{children:["Configure redirects for old or moved content, ",f.jsx("br",{})," more info in the ",f.jsx("a",{className:"text-green",href:"https://ghost.org/tutorials/implementing-redirects/",rel:"noopener noreferrer",target:"_blank",children:"docs"})]}),title:"Redirects"}),f.jsx(Ci,{action:f.jsxs("div",{className:"flex flex-col items-end gap-1",children:[f.jsx(rc,{id:"upload-routes",onUpload:async a=>{try{o(!0),await e(a),er({type:"success",title:"Routes uploaded"})}catch(l){t(l)}finally{o(!1)}},children:f.jsx(ne,{color:"grey",label:s?"Uploading ...":"Upload routes file",size:"sm",tag:"div"})}),f.jsx(ne,{color:"green",label:"Download current routes",link:!0,onClick:()=>G_()})]}),detail:"Configure dynamic routing by modifying the routes.yaml file",title:"Routes"})]})},Z_="data:image/svg+xml,%3csvg%20width='267'%20height='285'%20viewBox='0%200%20267%20285'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='165'%20cy='183'%20r='102'%20fill='%23F1F3F4'/%3e%3ccircle%20cx='68'%20cy='71'%20r='31'%20fill='%23F1F3F4'/%3e%3ccircle%20cx='99'%20cy='17'%20r='17'%20fill='%23F1F3F4'/%3e%3ccircle%20cx='118'%20cy='70'%20r='7'%20fill='%23F1F3F4'/%3e%3ccircle%20cx='45'%20cy='32'%20r='3'%20fill='%23F1F3F4'/%3e%3ccircle%20cx='12.5'%20cy='83.5'%20r='12.5'%20fill='%23F1F3F4'/%3e%3c/svg%3e",Fh="InvitesResponseType",Y_=Uc({dataType:Fh,path:"/invites/",permissions:["Owner","Administrator"],defaultSearchParams:{limit:"100",include:"roles"},defaultNextPageParams:(n,e)=>{var t;return{...e,page:(((t=n.meta)==null?void 0:t.pagination.next)||1).toString()}},returnData:n=>{const{pages:e}=n,t=e.flatMap(i=>i.invites),r=e[e.length-1].meta;return{invites:t,meta:r,isEnd:r?r.pagination.pages===r.pagination.page:!0}}}),J_=Ve({method:"POST",path:()=>"/invites/",body:({email:n,roleId:e})=>({invites:[{email:n,role_id:e,expires:null,status:null,token:null}]}),updateQueries:{dataType:Fh,emberUpdateType:"createOrUpdate",update:Vf("invites")}}),X_=Ve({path:n=>`/invites/${n}/`,method:"DELETE",updateQueries:{dataType:Fh,emberUpdateType:"delete",update:L2("invites")}}),Q_="RolesResponseType",e5=Qr({dataType:Q_,path:"/roles/",defaultSearchParams:{limit:"100"}});function nc(n,e){return n.filter(t=>t.roles.find(r=>r.name===e))}function t5(n,e){return n.filter(t=>t.roles.find(r=>e.includes(r.name)))}function n5(n){return nc(n,"Owner")[0]}const pS=()=>{const{currentUser:n}=Pe(),{data:{users:e,meta:t,isEnd:r}={users:[]},isLoading:i,fetchNextPage:s}=_2(),{data:{invites:o,meta:a,isEnd:l}={invites:[]},isLoading:c,fetchNextPage:u}=Y_(),{data:{roles:d}={},isLoading:h}=e5(),p=x.useMemo(()=>n5(e),[e]),g=x.useMemo(()=>nc(e,"Administrator"),[e]),m=x.useMemo(()=>t5(e,["Editor","Super Editor"]),[e]),v=x.useMemo(()=>nc(e,"Author"),[e]),b=x.useMemo(()=>nc(e,"Contributor"),[e]),y=x.useMemo(()=>o.map(S=>{let w=d?.find(C=>S.role_id===C.id);return{...S,role:w?.name}}),[o,d]);return{totalUsers:t?.pagination.total||0,totalInvites:a?.pagination.total||0,users:e,ownerUser:p,adminUsers:g,editorUsers:m,authorUsers:v,contributorUsers:b,currentUser:n,invites:y,isLoading:i||c||h,hasNextPage:r===!1,invitesHasNextPage:l===!1,fetchNextPage:s,fetchNextInvitePage:u}},r5=no(()=>import("./index-tQQnlArK.js").then(n=>n.i),__vite__mapDeps([8,1,2,9]));class mS extends Error{errorType;errorDetails;constructor({errorType:e,errorDetails:t,message:r}){super(r),this.errorType=e,this.errorDetails=t}}class i5 extends mS{constructor(e){super(Object.assign({errorType:"IncorrectUsageError"},e))}}class So extends mS{constructor(e){super(Object.assign({errorType:"HostLimitError"},e))}}const Co=()=>{const{config:n}=Pe(),[e,t]=x.useState(null);x.useEffect(()=>{r5.then(u=>t(()=>u.default))},[]);const{users:r,contributorUsers:i,invites:s,isLoading:o}=pS(),{refetch:a}=pb({searchParams:{limit:"1"},enabled:!1}),{refetch:l}=gb({searchParams:{filter:"status:active",limit:"1"},enabled:!1}),c=x.useMemo(()=>n.hostSettings?.billing?.enabled===!0&&n.hostSettings?.billing?.url?n.hostSettings.billing.url:"https://ghost.org/help/",[n.hostSettings?.billing]);return x.useMemo(()=>{const u={isLimited:()=>!1,isDisabled:()=>!1,checkWouldGoOverLimit:()=>Promise.resolve(!1),errorIfWouldGoOverLimit:()=>Promise.resolve(),errorIfIsOverLimit:()=>Promise.resolve()};if(!e||!n.hostSettings?.limits||o)return u;const d={...n.hostSettings.limits},h=new e;return d.staff&&(d.staff.currentCountQuery=async()=>{const p=r.filter(m=>m.status!=="inactive"&&!i.includes(m)),g=s.filter(m=>m.role!=="Contributor");return p.length+g.length}),d.members&&(d.members.currentCountQuery=async()=>{const{data:p}=await a();return p?.meta?.pagination?.total||0}),d.newsletters&&(d.newsletters.currentCountQuery=async()=>{const{data:{pages:p}={pages:[]}}=await l();return p[0].meta?.pagination.total||0}),h.loadLimits({limits:d,helpLink:c,errors:{HostLimitError:So,IncorrectUsageError:i5}}),{isLimited:p=>h.isLimited(p),isDisabled:p=>h.isDisabled(p),checkWouldGoOverLimit:p=>h.checkWouldGoOverLimit(p),errorIfWouldGoOverLimit:(p,g={})=>h.errorIfWouldGoOverLimit(p,g),errorIfIsOverLimit:p=>h.errorIfIsOverLimit(p)}},[e,n,i,a,l,c,s,o,r])},s5=[{title:"Stripe Automatic Tax (private beta)",description:"Use Stripe Automatic Tax at Stripe Checkout. Needs to be enabled in Stripe",flag:"stripeAutomaticTax"},{title:"Email customization (internal beta)",description:"Newsletter customization settings that have been released to Ghost's own production sites",flag:"emailCustomization"},{title:"Import Member Tier",description:"Enables tier to be specified when importing members",flag:"importMemberTier"},{title:"Explore",description:"Enables keeping in touch with the new Explore API",flag:"explore"},{title:"Tags X",description:"Enables the new Tags UI",flag:"tagsX"},{title:"UTM tracking",description:"Enables UTM tracking for web traffic and member attribution",flag:"utmTracking"},{title:"Email Unique ID",description:"Enables {uniqueid} variable in emails for unique image URLs to bypass ESP image caching",flag:"emailUniqueid"},{title:"Welcome Emails",description:"Enables features related to sending welcome emails to new members",flag:"welcomeEmails"},{title:"New Admin Experience",description:"Preview the next version of the admin interface",flag:"adminForward"},{title:"Domain Warmup",description:"Enable custom sending domain warmup for gradual email volume increases",flag:"domainWarmup"},{title:"Updated theme translation (beta)",description:"Enable theme translation using i18next instead of the old translation package.",flag:"themeTranslation"},{title:"Comment Moderation",description:"Enhanced comment moderation interface with advanced filtering and management. Requires the new admin experience.",flag:"commentModeration"},{title:"Email Size Warnings",description:"Enable warnings in editor when content exceeds email cut-off size",flag:"emailSizeWarnings"},{title:"Comment Permalinks",description:"Enable direct links to individual comments with automatic scrolling and highlighting",flag:"commentPermalinks"}],o5=()=>{const n=Co(),[e,t]=x.useState([]);return x.useEffect(()=>{(async()=>{const i=[];for(const s of s5)if(s.limitName&&n?.isLimited(s.limitName))try{await n.errorIfWouldGoOverLimit(s.limitName),i.push(s)}catch(o){o instanceof So||i.push(s)}else i.push(s);t(i)})()},[n]),f.jsx(Xi,{titleSeparator:!1,children:e.map(r=>f.jsx(Ci,{action:f.jsx(tc,{flag:r.flag,label:r.title}),detail:r.description,title:r.title}))})};function a5(n){const[e,t]=x.useState(!1),r=x.useRef(!1),{filter:i,getVisibleComponents:s,checkVisible:o}=wo();return x.useEffect(()=>{i||(r.current=!1)},[i]),x.useEffect(()=>{if(r.current)return;const c=o(n),u=s(),d=!!i&&c&&u.size===1;t(d)},[i,n,o,s]),{isOpen:e,openManually:()=>{r.current=!0,t(!0)},closeManually:()=>{r.current=!0,t(!1)}}}const l5=({keywords:n})=>{const[e,t]=x.useState("labs-beta-features"),{config:r}=Pe(),{isOpen:i,openManually:s,closeManually:o}=a5(n),a=[{id:"labs-beta-features",title:"Beta features",contents:f.jsx(K_,{})},r.enableDeveloperExperiments&&{id:"labs-private-features",title:"Private features",contents:f.jsx(o5,{})}].filter(Boolean);return f.jsx(Se,{customHeader:f.jsxs("div",{className:"z-10 flex items-start justify-between",children:[f.jsx(Kr,{description:"This is a testing ground for new or experimental features. They may change, break or inexplicably disappear at any time.",title:"Labs"}),f.jsx(ne,{className:"mt-[-5px]",color:i?"grey":"clear",label:i?"Close":"Open",size:"sm",onClick:i?o:s})]}),isEditing:i,keywords:n,navid:"labs",testId:"labs",children:i?f.jsx(Gn,{selectedTab:e,tabs:a,onTabChange:t}):f.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden opacity-70",children:f.jsx("img",{className:"absolute -right-6 -top-6 dark:opacity-10",src:Z_})})})},c5=ke(l5,"Labs"),u5=()=>{const{refetch:n}=eC({searchParams:{limit:"1000"},enabled:!1}),e=vt(),t=async()=>{try{const{data:r}=await n();if(r){const i=new Blob([r],{type:"text/csv"}),s=window.URL.createObjectURL(i),o=document.createElement("a");o.setAttribute("hidden",""),o.setAttribute("href",s),o.setAttribute("download",`post-analytics.${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(s)}}catch(r){e(r)}};return f.jsxs("div",{className:"grid grid-cols-1 gap-4 pt-4 md:grid-cols-2 lg:grid-cols-3",children:[f.jsx(ne,{className:"!h-9 !font-semibold",color:"grey",icon:"export",iconColorClass:"!h-4 !w-auto",label:"Content & settings",onClick:()=>N_()}),f.jsx(ne,{className:"!h-9 !font-semibold",color:"grey",icon:"baseline-chart",iconColorClass:"!h-4 !w-auto",label:"Post analytics",onClick:t})]})},d5=()=>{const n=rr(),{mutateAsync:e}=O_(),[t,r]=x.useState(!1),i=vt();return f.jsx(Rr,{backDropClick:!1,okLabel:"",size:"sm",testId:"universal-import-modal",title:"Universal import",children:f.jsx("div",{className:"py-4 leading-9",children:f.jsx(rc,{accept:"application/json, application/zip",id:"import-file",onUpload:async s=>{r(!0);try{await e(s),n.remove(),Ye.show(Gr,{title:"Import in progress",prompt:"Your import is being processed, and you'll receive a confirmation email as soon as its complete. Usually this only takes a few minutes, but larger imports may take longer.",cancelLabel:"",okLabel:"Got it",onOk:o=>o?.remove(),formSheet:!1})}catch(o){i(o)}finally{r(!1)}},children:f.jsx("div",{className:"-mb-4 cursor-pointer bg-grey-75 p-10 text-center dark:bg-grey-950",children:t?"Uploading...":f.jsxs(f.Fragment,{children:["Select any JSON or zip file that contains ",f.jsx("br",{}),"posts and settings"]})})})})})},f5=Ye.create(d5),ai=({icon:n,title:e,onClick:t})=>{const r=_("flex h-9 cursor-pointer items-center justify-center gap-2 rounded-md bg-grey-100 px-2 text-sm font-semibold transition-all hover:bg-grey-200 dark:bg-grey-900");return t?f.jsxs("button",{className:r,type:"button",onClick:t,children:[n,e]}):f.jsx(f.Fragment,{})},h5=()=>{const{updateRoute:n}=be(),e=()=>{Ye.show(f5)};return f.jsxs("div",{className:"grid grid-cols-1 gap-4 pt-4 md:grid-cols-2 lg:grid-cols-3",children:[f.jsx(ai,{icon:f.jsx(ve,{className:"w-auto",name:"substack",size:18}),title:"Substack",onClick:()=>n({isExternal:!0,route:"/migrate/substack"})}),f.jsx(ai,{icon:f.jsx(ve,{className:"w-auto",name:"wordpress",size:18}),title:"WordPress",onClick:()=>n({isExternal:!0,route:"/migrate/wordpress"})}),f.jsx(ai,{icon:f.jsx(ve,{className:"w-auto",name:"squarespace",size:18}),title:"Squarespace",onClick:()=>n({isExternal:!0,route:"/migrate/squarespace"})}),f.jsx(ai,{icon:f.jsx(ve,{className:"w-auto dark:invert",name:"medium",size:18}),title:"Medium",onClick:()=>n({isExternal:!0,route:"/migrate/medium"})}),f.jsx(ai,{icon:f.jsx(ve,{className:"w-auto",name:"mailchimp",size:20}),title:"Mailchimp",onClick:()=>n({isExternal:!0,route:"/migrate/mailchimp"})}),f.jsx(ai,{icon:f.jsx(ve,{className:"w-auto",name:"import",size:16}),title:"Universal import",onClick:e})]})},p5=({keywords:n})=>{const[e,t]=x.useState("import"),r=[{id:"import",title:"Import",contents:f.jsx(h5,{})},{id:"export",title:"Export",contents:f.jsx(u5,{})}].filter(Boolean);return f.jsx(Se,{customHeader:f.jsx(Kr,{description:"Import content, members and subscriptions from other platforms or export your Ghost data.",title:"Migration tools"}),keywords:n,navid:"migration",testId:"migrationtools",children:f.jsx(Gn,{selectedTab:e,tabs:r,onTabChange:t})})},m5=ke(p5,"Migration tools"),ss=({keywords:n,...e})=>{const{checkVisible:t,noResult:r}=wo();return f.jsx(pR,{isVisible:t(n)||r,...e})},Wt={integrations:["advanced","integrations","zapier","slack","unsplash","first promoter","firstpromoter","pintura","disqus","analytics","ulysses","typeform","buffer","plausible","github","webhooks"],migrationtools:["import","export","migrate","substack","substack","migration","medium","wordpress","wp","squarespace"],codeInjection:["advanced","code injection","head","footer"],labs:["advanced","labs","alpha","private","beta","flag","routes","redirect","translation","editor","portal"],history:["advanced","history","log","events","user events","staff","audit","action"],dangerzone:["danger","danger zone","delete","content","delete all content","delete site"]},g5=()=>f.jsxs(ss,{keywords:Object.values(Wt).flat(),title:"Advanced",children:[f.jsx(V_,{keywords:Wt.integrations}),f.jsx(m5,{keywords:Wt.migrationtools}),f.jsx(R_,{keywords:Wt.codeInjection}),f.jsx(c5,{keywords:Wt.labs}),f.jsx(j_,{keywords:Wt.history}),f.jsx(L_,{keywords:Wt.dangerzone})]}),Au="OffersResponseType",gS=Qr({dataType:Au,path:"/offers/",defaultSearchParams:{}}),EB=j2({dataType:Au,path:n=>`/offers/${n}/`}),DB=Ve({method:"PUT",path:n=>`/offers/${n.id}/`,body:n=>({offers:[n]}),updateQueries:{dataType:Au,emberUpdateType:"createOrUpdate",update:Uf("offers")}}),RB=Ve({method:"POST",path:()=>"/offers/",body:n=>({offers:[n]}),updateQueries:{dataType:Au,emberUpdateType:"createOrUpdate",update:Vf("offers")}}),Hh="TiersResponseType",Mu=Uc({dataType:Hh,path:"/tiers/",defaultNextPageParams:(n,e)=>{var t;return{...e,page:(((t=n.meta)==null?void 0:t.pagination.next)||1).toString()}},returnData:n=>{const{pages:e}=n,t=e.flatMap(i=>i.tiers),r=e[e.length-1].meta;return{tiers:t,meta:r,isEnd:r?r.pagination.pages===r.pagination.page:!0}}}),OB=Ve({method:"POST",path:()=>"/tiers/",body:n=>({tiers:[n]}),invalidateQueries:{dataType:Hh}}),TB=Ve({method:"PUT",path:n=>`/tiers/${n.id}/`,body:n=>({tiers:[n]}),updateQueries:{dataType:Hh,emberUpdateType:"createOrUpdate",update:Uf("tiers")}});function vS(n){return n.filter(e=>e.type==="paid"&&e.active)}function v5(n){return n.filter(e=>e.active)}function b5(n){return n.filter(e=>!e.active)}function Vg(n){const e=new Date,t={timeZone:n},r=navigator.language.startsWith("en")?navigator.language:"en-US";return e.toLocaleString(r,t)}function bS(n=""){let e=new RegExp(/([A-Za-z\u00C0-\u017F]{1})[A-Za-z\u00C0-\u017F]+/,"g"),t=[...n.matchAll(e)];return((t.shift()?.[1]||"")+(t.pop()?.[1]||"")).toUpperCase()}function Vh(n){let r=0;for(let s=0;s<n.length;s++)r=n.charCodeAt(s)+((r<<5)-r);return"hsl("+r%360+", 70%, 40%)"}function Sn(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function x5(n){return/^[a-z0-9]{24}$/.test(n)}const y5=[{label:"Free members",value:"status:free",color:"green"},{label:"Paid members",value:"status:-free",color:"pink"}],w5=(n,e)=>{const t=Ku({path:"/tiers/",filterKey:"name",responseKey:"tiers"}),r=Ku({path:"/labels/",filterKey:"name",responseKey:"labels"}),i=Ku({path:"/offers/",filterKey:"name",responseKey:"offers"}),[s,o]=x.useState(null),a=h=>({value:h.id,label:h.name,color:"black"}),l=h=>({value:`label:${h.slug}`,label:h.name,color:"grey"}),c=h=>({value:`offer_redemptions:${h.id}`,label:h.name,color:"black"}),u=async(h,p)=>{const[g,m,v]=await Promise.all([t.loadData(h),r.loadData(h),i.loadData(h)]),b=[{options:y5.filter(({label:y})=>y.toLowerCase().includes(h.toLowerCase()))},{label:"Active Tiers",options:g.filter(({active:y,type:S})=>y&&S!=="free").map(a)||[]},{label:"Archived Tiers",options:g.filter(({active:y})=>!y).map(a)||[]},{label:"Labels",options:m.map(l)||[]},{label:"Offers",options:v.map(c)||[]}];s===null&&d(),p(b.filter(y=>y.options.length>0))},d=async()=>{const h=e?.split(",")||[],p=[],g=[],m=[];for(const b of h)b.startsWith("label:")?g.push(b.replace("label:","")):b.startsWith("offer_redemptions:")?m.push(b.replace("offer_redemptions:","")):x5(b)&&p.push(b);const v=await Promise.all([t.loadInitialValues(p,"id").then(b=>b.map(a)),r.loadInitialValues(g,"slug").then(b=>b.map(l)),i.loadInitialValues(m,"id").then(b=>b.map(c))]).then(b=>b.flat());o(h.map(b=>v.find(y=>y.value===b)))};return x.useEffect(()=>{n==="segment"&&u("",()=>{})},[n]),{loadOptions:rC(u,500),selectedSegments:s,setSelectedSegments:o}},Ug=[{label:"Whoever has access to the post",hint:"Free posts to everyone, premium posts sent to paid members",value:"visibility"},{label:"All members",hint:"Everyone who is subscribed to newsletter updates, whether free or paid members",value:"all-members"},{label:"Paid-members only",hint:"People who have a premium subscription",value:"paid-only"},{label:"Specific people",hint:"Only people with any of the selected tiers or labels",value:"segment"},{label:"Usually nobody",hint:"Newsletters are off for new posts, but can be enabled when needed",value:"none"}];function zg({defaultEmailRecipients:n,defaultEmailRecipientsFilter:e}){return n==="filter"?e==="status:free,status:-free"?"all-members":e==="status:-free"?"paid-only":e===null?"none":"segment":n}const S5=({keywords:n})=>{const{localSettings:e,isEditing:t,saveState:r,handleSave:i,handleCancel:s,updateSetting:o,handleEditingChange:a}=Ot(),[l,c]=Te(e,["editor_default_email_recipients","editor_default_email_recipients_filter"]),[u,d]=x.useState(zg({defaultEmailRecipients:l,defaultEmailRecipientsFilter:c})),{loadOptions:h,selectedSegments:p,setSelectedSegments:g}=w5(u,c);x.useEffect(()=>{const b=zg({defaultEmailRecipients:l,defaultEmailRecipientsFilter:c});d(b)},[l,c]);const m=b=>{["visibility","disabled"].includes(b)?(o("editor_default_email_recipients",b),o("editor_default_email_recipients_filter",null)):o("editor_default_email_recipients","filter"),b==="all-members"&&o("editor_default_email_recipients_filter","status:free,status:-free"),b==="paid-only"&&o("editor_default_email_recipients_filter","status:-free"),b==="none"&&o("editor_default_email_recipients_filter",null),d(b),t||a(!0)},v=b=>{if(g(b),b.length){const y=b?.map(({value:S})=>S).join(",");o("editor_default_email_recipients_filter",y)}else o("editor_default_email_recipients_filter",null),d("none");t||a(!0)};return f.jsx(Se,{description:"When you publish new content, who do you usually want to send it to?",isEditing:t,keywords:n,navid:"default-recipients",saveState:r,testId:"default-recipients",title:"Default recipients",hideEditButton:!0,onCancel:s,onEditingChange:a,onSave:i,children:f.jsxs(Ze,{columns:1,children:[f.jsx(zr,{hint:"Who should receive your posts by default?",options:Ug,selectedOption:Ug.find(b=>b.value===u),testId:"default-recipients-select",title:"Default Newsletter recipients",onSelect:b=>{b&&m(b.value)}}),u==="segment"&&p&&f.jsx(xx,{loadOptions:h,title:"Filter",values:p,async:!0,defaultOptions:!0,onChange:v})]})})},C5=ke(S5,"Default recipients"),k5=({keywords:n})=>{const{settings:e}=Pe(),{mutateAsync:t}=Xr(),{updateRoute:r}=be(),i=vt(),[s,o]=Te(e,["editor_default_email_recipients","members_signup_access"]),a=o==="none",l=async u=>{const d=[{key:"editor_default_email_recipients",value:u.target.checked?"visibility":"disabled"}];u.target.checked||d.push({key:"editor_default_email_recipients_filter",value:null});try{await t(d)}catch(h){i(h)}},c=f.jsx(f.Fragment,{children:f.jsx(Kt,{checked:s!=="disabled",direction:"rtl",onChange:l})});return f.jsx(Se,{customButtons:c,description:"Newsletter features are active, posts can be sent by email",keywords:n,navid:"enable-newsletters",testId:"enable-newsletters",title:"Newsletter sending",children:f.jsx(Ze,{columns:1,values:[{key:"private",value:s!=="disabled"?f.jsxs("div",{className:"w-full",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ve,{colorClass:"text-green",name:"check",size:"sm"}),f.jsx("span",{children:"Enabled"})]}),a&&f.jsxs(Db,{className:"mt-6 text-sm",color:"grey",children:["Your ",f.jsx("button",{className:"!underline",type:"button",onClick:()=>{r("members")},children:"Subscription access"})," is set to Nobody, only existing members will receive newsletters."]})]}):f.jsxs("div",{className:"flex items-center gap-2 text-grey-900",children:[f.jsx(ve,{colorClass:"text-grey-600",name:"mail-block",size:"sm"}),f.jsx("span",{children:"Disabled"})]})}]})})},A5=ke(k5,"Newsletter sending"),wd=[{label:" US",value:"https://api.mailgun.net/v3"},{label:" EU",value:"https://api.eu.mailgun.net/v3"}],M5=({keywords:n})=>{const{localSettings:e,isEditing:t,saveState:r,handleSave:i,handleCancel:s,updateSetting:o,handleEditingChange:a}=Ot(),{mutateAsync:l}=Xr(),c=vt(),[u,d,h]=Te(e,["mailgun_base_url","mailgun_domain","mailgun_api_key"]),g=d&&h?[{key:"status",value:f.jsx(oE,{icon:"check-circle",iconColorClass:"text-green",children:"Mailgun is set up"})}]:[{heading:"Status",key:"status",value:"Mailgun is not set up"}],m=f.jsx(Ze,{columns:1,values:g}),v=f.jsxs(f.Fragment,{children:["Find your Mailgun API keys ",f.jsx(dc,{href:"https://app.mailgun.com/settings/api_security",rel:"noopener noreferrer",target:"_blank",children:"here"})]}),b=f.jsx(Ze,{children:f.jsxs("div",{className:"grid grid-cols-[120px_auto] gap-x-3 gap-y-6",children:[f.jsx(zr,{options:wd,selectedOption:wd.find(S=>S.value===u),title:"Mailgun region",onSelect:S=>{o("mailgun_base_url",S?.value||null)}}),f.jsx(tt,{title:"Mailgun domain",value:d,onChange:S=>{o("mailgun_domain",S.target.value)}}),f.jsx("div",{className:"col-span-2",children:f.jsx(tt,{hint:v,title:"Mailgun private API key",type:"password",value:h,onChange:S=>{o("mailgun_api_key",S.target.value)}})})]})}),y=f.jsxs(f.Fragment,{children:["The Mailgun API is used for bulk email newsletter delivery. ",f.jsx(dc,{href:"https://ghost.org/docs/faq/mailgun-newsletters/",target:"_blank",children:"Why is this required?"})]});return f.jsx(Se,{description:y,isEditing:t,keywords:n,navid:"mailgun",saveState:r,testId:"mailgun",title:"Mailgun",onCancel:s,onEditingChange:a,onSave:async()=>{if(!u)try{await l([{key:"mailgun_base_url",value:wd[0].value}])}catch(S){c(S);return}i()},children:t?b:m})},I5=ke(M5,"Mailgun"),Wg=({id:n,setRef:e,isDragging:t,style:r,children:i,...s})=>{const{updateRoute:o}=be(),a=()=>{o({route:`newsletters/${n}`})},l=f.jsxs(cu,{ref:e,action:f.jsx(ne,{color:"green","data-testid":"edit-newsletter-button",label:"Edit",link:!0,onClick:a}),className:t?"opacity-75":"",hideActions:!1,style:r,onClick:a,children:[(s.dragHandleAttributes||t)&&f.jsx($n,{className:"w-10 !align-middle",children:f.jsx(a1,{className:"h-10",isDragging:t||!1,...s})}),i]});return t?f.jsx(Ni,{children:l}):l},qg=({newsletter:n})=>{const{updateRoute:e}=be(),t=()=>{e({route:`newsletters/${n.id}`})};return f.jsxs(f.Fragment,{children:[f.jsx($n,{className:"w-full",onClick:t,children:f.jsxs("div",{className:"flex grow flex-col",children:[f.jsx("span",{className:"font-medium",children:n.name}),f.jsx("span",{className:"mt-0.5 text-xs leading-tight text-grey-700",children:n.description||"No description"})]})}),f.jsx($n,{className:"hidden md:!visible md:!table-cell md:min-w-[11rem]",onClick:t,children:f.jsxs("div",{className:"flex grow flex-col",children:[f.jsx("span",{children:Sn(n.count?.active_members||0)}),f.jsx("span",{className:"mt-0.5 whitespace-nowrap text-xs leading-tight text-grey-700",children:"Subscribers"})]})}),f.jsx($n,{className:"hidden md:!visible md:!table-cell md:min-w-[11rem]",onClick:t,children:f.jsxs("div",{className:"flex grow flex-col",children:[f.jsx("span",{children:Sn(n.count?.posts||0)}),f.jsx("span",{className:"mt-0.5 whitespace-nowrap text-xs leading-tight text-grey-700",children:"Delivered"})]})})]})},Gg=({newsletters:n,isLoading:e,isSortable:t,onSort:r})=>e?f.jsx(Ni,{isLoading:!0}):n.length&&t?f.jsx(sR,{container:i=>f.jsx(Wg,{...i}),items:n,renderItem:i=>f.jsx(qg,{newsletter:i}),wrapper:Ni,onMove:(i,s)=>r?.(i,s)}):n.length?f.jsx(Ni,{children:n.map(i=>f.jsx(Wg,{id:i.id,children:f.jsx(qg,{newsletter:i})}))}):f.jsx(ei,{icon:"mail-block",children:"No newsletters found."}),xS=()=>{const[n,e]=x.useState(new URLSearchParams);return x.useEffect(()=>{const r=()=>{const s=window.location.hash.split("?")[1];e(s?new URLSearchParams(s):new URLSearchParams)};return r(),window.addEventListener("hashchange",r),()=>{window.removeEventListener("hashchange",r)}},[]),{getParam:r=>n.get(r)}},Sd=({id:n,children:e})=>{const t=rr(),{updateRoute:r}=be();return f.jsx("button",{className:"text-green",type:"button",onClick:()=>{r(`newsletters/${n}`),t.remove()},children:e})},E5=({keywords:n})=>{const{updateRoute:e}=be(),t=()=>{e("newsletters/new")},[r,i]=x.useState("active-newsletters"),{data:{newsletters:s,meta:o,isEnd:a}={},isLoading:l,fetchNextPage:c}=gb(),{mutateAsync:u}=J2(),d=Hf(),h=xS().getParam("verifyEmail"),{mutateAsync:p}=X2(),g=vt(),[m,v]=x.useState(s||[]);x.useEffect(()=>{v(s||[])},[s]),x.useEffect(()=>{if(!h||!window.location.href.includes("newsletters"))return;(async()=>{try{const{newsletters:[k],meta:{email_verified:I}={}}=await p({token:h});let D,O;I&&I==="sender_email"?(D="Newsletter email verified",O=f.jsxs(f.Fragment,{children:["Newsletter ",f.jsx(Sd,{id:k.id,children:k.name})," will now be sent from ",f.jsx("strong",{children:k.sender_email}),"."]})):I&&I==="sender_reply_to"?(D="Reply-to address verified",O=f.jsxs(f.Fragment,{children:["Newsletter ",f.jsx(Sd,{id:k.id,children:k.name})," will now use ",f.jsx("strong",{children:k.sender_reply_to})," as the reply-to address."]})):(D="Email address verified",O=f.jsxs(f.Fragment,{children:["Email address for newsletter ",f.jsx(Sd,{id:k.id,children:k.name})," has been changed."]})),Ye.show(Gr,{title:D,prompt:O,okLabel:"Close",cancelLabel:"",onOk:T=>T?.remove()})}catch(k){let I="There was an error verifying your email address. Try again later.";k instanceof B2&&k.message==="Token expired"&&(I="Verification link has expired."),Ye.show(Gr,{title:"Error verifying email address",prompt:I,okLabel:"Close",cancelLabel:"",onOk:D=>D?.remove()}),g(k,{withToast:!1})}})()},[h,g,p]);const b=f.jsx(ne,{className:"mt-[-5px]",color:"clear",label:"Add newsletter",size:"sm",onClick:()=>{t()}}),y=m.filter(A=>A.status==="active").sort((A,k)=>A.sort_order-k.sort_order)||[],S=m.filter(A=>A.status!=="active"),w=async(A,k)=>{const I=y.findIndex(P=>P.id===A),D=y.findIndex(P=>P.id===k)||0,T=ch(y,I,D).map((P,H)=>P.sort_order===H?null:{...P,sort_order:H}).filter(P=>!!P),N=S.map((P,H)=>P.sort_order===H+y.length?null:{...P,sort_order:H}).filter(P=>!!P),L=[...T,...N].sort((P,H)=>P.sort_order-H.sort_order);v(m.map(P=>L.find(H=>H.id===P.id)||P)),d.setQueriesData([Q2],P=>{if(P)return{...P,pages:P.pages.map(H=>({...H,newsletters:H.newsletters.map(q=>L.find(Z=>Z.id===q.id)||q)}))}});for(const P of L)await u(P)},C=[{id:"active-newsletters",title:"Active",contents:f.jsx(Gg,{isLoading:l,newsletters:y,isSortable:!0,onSort:w})},{id:"archived-newsletters",title:"Archived",contents:f.jsx(Gg,{isLoading:l,newsletters:S})}];return f.jsxs(Se,{customButtons:b,description:"Edit details and customize your design",keywords:n,navid:"newsletters",testId:"newsletters",title:"Newsletters",children:[f.jsx(Gn,{selectedTab:r,tabs:C,onTabChange:i}),a===!1&&f.jsx(ne,{label:`Load more (showing ${m?.length||0}/${o?.pagination.total||0} newsletters)`,link:!0,onClick:()=>c()})]})},D5=ke(E5,"Newsletters"),mr={enableNewsletters:["emails","newsletters","newsletter sending","enable","disable","turn on","turn off"],newsletters:["newsletters","emails","design","customization"],defaultRecipients:["newsletters","default recipients","emails"],mailgun:["mailgun","emails","newsletters"],newslettersNavMenu:["emails","newsletters","newsletter sending","enable","disable","turn on","turn off","design","customization","default recipients","emails","mailgun","tips","donations","one time","payment"]},R5=()=>{const{settings:n,config:e}=Pe(),[t]=Te(n,["editor_default_email_recipients"]);return f.jsxs(ss,{keywords:Object.values(mr).flat(),title:"Email newsletter",children:[f.jsx(A5,{keywords:mr.enableNewsletters}),t!=="disabled"&&f.jsxs(f.Fragment,{children:[f.jsx(C5,{keywords:mr.defaultRecipients}),f.jsx(D5,{keywords:mr.newsletters}),!e.mailgunIsConfigured&&f.jsx(I5,{keywords:mr.mailgun})]})]})},O5=({keywords:n})=>{const{localSettings:e,isEditing:t,saveState:r,handleSave:i,handleCancel:s,updateSetting:o,handleEditingChange:a}=Ot(),[l,c,u,d,h,p]=Te(e,["email_track_opens","email_track_clicks","members_track_sources","outbound_link_tagging","web_analytics_configured","web_analytics_enabled"]),g=$2(e,"email_track_clicks"),[m,v]=x.useState(!1),b=Co(),{updateRoute:y}=be();x.useEffect(()=>{b?.isLimited("limitAnalytics")?b.errorIfWouldGoOverLimit("limitAnalytics").catch(C=>{C instanceof So&&v(!0)}):v(!1)},[b]);const S=(C,A)=>{o(C,A.target.checked),a(!0)},w=f.jsxs(Ze,{className:"analytics-settings !gap-y-0",columns:1,children:[f.jsx(Kt,{checked:p,direction:"rtl",disabled:!h||m,gap:"gap-0",hint:h?f.jsxs(f.Fragment,{children:["Cookie-free, first party traffic analytics for your site, powered by ",f.jsx("a",{className:"text-green",href:"https://ghost.org/integrations/tinybird",rel:"noopener noreferrer",target:"_blank",children:"Tinybird"})]}):f.jsx(f.Fragment,{children:"Cookie-free, first party traffic analytics for your site"}),label:"Web analytics",labelClasses:"py-4 w-full",onChange:C=>{S("web_analytics",C)}}),m?f.jsx("div",{className:"mb-5 rounded-md border border-grey-200 bg-grey-50 px-4 py-2.5 text-sm dark:border-grey-900 dark:bg-grey-925",children:f.jsx("span",{className:"flex items-start gap-2",children:f.jsxs("span",{children:["Web analytics is available on the Publisher plan and above. ",f.jsx("span",{className:"cursor-pointer text-green",onClick:()=>y({route:"/pro",isExternal:!0}),children:"Upgrade now "})]})})}):h?f.jsx(gt,{className:"border-grey-200 dark:border-grey-900"}):f.jsx("div",{className:"mb-5 rounded-md border border-grey-200 bg-grey-50 px-4 py-2.5 text-sm dark:border-grey-900 dark:bg-grey-925",children:f.jsx("span",{className:"flex items-start gap-2",children:f.jsxs("span",{children:["Web analytics in Ghost is powered by ",f.jsx("a",{className:"text-green",href:"https://tbrd.co/ghost",rel:"noopener noreferrer",target:"_blank",children:"Tinybird"})," and requires configuration to start collecting data. ",f.jsx("a",{className:"text-green",href:"https://docs.ghost.org/install/docker#tinybird-integration",rel:"noopener noreferrer",target:"_blank",children:"Get started "})]})})}),f.jsx(Kt,{checked:l,direction:"rtl",gap:"gap-0",hint:"Record when a member opens an email",label:"Newsletter opens",labelClasses:"py-4 w-full",onChange:C=>{S("email_track_opens",C)}}),f.jsx(gt,{className:"border-grey-200 dark:border-grey-900"}),f.jsx(Kt,{checked:c,direction:"rtl",disabled:g,gap:"gap-0",hint:"Record when a member clicks on any link in an email",label:"Newsletter clicks",labelClasses:"py-4 w-full",onChange:C=>{S("email_track_clicks",C)}}),f.jsx(gt,{className:"border-grey-200 dark:border-grey-900"}),f.jsx(Kt,{checked:u,direction:"rtl",gap:"gap-0",hint:"Track the traffic sources and posts that drive the most member growth",label:"Member sources",labelClasses:"py-4 w-full",onChange:C=>{S("members_track_sources",C)}}),f.jsx(gt,{className:"border-grey-200 dark:border-grey-900"}),f.jsx(Kt,{checked:d,direction:"rtl",gap:"gap-0",hint:"Make it easier for other sites to track the traffic you send them in their analytics",label:"Outbound link tagging",labelClasses:"py-4 w-full",onChange:C=>{S("outbound_link_tagging",C)}})]});return f.jsxs(Se,{description:"Decide what data you collect across your publication",isEditing:t,keywords:n,navid:"analytics",saveState:r,testId:"analytics",title:"Analytics",hideEditButton:!0,onCancel:s,onEditingChange:a,onSave:i,children:[w,f.jsx("div",{className:"items-center-mt-1 flex justify-between",children:f.jsx("a",{className:"text-sm text-green",href:"https://ghost.org/help/post-analytics/",rel:"noopener noreferrer",target:"_blank",children:"Learn about analytics"})})]})},T5=ke(O5,"Analytics"),N5=({keywords:n})=>{const{siteData:e}=Pe(),{localSettings:t,isEditing:r,saveState:i,handleSave:s,handleCancel:o,updateSetting:a,handleEditingChange:l,errors:c,clearError:u}=Ot({onValidate:()=>d&&!h?{password:"Enter a password"}:{}}),[d,h,p]=Te(t,["is_private","password","public_hash"]),g=w=>{a("is_private",w.target.checked)},m=w=>{a("password",w.target.value)},v=`${e.url.replace(/\/$/,"")}/${p}/rss`,b=f.jsxs(f.Fragment,{children:["A private RSS feed is available at ",f.jsx("a",{className:"break-all text-green",href:v,rel:"noopener noreferrer",target:"_blank",children:v})]}),y=f.jsx(Ze,{values:[{key:"private",value:d?f.jsxs("div",{className:"w-full",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(ve,{colorClass:"text-yellow",name:"lock-locked",size:"sm"}),f.jsx("div",{className:"leading-supertight",children:"Your site is password protected"})]}),b&&f.jsxs("div",{className:"mt-7 w-full",children:[f.jsx(gt,{}),f.jsx(qn,{children:b})]})]}):f.jsxs("div",{className:"flex items-center gap-1 text-grey-900 dark:text-grey-400",children:[f.jsx(ve,{colorClass:"text-black dark:text-white",name:"lock-unlocked",size:"sm"}),f.jsx("span",{children:"Your site is not password protected"})]})}]}),S=f.jsxs(Ze,{children:[f.jsx(Kt,{checked:d,direction:"rtl",hint:"All search engine optimization and social features will be disabled.",label:"Enable password protection",onChange:g}),d&&f.jsx(tt,{error:!!c.password,hint:c.password,placeholder:"Enter password",title:"Site password",value:h,hideTitle:!0,onChange:m,onKeyDown:()=>u("password")})]});return f.jsx(Se,{description:"Enable protection with a simple shared password.",isEditing:r,keywords:n,navid:"locksite",saveState:i,testId:"locksite",title:"Make site private",onCancel:o,onEditingChange:l,onSave:s,children:r?S:y})},P5=ke(N5,"Make site private"),L5=({keywords:n})=>{const{localSettings:e,isEditing:t,saveState:r,handleSave:i,handleCancel:s,updateSetting:o,errors:a,clearError:l,handleEditingChange:c}=Ot({onValidate:()=>u?{}:{publicationLanguage:"Enter a value"}}),[u]=Te(e,["locale"]),d=p=>{o("locale",p.target.value),t||c(!0)},h=f.jsxs(f.Fragment,{children:["Default: English (",f.jsx("strong",{children:"en"}),"); find out more about",f.jsx("a",{className:"text-green-400",href:"https://ghost.org/docs/faq/translation/",rel:"noopener noreferrer",target:"_blank",children:" using Ghost in other languages"})]});return f.jsx(Se,{description:"Set the language/locale which is used on your site",isEditing:t,keywords:n,navid:"publication-language",saveState:r,testId:"publication-language",title:"Publication Language",hideEditButton:!0,onCancel:s,onEditingChange:c,onSave:i,children:f.jsx(Ze,{columns:1,children:f.jsx(tt,{error:!!a.publicationLanguage,hint:a.publicationLanguage||h,placeholder:"Site language",title:"Site language",value:u,onChange:d,onKeyDown:()=>l("password")})})})},_5=ke(L5,"Publication language"),j5=Ve({method:"POST",path:()=>"/images/upload/",body:({file:n})=>{const e=new FormData;return e.append("file",n),e.append("purpose","image"),e}}),Cd=n=>n.images[0].url,B5=({title:n,description:e,icon:t,url:r})=>{const i=r?.replace(/\/$/,""),s=i?.replace(/^https?:\/\//,"").replace(/\/?$/,"");return f.jsx("div",{children:f.jsxs("div",{className:"-mx-5 -mb-5 overflow-hidden rounded-b-xl bg-grey-50 px-5 pt-2 md:-mx-7 md:-mb-7 md:px-7 md:pt-7 dark:bg-grey-950",children:[f.jsx("div",{className:"-mt-4 mb-2 text-xs uppercase text-grey-500 dark:text-grey-800",children:"Preview"}),f.jsxs("div",{className:"rounded-t-sm bg-white px-5 py-3 shadow-lg dark:bg-grey-975",children:[f.jsxs("div",{className:"mt-3 flex items-center",children:[f.jsx("div",{children:f.jsx(vR,{className:"mr-7 h-7"})}),f.jsx("div",{className:"grow",children:f.jsx("div",{className:"flex w-full items-center justify-end rounded-full bg-white p-3 px-4 shadow dark:bg-grey-900",children:f.jsx(ve,{className:"stroke-[2px] text-blue-600",name:"magnifying-glass",size:"sm"})})})]}),f.jsxs("div",{className:"mt-4 flex items-center gap-2 border-t border-grey-200 pt-4 dark:border-grey-900",children:[f.jsx("div",{className:"flex size-7 items-center justify-center rounded-full bg-grey-200 dark:bg-grey-700",style:{backgroundImage:t?`url(${t})`:"none",backgroundSize:"contain"}}),f.jsxs("div",{className:"flex flex-col text-sm",children:[f.jsx("span",{children:s}),f.jsx("span",{className:"-mt-0.5 inline-block text-xs text-grey-600",children:i})]})]}),f.jsxs("div",{className:"mt-1 flex flex-col",children:[f.jsx("span",{className:"text-lg text-[#1a0dab] dark:text-blue",children:n}),f.jsx("span",{className:"text-sm text-grey-900 dark:text-grey-700",children:e})]})]})]})})},$5=({keywords:n})=>{const{localSettings:e,saveState:t,siteData:r,focusRef:i,isEditing:s,handleSave:o,handleCancel:a,handleEditingChange:l,updateSetting:c}=Ot(),u=vt(),{mutateAsync:d}=j5(),h=hS(),[p,g,m,v,b,y,S,w,C,A]=Te(e,["meta_title","meta_description","title","description","og_title","og_description","og_image","twitter_title","twitter_description","twitter_image"]).map(Q=>Q||""),[k,I]=x.useState("metadata"),D=Q=>ce=>{c(Q,ce.target.value),s||l(!0)},O=Q=>async ce=>{try{const Ae=Cd(await d({file:ce}));c(Q,Ae),s||l(!0)}catch(Ae){const Be=Ae;Be.response.status===415&&(Be.message="Unsupported file type"),u(Be)}},T=Q=>()=>{c(Q,""),s||l(!0)},N=D("meta_title"),L=D("meta_description"),P=D("og_title"),H=D("og_description"),q=O("og_image"),Z=T("og_image"),ae=D("twitter_title"),ee=D("twitter_description"),de=O("twitter_image"),ge=T("twitter_image"),K=f.jsxs(f.Fragment,{children:[f.jsxs(Ze,{className:"my-6 gap-3",children:[f.jsx(tt,{hint:"Recommended: 70 characters",inputRef:i,maxLength:300,placeholder:m,title:"Meta title",value:p,onChange:N}),f.jsx(tt,{hint:"Recommended: 156 characters",maxLength:500,placeholder:v,title:"Meta description",value:g,onChange:L})]}),f.jsx(B5,{description:g||v,icon:r?.icon,title:p||m,url:r?.url})]}),fe=f.jsxs("div",{className:"mt-6 md:mx-[52px]",children:[f.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[f.jsx("div",{children:f.jsx(gR,{className:"size-10"})}),f.jsxs("div",{children:[f.jsx("div",{className:"mb-1 font-semibold leading-none text-grey-900 dark:text-grey-300",children:m}),f.jsx("div",{className:"leading-none text-grey-700",children:"2h"})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"mb-2 h-3 w-full rounded bg-grey-200 dark:bg-grey-900"}),f.jsx("div",{className:"mb-4 h-3 w-3/5 rounded bg-grey-200 dark:bg-grey-900"}),f.jsxs(Ze,{className:"overflow-hidden rounded-md border border-grey-300 dark:border-grey-900",children:[f.jsx(Qh,{fileUploadClassName:"flex cursor-pointer items-center justify-center rounded rounded-b-none border border-grey-100 border-b-0 bg-grey-75 p-3 text-sm font-semibold text-grey-800 hover:text-black dark:border-grey-900",height:"300px",id:"facebook-image",imageURL:S,pintura:{isEnabled:h.isEnabled,openEditor:async()=>h.openEditor({image:S||"",handleSave:async Q=>{const ce=Cd(await d({file:Q}));c("og_image",ce)}})},onDelete:Z,onUpload:q,children:"Upload Facebook image"}),f.jsxs("div",{className:"mt-5 flex flex-col gap-x-6 gap-y-7 px-4 pb-7",children:[f.jsx(tt,{maxLength:300,placeholder:m,title:"Facebook title",value:b,onChange:P}),f.jsx(tt,{maxLength:300,placeholder:v,title:"Facebook description",value:y,onChange:H})]})]})]})]}),re=f.jsxs("div",{className:"mt-6 flex flex-col gap-3 md:flex-row",children:[f.jsx("div",{className:"pt-1",children:f.jsx(bR,{className:"-mb-1 size-10"})}),f.jsxs("div",{className:"w-full md:mr-[52px]",children:[f.jsxs("div",{className:"mb-2",children:[f.jsx("span",{className:"mr-1 font-semibold text-grey-900 dark:text-grey-300",children:m}),f.jsx("span",{className:"text-grey-700",children:" 2h"})]}),f.jsx("div",{className:"mb-2 h-3 w-full rounded bg-grey-200 dark:bg-grey-900"}),f.jsx("div",{className:"mb-4 h-3 w-3/5 rounded bg-grey-200 dark:bg-grey-900"}),f.jsxs(Ze,{className:"overflow-hidden rounded-md border border-grey-300 dark:border-grey-900",children:[f.jsx(Qh,{fileUploadClassName:"flex cursor-pointer items-center justify-center rounded rounded-b-none border border-grey-100 border-b-0 bg-grey-75 p-3 text-sm font-semibold text-grey-800 hover:text-black dark:border-grey-900",height:"300px",id:"twitter-image",imageURL:A,pintura:{isEnabled:h.isEnabled,openEditor:async()=>h.openEditor({image:A||"",handleSave:async Q=>{const ce=Cd(await d({file:Q}));c("twitter_image",ce)}})},onDelete:ge,onUpload:de,children:"Upload X image"}),f.jsxs("div",{className:"mt-6 flex flex-col gap-x-6 gap-y-7 px-4 pb-7",children:[f.jsx(tt,{maxLength:300,placeholder:m,title:"X title",value:w,onChange:ae}),f.jsx(tt,{maxLength:300,placeholder:v,title:"X description",value:C,onChange:ee})]})]})]})]}),ue=[{id:"metadata",title:"Search",contents:K},{id:"twitter",title:"X card",contents:re},{id:"facebook",title:"Facebook card",contents:fe}];return f.jsx(Se,{description:"Extra content for search engines and social accounts",isEditing:s,keywords:n,navid:"metadata",saveState:t,testId:"seometa",title:"Meta data",hideEditButton:!0,onCancel:a,onEditingChange:l,onSave:o,children:f.jsx(Gn,{selectedTab:k,tabs:ue,testId:"seo-tabview",onTabChange:I})})},F5=ke($5,"SEO meta");var ea={exports:{}},ta={exports:{}},na={exports:{}},Kg;function U(){return Kg||(Kg=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function t(i){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t(i)}function r(i){var s=typeof i=="string"||i instanceof String;if(!s){var o=t(i);throw i===null?o="null":o==="object"&&(o=i.constructor.name),new TypeError("Expected a string but received a ".concat(o))}}n.exports=e.default,n.exports.default=e.default})(na,na.exports)),na.exports}var Zg;function Uh(){return Zg||(Zg=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),s=Date.parse(s),isNaN(s)?null:new Date(s)}n.exports=e.default,n.exports.default=e.default})(ta,ta.exports)),ta.exports}var ra={exports:{}},li={},Xe={},Yg;function ko(){if(Yg)return Xe;Yg=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.farsiLocales=Xe.englishLocales=Xe.dotDecimal=Xe.decimal=Xe.commaDecimal=Xe.bengaliLocales=Xe.arabicLocales=Xe.alphanumeric=Xe.alpha=void 0;for(var n=Xe.alpha={"en-US":/^[A-Z]+$/i,"az-AZ":/^[A-VXYZ]+$/i,"bg-BG":/^[-]+$/i,"cs-CZ":/^[A-Z]+$/i,"da-DK":/^[A-Z]+$/i,"de-DE":/^[A-Z]+$/i,"el-GR":/^[-]+$/i,"es-ES":/^[A-Z]+$/i,"fa-IR":/^[]+$/i,"fi-FI":/^[A-Z]+$/i,"fr-FR":/^[A-Z]+$/i,"it-IT":/^[A-Z]+$/i,"ja-JP":/^[----]+$/i,"nb-NO":/^[A-Z]+$/i,"nl-NL":/^[A-Z]+$/i,"nn-NO":/^[A-Z]+$/i,"hu-HU":/^[A-Z]+$/i,"pl-PL":/^[A-Z]+$/i,"pt-PT":/^[A-Z]+$/i,"ru-RU":/^[-]+$/i,"kk-KZ":/^[-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[A-Z]+$/i,"sk-SK":/^[A-Z]+$/i,"sr-RS@latin":/^[A-Z]+$/i,"sr-RS":/^[-]+$/i,"sv-SE":/^[A-Z]+$/i,"th-TH":/^[-\s]+$/i,"tr-TR":/^[A-Z]+$/i,"uk-UA":/^[-I]+$/i,"vi-VN":/^[A-Z]+$/i,"ko-KR":/^[---]*$/,"ku-IQ":/^[]+$/i,ar:/^[]+$/,he:/^[-]+$/,fa:/^['']+$/i,bn:/^['']+$/,eo:/^[ABCD-GHIJK-PRSTUVZ]+$/i,"hi-IN":/^[\u0900-\u0961]+[\u0972-\u097F]*$/i,"si-LK":/^[\u0D80-\u0DFF]+$/},e=Xe.alphanumeric={"en-US":/^[0-9A-Z]+$/i,"az-AZ":/^[0-9A-VXYZ]+$/i,"bg-BG":/^[0-9-]+$/i,"cs-CZ":/^[0-9A-Z]+$/i,"da-DK":/^[0-9A-Z]+$/i,"de-DE":/^[0-9A-Z]+$/i,"el-GR":/^[0-9-]+$/i,"es-ES":/^[0-9A-Z]+$/i,"fi-FI":/^[0-9A-Z]+$/i,"fr-FR":/^[0-9A-Z]+$/i,"it-IT":/^[0-9A-Z]+$/i,"ja-JP":/^[0-9-----]+$/i,"hu-HU":/^[0-9A-Z]+$/i,"nb-NO":/^[0-9A-Z]+$/i,"nl-NL":/^[0-9A-Z]+$/i,"nn-NO":/^[0-9A-Z]+$/i,"pl-PL":/^[0-9A-Z]+$/i,"pt-PT":/^[0-9A-Z]+$/i,"ru-RU":/^[0-9-]+$/i,"kk-KZ":/^[0-9-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[0-9A-Z]+$/i,"sk-SK":/^[0-9A-Z]+$/i,"sr-RS@latin":/^[0-9A-Z]+$/i,"sr-RS":/^[0-9-]+$/i,"sv-SE":/^[0-9A-Z]+$/i,"th-TH":/^[-\s]+$/i,"tr-TR":/^[0-9A-Z]+$/i,"uk-UA":/^[0-9-I]+$/i,"ko-KR":/^[0-9---]*$/,"ku-IQ":/^[0-9]+$/i,"vi-VN":/^[0-9A-Z]+$/i,ar:/^[0-9]+$/,he:/^[0-9-]+$/,fa:/^['0-9']+$/i,bn:/^['']+$/,eo:/^[0-9ABCD-GHIJK-PRSTUVZ]+$/i,"hi-IN":/^[\u0900-\u0963]+[\u0966-\u097F]*$/i,"si-LK":/^[0-9\u0D80-\u0DFF]+$/},t=Xe.decimal={"en-US":".",ar:""},r=Xe.englishLocales=["AU","GB","HK","IN","NZ","ZA","ZM"],i,s=0;s<r.length;s++)i="en-".concat(r[s]),n[i]=n["en-US"],e[i]=e["en-US"],t[i]=t["en-US"];for(var o=Xe.arabicLocales=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"],a,l=0;l<o.length;l++)a="ar-".concat(o[l]),n[a]=n.ar,e[a]=e.ar,t[a]=t.ar;for(var c=Xe.farsiLocales=["IR","AF"],u,d=0;d<c.length;d++)u="fa-".concat(c[d]),e[u]=e.fa,t[u]=t.ar;for(var h=Xe.bengaliLocales=["BD","IN"],p,g=0;g<h.length;g++)p="bn-".concat(h[g]),n[p]=n.bn,e[p]=e.bn,t[p]=t["en-US"];for(var m=Xe.dotDecimal=["ar-EG","ar-LB","ar-LY"],v=Xe.commaDecimal=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-ZM","eo","es-ES","fr-CA","fr-FR","id-ID","it-IT","ku-IQ","hi-IN","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","kk-KZ","si-LK","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA","vi-VN"],b=0;b<m.length;b++)t[m[b]]=t["en-US"];for(var y=0;y<v.length;y++)t[v[y]]=",";return n["fr-CA"]=n["fr-FR"],e["fr-CA"]=e["fr-FR"],n["pt-BR"]=n["pt-PT"],e["pt-BR"]=e["pt-PT"],t["pt-BR"]=t["pt-PT"],n["pl-Pl"]=n["pl-PL"],e["pl-Pl"]=e["pl-PL"],t["pl-Pl"]=t["pl-PL"],n["fa-AF"]=n.fa,Xe}var Jg;function yS(){if(Jg)return li;Jg=1,Object.defineProperty(li,"__esModule",{value:!0}),li.default=r,li.locales=void 0;var n=t(U()),e=ko();function t(i){return i&&i.__esModule?i:{default:i}}function r(i,s){(0,n.default)(i),s=s||{};var o=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(s.locale?e.decimal[s.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(i===""||i==="."||i===","||i==="-"||i==="+")return!1;var a=parseFloat(i.replace(",","."));return o.test(i)&&(!s.hasOwnProperty("min")||a>=s.min)&&(!s.hasOwnProperty("max")||a<=s.max)&&(!s.hasOwnProperty("lt")||a<s.lt)&&(!s.hasOwnProperty("gt")||a>s.gt)}return li.locales=Object.keys(e.decimal),li}var Xg;function wS(){return Xg||(Xg=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(yS());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s)?parseFloat(s):NaN}n.exports=e.default,n.exports.default=e.default})(ra,ra.exports)),ra.exports}var ia={exports:{}},Qg;function H5(){return Qg||(Qg=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s,o){return(0,t.default)(s),parseInt(s,o||10)}n.exports=e.default,n.exports.default=e.default})(ia,ia.exports)),ia.exports}var sa={exports:{}},e0;function V5(){return e0||(e0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s,o){return(0,t.default)(s),o?s==="1"||/^true$/i.test(s):s!=="0"&&!/^false$/i.test(s)&&s!==""}n.exports=e.default,n.exports.default=e.default})(sa,sa.exports)),sa.exports}var oa={exports:{}},t0;function U5(){return t0||(t0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s,o){return(0,t.default)(s),s===o}n.exports=e.default,n.exports.default=e.default})(oa,oa.exports)),oa.exports}var aa={exports:{}},la={exports:{}},n0;function SS(){return n0||(n0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function t(i){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t(i)}function r(i){return t(i)==="object"&&i!==null?typeof i.toString=="function"?i=i.toString():i="[object Object]":(i===null||typeof i>"u"||isNaN(i)&&!i.length)&&(i=""),String(i)}n.exports=e.default,n.exports.default=e.default})(la,la.exports)),la.exports}var ca={exports:{}},r0;function Ht(){return r0||(r0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var s in i)typeof r[s]>"u"&&(r[s]=i[s]);return r}n.exports=e.default,n.exports.default=e.default})(ca,ca.exports)),ca.exports}var i0;function z5(){return i0||(i0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=s(U()),r=s(SS()),i=s(Ht());function s(l){return l&&l.__esModule?l:{default:l}}var o={ignoreCase:!1,minOccurrences:1};function a(l,c,u){return(0,t.default)(l),u=(0,i.default)(u,o),u.ignoreCase?l.toLowerCase().split((0,r.default)(c).toLowerCase()).length>u.minOccurrences:l.split((0,r.default)(c)).length>u.minOccurrences}n.exports=e.default,n.exports.default=e.default})(aa,aa.exports)),aa.exports}var ua={exports:{}},s0;function W5(){return s0||(s0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s,o,a){return(0,t.default)(s),Object.prototype.toString.call(o)!=="[object RegExp]"&&(o=new RegExp(o,a)),!!s.match(o)}n.exports=e.default,n.exports.default=e.default})(ua,ua.exports)),ua.exports}var da={exports:{}},fa={exports:{}},o0;function CS(){return o0||(o0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}function i(o){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i(o)}function s(o,a){(0,t.default)(o);var l,c;i(a)==="object"?(l=a.min||0,c=a.max):(l=arguments[1],c=arguments[2]);var u=encodeURI(o).split(/%..|./).length-1;return u>=l&&(typeof c>"u"||u<=c)}n.exports=e.default,n.exports.default=e.default})(fa,fa.exports)),fa.exports}var ha={exports:{}},a0;function zh(){return a0||(a0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(U()),r=i(Ht());function i(a){return a&&a.__esModule?a:{default:a}}var s={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function o(a,l){(0,t.default)(a),l=(0,r.default)(l,s),l.allow_trailing_dot&&a[a.length-1]==="."&&(a=a.substring(0,a.length-1)),l.allow_wildcard===!0&&a.indexOf("*.")===0&&(a=a.substring(2));var c=a.split("."),u=c[c.length-1];return l.require_tld&&(c.length<2||!l.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(u)||/\s/.test(u))||!l.allow_numeric_tld&&/^\d+$/.test(u)?!1:c.every(function(d){return!(d.length>63&&!l.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(d)||/[\uff01-\uff5e]/.test(d)||/^-|-$/.test(d)||!l.allow_underscores&&/_/.test(d))})}n.exports=e.default,n.exports.default=e.default})(ha,ha.exports)),ha.exports}var pa={exports:{}},l0;function Iu(){return l0||(l0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=r(U());function r(u){return u&&u.__esModule?u:{default:u}}var i="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",s="(".concat(i,"[.]){3}").concat(i),o=new RegExp("^".concat(s,"$")),a="(?:[0-9a-fA-F]{1,4})",l=new RegExp("^("+"(?:".concat(a,":){7}(?:").concat(a,"|:)|")+"(?:".concat(a,":){6}(?:").concat(s,"|:").concat(a,"|:)|")+"(?:".concat(a,":){5}(?::").concat(s,"|(:").concat(a,"){1,2}|:)|")+"(?:".concat(a,":){4}(?:(:").concat(a,"){0,1}:").concat(s,"|(:").concat(a,"){1,3}|:)|")+"(?:".concat(a,":){3}(?:(:").concat(a,"){0,2}:").concat(s,"|(:").concat(a,"){1,4}|:)|")+"(?:".concat(a,":){2}(?:(:").concat(a,"){0,3}:").concat(s,"|(:").concat(a,"){1,5}|:)|")+"(?:".concat(a,":){1}(?:(:").concat(a,"){0,4}:").concat(s,"|(:").concat(a,"){1,6}|:)|")+"(?::((?::".concat(a,"){0,5}:").concat(s,"|(?::").concat(a,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function c(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,t.default)(u),d=String(d),d?d==="4"?o.test(u):d==="6"?l.test(u):!1:c(u,4)||c(u,6)}n.exports=e.default,n.exports.default=e.default})(pa,pa.exports)),pa.exports}var c0;function kS(){return c0||(c0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=b;var t=a(U()),r=a(CS()),i=a(zh()),s=a(Iu()),o=a(Ht());function a(y){return y&&y.__esModule?y:{default:y}}var l={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},c=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,u=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^[a-z\d]+$/,h=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,p=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,g=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,m=254;function v(y){var S=y.replace(/^"(.+)"$/,"$1");if(!S.trim())return!1;var w=/[\.";<>]/.test(S);if(w){if(S===y)return!1;var C=S.split('"').length===S.split('\\"').length;if(!C)return!1}return!0}function b(y,S){if((0,t.default)(y),S=(0,o.default)(S,l),S.require_display_name||S.allow_display_name){var w=y.match(c);if(w){var C=w[1];if(y=y.replace(C,"").replace(/(^<|>$)/g,""),C.endsWith(" ")&&(C=C.slice(0,-1)),!v(C))return!1}else if(S.require_display_name)return!1}if(!S.ignore_max_length&&y.length>m)return!1;var A=y.split("@"),k=A.pop(),I=k.toLowerCase();if(S.host_blacklist.includes(I)||S.host_whitelist.length>0&&!S.host_whitelist.includes(I))return!1;var D=A.join("@");if(S.domain_specific_validation&&(I==="gmail.com"||I==="googlemail.com")){D=D.toLowerCase();var O=D.split("+")[0];if(!(0,r.default)(O.replace(/\./g,""),{min:6,max:30}))return!1;for(var T=O.split("."),N=0;N<T.length;N++)if(!d.test(T[N]))return!1}if(S.ignore_max_length===!1&&(!(0,r.default)(D,{max:64})||!(0,r.default)(k,{max:254})))return!1;if(!(0,i.default)(k,{require_tld:S.require_tld,ignore_max_length:S.ignore_max_length,allow_underscores:S.allow_underscores})){if(!S.allow_ip_domain)return!1;if(!(0,s.default)(k)){if(!k.startsWith("[")||!k.endsWith("]"))return!1;var L=k.slice(1,-1);if(L.length===0||!(0,s.default)(L))return!1}}if(D[0]==='"')return D=D.slice(1,D.length-1),S.allow_utf8_local_part?g.test(D):h.test(D);for(var P=S.allow_utf8_local_part?p:u,H=D.split("."),q=0;q<H.length;q++)if(!P.test(H[q]))return!1;return!(S.blacklisted_chars&&D.search(new RegExp("[".concat(S.blacklisted_chars,"]+"),"g"))!==-1)}n.exports=e.default,n.exports.default=e.default})(da,da.exports)),da.exports}var ma={exports:{}},u0;function q5(){return u0||(u0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=b;var t=o(U()),r=o(zh()),i=o(Iu()),s=o(Ht());function o(y){return y&&y.__esModule?y:{default:y}}function a(y,S){return h(y)||d(y,S)||c(y,S)||l()}function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(y,S){if(y){if(typeof y=="string")return u(y,S);var w=Object.prototype.toString.call(y).slice(8,-1);if(w==="Object"&&y.constructor&&(w=y.constructor.name),w==="Map"||w==="Set")return Array.from(y);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return u(y,S)}}function u(y,S){(S==null||S>y.length)&&(S=y.length);for(var w=0,C=new Array(S);w<S;w++)C[w]=y[w];return C}function d(y,S){var w=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(w!=null){var C,A,k,I,D=[],O=!0,T=!1;try{if(k=(w=w.call(y)).next,S!==0)for(;!(O=(C=k.call(w)).done)&&(D.push(C.value),D.length!==S);O=!0);}catch(N){T=!0,A=N}finally{try{if(!O&&w.return!=null&&(I=w.return(),Object(I)!==I))return}finally{if(T)throw A}}return D}}function h(y){if(Array.isArray(y))return y}var p={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},g=/^\[([^\]]+)\](?::([0-9]+))?$/;function m(y){return Object.prototype.toString.call(y)==="[object RegExp]"}function v(y,S){for(var w=0;w<S.length;w++){var C=S[w];if(y===C||m(C)&&C.test(y))return!0}return!1}function b(y,S){if((0,t.default)(y),!y||/[\s<>]/.test(y)||y.indexOf("mailto:")===0||(S=(0,s.default)(S,p),S.validate_length&&y.length>=2083)||!S.allow_fragments&&y.includes("#")||!S.allow_query_components&&(y.includes("?")||y.includes("&")))return!1;var w,C,A,k,I,D,O,T;if(O=y.split("#"),y=O.shift(),O=y.split("?"),y=O.shift(),O=y.split("://"),O.length>1){if(w=O.shift().toLowerCase(),S.require_valid_protocol&&S.protocols.indexOf(w)===-1)return!1}else{if(S.require_protocol)return!1;if(y.slice(0,2)==="//"){if(!S.allow_protocol_relative_urls)return!1;O[0]=y.slice(2)}}if(y=O.join("://"),y==="")return!1;if(O=y.split("/"),y=O.shift(),y===""&&!S.require_host)return!0;if(O=y.split("@"),O.length>1){if(S.disallow_auth||O[0]===""||(C=O.shift(),C.indexOf(":")>=0&&C.split(":").length>2))return!1;var N=C.split(":"),L=a(N,2),P=L[0],H=L[1];if(P===""&&H==="")return!1}k=O.join("@"),D=null,T=null;var q=k.match(g);if(q?(A="",T=q[1],D=q[2]||null):(O=k.split(":"),A=O.shift(),O.length&&(D=O.join(":"))),D!==null&&D.length>0){if(I=parseInt(D,10),!/^[0-9]+$/.test(D)||I<=0||I>65535)return!1}else if(S.require_port)return!1;return S.host_whitelist?v(A,S.host_whitelist):A===""&&!S.require_host?!0:!(!(0,i.default)(A)&&!(0,r.default)(A,S)&&(!T||!(0,i.default)(T,6))||(A=A||T,S.host_blacklist&&v(A,S.host_blacklist)))}n.exports=e.default,n.exports.default=e.default})(ma,ma.exports)),ma.exports}var ga={exports:{}},d0;function G5(){return d0||(d0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var t=r(U());function r(d){return d&&d.__esModule?d:{default:d}}var i=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){4}([0-9a-fA-F]{2})$/,s=/^([0-9a-fA-F]){12}$/,o=/^([0-9a-fA-F]{4}\.){2}([0-9a-fA-F]{4})$/,a=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){6}([0-9a-fA-F]{2})$/,l=/^([0-9a-fA-F]){16}$/,c=/^([0-9a-fA-F]{4}\.){3}([0-9a-fA-F]{4})$/;function u(d,h){return(0,t.default)(d),h!=null&&h.eui&&(h.eui=String(h.eui)),h!=null&&h.no_colons||h!=null&&h.no_separators?h.eui==="48"?s.test(d):h.eui==="64"?l.test(d):s.test(d)||l.test(d):h?.eui==="48"?i.test(d)||o.test(d):h?.eui==="64"?a.test(d)||c.test(d):u(d,{eui:"48"})||u(d,{eui:"64"})}n.exports=e.default,n.exports.default=e.default})(ga,ga.exports)),ga.exports}var va={exports:{}},f0;function K5(){return f0||(f0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var t=i(U()),r=i(Iu());function i(c){return c&&c.__esModule?c:{default:c}}var s=/^\d{1,3}$/,o=32,a=128;function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(0,t.default)(c);var d=c.split("/");if(d.length!==2||!s.test(d[1])||d[1].length>1&&d[1].startsWith("0"))return!1;var h=(0,r.default)(d[0],u);if(!h)return!1;var p=null;switch(String(u)){case"4":p=o;break;case"6":p=a;break;default:p=(0,r.default)(d[0],"6")?a:o}return d[1]<=p&&d[1]>=0}n.exports=e.default,n.exports.default=e.default})(va,va.exports)),va.exports}var ba={exports:{}},h0;function AS(){return h0||(h0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=g;var t=r(Ht());function r(m){return m&&m.__esModule?m:{default:m}}function i(m,v){return a(m)||o(m,v)||c(m,v)||s()}function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(m,v){var b=m==null?null:typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(b!=null){var y,S,w,C,A=[],k=!0,I=!1;try{if(w=(b=b.call(m)).next,v!==0)for(;!(k=(y=w.call(b)).done)&&(A.push(y.value),A.length!==v);k=!0);}catch(D){I=!0,S=D}finally{try{if(!k&&b.return!=null&&(C=b.return(),Object(C)!==C))return}finally{if(I)throw S}}return A}}function a(m){if(Array.isArray(m))return m}function l(m,v){var b=typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(!b){if(Array.isArray(m)||(b=c(m))||v){b&&(m=b);var y=0,S=function(){};return{s:S,n:function(){return y>=m.length?{done:!0}:{done:!1,value:m[y++]}},e:function(I){throw I},f:S}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=!0,C=!1,A;return{s:function(){b=b.call(m)},n:function(){var I=b.next();return w=I.done,I},e:function(I){C=!0,A=I},f:function(){try{!w&&b.return!=null&&b.return()}finally{if(C)throw A}}}}function c(m,v){if(m){if(typeof m=="string")return u(m,v);var b=Object.prototype.toString.call(m).slice(8,-1);if(b==="Object"&&m.constructor&&(b=m.constructor.name),b==="Map"||b==="Set")return Array.from(m);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return u(m,v)}}function u(m,v){(v==null||v>m.length)&&(v=m.length);for(var b=0,y=new Array(v);b<v;b++)y[b]=m[b];return y}var d={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};function h(m){return/(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(m)}function p(m,v){for(var b=[],y=Math.min(m.length,v.length),S=0;S<y;S++)b.push([m[S],v[S]]);return b}function g(m,v){if(typeof v=="string"?v=(0,t.default)({format:v},d):v=(0,t.default)(v,d),typeof m=="string"&&h(v.format)){var b=v.delimiters.find(function(H){return v.format.indexOf(H)!==-1}),y=v.strictMode?b:v.delimiters.find(function(H){return m.indexOf(H)!==-1}),S=p(m.split(y),v.format.toLowerCase().split(b)),w={},C=l(S),A;try{for(C.s();!(A=C.n()).done;){var k=i(A.value,2),I=k[0],D=k[1];if(I.length!==D.length)return!1;w[D.charAt(0)]=I}}catch(H){C.e(H)}finally{C.f()}var O=w.y;if(O.startsWith("-"))return!1;if(w.y.length===2){var T=parseInt(w.y,10);if(isNaN(T))return!1;var N=new Date().getFullYear()%100;T<N?O="20".concat(w.y):O="19".concat(w.y)}var L=w.m;w.m.length===1&&(L="0".concat(w.m));var P=w.d;return w.d.length===1&&(P="0".concat(w.d)),new Date("".concat(O,"-").concat(L,"-").concat(P,"T00:00:00.000Z")).getUTCDate()===+w.d}return v.strictMode?!1:Object.prototype.toString.call(m)==="[object Date]"&&isFinite(m)}n.exports=e.default,n.exports.default=e.default})(ba,ba.exports)),ba.exports}var xa={exports:{}},p0;function Z5(){return p0||(p0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=r(Ht());function r(a){return a&&a.__esModule?a:{default:a}}var i={hourFormat:"hour24",mode:"default"},s={hour24:{default:/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/,withSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/},hour12:{default:/^(0?[1-9]|1[0-2]):([0-5][0-9]) (A|P)M$/,withSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9]):([0-5][0-9]) (A|P)M$/}};function o(a,l){return l=(0,t.default)(l,i),typeof a!="string"?!1:s[l.hourFormat][l.mode].test(a)}n.exports=e.default,n.exports.default=e.default})(xa,xa.exports)),xa.exports}var ya={exports:{}},m0;function Y5(){return m0||(m0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=r(U());function r(l){return l&&l.__esModule?l:{default:l}}var i={loose:!1},s=["true","false","1","0"],o=[].concat(s,["yes","no"]);function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i;return(0,t.default)(l),c.loose?o.includes(l.toLowerCase()):s.includes(l)}n.exports=e.default,n.exports.default=e.default})(ya,ya.exports)),ya.exports}var wa={exports:{}},g0;function J5(){return g0||(g0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=y;var t=r(U());function r(S){return S&&S.__esModule?S:{default:S}}var i="([A-Za-z]{3}(-[A-Za-z]{3}){0,2})",s="(([a-zA-Z]{2,3}(-".concat(i,")?)|([a-zA-Z]{5,8}))"),o="([A-Za-z]{4})",a="([A-Za-z]{2}|\\d{3})",l="([A-Za-z0-9]{5,8}|(\\d[A-Z-a-z0-9]{3}))",c="(\\d|[A-W]|[Y-Z]|[a-w]|[y-z])",u="(".concat(c,"(-[A-Za-z0-9]{2,8})+)"),d="(x(-[A-Za-z0-9]{1,8})+)",h="((en-GB-oed)|(i-ami)|(i-bnn)|(i-default)|(i-enochian)|(i-hak)|(i-klingon)|(i-lux)|(i-mingo)|(i-navajo)|(i-pwn)|(i-tao)|(i-tay)|(i-tsu)|(sgn-BE-FR)|(sgn-BE-NL)|(sgn-CH-DE))",p="((art-lojban)|(cel-gaulish)|(no-bok)|(no-nyn)|(zh-guoyu)|(zh-hakka)|(zh-min)|(zh-min-nan)|(zh-xiang))",g="(".concat(h,"|").concat(p,")"),m="(-|_)",v="".concat(s,"(").concat(m).concat(o,")?(").concat(m).concat(a,")?(").concat(m).concat(l,")*(").concat(m).concat(u,")*(").concat(m).concat(d,")?"),b=new RegExp("(^".concat(d,"$)|(^").concat(g,"$)|(^").concat(v,"$)"));function y(S){return(0,t.default)(S),b.test(S)}n.exports=e.default,n.exports.default=e.default})(wa,wa.exports)),wa.exports}var Sa={exports:{}},v0;function X5(){return v0||(v0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^(?!(1[3-9])|(20)|(3[3-9])|(4[0-9])|(5[0-9])|(60)|(7[3-9])|(8[1-9])|(9[0-2])|(9[3-9]))[0-9]{9}$/;function s(o){if((0,t.default)(o),!i.test(o))return!1;for(var a=0,l=0;l<o.length;l++)l%3===0?a+=o[l]*3:l%3===1?a+=o[l]*7:a+=o[l]*1;return a%10===0}n.exports=e.default,n.exports.default=e.default})(Sa,Sa.exports)),Sa.exports}var ci={},b0;function Q5(){if(b0)return ci;b0=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.default=r,ci.locales=void 0;var n=t(U()),e=ko();function t(i){return i&&i.__esModule?i:{default:i}}function r(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,n.default)(i);var a=i,l=o.ignore;if(l)if(l instanceof RegExp)a=a.replace(l,"");else if(typeof l=="string")a=a.replace(new RegExp("[".concat(l.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(s in e.alpha)return e.alpha[s].test(a);throw new Error("Invalid locale '".concat(s,"'"))}return ci.locales=Object.keys(e.alpha),ci}var ui={},x0;function e4(){if(x0)return ui;x0=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.default=r,ui.locales=void 0;var n=t(U()),e=ko();function t(i){return i&&i.__esModule?i:{default:i}}function r(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,n.default)(i);var a=i,l=o.ignore;if(l)if(l instanceof RegExp)a=a.replace(l,"");else if(typeof l=="string")a=a.replace(new RegExp("[".concat(l.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(s in e.alphanumeric)return e.alphanumeric[s].test(a);throw new Error("Invalid locale '".concat(s,"'"))}return ui.locales=Object.keys(e.alphanumeric),ui}var Ca={exports:{}},y0;function t4(){return y0||(y0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(U()),r=ko();function i(a){return a&&a.__esModule?a:{default:a}}var s=/^[0-9]+$/;function o(a,l){return(0,t.default)(a),l&&l.no_symbols?s.test(a):new RegExp("^[+-]?([0-9]*[".concat((l||{}).locale?r.decimal[l.locale]:".","])?[0-9]+$")).test(a)}n.exports=e.default,n.exports.default=e.default})(Ca,Ca.exports)),Ca.exports}var ka={exports:{}},w0;function n4(){return w0||(w0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i={AM:/^[A-Z]{2}\d{7}$/,AR:/^[A-Z]{3}\d{6}$/,AT:/^[A-Z]\d{7}$/,AU:/^[A-Z]\d{7}$/,AZ:/^[A-Z]{1}\d{8}$/,BE:/^[A-Z]{2}\d{6}$/,BG:/^\d{9}$/,BR:/^[A-Z]{2}\d{6}$/,BY:/^[A-Z]{2}\d{7}$/,CA:/^[A-Z]{2}\d{6}$/,CH:/^[A-Z]\d{7}$/,CN:/^G\d{8}$|^E(?![IO])[A-Z0-9]\d{7}$/,CY:/^[A-Z](\d{6}|\d{8})$/,CZ:/^\d{8}$/,DE:/^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,DK:/^\d{9}$/,DZ:/^\d{9}$/,EE:/^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,ES:/^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,FI:/^[A-Z]{2}\d{7}$/,FR:/^\d{2}[A-Z]{2}\d{5}$/,GB:/^\d{9}$/,GR:/^[A-Z]{2}\d{7}$/,HR:/^\d{9}$/,HU:/^[A-Z]{2}(\d{6}|\d{7})$/,IE:/^[A-Z0-9]{2}\d{7}$/,IN:/^[A-Z]{1}-?\d{7}$/,ID:/^[A-C]\d{7}$/,IR:/^[A-Z]\d{8}$/,IS:/^(A)\d{7}$/,IT:/^[A-Z0-9]{2}\d{7}$/,JM:/^[Aa]\d{7}$/,JP:/^[A-Z]{2}\d{7}$/,KR:/^[MS]\d{8}$/,KZ:/^[a-zA-Z]\d{7}$/,LI:/^[a-zA-Z]\d{5}$/,LT:/^[A-Z0-9]{8}$/,LU:/^[A-Z0-9]{8}$/,LV:/^[A-Z0-9]{2}\d{7}$/,LY:/^[A-Z0-9]{8}$/,MT:/^\d{7}$/,MZ:/^([A-Z]{2}\d{7})|(\d{2}[A-Z]{2}\d{5})$/,MY:/^[AHK]\d{8}$/,MX:/^\d{10,11}$/,NL:/^[A-Z]{2}[A-Z0-9]{6}\d$/,NZ:/^([Ll]([Aa]|[Dd]|[Ff]|[Hh])|[Ee]([Aa]|[Pp])|[Nn])\d{6}$/,PH:/^([A-Z](\d{6}|\d{7}[A-Z]))|([A-Z]{2}(\d{6}|\d{7}))$/,PK:/^[A-Z]{2}\d{7}$/,PL:/^[A-Z]{2}\d{7}$/,PT:/^[A-Z]\d{6}$/,RO:/^\d{8,9}$/,RU:/^\d{9}$/,SE:/^\d{8}$/,SL:/^(P)[A-Z]\d{7}$/,SK:/^[0-9A-Z]\d{7}$/,TH:/^[A-Z]{1,2}\d{6,7}$/,TR:/^[A-Z]\d{8}$/,UA:/^[A-Z]{2}\d{6}$/,US:/^\d{9}$/,ZA:/^[TAMD]\d{8}$/};function s(o,a){(0,t.default)(o);var l=o.replace(/\s/g,"").toUpperCase();return a.toUpperCase()in i&&i[a].test(l)}n.exports=e.default,n.exports.default=e.default})(ka,ka.exports)),ka.exports}var Aa={exports:{}},Ma={exports:{}},S0;function Wh(){return S0||(S0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=r(U());function r(a){return a&&a.__esModule?a:{default:a}}var i=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,s=/^[-+]?[0-9]+$/;function o(a,l){(0,t.default)(a),l=l||{};var c=l.allow_leading_zeroes===!1?i:s,u=!l.hasOwnProperty("min")||a>=l.min,d=!l.hasOwnProperty("max")||a<=l.max,h=!l.hasOwnProperty("lt")||a<l.lt,p=!l.hasOwnProperty("gt")||a>l.gt;return c.test(a)&&u&&d&&h&&p}n.exports=e.default,n.exports.default=e.default})(Ma,Ma.exports)),Ma.exports}var C0;function r4(){return C0||(C0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(Wh());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s,{allow_leading_zeroes:!1,min:0,max:65535})}n.exports=e.default,n.exports.default=e.default})(Aa,Aa.exports)),Aa.exports}var Ia={exports:{}},k0;function i4(){return k0||(k0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),s===s.toLowerCase()}n.exports=e.default,n.exports.default=e.default})(Ia,Ia.exports)),Ia.exports}var Ea={exports:{}},A0;function s4(){return A0||(A0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),s===s.toUpperCase()}n.exports=e.default,n.exports.default=e.default})(Ea,Ea.exports)),Ea.exports}var Da={exports:{}},M0;function o4(){return M0||(M0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=r(U());function r(a){return a&&a.__esModule?a:{default:a}}var i=/^[0-9]{15}$/,s=/^\d{2}-\d{6}-\d{6}-\d{1}$/;function o(a,l){(0,t.default)(a),l=l||{};var c=i;if(l.allow_hyphens&&(c=s),!c.test(a))return!1;a=a.replace(/-/g,"");for(var u=0,d=2,h=14,p=0;p<h;p++){var g=a.substring(h-p-1,h-p),m=parseInt(g,10)*d;m>=10?u+=m%10+1:u+=m,d===1?d+=1:d-=1}var v=(10-u%10)%10;return v===parseInt(a.substring(14,15),10)}n.exports=e.default,n.exports.default=e.default})(Da,Da.exports)),Da.exports}var Ra={exports:{}},I0;function a4(){return I0||(I0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^[\x00-\x7F]+$/;function s(o){return(0,t.default)(o),i.test(o)}n.exports=e.default,n.exports.default=e.default})(Ra,Ra.exports)),Ra.exports}var di={},E0;function MS(){if(E0)return di;E0=1,Object.defineProperty(di,"__esModule",{value:!0}),di.default=r,di.fullWidth=void 0;var n=e(U());function e(i){return i&&i.__esModule?i:{default:i}}var t=di.fullWidth=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function r(i){return(0,n.default)(i),t.test(i)}return di}var fi={},D0;function IS(){if(D0)return fi;D0=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.default=r,fi.halfWidth=void 0;var n=e(U());function e(i){return i&&i.__esModule?i:{default:i}}var t=fi.halfWidth=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function r(i){return(0,n.default)(i),t.test(i)}return fi}var Oa={exports:{}},R0;function l4(){return R0||(R0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=s(U()),r=MS(),i=IS();function s(a){return a&&a.__esModule?a:{default:a}}function o(a){return(0,t.default)(a),r.fullWidth.test(a)&&i.halfWidth.test(a)}n.exports=e.default,n.exports.default=e.default})(Oa,Oa.exports)),Oa.exports}var Ta={exports:{}},O0;function c4(){return O0||(O0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/[^\x00-\x7F]/;function s(o){return(0,t.default)(o),i.test(o)}n.exports=e.default,n.exports.default=e.default})(Ta,Ta.exports)),Ta.exports}var Na={exports:{}},Pa={exports:{}},T0;function u4(){return T0||(T0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r,i){var s=r.join("");return new RegExp(s,i)}n.exports=e.default,n.exports.default=e.default})(Pa,Pa.exports)),Pa.exports}var N0;function d4(){return N0||(N0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(U()),r=i(u4());function i(a){return a&&a.__esModule?a:{default:a}}var s=(0,r.default)(["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)","(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))","?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"],"i");function o(a){return(0,t.default)(a),s.test(a)}n.exports=e.default,n.exports.default=e.default})(Na,Na.exports)),Na.exports}var La={exports:{}},P0;function f4(){return P0||(P0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;function s(o){return(0,t.default)(o),i.test(o)}n.exports=e.default,n.exports.default=e.default})(La,La.exports)),La.exports}var _a={exports:{}},ja={exports:{}},L0;function h4(){return L0||(L0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(i,s){return i.some(function(o){return s===o})};e.default=t,n.exports=e.default,n.exports.default=e.default})(ja,ja.exports)),ja.exports}var _0;function p4(){return _0||(_0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var t=o(Ht()),r=o(U()),i=o(h4()),s=ko();function o(d){return d&&d.__esModule?d:{default:d}}function a(d){var h=new RegExp("^[-+]?([0-9]+)?(\\".concat(s.decimal[d.locale],"[0-9]{").concat(d.decimal_digits,"})").concat(d.force_decimal?"":"?","$"));return h}var l={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},c=["","-","+"];function u(d,h){if((0,r.default)(d),h=(0,t.default)(h,l),h.locale in s.decimal)return!(0,i.default)(c,d.replace(/ /g,""))&&a(h).test(d);throw new Error("Invalid locale '".concat(h.locale,"'"))}n.exports=e.default,n.exports.default=e.default})(_a,_a.exports)),_a.exports}var Ba={exports:{}},j0;function ES(){return j0||(j0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^(0x|0h)?[0-9A-F]+$/i;function s(o){return(0,t.default)(o),i.test(o)}n.exports=e.default,n.exports.default=e.default})(Ba,Ba.exports)),Ba.exports}var $a={exports:{}},B0;function m4(){return B0||(B0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^(0o)?[0-7]+$/i;function s(o){return(0,t.default)(o),i.test(o)}n.exports=e.default,n.exports.default=e.default})($a,$a.exports)),$a.exports}var Fa={exports:{}},$0;function g4(){return $0||($0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(U()),r=i(wS());function i(o){return o&&o.__esModule?o:{default:o}}function s(o,a){return(0,t.default)(o),(0,r.default)(o)%parseInt(a,10)===0}n.exports=e.default,n.exports.default=e.default})(Fa,Fa.exports)),Fa.exports}var Ha={exports:{}},F0;function v4(){return F0||(F0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i;function s(o){return(0,t.default)(o),i.test(o)}n.exports=e.default,n.exports.default=e.default})(Ha,Ha.exports)),Ha.exports}var Va={exports:{}},H0;function b4(){return H0||(H0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var t=r(U());function r(c){return c&&c.__esModule?c:{default:c}}var i=/^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/,s=/^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/,o=/^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)$/,a=/^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/;function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,t.default)(c),u?i.test(c)||s.test(c)||o.test(c)||a.test(c):i.test(c)||s.test(c)}n.exports=e.default,n.exports.default=e.default})(Va,Va.exports)),Va.exports}var Ua={exports:{}},V0;function x4(){return V0||(V0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=r(U());function r(a){return a&&a.__esModule?a:{default:a}}var i=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(,(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}(,((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?))?\)$/i,s=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(\s(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s?(\/\s((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s?)?\)$/i;function o(a){(0,t.default)(a);var l=a.replace(/\s+/g," ").replace(/\s?(hsla?\(|\)|,)\s?/ig,"$1");return l.indexOf(",")!==-1?i.test(l):s.test(l)}n.exports=e.default,n.exports.default=e.default})(Ua,Ua.exports)),Ua.exports}var za={exports:{}},U0;function y4(){return U0||(U0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;function s(o){return(0,t.default)(o),i.test(o)}n.exports=e.default,n.exports.default=e.default})(za,za.exports)),za.exports}var hi={},z0;function w4(){if(z0)return hi;z0=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.default=o,hi.locales=void 0;var n=e(U());function e(a){return a&&a.__esModule?a:{default:a}}var t={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,DZ:/^(DZ\d{24})$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z0-9]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MA:/^(MA[0-9]{26})$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,MZ:/^(MZ[0-9]{2})\d{21}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z0-9]{4}\d{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z0-9]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};function r(a){var l=a.filter(function(c){return!(c in t)});return!(l.length>0)}function i(a,l){var c=a.replace(/[\s\-]+/gi,"").toUpperCase(),u=c.slice(0,2).toUpperCase(),d=u in t;if(l.whitelist){if(!r(l.whitelist))return!1;var h=l.whitelist.includes(u);if(!h)return!1}if(l.blacklist){var p=l.blacklist.includes(u);if(p)return!1}return d&&t[u].test(c)}function s(a){var l=a.replace(/[^A-Z0-9]+/gi,"").toUpperCase(),c=l.slice(4)+l.slice(0,4),u=c.replace(/[A-Z]/g,function(h){return h.charCodeAt(0)-55}),d=u.match(/\d{1,7}/g).reduce(function(h,p){return Number(h+p)%97},"");return d===1}function o(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,n.default)(a),i(a,l)&&s(a)}return hi.locales=Object.keys(t),hi}var Wa={exports:{}},pi={},W0;function DS(){if(W0)return pi;W0=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.CountryCodes=void 0,pi.default=r;var n=e(U());function e(i){return i&&i.__esModule?i:{default:i}}var t=new Set(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]);function r(i){return(0,n.default)(i),t.has(i.toUpperCase())}return pi.CountryCodes=t,pi}var q0;function S4(){return q0||(q0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(U()),r=DS();function i(a){return a&&a.__esModule?a:{default:a}}var s=/^[A-Za-z]{6}[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/;function o(a){(0,t.default)(a);var l=a.slice(4,6).toUpperCase();return!r.CountryCodes.has(l)&&l!=="XK"?!1:s.test(a)}n.exports=e.default,n.exports.default=e.default})(Wa,Wa.exports)),Wa.exports}var qa={exports:{}},G0;function C4(){return G0||(G0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^[a-f0-9]{32}$/;function s(o){return(0,t.default)(o),i.test(o)}n.exports=e.default,n.exports.default=e.default})(qa,qa.exports)),qa.exports}var Ga={exports:{}},K0;function k4(){return K0||(K0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};function s(o,a){(0,t.default)(o);var l=new RegExp("^[a-fA-F0-9]{".concat(i[a],"}$"));return l.test(o)}n.exports=e.default,n.exports.default=e.default})(Ga,Ga.exports)),Ga.exports}var Ka={exports:{}},Za={exports:{}},Z0;function RS(){return Z0||(Z0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var t=i(U()),r=i(Ht());function i(c){return c&&c.__esModule?c:{default:c}}var s=/[^A-Z0-9+\/=]/i,o=/^[A-Z0-9_\-]*$/i,a={urlSafe:!1};function l(c,u){(0,t.default)(c),u=(0,r.default)(u,a);var d=c.length;if(u.urlSafe)return o.test(c);if(d%4!==0||s.test(c))return!1;var h=c.indexOf("=");return h===-1||h===d-1||h===d-2&&c[d-1]==="="}n.exports=e.default,n.exports.default=e.default})(Za,Za.exports)),Za.exports}var Y0;function A4(){return Y0||(Y0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(U()),r=i(RS());function i(o){return o&&o.__esModule?o:{default:o}}function s(o){(0,t.default)(o);var a=o.split("."),l=a.length;return l!==3?!1:a.reduce(function(c,u){return c&&(0,r.default)(u,{urlSafe:!0})},!0)}n.exports=e.default,n.exports.default=e.default})(Ka,Ka.exports)),Ka.exports}var Ya={exports:{}},J0;function M4(){return J0||(J0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(U()),r=i(Ht());function i(l){return l&&l.__esModule?l:{default:l}}function s(l){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},s(l)}var o={allow_primitives:!1};function a(l,c){(0,t.default)(l);try{c=(0,r.default)(c,o);var u=[];c.allow_primitives&&(u=[null,!1,!0]);var d=JSON.parse(l);return u.includes(d)||!!d&&s(d)==="object"}catch{}return!1}n.exports=e.default,n.exports.default=e.default})(Ya,Ya.exports)),Ya.exports}var Ja={exports:{}},X0;function I4(){return X0||(X0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(U()),r=i(Ht());function i(a){return a&&a.__esModule?a:{default:a}}var s={ignore_whitespace:!1};function o(a,l){return(0,t.default)(a),l=(0,r.default)(l,s),(l.ignore_whitespace?a.trim().length:a.length)===0}n.exports=e.default,n.exports.default=e.default})(Ja,Ja.exports)),Ja.exports}var Xa={exports:{}},Q0;function E4(){return Q0||(Q0=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}function i(o){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i(o)}function s(o,a){(0,t.default)(o);var l,c;i(a)==="object"?(l=a.min||0,c=a.max):(l=arguments[1]||0,c=arguments[2]);var u=o.match(/(\uFE0F|\uFE0E)/g)||[],d=o.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],h=o.length-u.length-d.length;return h>=l&&(typeof c>"u"||h<=c)}n.exports=e.default,n.exports.default=e.default})(Xa,Xa.exports)),Xa.exports}var Qa={exports:{}},ev;function D4(){return ev||(ev=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i={1:/^[0-9A-F]{8}-[0-9A-F]{4}-1[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,2:/^[0-9A-F]{8}-[0-9A-F]{4}-2[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,7:/^[0-9A-F]{8}-[0-9A-F]{4}-7[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};function s(o,a){(0,t.default)(o);var l=i[[void 0,null].includes(a)?"all":a];return!!l&&l.test(o)}n.exports=e.default,n.exports.default=e.default})(Qa,Qa.exports)),Qa.exports}var el={exports:{}},tv;function R4(){return tv||(tv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(U()),r=i(ES());function i(o){return o&&o.__esModule?o:{default:o}}function s(o){return(0,t.default)(o),(0,r.default)(o)&&o.length===24}n.exports=e.default,n.exports.default=e.default})(el,el.exports)),el.exports}var tl={exports:{}},nv;function O4(){return nv||(nv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(Uh());function r(s){return s&&s.__esModule?s:{default:s}}function i(s,o){var a=o?.comparisonDate||o||Date().toString(),l=(0,t.default)(a),c=(0,t.default)(s);return!!(c&&l&&c>l)}n.exports=e.default,n.exports.default=e.default})(tl,tl.exports)),tl.exports}var nl={exports:{}},rv;function T4(){return rv||(rv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(U()),r=i(Uh());function i(o){return o&&o.__esModule?o:{default:o}}function s(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:String(new Date);(0,t.default)(o);var l=(0,r.default)(a),c=(0,r.default)(o);return!!(c&&l&&c<l)}n.exports=e.default,n.exports.default=e.default})(nl,nl.exports)),nl.exports}var rl={exports:{}},iv;function N4(){return iv||(iv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(U()),r=i(SS());function i(a){return a&&a.__esModule?a:{default:a}}function s(a){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},s(a)}function o(a,l){(0,t.default)(a);var c;if(Object.prototype.toString.call(l)==="[object Array]"){var u=[];for(c in l)({}).hasOwnProperty.call(l,c)&&(u[c]=(0,r.default)(l[c]));return u.indexOf(a)>=0}else{if(s(l)==="object")return l.hasOwnProperty(a);if(l&&typeof l.indexOf=="function")return l.indexOf(a)>=0}return!1}n.exports=e.default,n.exports.default=e.default})(rl,rl.exports)),rl.exports}var il={exports:{}},sv;function OS(){return sv||(sv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){(0,t.default)(s);for(var o=s.replace(/[- ]+/g,""),a=0,l,c,u,d=o.length-1;d>=0;d--)l=o.substring(d,d+1),c=parseInt(l,10),u?(c*=2,c>=10?a+=c%10+1:a+=c):a+=c,u=!u;return!!(a%10===0&&o)}n.exports=e.default,n.exports.default=e.default})(il,il.exports)),il.exports}var sl={exports:{}},ov;function P4(){return ov||(ov=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(U()),r=i(OS());function i(l){return l&&l.__esModule?l:{default:l}}var s={amex:/^3[47][0-9]{13}$/,dinersclub:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,discover:/^6(?:011|5[0-9][0-9])[0-9]{12,15}$/,jcb:/^(?:2131|1800|35\d{3})\d{11}$/,mastercard:/^5[1-5][0-9]{2}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/,unionpay:/^(6[27][0-9]{14}|^(81[0-9]{14,17}))$/,visa:/^(?:4[0-9]{12})(?:[0-9]{3,6})?$/},o=(function(){var l=[];for(var c in s)s.hasOwnProperty(c)&&l.push(s[c]);return l})();function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(l);var u=c.provider,d=l.replace(/[- ]+/g,"");if(u&&u.toLowerCase()in s){if(!s[u.toLowerCase()].test(d))return!1}else{if(u&&!(u.toLowerCase()in s))throw new Error("".concat(u," is not a valid credit card provider."));if(!o.some(function(h){return h.test(d)}))return!1}return(0,r.default)(l)}n.exports=e.default,n.exports.default=e.default})(sl,sl.exports)),sl.exports}var ol={exports:{}},av;function L4(){return av||(av=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(U()),r=i(Wh());function i(a){return a&&a.__esModule?a:{default:a}}var s={PL:function(l){(0,t.default)(l);var c={1:1,2:3,3:7,4:9,5:1,6:3,7:7,8:9,9:1,10:3,11:0};if(l!=null&&l.length===11&&(0,r.default)(l,{allow_leading_zeroes:!0})){var u=l.split("").slice(0,-1),d=u.reduce(function(g,m,v){return g+Number(m)*c[v+1]},0),h=d%10,p=Number(l.charAt(l.length-1));if(h===0&&p===0||p===10-h)return!0}return!1},ES:function(l){(0,t.default)(l);var c=/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/,u={X:0,Y:1,Z:2},d=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"],h=l.trim().toUpperCase();if(!c.test(h))return!1;var p=h.slice(0,-1).replace(/[X,Y,Z]/g,function(g){return u[g]});return h.endsWith(d[p%23])},FI:function(l){if((0,t.default)(l),l.length!==11||!l.match(/^\d{6}[\-A\+]\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/))return!1;var c="0123456789ABCDEFHJKLMNPRSTUVWXY",u=parseInt(l.slice(0,6),10)*1e3+parseInt(l.slice(7,10),10),d=u%31,h=c[d];return h===l.slice(10,11)},IN:function(l){var c=/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/,u=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],d=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],h=l.trim();if(!c.test(h))return!1;var p=0,g=h.replace(/\s/g,"").split("").map(Number).reverse();return g.forEach(function(m,v){p=u[p][d[v%8][m]]}),p===0},IR:function(l){if(!l.match(/^\d{10}$/)||(l="0000".concat(l).slice(l.length-6),parseInt(l.slice(3,9),10)===0))return!1;for(var c=parseInt(l.slice(9,10),10),u=0,d=0;d<9;d++)u+=parseInt(l.slice(d,d+1),10)*(10-d);return u%=11,u<2&&c===u||u>=2&&c===11-u},IT:function(l){return l.length!==9||l==="CA00000AA"?!1:l.search(/C[A-Z]\d{5}[A-Z]{2}/i)>-1},NO:function(l){var c=l.trim();if(isNaN(Number(c))||c.length!==11||c==="00000000000")return!1;var u=c.split("").map(Number),d=(11-(3*u[0]+7*u[1]+6*u[2]+1*u[3]+8*u[4]+9*u[5]+4*u[6]+5*u[7]+2*u[8])%11)%11,h=(11-(5*u[0]+4*u[1]+3*u[2]+2*u[3]+7*u[4]+6*u[5]+5*u[6]+4*u[7]+3*u[8]+2*d)%11)%11;return!(d!==u[9]||h!==u[10])},TH:function(l){if(!l.match(/^[1-8]\d{12}$/))return!1;for(var c=0,u=0;u<12;u++)c+=parseInt(l[u],10)*(13-u);return l[12]===((11-c%11)%10).toString()},LK:function(l){var c=/^[1-9]\d{8}[vx]$/i,u=/^[1-9]\d{11}$/i;return l.length===10&&c.test(l)?!0:!!(l.length===12&&u.test(l))},"he-IL":function(l){var c=/^\d{9}$/,u=l.trim();if(!c.test(u))return!1;for(var d=u,h=0,p,g=0;g<d.length;g++)p=Number(d[g])*(g%2+1),h+=p>9?p-9:p;return h%10===0},"ar-LY":function(l){var c=/^(1|2)\d{11}$/,u=l.trim();return!!c.test(u)},"ar-TN":function(l){var c=/^\d{8}$/,u=l.trim();return!!c.test(u)},"zh-CN":function(l){var c=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"],u=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],d=["1","0","X","9","8","7","6","5","4","3","2"],h=function(w){return c.includes(w)},p=function(w){var C=parseInt(w.substring(0,4),10),A=parseInt(w.substring(4,6),10),k=parseInt(w.substring(6),10),I=new Date(C,A-1,k);return I>new Date?!1:I.getFullYear()===C&&I.getMonth()===A-1&&I.getDate()===k},g=function(w){for(var C=w.substring(0,17),A=0,k=0;k<17;k++)A+=parseInt(C.charAt(k),10)*parseInt(u[k],10);var I=A%11;return d[I]},m=function(w){return g(w)===w.charAt(17).toUpperCase()},v=function(w){var C=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(w);if(!C)return!1;var A=w.substring(0,2);if(C=h(A),!C)return!1;var k="19".concat(w.substring(6,12));return C=p(k),!!C},b=function(w){var C=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(w);if(!C)return!1;var A=w.substring(0,2);if(C=h(A),!C)return!1;var k=w.substring(6,14);return C=p(k),C?m(w):!1},y=function(w){var C=/^\d{15}|(\d{17}(\d|x|X))$/.test(w);return C?w.length===15?v(w):b(w):!1};return y(l)},"zh-HK":function(l){l=l.trim();var c=/^[A-Z]{1,2}[0-9]{6}((\([0-9A]\))|(\[[0-9A]\])|([0-9A]))$/,u=/^[0-9]$/;if(l=l.toUpperCase(),!c.test(l))return!1;l=l.replace(/\[|\]|\(|\)/g,""),l.length===8&&(l="3".concat(l));for(var d=0,h=0;h<=7;h++){var p=void 0;u.test(l[h])?p=l[h]:p=(l[h].charCodeAt(0)-55)%11,d+=p*(9-h)}d%=11;var g;return d===0?g="0":d===1?g="A":g=String(11-d),g===l[l.length-1]},"zh-TW":function(l){var c={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33},u=l.trim().toUpperCase();return/^[A-Z][0-9]{9}$/.test(u)?Array.from(u).reduce(function(d,h,p){if(p===0){var g=c[h];return g%10*9+Math.floor(g/10)}return p===9?(10-d%10-Number(h))%10===0:d+Number(h)*(9-p)},0):!1}};function o(a,l){if((0,t.default)(a),l in s)return s[l](a);if(l==="any"){for(var c in s)if(s.hasOwnProperty(c)){var u=s[c];if(u(a))return!0}return!1}throw new Error("Invalid locale '".concat(l,"'"))}n.exports=e.default,n.exports.default=e.default})(ol,ol.exports)),ol.exports}var al={exports:{}},lv;function _4(){return lv||(lv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=r(U());function r(u){return u&&u.__esModule?u:{default:u}}var i=8,s=14,o=/^(\d{8}|\d{13}|\d{14})$/;function a(u,d){return u===i||u===s?d%2===0?3:1:d%2===0?1:3}function l(u){var d=u.slice(0,-1).split("").map(function(p,g){return Number(p)*a(u.length,g)}).reduce(function(p,g){return p+g},0),h=10-d%10;return h<10?h:0}function c(u){(0,t.default)(u);var d=Number(u.slice(-1));return o.test(u)&&d===l(u)}n.exports=e.default,n.exports.default=e.default})(al,al.exports)),al.exports}var ll={exports:{}},cv;function j4(){return cv||(cv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;function s(o){if((0,t.default)(o),!i.test(o))return!1;for(var a=!0,l=0,c=o.length-2;c>=0;c--)if(o[c]>="A"&&o[c]<="Z")for(var u=o[c].charCodeAt(0)-55,d=u%10,h=Math.trunc(u/10),p=0,g=[d,h];p<g.length;p++){var m=g[p];a?m>=5?l+=1+(m-5)*2:l+=m*2:l+=m,a=!a}else{var v=o[c].charCodeAt(0)-48;a?v>=5?l+=1+(v-5)*2:l+=v*2:l+=v,a=!a}var b=Math.trunc((l+9)/10)*10-l;return+o[o.length-1]===b}n.exports=e.default,n.exports.default=e.default})(ll,ll.exports)),ll.exports}var cl={exports:{}},uv;function B4(){return uv||(uv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=r(U());function r(l){return l&&l.__esModule?l:{default:l}}var i=/^(?:[0-9]{9}X|[0-9]{10})$/,s=/^(?:[0-9]{13})$/,o=[1,3];function a(l,c){(0,t.default)(l);var u=String(c?.version||c);if(!(c!=null&&c.version||c))return a(l,{version:10})||a(l,{version:13});var d=l.replace(/[\s-]+/g,""),h=0;if(u==="10"){if(!i.test(d))return!1;for(var p=0;p<u-1;p++)h+=(p+1)*d.charAt(p);if(d.charAt(9)==="X"?h+=100:h+=10*d.charAt(9),h%11===0)return!0}else if(u==="13"){if(!s.test(d))return!1;for(var g=0;g<12;g++)h+=o[g%2]*d.charAt(g);if(d.charAt(12)-(10-h%10)%10===0)return!0}return!1}n.exports=e.default,n.exports.default=e.default})(cl,cl.exports)),cl.exports}var ul={exports:{}},dv;function $4(){return dv||(dv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i="^\\d{4}-?\\d{3}[\\dX]$";function s(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(o);var l=i;if(l=a.require_hyphen?l.replace("?",""):l,l=a.case_sensitive?new RegExp(l):new RegExp(l,"i"),!l.test(o))return!1;for(var c=o.replace("-","").toUpperCase(),u=0,d=0;d<c.length;d++){var h=c[d];u+=(h==="X"?10:+h)*(8-d)}return u%11===0}n.exports=e.default,n.exports.default=e.default})(ul,ul.exports)),ul.exports}var dl={exports:{}},jr={},fv;function TS(){if(fv)return jr;fv=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.iso7064Check=n,jr.luhnCheck=e,jr.reverseMultiplyAndSum=t,jr.verhoeffCheck=r;function n(i){for(var s=10,o=0;o<i.length-1;o++)s=(parseInt(i[o],10)+s)%10===0?20%11:(parseInt(i[o],10)+s)%10*2%11;return s=s===1?0:11-s,s===parseInt(i[10],10)}function e(i){for(var s=0,o=!1,a=i.length-1;a>=0;a--){if(o){var l=parseInt(i[a],10)*2;l>9?s+=l.toString().split("").map(function(c){return parseInt(c,10)}).reduce(function(c,u){return c+u},0):s+=l}else s+=parseInt(i[a],10);o=!o}return s%10===0}function t(i,s){for(var o=0,a=0;a<i.length;a++)o+=i[a]*(s-a);return o}function r(i){for(var s=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],o=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],a=i.split("").reverse().join(""),l=0,c=0;c<a.length;c++)l=s[l][o[c%8][parseInt(a[c],10)]];return l===0}return jr}var hv;function F4(){return hv||(hv=1,(function(n,e){function t(M){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},t(M)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=sr;var r=l(U()),i=a(TS()),s=l(AS());function o(M){if(typeof WeakMap!="function")return null;var E=new WeakMap,R=new WeakMap;return(o=function($){return $?R:E})(M)}function a(M,E){if(M&&M.__esModule)return M;if(M===null||t(M)!="object"&&typeof M!="function")return{default:M};var R=o(E);if(R&&R.has(M))return R.get(M);var F={__proto__:null},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var z in M)if(z!=="default"&&{}.hasOwnProperty.call(M,z)){var ie=$?Object.getOwnPropertyDescriptor(M,z):null;ie&&(ie.get||ie.set)?Object.defineProperty(F,z,ie):F[z]=M[z]}return F.default=M,R&&R.set(M,F),F}function l(M){return M&&M.__esModule?M:{default:M}}function c(M){return p(M)||h(M)||d(M)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d(M,E){if(M){if(typeof M=="string")return g(M,E);var R=Object.prototype.toString.call(M).slice(8,-1);if(R==="Object"&&M.constructor&&(R=M.constructor.name),R==="Map"||R==="Set")return Array.from(M);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return g(M,E)}}function h(M){if(typeof Symbol<"u"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}function p(M){if(Array.isArray(M))return g(M)}function g(M,E){(E==null||E>M.length)&&(E=M.length);for(var R=0,F=new Array(E);R<E;R++)F[R]=M[R];return F}function m(M){var E=M.slice(0,2),R=parseInt(M.slice(2,4),10);R>40?(R-=40,E="20".concat(E)):R>20?(R-=20,E="18".concat(E)):E="19".concat(E),R<10&&(R="0".concat(R));var F="".concat(E,"/").concat(R,"/").concat(M.slice(4,6));if(!(0,s.default)(F,"YYYY/MM/DD"))return!1;for(var $=M.split("").map(function(we){return parseInt(we,10)}),z=[2,4,8,5,10,9,7,3,6],ie=0,me=0;me<z.length;me++)ie+=$[me]*z[me];return ie=ie%11===10?0:ie%11,ie===$[9]}function v(M){var E=M.split(""),R=E.filter(function($,z){return z%2}).map(function($){return Number($)*2}).join("").split(""),F=E.filter(function($,z){return!(z%2)}).concat(R).map(function($){return Number($)}).reduce(function($,z){return $+z});return F%10===0}function b(M){M=M.replace(/\W/,"");var E=parseInt(M.slice(0,2),10);if(M.length===10)E<54?E="20".concat(E):E="19".concat(E);else{if(M.slice(6)==="000")return!1;if(E<54)E="19".concat(E);else return!1}E.length===3&&(E=[E.slice(0,2),"0",E.slice(2)].join(""));var R=parseInt(M.slice(2,4),10);if(R>50&&(R-=50),R>20){if(parseInt(E,10)<2004)return!1;R-=20}R<10&&(R="0".concat(R));var F="".concat(E,"/").concat(R,"/").concat(M.slice(4,6));if(!(0,s.default)(F,"YYYY/MM/DD"))return!1;if(M.length===10&&parseInt(M,10)%11!==0){var $=parseInt(M.slice(0,9),10)%11;if(parseInt(E,10)<1986&&$===10){if(parseInt(M.slice(9),10)!==0)return!1}else return!1}return!0}function y(M){return i.luhnCheck(M)}function S(M){for(var E=M.split("").map(function(we){return parseInt(we,10)}),R=[],F=0;F<E.length-1;F++){R.push("");for(var $=0;$<E.length-1;$++)E[F]===E[$]&&(R[F]+=$)}if(R=R.filter(function(we){return we.length>1}),R.length!==2&&R.length!==3)return!1;if(R[0].length===3){for(var z=R[0].split("").map(function(we){return parseInt(we,10)}),ie=0,me=0;me<z.length-1;me++)z[me]+1===z[me+1]&&(ie+=1);if(ie===2)return!1}return i.iso7064Check(M)}function w(M){M=M.replace(/\W/,"");var E=parseInt(M.slice(4,6),10),R=M.slice(6,7);switch(R){case"0":case"1":case"2":case"3":E="19".concat(E);break;case"4":case"9":E<37?E="20".concat(E):E="19".concat(E);break;default:if(E<37)E="20".concat(E);else if(E>58)E="18".concat(E);else return!1;break}E.length===3&&(E=[E.slice(0,2),"0",E.slice(2)].join(""));var F="".concat(E,"/").concat(M.slice(2,4),"/").concat(M.slice(0,2));if(!(0,s.default)(F,"YYYY/MM/DD"))return!1;for(var $=M.split("").map(function(we){return parseInt(we,10)}),z=0,ie=4,me=0;me<9;me++)z+=$[me]*ie,ie-=1,ie===1&&(ie=7);return z%=11,z===1?!1:z===0?$[9]===0:$[9]===11-z}function C(M){for(var E=M.slice(0,8).split("").map(function(z){return parseInt(z,10)}),R=0,F=1;F<E.length;F+=2)R+=E[F];for(var $=0;$<E.length;$+=2)E[$]<2?R+=1-E[$]:(R+=2*(E[$]-2)+5,E[$]>4&&(R+=2));return String.fromCharCode(R%26+65)===M.charAt(8)}function A(M){for(var E=M.split("").map(function($){return parseInt($,10)}),R=0,F=0;F<8;F++)R+=E[F]*Math.pow(2,8-F);return R%11%10===E[8]}function k(M){var E=i.reverseMultiplyAndSum(M.split("").slice(0,7).map(function(R){return parseInt(R,10)}),8);return M.length===9&&M[8]!=="W"&&(E+=(M[8].charCodeAt(0)-64)*9),E%=23,E===0?M[7].toUpperCase()==="W":M[7].toUpperCase()===String.fromCharCode(64+E)}var I={andover:["10","12"],atlanta:["60","67"],austin:["50","53"],brookhaven:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],cincinnati:["30","32","35","36","37","38","61"],fresno:["15","24"],internet:["20","26","27","45","46","47"],kansas:["40","44"],memphis:["94","95"],ogden:["80","90"],philadelphia:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],sba:["31"]};function D(){var M=[];for(var E in I)I.hasOwnProperty(E)&&M.push.apply(M,c(I[E]));return M}function O(M){return D().indexOf(M.slice(0,2))!==-1}function T(M){for(var E=0,R=M.split(""),F=parseInt(R.pop(),10),$=0;$<R.length;$++)E+=R[9-$]*(2+$%6);var z=11-E%11;return z===11?z=0:z===10&&(z=9),F===z}function N(M){var E=M.toUpperCase().split("");if(isNaN(parseInt(E[0],10))&&E.length>1){var R=0;switch(E[0]){case"Y":R=1;break;case"Z":R=2;break}E.splice(0,1,R)}else for(;E.length<9;)E.unshift(0);var F=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"];E=E.join("");var $=parseInt(E.slice(0,8),10)%23;return E[8]===F[$]}function L(M){var E=M.slice(1,3),R=M.slice(0,1);switch(R){case"1":case"2":E="18".concat(E);break;case"3":case"4":E="19".concat(E);break;default:E="20".concat(E);break}var F="".concat(E,"/").concat(M.slice(3,5),"/").concat(M.slice(5,7));if(!(0,s.default)(F,"YYYY/MM/DD"))return!1;for(var $=M.split("").map(function(Ee){return parseInt(Ee,10)}),z=0,ie=1,me=0;me<10;me++)z+=$[me]*ie,ie+=1,ie===10&&(ie=1);if(z%11===10){z=0,ie=3;for(var we=0;we<10;we++)z+=$[we]*ie,ie+=1,ie===10&&(ie=1);if(z%11===10)return $[10]===0}return z%11===$[10]}function P(M){var E=M.slice(4,6),R=M.slice(6,7);switch(R){case"+":E="18".concat(E);break;case"-":E="19".concat(E);break;default:E="20".concat(E);break}var F="".concat(E,"/").concat(M.slice(2,4),"/").concat(M.slice(0,2));if(!(0,s.default)(F,"YYYY/MM/DD"))return!1;var $=parseInt(M.slice(0,6)+M.slice(7,10),10)%31;if($<10)return $===parseInt(M.slice(10),10);$-=10;var z=["A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"];return z[$]===M.slice(10)}function H(M){if(M.slice(2,4)!=="00"||M.slice(4,6)!=="00"){var E="".concat(M.slice(0,2),"/").concat(M.slice(2,4),"/").concat(M.slice(4,6));if(!(0,s.default)(E,"YY/MM/DD"))return!1}var R=97-parseInt(M.slice(0,9),10)%97,F=parseInt(M.slice(9,11),10);return!(R!==F&&(R=97-parseInt("2".concat(M.slice(0,9)),10)%97,R!==F))}function q(M){M=M.replace(/\s/g,"");var E=parseInt(M.slice(0,10),10)%511,R=parseInt(M.slice(10,13),10);return E===R}function Z(M){var E="".concat(M.slice(0,4),"/").concat(M.slice(4,6),"/").concat(M.slice(6,8));return!(0,s.default)(E,"YYYY/MM/DD")||!i.luhnCheck(M.slice(0,12))?!1:i.verhoeffCheck("".concat(M.slice(0,11)).concat(M[12]))}function ae(M){return i.iso7064Check(M)}function ee(M){for(var E=M.split("").map(function($){return parseInt($,10)}),R=8,F=1;F<9;F++)R+=E[F]*(F+1);return R%11===E[9]}function de(M){for(var E=!1,R=!1,F=0;F<3;F++)if(!E&&/[AEIOU]/.test(M[F]))E=!0;else if(!R&&E&&M[F]==="X")R=!0;else if(F>0&&(E&&!R&&!/[AEIOU]/.test(M[F])||R&&!/X/.test(M[F])))return!1;return!0}function ge(M){var E=M.toUpperCase().split("");if(!de(E.slice(0,3))||!de(E.slice(3,6)))return!1;for(var R=[6,7,9,10,12,13,14],F={L:"0",M:"1",N:"2",P:"3",Q:"4",R:"5",S:"6",T:"7",U:"8",V:"9"},$=0,z=R;$<z.length;$++){var ie=z[$];E[ie]in F&&E.splice(ie,1,F[E[ie]])}var me={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"},we=me[E[8]],Ee=parseInt(E[9]+E[10],10);Ee>40&&(Ee-=40),Ee<10&&(Ee="0".concat(Ee));var Vt="".concat(E[6]).concat(E[7],"/").concat(we,"/").concat(Ee);if(!(0,s.default)(Vt,"YY/MM/DD"))return!1;for(var Nt=0,Qt=1;Qt<E.length-1;Qt+=2){var Ut=parseInt(E[Qt],10);isNaN(Ut)&&(Ut=E[Qt].charCodeAt(0)-65),Nt+=Ut}for(var or={A:1,B:0,C:5,D:7,E:9,F:13,G:15,H:17,I:19,J:21,K:2,L:4,M:18,N:20,O:11,P:3,Q:6,R:8,S:12,T:14,U:16,V:10,W:22,X:25,Y:24,Z:23,0:1,1:0},Jn=0;Jn<E.length-1;Jn+=2){var ar=0;if(E[Jn]in or)ar=or[E[Jn]];else{var lr=parseInt(E[Jn],10);ar=2*lr+1,lr>4&&(ar+=2)}Nt+=ar}return String.fromCharCode(65+Nt%26)===E[15]}function K(M){M=M.replace(/\W/,"");var E=M.slice(0,2);if(E!=="32"){var R=M.slice(2,4);if(R!=="00"){var F=M.slice(4,6);switch(M[6]){case"0":F="18".concat(F);break;case"1":F="19".concat(F);break;default:F="20".concat(F);break}var $="".concat(F,"/").concat(M.slice(2,4),"/").concat(E);if(!(0,s.default)($,"YYYY/MM/DD"))return!1}for(var z=1101,ie=[1,6,3,7,9,10,5,8,4,2],me=0;me<M.length-1;me++)z-=parseInt(M[me],10)*ie[me];return parseInt(M[10],10)===z%11}return!0}function fe(M){if(M.length!==9){for(var E=M.toUpperCase().split("");E.length<8;)E.unshift(0);switch(M[7]){case"A":case"P":if(parseInt(E[6],10)===0)return!1;break;default:{var R=parseInt(E.join("").slice(0,5),10);if(R>32e3)return!1;var F=parseInt(E.join("").slice(5,7),10);if(R===F)return!1}}}return!0}function re(M){return i.reverseMultiplyAndSum(M.split("").slice(0,8).map(function(E){return parseInt(E,10)}),9)%11===parseInt(M[8],10)}function ue(M){if(M.length===10){for(var E=[6,5,7,2,3,4,5,6,7],R=0,F=0;F<E.length;F++)R+=parseInt(M[F],10)*E[F];return R%=11,R===10?!1:R===parseInt(M[9],10)}var $=M.slice(0,2),z=parseInt(M.slice(2,4),10);z>80?($="18".concat($),z-=80):z>60?($="22".concat($),z-=60):z>40?($="21".concat($),z-=40):z>20?($="20".concat($),z-=20):$="19".concat($),z<10&&(z="0".concat(z));var ie="".concat($,"/").concat(z,"/").concat(M.slice(4,6));if(!(0,s.default)(ie,"YYYY/MM/DD"))return!1;for(var me=0,we=1,Ee=0;Ee<M.length-1;Ee++)me+=parseInt(M[Ee],10)*we%10,we+=2,we>10?we=1:we===5&&(we+=2);return me=10-me%10,me===parseInt(M[10],10)}function Q(M){if(M.length===11){var E,R;if(E=0,M==="11111111111"||M==="22222222222"||M==="33333333333"||M==="44444444444"||M==="55555555555"||M==="66666666666"||M==="77777777777"||M==="88888888888"||M==="99999999999"||M==="00000000000")return!1;for(var F=1;F<=9;F++)E+=parseInt(M.substring(F-1,F),10)*(11-F);if(R=E*10%11,R===10&&(R=0),R!==parseInt(M.substring(9,10),10))return!1;E=0;for(var $=1;$<=10;$++)E+=parseInt(M.substring($-1,$),10)*(12-$);return R=E*10%11,R===10&&(R=0),R===parseInt(M.substring(10,11),10)}if(M==="00000000000000"||M==="11111111111111"||M==="22222222222222"||M==="33333333333333"||M==="44444444444444"||M==="55555555555555"||M==="66666666666666"||M==="77777777777777"||M==="88888888888888"||M==="99999999999999")return!1;for(var z=M.length-2,ie=M.substring(0,z),me=M.substring(z),we=0,Ee=z-7,Vt=z;Vt>=1;Vt--)we+=ie.charAt(z-Vt)*Ee,Ee-=1,Ee<2&&(Ee=9);var Nt=we%11<2?0:11-we%11;if(Nt!==parseInt(me.charAt(0),10))return!1;z+=1,ie=M.substring(0,z),we=0,Ee=z-7;for(var Qt=z;Qt>=1;Qt--)we+=ie.charAt(z-Qt)*Ee,Ee-=1,Ee<2&&(Ee=9);return Nt=we%11<2?0:11-we%11,Nt===parseInt(me.charAt(1),10)}function ce(M){var E=11-i.reverseMultiplyAndSum(M.split("").slice(0,8).map(function(R){return parseInt(R,10)}),9)%11;return E>9?parseInt(M[8],10)===0:E===parseInt(M[8],10)}function Ae(M){if(M.slice(0,4)!=="9000"){var E=M.slice(1,3);switch(M[0]){case"1":case"2":E="19".concat(E);break;case"3":case"4":E="18".concat(E);break;case"5":case"6":E="20".concat(E);break}var R="".concat(E,"/").concat(M.slice(3,5),"/").concat(M.slice(5,7));if(R.length===8){if(!(0,s.default)(R,"YY/MM/DD"))return!1}else if(!(0,s.default)(R,"YYYY/MM/DD"))return!1;for(var F=M.split("").map(function(me){return parseInt(me,10)}),$=[2,7,9,1,4,6,3,5,8,2,7,9],z=0,ie=0;ie<$.length;ie++)z+=F[ie]*$[ie];return z%11===10?F[12]===1:F[12]===z%11}return!0}function Be(M){if(M.length===9){if(M=M.replace(/\W/,""),M.slice(6)==="000")return!1;var E=parseInt(M.slice(0,2),10);if(E>53)return!1;E<10?E="190".concat(E):E="19".concat(E);var R=parseInt(M.slice(2,4),10);R>50&&(R-=50),R<10&&(R="0".concat(R));var F="".concat(E,"/").concat(R,"/").concat(M.slice(4,6));if(!(0,s.default)(F,"YYYY/MM/DD"))return!1}return!0}function he(M){var E=11-i.reverseMultiplyAndSum(M.split("").slice(0,7).map(function(R){return parseInt(R,10)}),8)%11;return E===10?parseInt(M[7],10)===0:E===parseInt(M[7],10)}function Je(M){var E=M.slice(0);M.length>11&&(E=E.slice(2));var R="",F=E.slice(2,4),$=parseInt(E.slice(4,6),10);if(M.length>11)R=M.slice(0,4);else if(R=M.slice(0,2),M.length===11&&$<60){var z=new Date().getFullYear().toString(),ie=parseInt(z.slice(0,2),10);if(z=parseInt(z,10),M[6]==="-")parseInt("".concat(ie).concat(R),10)>z?R="".concat(ie-1).concat(R):R="".concat(ie).concat(R);else if(R="".concat(ie-1).concat(R),z-parseInt(R,10)<100)return!1}$>60&&($-=60),$<10&&($="0".concat($));var me="".concat(R,"/").concat(F,"/").concat($);if(me.length===8){if(!(0,s.default)(me,"YY/MM/DD"))return!1}else if(!(0,s.default)(me,"YYYY/MM/DD"))return!1;return i.luhnCheck(M.replace(/\W/,""))}function Me(M){for(var E=M.split("").map(function(z){return parseInt(z,10)}),R=[-1,5,7,9,4,6,10,5,7],F=0,$=0;$<R.length;$++)F+=E[$]*R[$];return F%11===10?E[9]===0:E[9]===F%11}var Ie={"bg-BG":/^\d{10}$/,"cs-CZ":/^\d{6}\/{0,1}\d{3,4}$/,"de-AT":/^\d{9}$/,"de-DE":/^[1-9]\d{10}$/,"dk-DK":/^\d{6}-{0,1}\d{4}$/,"el-CY":/^[09]\d{7}[A-Z]$/,"el-GR":/^([0-4]|[7-9])\d{8}$/,"en-CA":/^\d{9}$/,"en-GB":/^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,"en-IE":/^\d{7}[A-W][A-IW]{0,1}$/i,"en-US":/^\d{2}[- ]{0,1}\d{7}$/,"es-AR":/(20|23|24|27|30|33|34)[0-9]{8}[0-9]/,"es-ES":/^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,"et-EE":/^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,"fi-FI":/^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,"fr-BE":/^\d{11}$/,"fr-FR":/^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,"fr-LU":/^\d{13}$/,"hr-HR":/^\d{11}$/,"hu-HU":/^8\d{9}$/,"it-IT":/^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,"lv-LV":/^\d{6}-{0,1}\d{5}$/,"mt-MT":/^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,"nl-NL":/^\d{9}$/,"pl-PL":/^\d{10,11}$/,"pt-BR":/(?:^\d{11}$)|(?:^\d{14}$)/,"pt-PT":/^\d{9}$/,"ro-RO":/^\d{13}$/,"sk-SK":/^\d{6}\/{0,1}\d{3,4}$/,"sl-SI":/^[1-9]\d{7}$/,"sv-SE":/^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/,"uk-UA":/^\d{10}$/};Ie["lb-LU"]=Ie["fr-LU"],Ie["lt-LT"]=Ie["et-EE"],Ie["nl-BE"]=Ie["fr-BE"],Ie["fr-CA"]=Ie["en-CA"];var _e={"bg-BG":m,"cs-CZ":b,"de-AT":y,"de-DE":S,"dk-DK":w,"el-CY":C,"el-GR":A,"en-CA":v,"en-IE":k,"en-US":O,"es-AR":T,"es-ES":N,"et-EE":L,"fi-FI":P,"fr-BE":H,"fr-FR":q,"fr-LU":Z,"hr-HR":ae,"hu-HU":ee,"it-IT":ge,"lv-LV":K,"mt-MT":fe,"nl-NL":re,"pl-PL":ue,"pt-BR":Q,"pt-PT":ce,"ro-RO":Ae,"sk-SK":Be,"sl-SI":he,"sv-SE":Je,"uk-UA":Me};_e["lb-LU"]=_e["fr-LU"],_e["lt-LT"]=_e["et-EE"],_e["nl-BE"]=_e["fr-BE"],_e["fr-CA"]=_e["en-CA"];var xt=/[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g,Tt={"de-AT":xt,"de-DE":/[\/\\]/g,"fr-BE":xt};Tt["nl-BE"]=Tt["fr-BE"];function sr(M){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US";(0,r.default)(M);var R=M.slice(0);if(E in Ie)return E in Tt&&(R=R.replace(Tt[E],"")),Ie[E].test(R)?E in _e?_e[E](R):!0:!1;throw new Error("Invalid locale '".concat(E,"'"))}n.exports=e.default,n.exports.default=e.default})(dl,dl.exports)),dl.exports}var mi={},pv;function H4(){if(pv)return mi;pv=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.default=r,mi.locales=void 0;var n=e(U());function e(i){return i&&i.__esModule?i:{default:i}}var t={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?(9[1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|6)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+?7\s?\+?7|0)\s?\d{2}\s?\d{3}\s?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+244)\d{9}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/};t["en-CA"]=t["en-US"],t["fr-CA"]=t["en-CA"],t["fr-BE"]=t["nl-BE"],t["zh-HK"]=t["en-HK"],t["zh-MO"]=t["en-MO"],t["ga-IE"]=t["en-IE"],t["fr-CH"]=t["de-CH"],t["it-CH"]=t["fr-CH"];function r(i,s,o){if((0,n.default)(i),o&&o.strictMode&&!i.startsWith("+"))return!1;if(Array.isArray(s))return s.some(function(c){if(t.hasOwnProperty(c)){var u=t[c];if(u.test(i))return!0}return!1});if(s in t)return t[s].test(i);if(!s||s==="any"){for(var a in t)if(t.hasOwnProperty(a)){var l=t[a];if(l.test(i))return!0}return!1}throw new Error("Invalid locale '".concat(s,"'"))}return mi.locales=Object.keys(t),mi}var fl={exports:{}},mv;function V4(){return mv||(mv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^(0x)[0-9a-f]{40}$/i;function s(o){return(0,t.default)(o),i.test(o)}n.exports=e.default,n.exports.default=e.default})(fl,fl.exports)),fl.exports}var hl={exports:{}},gv;function U4(){return gv||(gv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(Ht()),r=i(U());function i(l){return l&&l.__esModule?l:{default:l}}function s(l){var c="\\d{".concat(l.digits_after_decimal[0],"}");l.digits_after_decimal.forEach(function(y,S){S!==0&&(c="".concat(c,"|\\d{").concat(y,"}"))});var u="(".concat(l.symbol.replace(/\W/,function(y){return"\\".concat(y)}),")").concat(l.require_symbol?"":"?"),d="-?",h="[1-9]\\d*",p="[1-9]\\d{0,2}(\\".concat(l.thousands_separator,"\\d{3})*"),g=["0",h,p],m="(".concat(g.join("|"),")?"),v="(\\".concat(l.decimal_separator,"(").concat(c,"))").concat(l.require_decimal?"":"?"),b=m+(l.allow_decimal||l.require_decimal?v:"");return l.allow_negatives&&!l.parens_for_negatives&&(l.negative_sign_after_digits?b+=d:l.negative_sign_before_digits&&(b=d+b)),l.allow_negative_sign_placeholder?b="( (?!\\-))?".concat(b):l.allow_space_after_symbol?b=" ?".concat(b):l.allow_space_after_digits&&(b+="( (?!$))?"),l.symbol_after_digits?b+=u:b=u+b,l.allow_negatives&&(l.parens_for_negatives?b="(\\(".concat(b,"\\)|").concat(b,")"):l.negative_sign_before_digits||l.negative_sign_after_digits||(b=d+b)),new RegExp("^(?!-? )(?=.*\\d)".concat(b,"$"))}var o={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};function a(l,c){return(0,r.default)(l),c=(0,t.default)(c,o),s(c).test(l)}n.exports=e.default,n.exports.default=e.default})(hl,hl.exports)),hl.exports}var pl={exports:{}},vv;function z4(){return vv||(vv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=r(U());function r(a){return a&&a.__esModule?a:{default:a}}var i=/^(bc1)[a-z0-9]{25,39}$/,s=/^(1|3)[A-HJ-NP-Za-km-z1-9]{25,39}$/;function o(a){return(0,t.default)(a),i.test(a)||s.test(a)}n.exports=e.default,n.exports.default=e.default})(pl,pl.exports)),pl.exports}var gi={},bv;function W4(){if(bv)return gi;bv=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.isFreightContainerID=void 0,gi.isISO6346=i;var n=e(U());function e(s){return s&&s.__esModule?s:{default:s}}var t=/^[A-Z]{3}(U[0-9]{7})|([J,Z][0-9]{6,7})$/,r=/^[0-9]$/;function i(s){if((0,n.default)(s),s=s.toUpperCase(),!t.test(s))return!1;if(s.length===11){for(var o=0,a=0;a<s.length-1;a++)if(r.test(s[a]))o+=s[a]*Math.pow(2,a);else{var l=void 0,c=s.charCodeAt(a)-55;c<11?l=c:c>=11&&c<=20?l=12+c%11:c>=21&&c<=30?l=23+c%21:l=34+c%31,o+=l*Math.pow(2,a)}var u=o%11;return Number(s[s.length-1])===u}return!0}return gi.isFreightContainerID=i,gi}var ml={exports:{}},xv;function q4(){return xv||(xv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=new Set(["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]);function s(o){return(0,t.default)(o),i.has(o)}n.exports=e.default,n.exports.default=e.default})(ml,ml.exports)),ml.exports}var gl={exports:{}},yv;function G4(){return yv||(yv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=r(U());function r(l){return l&&l.__esModule?l:{default:l}}var i=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,s=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,o=function(c){var u=c.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(u){var d=Number(u[1]),h=Number(u[2]);return d%4===0&&d%100!==0||d%400===0?h<=366:h<=365}var p=c.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),g=p[1],m=p[2],v=p[3],b=m&&"0".concat(m).slice(-2),y=v&&"0".concat(v).slice(-2),S=new Date("".concat(g,"-").concat(b||"01","-").concat(y||"01"));return m&&v?S.getUTCFullYear()===g&&S.getUTCMonth()+1===m&&S.getUTCDate()===v:!0};function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(l);var u=c.strictSeparator?s.test(l):i.test(l);return u&&c.strict?o(l):u}n.exports=e.default,n.exports.default=e.default})(gl,gl.exports)),gl.exports}var vl={exports:{}},wv;function K4(){return wv||(wv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=b;var t=r(U());function r(y){return y&&y.__esModule?y:{default:y}}var i=/[0-9]{4}/,s=/(0[1-9]|1[0-2])/,o=/([12]\d|0[1-9]|3[01])/,a=/([01][0-9]|2[0-3])/,l=/[0-5][0-9]/,c=/([0-5][0-9]|60)/,u=/(\.[0-9]+)?/,d=new RegExp("[-+]".concat(a.source,":").concat(l.source)),h=new RegExp("([zZ]|".concat(d.source,")")),p=new RegExp("".concat(a.source,":").concat(l.source,":").concat(c.source).concat(u.source)),g=new RegExp("".concat(i.source,"-").concat(s.source,"-").concat(o.source)),m=new RegExp("".concat(p.source).concat(h.source)),v=new RegExp("^".concat(g.source,"[ tT]").concat(m.source,"$"));function b(y){return(0,t.default)(y),v.test(y)}n.exports=e.default,n.exports.default=e.default})(vl,vl.exports)),vl.exports}var bl={exports:{}},Sv;function Z4(){return Sv||(Sv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=new Set(["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"]);function s(o){return(0,t.default)(o),i.has(o.toUpperCase())}n.exports=e.default,n.exports.default=e.default})(bl,bl.exports)),bl.exports}var vi={},Cv;function Y4(){if(Cv)return vi;Cv=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.CurrencyCodes=void 0,vi.default=r;var n=e(U());function e(i){return i&&i.__esModule?i:{default:i}}var t=new Set(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLE","SLL","SOS","SRD","SSP","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UYW","UZS","VES","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]);function r(i){return(0,n.default)(i),t.has(i.toUpperCase())}return vi.CurrencyCodes=t,vi}var xl={exports:{}},kv;function J4(){return kv||(kv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var t=i(U()),r=i(Ht());function i(c){return c&&c.__esModule?c:{default:c}}var s=/^[A-Z2-7]+=*$/,o=/^[A-HJKMNP-TV-Z0-9]+$/,a={crockford:!1};function l(c,u){if((0,t.default)(c),u=(0,r.default)(u,a),u.crockford)return o.test(c);var d=c.length;return!!(d%8===0&&s.test(c))}n.exports=e.default,n.exports.default=e.default})(xl,xl.exports)),xl.exports}var yl={exports:{}},Av;function X4(){return Av||(Av=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^[A-HJ-NP-Za-km-z1-9]*$/;function s(o){return(0,t.default)(o),!!i.test(o)}n.exports=e.default,n.exports.default=e.default})(yl,yl.exports)),yl.exports}var wl={exports:{}},Mv;function Q4(){return Mv||(Mv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=r(U());function r(l){return l&&l.__esModule?l:{default:l}}var i=/^[a-z]+\/[a-z0-9\-\+\._]+$/i,s=/^[a-z\-]+=[a-z0-9\-]+$/i,o=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;function a(l){(0,t.default)(l);var c=l.split(",");if(c.length<2)return!1;var u=c.shift().trim().split(";"),d=u.shift();if(d.slice(0,5)!=="data:")return!1;var h=d.slice(5);if(h!==""&&!i.test(h))return!1;for(var p=0;p<u.length;p++)if(!(p===u.length-1&&u[p].toLowerCase()==="base64")&&!s.test(u[p]))return!1;for(var g=0;g<c.length;g++)if(!o.test(c[g]))return!1;return!0}n.exports=e.default,n.exports.default=e.default})(wl,wl.exports)),wl.exports}var Sl={exports:{}},Iv;function ej(){return Iv||(Iv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/(?:^magnet:\?|[^?&]&)xt(?:\.1)?=urn:(?:(?:aich|bitprint|btih|ed2k|ed2khash|kzhash|md5|sha1|tree:tiger):[a-z0-9]{32}(?:[a-z0-9]{8})?|btmh:1220[a-z0-9]{64})(?:$|&)/i;function s(o){return(0,t.default)(o),o.indexOf("magnet:?")!==0?!1:i.test(o)}n.exports=e.default,n.exports.default=e.default})(Sl,Sl.exports)),Sl.exports}var Cl={exports:{}},kl={exports:{}},Al={exports:{}},Ev;function NS(){return Ev||(Ev=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s,o){if((0,t.default)(s),o){var a=new RegExp("[".concat(o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+$"),"g");return s.replace(a,"")}for(var l=s.length-1;/\s/.test(s.charAt(l));)l-=1;return s.slice(0,l+1)}n.exports=e.default,n.exports.default=e.default})(Al,Al.exports)),Al.exports}var Ml={exports:{}},Dv;function PS(){return Dv||(Dv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s,o){(0,t.default)(s);var a=o?new RegExp("^[".concat(o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+"),"g"):/^\s+/g;return s.replace(a,"")}n.exports=e.default,n.exports.default=e.default})(Ml,Ml.exports)),Ml.exports}var Rv;function LS(){return Rv||(Rv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(NS()),r=i(PS());function i(o){return o&&o.__esModule?o:{default:o}}function s(o,a){return(0,t.default)((0,r.default)(o,a),a)}n.exports=e.default,n.exports.default=e.default})(kl,kl.exports)),kl.exports}var Ov;function tj(){return Ov||(Ov=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=g;var t=s(LS()),r=s(kS()),i=s(U());function s(m){return m&&m.__esModule?m:{default:m}}function o(m,v){return c(m)||l(m,v)||d(m,v)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(m,v){var b=m==null?null:typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(b!=null){var y,S,w,C,A=[],k=!0,I=!1;try{if(w=(b=b.call(m)).next,v!==0)for(;!(k=(y=w.call(b)).done)&&(A.push(y.value),A.length!==v);k=!0);}catch(D){I=!0,S=D}finally{try{if(!k&&b.return!=null&&(C=b.return(),Object(C)!==C))return}finally{if(I)throw S}}return A}}function c(m){if(Array.isArray(m))return m}function u(m,v){var b=typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(!b){if(Array.isArray(m)||(b=d(m))||v){b&&(m=b);var y=0,S=function(){};return{s:S,n:function(){return y>=m.length?{done:!0}:{done:!1,value:m[y++]}},e:function(I){throw I},f:S}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=!0,C=!1,A;return{s:function(){b=b.call(m)},n:function(){var I=b.next();return w=I.done,I},e:function(I){C=!0,A=I},f:function(){try{!w&&b.return!=null&&b.return()}finally{if(C)throw A}}}}function d(m,v){if(m){if(typeof m=="string")return h(m,v);var b=Object.prototype.toString.call(m).slice(8,-1);if(b==="Object"&&m.constructor&&(b=m.constructor.name),b==="Map"||b==="Set")return Array.from(m);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return h(m,v)}}function h(m,v){(v==null||v>m.length)&&(v=m.length);for(var b=0,y=new Array(v);b<v;b++)y[b]=m[b];return y}function p(m){var v=new Set(["subject","body","cc","bcc"]),b={cc:"",bcc:""},y=!1,S=m.split("&");if(S.length>4)return!1;var w=u(S),C;try{for(w.s();!(C=w.n()).done;){var A=C.value,k=A.split("="),I=o(k,2),D=I[0],O=I[1];if(D&&!v.has(D)){y=!0;break}O&&(D==="cc"||D==="bcc")&&(b[D]=O),D&&v.delete(D)}}catch(T){w.e(T)}finally{w.f()}return y?!1:b}function g(m,v){if((0,i.default)(m),m.indexOf("mailto:")!==0)return!1;var b=m.replace("mailto:","").split("?"),y=o(b,2),S=y[0],w=y[1],C=w===void 0?"":w;if(!S&&!C)return!0;var A=p(C);return A?"".concat(S,",").concat(A.cc,",").concat(A.bcc).split(",").every(function(k){return k=(0,t.default)(k," "),k?(0,r.default)(k,v):!0}):!1}n.exports=e.default,n.exports.default=e.default})(Cl,Cl.exports)),Cl.exports}var Il={exports:{}},Tv;function nj(){return Tv||(Tv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=r(U());function r(l){return l&&l.__esModule?l:{default:l}}var i=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+_]{1,100}$/i,s=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,o=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;function a(l){return(0,t.default)(l),i.test(l)||s.test(l)||o.test(l)}n.exports=e.default,n.exports.default=e.default})(Il,Il.exports)),Il.exports}var El={exports:{}},Nv;function rj(){return Nv||(Nv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var t=i(U()),r=i(Ht());function i(d){return d&&d.__esModule?d:{default:d}}var s=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,o=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,a=/^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i,l=/^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i,c={checkDMS:!1};function u(d,h){if((0,t.default)(d),h=(0,r.default)(h,c),!d.includes(","))return!1;var p=d.split(",");return p[0].startsWith("(")&&!p[1].endsWith(")")||p[1].endsWith(")")&&!p[0].startsWith("(")?!1:h.checkDMS?a.test(p[0])&&l.test(p[1]):s.test(p[0])&&o.test(p[1])}n.exports=e.default,n.exports.default=e.default})(El,El.exports)),El.exports}var bi={},Pv;function ij(){if(Pv)return bi;Pv=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.default=a,bi.locales=void 0;var n=e(U());function e(l){return l&&l.__esModule?l:{default:l}}var t=/^\d{3}$/,r=/^\d{4}$/,i=/^\d{5}$/,s=/^\d{6}$/,o={AD:/^AD\d{3}$/,AT:r,AU:r,AZ:/^AZ\d{4}$/,BA:/^([7-8]\d{4}$)/,BE:r,BG:r,BR:/^\d{5}-\d{3}$/,BY:/^2[1-4]\d{4}$/,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:r,CN:/^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,CZ:/^\d{3}\s?\d{2}$/,DE:i,DK:r,DO:i,DZ:i,EE:i,ES:/^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,FI:i,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HT:/^HT\d{4}$/,HU:r,ID:i,IE:/^(?!.*(?:o))[A-Za-z]\d[\dw]\s\w{4}$/i,IL:/^(\d{5}|\d{7})$/,IN:/^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,IR:/^(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}$/,IS:t,IT:i,JP:/^\d{3}\-\d{4}$/,KE:i,KR:/^(\d{5}|\d{6})$/,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:r,LV:/^LV\-\d{4}$/,LK:i,MG:t,MX:i,MT:/^[A-Za-z]{3}\s{0,1}\d{4}$/,MY:i,NL:/^[1-9]\d{3}\s?(?!sa|sd|ss)[a-z]{2}$/i,NO:r,NP:/^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,NZ:r,PL:/^\d{2}\-\d{3}$/,PR:/^00[679]\d{2}([ -]\d{4})?$/,PT:/^\d{4}\-\d{3}?$/,RO:s,RU:s,SA:i,SE:/^[1-9]\d{2}\s?\d{2}$/,SG:s,SI:r,SK:/^\d{3}\s?\d{2}$/,TH:i,TN:r,TW:/^\d{3}(\d{2})?$/,UA:i,US:/^\d{5}(-\d{4})?$/,ZA:r,ZM:i};bi.locales=Object.keys(o);function a(l,c){if((0,n.default)(l),c in o)return o[c].test(l);if(c==="any"){for(var u in o)if(o.hasOwnProperty(u)){var d=o[u];if(d.test(l))return!0}return!1}throw new Error("Invalid locale '".concat(c,"'"))}return bi}var Dl={exports:{}},Lv;function sj(){return Lv||(Lv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")}n.exports=e.default,n.exports.default=e.default})(Dl,Dl.exports)),Dl.exports}var Rl={exports:{}},_v;function oj(){return _v||(_v=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),s.replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`").replace(/&amp;/g,"&")}n.exports=e.default,n.exports.default=e.default})(Rl,Rl.exports)),Rl.exports}var Ol={exports:{}},Tl={exports:{}},jv;function _S(){return jv||(jv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s,o){return(0,t.default)(s),s.replace(new RegExp("[".concat(o,"]+"),"g"),"")}n.exports=e.default,n.exports.default=e.default})(Tl,Tl.exports)),Tl.exports}var Bv;function aj(){return Bv||(Bv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(U()),r=i(_S());function i(o){return o&&o.__esModule?o:{default:o}}function s(o,a){(0,t.default)(o);var l=a?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,r.default)(o,l)}n.exports=e.default,n.exports.default=e.default})(Ol,Ol.exports)),Ol.exports}var Nl={exports:{}},$v;function lj(){return $v||($v=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s,o){return(0,t.default)(s),s.replace(new RegExp("[^".concat(o,"]+"),"g"),"")}n.exports=e.default,n.exports.default=e.default})(Nl,Nl.exports)),Nl.exports}var Pl={exports:{}},Fv;function cj(){return Fv||(Fv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(U());function r(s){return s&&s.__esModule?s:{default:s}}function i(s,o){(0,t.default)(s);for(var a=s.length-1;a>=0;a--)if(o.indexOf(s[a])===-1)return!1;return!0}n.exports=e.default,n.exports.default=e.default})(Pl,Pl.exports)),Pl.exports}var Ll={exports:{}},Hv;function uj(){return Hv||(Hv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var t=r(Ht());function r(d){return d&&d.__esModule?d:{default:d}}var i={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},s=["icloud.com","me.com"],o=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],a=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],l=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function c(d){return d.length>1?d:""}function u(d,h){h=(0,t.default)(h,i);var p=d.split("@"),g=p.pop(),m=p.join("@"),v=[m,g];if(v[1]=v[1].toLowerCase(),v[1]==="gmail.com"||v[1]==="googlemail.com"){if(h.gmail_remove_subaddress&&(v[0]=v[0].split("+")[0]),h.gmail_remove_dots&&(v[0]=v[0].replace(/\.+/g,c)),!v[0].length)return!1;(h.all_lowercase||h.gmail_lowercase)&&(v[0]=v[0].toLowerCase()),v[1]=h.gmail_convert_googlemaildotcom?"gmail.com":v[1]}else if(s.indexOf(v[1])>=0){if(h.icloud_remove_subaddress&&(v[0]=v[0].split("+")[0]),!v[0].length)return!1;(h.all_lowercase||h.icloud_lowercase)&&(v[0]=v[0].toLowerCase())}else if(o.indexOf(v[1])>=0){if(h.outlookdotcom_remove_subaddress&&(v[0]=v[0].split("+")[0]),!v[0].length)return!1;(h.all_lowercase||h.outlookdotcom_lowercase)&&(v[0]=v[0].toLowerCase())}else if(a.indexOf(v[1])>=0){if(h.yahoo_remove_subaddress){var b=v[0].split("-");v[0]=b.length>1?b.slice(0,-1).join("-"):b[0]}if(!v[0].length)return!1;(h.all_lowercase||h.yahoo_lowercase)&&(v[0]=v[0].toLowerCase())}else l.indexOf(v[1])>=0?((h.all_lowercase||h.yandex_lowercase)&&(v[0]=v[0].toLowerCase()),v[1]="yandex.ru"):h.all_lowercase&&(v[0]=v[0].toLowerCase());return v.join("@")}n.exports=e.default,n.exports.default=e.default})(Ll,Ll.exports)),Ll.exports}var _l={exports:{}},Vv;function dj(){return Vv||(Vv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i=/^[^\s-_](?!.*?[-_]{2,})[a-z0-9-\\][^\s]*[^-_\s]$/;function s(o){return(0,t.default)(o),i.test(o)}n.exports=e.default,n.exports.default=e.default})(_l,_l.exports)),_l.exports}var jl={exports:{}},Uv;function fj(){return Uv||(Uv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(U());function r(o){return o&&o.__esModule?o:{default:o}}var i={"cs-CZ":function(a){return/^(([ABCDEFHIJKLMNPRSTUVXYZ]|[0-9])-?){5,8}$/.test(a)},"de-DE":function(a){return/^((A|AA|AB|AC|AE|AH|AK|AM|AN|A|AP|AS|AT|AU|AW|AZ|B|BA|BB|BC|BE|BF|BH|BI|BK|BL|BM|BN|BO|B|BS|BT|BZ|C|CA|CB|CE|CO|CR|CW|D|DA|DD|DE|DH|DI|DL|DM|DN|DO|DU|DW|DZ|E|EA|EB|ED|EE|EF|EG|EH|EI|EL|EM|EN|ER|ES|EU|EW|F|FB|FD|FF|FG|FI|FL|FN|FO|FR|FS|FT|F|FW|FZ|G|GA|GC|GD|GE|GF|GG|GI|GK|GL|GM|GN|G|GP|GR|GS|GT|G|GV|GW|GZ|H|HA|HB|HC|HD|HE|HF|HG|HH|HI|HK|HL|HM|HN|HO|HP|HR|HS|HU|HV|HX|HY|HZ|IK|IL|IN|IZ|J|JE|JL|K|KA|KB|KC|KE|KF|KG|KH|KI|KK|KL|KM|KN|KO|KR|KS|KT|KU|KW|KY|L|LA|LB|LC|LD|LF|LG|LH|LI|LL|LM|LN|L|LP|LR|LU|M|MA|MB|MC|MD|ME|MG|MH|MI|MK|ML|MM|MN|MO|MQ|MR|MS|M|MW|MY|MZ|N|NB|ND|NE|NF|NH|NI|NK|NM|N|NP|NR|NT|NU|NW|NY|NZ|OA|OB|OC|OD|OE|OF|OG|OH|OK|OL|OP|OS|OZ|P|PA|PB|PE|PF|PI|PL|PM|PN|PR|PS|PW|PZ|R|RA|RC|RD|RE|RG|RH|RI|RL|RM|RN|RO|RP|RS|RT|RU|RV|RW|RZ|S|SB|SC|SE|SG|SI|SK|SL|SM|SN|SO|SP|SR|ST|SU|SW|SY|SZ|TE|TF|TG|TO|TP|TR|TS|TT|T|B|UE|UH|UL|UM|UN|V|VB|VG|VK|VR|VS|W|WA|WB|WE|WF|WI|WK|WL|WM|WN|WO|WR|WS|WT|W|WW|WZ|Z|ZE|ZI|ZP|ZR|ZW|ZZ)[- ]?[A-Z]{1,2}[- ]?\d{1,4}|(ABG|ABI|AIB|AIC|ALF|ALZ|ANA|ANG|ANK|APD|ARN|ART|ASL|ASZ|AUR|AZE|BAD|BAR|BBG|BCH|BED|BER|BGD|BGL|BID|BIN|BIR|BIT|BIW|BKS|BLB|BLK|BNA|BOG|BOH|BOR|BOT|BRA|BRB|BRG|BRK|BRL|BRV|BSB|BSK|BTF|BD|BUL|BR|BS|BZ|CAS|CHA|CLP|CLZ|COC|COE|CUX|DAH|DAN|DAU|DBR|DEG|DEL|DGF|DIL|DIN|DIZ|DKB|DLG|DON|DUD|DW|EBE|EBN|EBS|ECK|EIC|EIL|EIN|EIS|EMD|EMS|ERB|ERH|ERK|ERZ|ESB|ESW|FDB|FDS|FEU|FFB|FKB|FL|FOR|FRG|FRI|FRW|FTL|FS|GAN|GAP|GDB|GEL|GEO|GER|GHA|GHC|GLA|GMN|GNT|GOA|GOH|GRA|GRH|GRI|GRM|GRZ|GTH|GUB|GUN|GVM|HAB|HAL|HAM|HAS|HBN|HBS|HCH|HDH|HDL|HEB|HEF|HEI|HER|HET|HGN|HGW|HHM|HIG|HIP|HM|HOG|HOH|HOL|HOM|HOR|HS|HOT|HRO|HSK|HST|HVL|HWI|IGB|ILL|JL|KEH|KEL|KEM|KIB|KLE|KLZ|KN|KT|KZ|KRU|KN|KUS|KYF|LAN|LAU|LBS|LBZ|LDK|LDS|LEO|LER|LEV|LIB|LIF|LIP|LB|LOS|LRO|LSZ|LN|LUP|LWL|MAB|MAI|MAK|MAL|MED|MEG|MEI|MEK|MEL|MER|MET|MGH|MGN|MHL|MIL|MKK|MOD|MOL|MON|MOS|MSE|MSH|MSP|MST|MTK|MTL|MB|MR|MYK|MZG|NAB|NAI|NAU|NDH|NEA|NEB|NEC|NEN|NES|NEW|NMB|NMS|NOH|NOL|NOM|NOR|NVP|NWM|OAL|OBB|OBG|OCH|OHA|HR|OHV|OHZ|OPR|OSL|OVI|OVL|OVP|PAF|PAN|PAR|PCH|PEG|PIR|PL|PR|QFT|QLB|RDG|REG|REH|REI|RID|RIE|ROD|ROF|ROK|ROL|ROS|ROT|ROW|RSL|RD|RG|SAB|SAD|SAN|SAW|SBG|SBK|SCZ|SDH|SDL|SDT|SEB|SEE|SEF|SEL|SFB|SFT|SGH|SHA|SHG|SHK|SHL|SIG|SIM|SLE|SLF|SLK|SLN|SLS|SL|SLZ|SM|SOB|SOG|SOK|SM|SON|SPB|SPN|SRB|SRO|STA|STB|STD|STE|STL|SUL|SW|SWA|SZB|TBB|TDO|TET|TIR|TL|TUT|UEM|UER|UFF|USI|VAI|VEC|VER|VIB|VIE|VIT|VOH|WAF|WAK|WAN|WAR|WAT|WBS|WDA|WEL|WEN|WER|WES|WHV|WIL|WIS|WIT|WIZ|WLG|WMS|WND|WOB|WOH|WOL|WOR|WOS|WRN|WSF|WST|WSW|WTL|WTM|WUG|WM|WUN|WUR|WZL|ZEL|ZIG)[- ]?(([A-Z][- ]?\d{1,4})|([A-Z]{2}[- ]?\d{1,3})))[- ]?(E|H)?$/.test(a)},"de-LI":function(a){return/^FL[- ]?\d{1,5}[UZ]?$/.test(a)},"en-IN":function(a){return/^[A-Z]{2}[ -]?[0-9]{1,2}(?:[ -]?[A-Z])(?:[ -]?[A-Z]*)?[ -]?[0-9]{4}$/.test(a)},"es-AR":function(a){return/^(([A-Z]{2} ?[0-9]{3} ?[A-Z]{2})|([A-Z]{3} ?[0-9]{3}))$/.test(a)},"fi-FI":function(a){return/^(?=.{4,7})(([A-Z]{1,3}|[0-9]{1,3})[\s-]?([A-Z]{1,3}|[0-9]{1,5}))$/.test(a)},"hu-HU":function(a){return/^((((?!AAA)(([A-NPRSTVZWXY]{1})([A-PR-Z]{1})([A-HJ-NPR-Z]))|(A[ABC]I)|A[ABC]O|A[A-W]Q|BPI|BPO|UCO|UDO|XAO)-(?!000)\d{3})|(M\d{6})|((CK|DT|CD|HC|H[ABEFIKLMNPRSTVX]|MA|OT|R[A-Z]) \d{2}-\d{2})|(CD \d{3}-\d{3})|(C-(C|X) \d{4})|(X-(A|B|C) \d{4})|(([EPVZ]-\d{5}))|(S A[A-Z]{2} \d{2})|(SP \d{2}-\d{2}))$/.test(a)},"pt-BR":function(a){return/^[A-Z]{3}[ -]?[0-9][A-Z][0-9]{2}|[A-Z]{3}[ -]?[0-9]{4}$/.test(a)},"pt-PT":function(a){return/^([A-Z]{2}|[0-9]{2})[ -]?([A-Z]{2}|[0-9]{2})[ -]?([A-Z]{2}|[0-9]{2})$/.test(a)},"sq-AL":function(a){return/^[A-Z]{2}[- ]?((\d{3}[- ]?(([A-Z]{2})|T))|(R[- ]?\d{3}))$/.test(a)},"sv-SE":function(a){return/^[A-HJ-PR-UW-Z]{3} ?[\d]{2}[A-HJ-PR-UW-Z1-9]$|(^[A-Z ]{2,7}$)/.test(a.trim())},"en-PK":function(a){return/(^[A-Z]{2}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{3}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{4}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]((\s|-){0,1})[0-9]{4}((\s|-)[0-9]{2}){0,1}$)/.test(a.trim())}};function s(o,a){if((0,t.default)(o),a in i)return i[a](o);if(a==="any"){for(var l in i){var c=i[l];if(c(o))return!0}return!1}throw new Error("Invalid locale '".concat(a,"'"))}n.exports=e.default,n.exports.default=e.default})(jl,jl.exports)),jl.exports}var Bl={exports:{}},zv;function hj(){return zv||(zv=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=p;var t=i(Ht()),r=i(U());function i(g){return g&&g.__esModule?g:{default:g}}var s=/^[A-Z]$/,o=/^[a-z]$/,a=/^[0-9]$/,l=/^[-#!$@%^&*()_+|~=`{}\[\]:";'<>?,.\/\\ ]$/,c={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};function u(g){var m={};return Array.from(g).forEach(function(v){var b=m[v];b?m[v]+=1:m[v]=1}),m}function d(g){var m=u(g),v={length:g.length,uniqueChars:Object.keys(m).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(m).forEach(function(b){s.test(b)?v.uppercaseCount+=m[b]:o.test(b)?v.lowercaseCount+=m[b]:a.test(b)?v.numberCount+=m[b]:l.test(b)&&(v.symbolCount+=m[b])}),v}function h(g,m){var v=0;return v+=g.uniqueChars*m.pointsPerUnique,v+=(g.length-g.uniqueChars)*m.pointsPerRepeat,g.lowercaseCount>0&&(v+=m.pointsForContainingLower),g.uppercaseCount>0&&(v+=m.pointsForContainingUpper),g.numberCount>0&&(v+=m.pointsForContainingNumber),g.symbolCount>0&&(v+=m.pointsForContainingSymbol),v}function p(g){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;(0,r.default)(g);var v=d(g);return m=(0,t.default)(m||{},c),m.returnScore?h(v,m):v.length>=m.minLength&&v.lowercaseCount>=m.minLowercase&&v.uppercaseCount>=m.minUppercase&&v.numberCount>=m.minNumbers&&v.symbolCount>=m.minSymbols}n.exports=e.default,n.exports.default=e.default})(Bl,Bl.exports)),Bl.exports}var xi={},Wv;function pj(){if(Wv)return xi;Wv=1;function n(d){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},n(d)}Object.defineProperty(xi,"__esModule",{value:!0}),xi.default=u,xi.vatMatchers=void 0;var e=s(U()),t=i(TS());function r(d){if(typeof WeakMap!="function")return null;var h=new WeakMap,p=new WeakMap;return(r=function(m){return m?p:h})(d)}function i(d,h){if(d&&d.__esModule)return d;if(d===null||n(d)!="object"&&typeof d!="function")return{default:d};var p=r(h);if(p&&p.has(d))return p.get(d);var g={__proto__:null},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in d)if(v!=="default"&&{}.hasOwnProperty.call(d,v)){var b=m?Object.getOwnPropertyDescriptor(d,v):null;b&&(b.get||b.set)?Object.defineProperty(g,v,b):g[v]=d[v]}return g.default=d,p&&p.set(d,g),g}function s(d){return d&&d.__esModule?d:{default:d}}var o=function(h){var p=h.match(/^(AU)?(\d{11})$/);if(!p)return!1;var g=[10,1,3,5,7,9,11,13,15,17,19];h=h.replace(/^AU/,"");for(var m=(parseInt(h.slice(0,1),10)-1).toString()+h.slice(1),v=0,b=0;b<11;b++)v+=g[b]*m.charAt(b);return v!==0&&v%89===0},a=function(h){var p=function(m){var v=m.pop(),b=[5,4,3,2,7,6,5,4],y=(11-m.reduce(function(S,w,C){return S+w*b[C]},0)%11)%11;return v===y};return/^(CHE[- ]?)?(\d{9}|(\d{3}\.\d{3}\.\d{3})|(\d{3} \d{3} \d{3})) ?(TVA|MWST|IVA)?$/.test(h)&&p(h.match(/\d/g).map(function(g){return+g}))},l=function(h){var p=h.match(/^(PT)?(\d{9})$/);if(!p)return!1;var g=p[2],m=11-t.reverseMultiplyAndSum(g.split("").slice(0,8).map(function(v){return parseInt(v,10)}),9)%11;return m>9?parseInt(g[8],10)===0:m===parseInt(g[8],10)},c=xi.vatMatchers={AT:function(h){return/^(AT)?U\d{8}$/.test(h)},BE:function(h){return/^(BE)?\d{10}$/.test(h)},BG:function(h){return/^(BG)?\d{9,10}$/.test(h)},HR:function(h){return/^(HR)?\d{11}$/.test(h)},CY:function(h){return/^(CY)?\w{9}$/.test(h)},CZ:function(h){return/^(CZ)?\d{8,10}$/.test(h)},DK:function(h){return/^(DK)?\d{8}$/.test(h)},EE:function(h){return/^(EE)?\d{9}$/.test(h)},FI:function(h){return/^(FI)?\d{8}$/.test(h)},FR:function(h){return/^(FR)?\w{2}\d{9}$/.test(h)},DE:function(h){return/^(DE)?\d{9}$/.test(h)},EL:function(h){return/^(EL)?\d{9}$/.test(h)},HU:function(h){return/^(HU)?\d{8}$/.test(h)},IE:function(h){return/^(IE)?\d{7}\w{1}(W)?$/.test(h)},IT:function(h){return/^(IT)?\d{11}$/.test(h)},LV:function(h){return/^(LV)?\d{11}$/.test(h)},LT:function(h){return/^(LT)?\d{9,12}$/.test(h)},LU:function(h){return/^(LU)?\d{8}$/.test(h)},MT:function(h){return/^(MT)?\d{8}$/.test(h)},NL:function(h){return/^(NL)?\d{9}B\d{2}$/.test(h)},PL:function(h){return/^(PL)?(\d{10}|(\d{3}-\d{3}-\d{2}-\d{2})|(\d{3}-\d{2}-\d{2}-\d{3}))$/.test(h)},PT:l,RO:function(h){return/^(RO)?\d{2,10}$/.test(h)},SK:function(h){return/^(SK)?\d{10}$/.test(h)},SI:function(h){return/^(SI)?\d{8}$/.test(h)},ES:function(h){return/^(ES)?\w\d{7}[A-Z]$/.test(h)},SE:function(h){return/^(SE)?\d{12}$/.test(h)},AL:function(h){return/^(AL)?\w{9}[A-Z]$/.test(h)},MK:function(h){return/^(MK)?\d{13}$/.test(h)},AU:o,BY:function(h){return/^( )?\d{9}$/.test(h)},CA:function(h){return/^(CA)?\d{9}$/.test(h)},IS:function(h){return/^(IS)?\d{5,6}$/.test(h)},IN:function(h){return/^(IN)?\d{15}$/.test(h)},ID:function(h){return/^(ID)?(\d{15}|(\d{2}.\d{3}.\d{3}.\d{1}-\d{3}.\d{3}))$/.test(h)},IL:function(h){return/^(IL)?\d{9}$/.test(h)},KZ:function(h){return/^(KZ)?\d{12}$/.test(h)},NZ:function(h){return/^(NZ)?\d{9}$/.test(h)},NG:function(h){return/^(NG)?(\d{12}|(\d{8}-\d{4}))$/.test(h)},NO:function(h){return/^(NO)?\d{9}MVA$/.test(h)},PH:function(h){return/^(PH)?(\d{12}|\d{3} \d{3} \d{3} \d{3})$/.test(h)},RU:function(h){return/^(RU)?(\d{10}|\d{12})$/.test(h)},SM:function(h){return/^(SM)?\d{5}$/.test(h)},SA:function(h){return/^(SA)?\d{15}$/.test(h)},RS:function(h){return/^(RS)?\d{9}$/.test(h)},CH:a,TR:function(h){return/^(TR)?\d{10}$/.test(h)},UA:function(h){return/^(UA)?\d{12}$/.test(h)},GB:function(h){return/^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/.test(h)},UZ:function(h){return/^(UZ)?\d{9}$/.test(h)},AR:function(h){return/^(AR)?\d{11}$/.test(h)},BO:function(h){return/^(BO)?\d{7}$/.test(h)},BR:function(h){return/^(BR)?((\d{2}.\d{3}.\d{3}\/\d{4}-\d{2})|(\d{3}.\d{3}.\d{3}-\d{2}))$/.test(h)},CL:function(h){return/^(CL)?\d{8}-\d{1}$/.test(h)},CO:function(h){return/^(CO)?\d{10}$/.test(h)},CR:function(h){return/^(CR)?\d{9,12}$/.test(h)},EC:function(h){return/^(EC)?\d{13}$/.test(h)},SV:function(h){return/^(SV)?\d{4}-\d{6}-\d{3}-\d{1}$/.test(h)},GT:function(h){return/^(GT)?\d{7}-\d{1}$/.test(h)},HN:function(h){return/^(HN)?$/.test(h)},MX:function(h){return/^(MX)?\w{3,4}\d{6}\w{3}$/.test(h)},NI:function(h){return/^(NI)?\d{3}-\d{6}-\d{4}\w{1}$/.test(h)},PA:function(h){return/^(PA)?$/.test(h)},PY:function(h){return/^(PY)?\d{6,8}-\d{1}$/.test(h)},PE:function(h){return/^(PE)?\d{11}$/.test(h)},DO:function(h){return/^(DO)?(\d{11}|(\d{3}-\d{7}-\d{1})|[1,4,5]{1}\d{8}|([1,4,5]{1})-\d{2}-\d{5}-\d{1})$/.test(h)},UY:function(h){return/^(UY)?\d{12}$/.test(h)},VE:function(h){return/^(VE)?[J,G,V,E]{1}-(\d{9}|(\d{8}-\d{1}))$/.test(h)}};function u(d,h){if((0,e.default)(d),(0,e.default)(h),h in c)return c[h](d);throw new Error("Invalid country code: '".concat(h,"'"))}return xi}var qv;function mj(){return qv||(qv=1,(function(n,e){function t(Ue){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dn){return typeof Dn}:function(Dn){return Dn&&typeof Symbol=="function"&&Dn.constructor===Symbol&&Dn!==Symbol.prototype?"symbol":typeof Dn},t(Ue)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=V(Uh()),i=V(wS()),s=V(H5()),o=V(V5()),a=V(U5()),l=V(z5()),c=V(W5()),u=V(kS()),d=V(q5()),h=V(G5()),p=V(Iu()),g=V(K5()),m=V(zh()),v=V(AS()),b=V(Z5()),y=V(Y5()),S=V(J5()),w=V(X5()),C=ni(Q5()),A=ni(e4()),k=V(t4()),I=V(n4()),D=V(r4()),O=V(i4()),T=V(s4()),N=V(o4()),L=V(a4()),P=V(MS()),H=V(IS()),q=V(l4()),Z=V(c4()),ae=V(d4()),ee=V(f4()),de=V(Wh()),ge=ni(yS()),K=V(p4()),fe=V(ES()),re=V(m4()),ue=V(g4()),Q=V(v4()),ce=V(b4()),Ae=V(x4()),Be=V(y4()),he=ni(w4()),Je=V(S4()),Me=V(C4()),Ie=V(k4()),_e=V(A4()),xt=V(M4()),Tt=V(I4()),sr=V(E4()),M=V(CS()),E=V(D4()),R=V(R4()),F=V(O4()),$=V(T4()),z=V(N4()),ie=V(OS()),me=V(P4()),we=V(L4()),Ee=V(_4()),Vt=V(j4()),Nt=V(B4()),Qt=V($4()),Ut=V(F4()),or=ni(H4()),Jn=V(V4()),ar=V(U4()),lr=V(z4()),as=W4(),Eu=V(q4()),Mo=V(G4()),Du=V(K4()),Ru=V(DS()),Ou=V(Z4()),ht=V(Y4()),Pt=V(J4()),Lt=V(X4()),In=V(RS()),zt=V(Q4()),_t=V(ej()),ln=V(tj()),cr=V(nj()),st=V(rj()),vn=ni(ij()),cn=V(PS()),bn=V(NS()),Tr=V(LS()),Nr=V(sj()),En=V(oj()),Pr=V(aj()),ls=V(lj()),YS=V(_S()),JS=V(cj()),XS=V(uj()),QS=V(dj()),e2=V(fj()),t2=V(hj()),n2=V(pj());function Zh(Ue){if(typeof WeakMap!="function")return null;var Dn=new WeakMap,Lr=new WeakMap;return(Zh=function(Tu){return Tu?Lr:Dn})(Ue)}function ni(Ue,Dn){if(Ue&&Ue.__esModule)return Ue;if(Ue===null||t(Ue)!="object"&&typeof Ue!="function")return{default:Ue};var Lr=Zh(Dn);if(Lr&&Lr.has(Ue))return Lr.get(Ue);var ri={__proto__:null},Tu=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ii in Ue)if(ii!=="default"&&{}.hasOwnProperty.call(Ue,ii)){var Io=Tu?Object.getOwnPropertyDescriptor(Ue,ii):null;Io&&(Io.get||Io.set)?Object.defineProperty(ri,ii,Io):ri[ii]=Ue[ii]}return ri.default=Ue,Lr&&Lr.set(Ue,ri),ri}function V(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}}var r2="13.12.0",i2={version:r2,toDate:r.default,toFloat:i.default,toInt:s.default,toBoolean:o.default,equals:a.default,contains:l.default,matches:c.default,isEmail:u.default,isURL:d.default,isMACAddress:h.default,isIP:p.default,isIPRange:g.default,isFQDN:m.default,isBoolean:y.default,isIBAN:he.default,isBIC:Je.default,isAbaRouting:w.default,isAlpha:C.default,isAlphaLocales:C.locales,isAlphanumeric:A.default,isAlphanumericLocales:A.locales,isNumeric:k.default,isPassportNumber:I.default,isPort:D.default,isLowercase:O.default,isUppercase:T.default,isAscii:L.default,isFullWidth:P.default,isHalfWidth:H.default,isVariableWidth:q.default,isMultibyte:Z.default,isSemVer:ae.default,isSurrogatePair:ee.default,isInt:de.default,isIMEI:N.default,isFloat:ge.default,isFloatLocales:ge.locales,isDecimal:K.default,isHexadecimal:fe.default,isOctal:re.default,isDivisibleBy:ue.default,isHexColor:Q.default,isRgbColor:ce.default,isHSL:Ae.default,isISRC:Be.default,isMD5:Me.default,isHash:Ie.default,isJWT:_e.default,isJSON:xt.default,isEmpty:Tt.default,isLength:sr.default,isLocale:S.default,isByteLength:M.default,isUUID:E.default,isMongoId:R.default,isAfter:F.default,isBefore:$.default,isIn:z.default,isLuhnNumber:ie.default,isCreditCard:me.default,isIdentityCard:we.default,isEAN:Ee.default,isISIN:Vt.default,isISBN:Nt.default,isISSN:Qt.default,isMobilePhone:or.default,isMobilePhoneLocales:or.locales,isPostalCode:vn.default,isPostalCodeLocales:vn.locales,isEthereumAddress:Jn.default,isCurrency:ar.default,isBtcAddress:lr.default,isISO6346:as.isISO6346,isFreightContainerID:as.isFreightContainerID,isISO6391:Eu.default,isISO8601:Mo.default,isRFC3339:Du.default,isISO31661Alpha2:Ru.default,isISO31661Alpha3:Ou.default,isISO4217:ht.default,isBase32:Pt.default,isBase58:Lt.default,isBase64:In.default,isDataURI:zt.default,isMagnetURI:_t.default,isMailtoURI:ln.default,isMimeType:cr.default,isLatLong:st.default,ltrim:cn.default,rtrim:bn.default,trim:Tr.default,escape:Nr.default,unescape:En.default,stripLow:Pr.default,whitelist:ls.default,blacklist:YS.default,isWhitelisted:JS.default,normalizeEmail:XS.default,toString,isSlug:QS.default,isStrongPassword:t2.default,isTaxID:Ut.default,isDate:v.default,isTime:b.default,isLicensePlate:e2.default,isVAT:n2.default,ibanLocales:he.locales};e.default=i2,n.exports=e.default,n.exports.default=e.default})(ea,ea.exports)),ea.exports}var gj=mj();const jS=F2(gj);function Gv(n){const e="The URL must be in a format like https://www.facebook.com/yourPage";if(!n)return"";if(n=n.replace(/(https?:\/\/)?(www\.)?facebook\.com/i,""),n.match(/^(http|\/\/)/i))throw new Error(e);if(n=n.replace(/^\//,""),n=`https://www.facebook.com/${n}`,!jS.isURL(n))throw new Error(e);return n}const Kv=n=>`https://www.facebook.com/${n}`,vj=n=>n.match(/(?:https:\/\/)(?:www\.)(?:facebook\.com)\/(?:#!\/)?(\w+\/?\S+)/i)?.[1]||null,kd=/^x\.com\/([a-zA-Z0-9_]{1,15})$/;function Zv(n){if(!n)return"";if(n.match(kd)||n.match(/([a-z\d.]+)/i)){let e=[];if(n.match(kd)?[,e]=n.match(kd):[e]=n.match(/([^/]+)\/?$/i),e.startsWith("@")&&(e=e.slice(1)),!e.match(/^[a-z\d_]{1,15}$/i))throw new Error("Your Username is not a valid Twitter Username");return`https://x.com/${e}`}else{const e="The URL must be in a format like https://x.com/yourUsername";throw new Error(e)}}const Yv=n=>`https://x.com/${n.replace("@","")}`,bj=n=>{const e=n.match(/(?:https:\/\/)(?:x\.com)\/(?:#!\/)?@?([^/]*)/)?.[1];return e?`@${e}`:null},xj=({keywords:n})=>{const{localSettings:e,isEditing:t,saveState:r,handleSave:i,handleCancel:s,updateSetting:o,handleEditingChange:a}=Ot(),[l,c]=x.useState({}),[u,d]=Te(e,["facebook","twitter"]),[h,p]=x.useState(u?Kv(u):""),[g,m]=x.useState(d?Yv(d):"");x.useEffect(()=>{p(u?Kv(u):""),m(d?Yv(d):"")},[u,d]);const v=S=>{p(S);try{const w=Gv(S);o("facebook",vj(w)),t||a(!0),l.facebook&&c({...l,facebook:""})}catch(w){w instanceof Error&&c({...l,facebook:w.message}),o("facebook",null)}},b=S=>{m(S);try{const w=Zv(S);o("twitter",bj(w)),t||a(!0),l.twitter&&c({...l,twitter:""})}catch(w){w instanceof Error&&c({...l,twitter:w.message}),o("twitter",null)}},y=()=>{const S={};if(h)try{Gv(h)}catch(w){w instanceof Error&&(S.facebook=w.message)}if(g)try{Zv(g)}catch(w){w instanceof Error&&(S.twitter=w.message)}c(S),Object.keys(S).length===0&&i()};return f.jsx(Se,{description:"Link your social accounts for full structured data and rich card support",isEditing:t,keywords:n,navid:"social-accounts",saveState:r,testId:"social-accounts",title:"Social accounts",hideEditButton:!0,onCancel:s,onEditingChange:a,onSave:y,children:f.jsxs(Ze,{children:[f.jsx(tt,{error:!!l.facebook,hint:l.facebook,placeholder:"https://www.facebook.com/ghost",title:"URL of your publication's Facebook Page",value:h,onChange:S=>v(S.target.value)}),f.jsx(tt,{error:!!l.twitter,hint:l.twitter,placeholder:"https://x.com/ghost",title:"URL of your X profile",value:g,onChange:S=>b(S.target.value)})]})})},yj=ke(xj,"Social accounts"),wj=[{name:"Pacific/Pago_Pago",label:"(GMT -11:00) Midway Island, Samoa"},{name:"Pacific/Honolulu",label:"(GMT -10:00) Hawaii"},{name:"America/Anchorage",label:"(GMT -9:00) Alaska"},{name:"America/Tijuana",label:"(GMT -8:00) Chihuahua, La Paz, Mazatlan"},{name:"America/Los_Angeles",label:"(GMT -8:00) Pacific Time (US & Canada); Tijuana"},{name:"America/Phoenix",label:"(GMT -7:00) Arizona"},{name:"America/Denver",label:"(GMT -7:00) Mountain Time (US & Canada)"},{name:"America/Costa_Rica",label:"(GMT -6:00) Central America"},{name:"America/Chicago",label:"(GMT -6:00) Central Time (US & Canada)"},{name:"America/Mexico_City",label:"(GMT -6:00) Guadalajara, Mexico City, Monterrey"},{name:"America/Regina",label:"(GMT -6:00) Saskatchewan"},{name:"America/Bogota",label:"(GMT -5:00) Bogota, Lima, Quito"},{name:"America/New_York",label:"(GMT -5:00) Eastern Time (US & Canada)"},{name:"America/Fort_Wayne",label:"(GMT -5:00) Indiana (East)"},{name:"America/Caracas",label:"(GMT -4:00) Caracas, La Paz"},{name:"America/Halifax",label:"(GMT -4:00) Atlantic Time (Canada); Greenland"},{name:"America/Santiago",label:"(GMT -4:00) Santiago"},{name:"America/St_Johns",label:"(GMT -3:30) Newfoundland"},{name:"America/Argentina/Buenos_Aires",label:"(GMT -3:00) Buenos Aires, Brasilia, Georgetown"},{name:"America/Noronha",label:"(GMT -2:00) Fernando de Noronha"},{name:"Atlantic/Azores",label:"(GMT -1:00) Azores"},{name:"Atlantic/Cape_Verde",label:"(GMT -1:00) Cape Verde Is."},{name:"Etc/UTC",label:"(GMT) UTC"},{name:"Africa/Casablanca",label:"(GMT +0:00) Casablanca, Monrovia"},{name:"Europe/Dublin",label:"(GMT +0:00) Dublin, Edinburgh, London"},{name:"Europe/Amsterdam",label:"(GMT +1:00) Amsterdam, Berlin, Rome, Stockholm, Vienna"},{name:"Europe/Prague",label:"(GMT +1:00) Belgrade, Bratislava, Budapest, Prague"},{name:"Europe/Paris",label:"(GMT +1:00) Brussels, Copenhagen, Madrid, Paris"},{name:"Europe/Warsaw",label:"(GMT +1:00) Sarajevo, Skopje, Warsaw, Zagreb"},{name:"Africa/Lagos",label:"(GMT +1:00) West Central Africa"},{name:"Europe/Athens",label:"(GMT +2:00) Athens, Beirut, Bucharest"},{name:"Africa/Cairo",label:"(GMT +2:00) Cairo, Egypt"},{name:"Africa/Maputo",label:"(GMT +2:00) Harare"},{name:"Europe/Kiev",label:"(GMT +2:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius"},{name:"Asia/Jerusalem",label:"(GMT +2:00) Jerusalem"},{name:"Africa/Johannesburg",label:"(GMT +2:00) Pretoria"},{name:"Asia/Baghdad",label:"(GMT +3:00) Baghdad"},{name:"Asia/Riyadh",label:"(GMT +3:00) Kuwait, Nairobi, Riyadh"},{name:"Europe/Istanbul",label:"(GMT +3:00) Istanbul, Ankara"},{name:"Europe/Moscow",label:"(GMT +3:00) Moscow, St. Petersburg, Volgograd"},{name:"Asia/Tehran",label:"(GMT +3:30) Tehran"},{name:"Asia/Dubai",label:"(GMT +4:00) Abu Dhabi, Muscat"},{name:"Asia/Baku",label:"(GMT +4:00) Baku, Tbilisi, Yerevan"},{name:"Asia/Kabul",label:"(GMT +4:30) Kabul"},{name:"Asia/Karachi",label:"(GMT +5:00) Islamabad, Karachi, Tashkent"},{name:"Asia/Yekaterinburg",label:"(GMT +5:00) Yekaterinburg"},{name:"Asia/Kolkata",label:"(GMT +5:30) Chennai, Calcutta, Mumbai, New Delhi"},{name:"Asia/Kathmandu",label:"(GMT +5:45) Katmandu"},{name:"Asia/Almaty",label:"(GMT +6:00) Almaty, Novosibirsk"},{name:"Asia/Dhaka",label:"(GMT +6:00) Astana, Dhaka, Sri Jayawardenepura"},{name:"Asia/Rangoon",label:"(GMT +6:30) Rangoon"},{name:"Asia/Bangkok",label:"(GMT +7:00) Bangkok, Hanoi, Jakarta"},{name:"Asia/Krasnoyarsk",label:"(GMT +7:00) Krasnoyarsk"},{name:"Asia/Hong_Kong",label:"(GMT +8:00) Beijing, Chongqing, Hong Kong, Urumqi"},{name:"Asia/Irkutsk",label:"(GMT +8:00) Irkutsk, Ulaan Bataar"},{name:"Asia/Singapore",label:"(GMT +8:00) Kuala Lumpur, Perth, Singapore, Taipei"},{name:"Asia/Tokyo",label:"(GMT +9:00) Osaka, Sapporo, Tokyo"},{name:"Asia/Seoul",label:"(GMT +9:00) Seoul"},{name:"Asia/Yakutsk",label:"(GMT +9:00) Yakutsk"},{name:"Australia/Adelaide",label:"(GMT +9:30) Adelaide"},{name:"Australia/Darwin",label:"(GMT +9:30) Darwin"},{name:"Australia/Brisbane",label:"(GMT +10:00) Brisbane, Guam, Port Moresby"},{name:"Australia/Sydney",label:"(GMT +10:00) Canberra, Hobart, Melbourne, Sydney, Vladivostok"},{name:"Asia/Magadan",label:"(GMT +11:00) Magadan, Soloman Is., New Caledonia"},{name:"Pacific/Auckland",label:"(GMT +12:00) Auckland, Wellington"},{name:"Pacific/Fiji",label:"(GMT +12:00) Fiji, Kamchatka, Marshall Is."},{name:"Pacific/Kwajalein",label:"(GMT +12:00) International Date Line West"}],Sj=({timezone:n})=>{const[e,t]=x.useState(Vg(n));return x.useEffect(()=>{const r=setInterval(()=>{t(Vg(n))},1e3);return()=>{clearInterval(r)}},[n]),f.jsxs(f.Fragment,{children:["The local time here is currently ",e]})},Cj=({keywords:n})=>{const{localSettings:e,isEditing:t,saveState:r,handleSave:i,handleCancel:s,updateSetting:o,handleEditingChange:a}=Ot(),[l]=Te(e,["timezone"]),c=wj.map(d=>({value:d.name,label:d.label})),u=d=>{o("timezone",d||null),a(!0)};return f.jsx(Se,{description:"Set the time and date of your publication, used for all published posts",hideEditButton:!0,isEditing:t,keywords:n,navid:"timezone",saveState:r,testId:"timezone",title:"Site timezone",onCancel:s,onEditingChange:a,onSave:i,children:f.jsx(Ze,{columns:1,children:f.jsx(zr,{hint:f.jsx(Sj,{timezone:l}),options:c,selectedOption:c.find(d=>d.value===l),testId:"timezone-select",title:"Site timezone",isSearchable:!0,onSelect:d=>u(d?.value)})})})},kj=ke(Cj,"Site timezone"),Aj=({keywords:n})=>{const{errors:e,localSettings:t,isEditing:r,saveState:i,focusRef:s,clearError:o,handleSave:a,handleCancel:l,updateSetting:c,handleEditingChange:u}=Ot({onValidate:()=>d?d.length<4?{title:"Please use a site title longer than 3 characters."}:d.length>63?{title:"Please use a site title shorter than 63 characters."}:{}:{title:"Please enter a site title."}}),[d,h]=Te(t,["title","description"]),p=b=>{c("title",b.target.value)},g=b=>{c("description",b.target.value)},m=f.jsx(Ze,{columns:2,values:[{heading:"Site title",key:"site-title",value:d},{heading:"Site description",key:"site-description",value:h}]}),v=f.jsxs(Ze,{children:[f.jsx(tt,{error:!!e.title,hint:e.title||"The name of your site",inputRef:s,maxLength:63,placeholder:"Site title",title:"Site title",value:d,onChange:p,onKeyDown:()=>o("title")}),f.jsx(tt,{hint:"A short description, used in your theme, meta data and search results",maxLength:200,placeholder:"Site description",title:"Site description",value:h,onChange:g})]});return f.jsx(Se,{description:"The details used to identify your publication around the web",isEditing:r,keywords:n,navid:"general",saveState:i,testId:"title-and-description",title:"Title & description",onCancel:l,onEditingChange:u,onSave:a,children:r?v:m})},Mj=ke(Aj,"Title & description"),Ij=({user:n})=>{const{updateRoute:e}=be(),{currentUser:t}=Pe(),r=()=>{Cs(t)&&e({route:`staff/${n.slug}`})};return n?f.jsxs("div",{className:_("group flex gap-3",Cs(t)&&"cursor-pointer"),"data-testid":"owner-user",onClick:r,children:[f.jsx(nh,{bgColor:Vh(n.name?n.name:n.email),image:n.profile_image??void 0,label:bS(n.name),labelColor:"white",size:"lg"}),f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("span",{children:[n.name,"  ",f.jsx("strong",{children:"Owner"})," ",Cs(t)&&f.jsx("button",{className:"ml-2 inline-block text-sm font-bold text-green group-hover:visible md:invisible",type:"button",children:"View profile"})]}),f.jsx("span",{className:"text-xs text-grey-700",children:n.email})]})]}):null},$l=({users:n,groupname:e})=>{const{updateRoute:t}=be(),{currentUser:r}=Pe(),i=s=>{t({route:`staff/${s.slug}`})};return!n||!n.length?f.jsxs(ei,{icon:"single-user-block",children:["No ",e," found."]}):f.jsx(Xi,{titleSeparator:!1,children:n.map(s=>{let o=s.name||"";s.status==="inactive"&&(o=`${o} (Suspended)`);const a=Cs(r)||mb(r)&&H2(s)||r.id===s.id;return f.jsx(ru,{action:a&&f.jsx(ne,{color:"green",label:"Edit",link:!0,onClick:()=>i(s)}),avatar:f.jsx(nh,{bgColor:Vh(s.name?s.name:s.email),image:s.profile_image??void 0,label:bS(s.name),labelColor:"white"}),bgOnHover:a,className:"min-h-[64px]",detail:s.email,hideActions:!0,id:`list-item-${s.id}`,separator:!1,testId:"user-list-item",title:o,onClick:()=>a&&i(s)},s.id)})})},Ej=({invite:n})=>{const[e,t]=x.useState(""),[r,i]=x.useState(""),{mutateAsync:s}=X_(),{mutateAsync:o}=J_(),a=vt();let l="Revoke";e==="progress"&&(l="Revoking...");let c="Resend";return r==="progress"&&(c="Resending..."),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ne,{color:"red",label:l,link:!0,onClick:async()=>{try{t("progress"),await s(n.id),er({title:"Invitation revoked",message:n.email,type:"success"})}catch(u){a(u)}finally{t("")}}}),f.jsx(ne,{className:"ml-2",color:"green",label:c,link:!0,onClick:async()=>{try{i("progress"),await s(n.id),await o({email:n.email,roleId:n.role_id}),er({title:"Invitation resent",message:n.email,type:"success"})}catch(u){a(u)}finally{i("")}}})]})},Dj=({users:n})=>!n||!n.length?f.jsx(ei,{icon:"single-user-block",children:"No invitations found."}):f.jsx(Xi,{children:n.map(e=>f.jsx(ru,{action:f.jsx(Ej,{invite:e}),avatar:f.jsx(nh,{bgColor:Vh(e.email),image:"",label:e.email.charAt(0).toUpperCase(),labelColor:"white"}),className:"min-h-[64px]",detail:e.role,hideActions:!0,id:`list-item-${e.id}`,separator:!1,testId:"user-invite",title:e.email,onClick:()=>{}},e.id))}),Rj=({keywords:n,highlight:e=!0})=>{const{totalUsers:t,totalInvites:r,users:i,ownerUser:s,adminUsers:o,editorUsers:a,authorUsers:l,contributorUsers:c,invites:u,hasNextPage:d,fetchNextPage:h,invitesHasNextPage:p,fetchNextInvitePage:g}=pS(),{updateRoute:m}=be(),{settings:v,config:b,currentUser:y}=Pe(),S=()=>{m("staff/invite")},w=f.jsx(ne,{className:"mt-[-5px]",color:"clear",label:"Invite people",size:"sm",linkWithPadding:!0,onClick:()=>{S()}}),C=xS().getParam("tab"),A=C||"administrators",[k,I]=x.useState(A);x.useEffect(()=>{C&&I(C)},[C]);const D=P=>{m(`staff?tab=${P}`),I(P)},O=[{id:"administrators",title:"Administrators",contents:f.jsx($l,{groupname:"administrators",users:o}),counter:o.length?o.length:void 0},{id:"editors",title:"Editors",contents:f.jsx($l,{groupname:"editors",users:a}),counter:a.length?a.length:void 0},{id:"authors",title:"Authors",contents:f.jsx($l,{groupname:"authors",users:l}),counter:l.length?l.length:void 0},{id:"contributors",title:"Contributors",contents:f.jsx($l,{groupname:"contributors",users:c}),counter:c.length?c.length:void 0},{id:"invited",title:"Invited",contents:f.jsx(Dj,{users:u}),counter:r||void 0}],T=hb(v,"require_email_mfa")||!1,{mutateAsync:N}=Xr(),L=vt();return f.jsxs(Se,{customButtons:w,highlightOnModalClose:e,keywords:n,navid:"staff",testId:"users",title:"Staff",children:[f.jsx(Ij,{user:s}),(i.length>1||u.length>0)&&f.jsx(Gn,{selectedTab:k,tabs:O,testId:"user-tabview",onTabChange:D}),d&&k!=="invited"&&f.jsx(ne,{label:`Load more (showing ${i.length}/${t} users)`,link:!0,onClick:()=>h()}),p&&k==="invited"&&f.jsx(ne,{label:`Load more (showing ${u.length}/${r} invites)`,link:!0,onClick:()=>g()}),b?.security?.staffDeviceVerification&&Cs(y)&&f.jsxs("div",{className:`flex flex-col gap-6 ${i.length>1||u.length>0?"-mt-6":""}`,children:[f.jsx(gt,{}),f.jsxs("div",{className:"flex items-baseline justify-between",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[1.5rem] font-semibold tracking-tight",children:"Security settings"}),f.jsx("span",{children:"Require email 2FA codes to be used on all staff logins"})]}),f.jsx(Kt,{checked:T,direction:"rtl",gap:"gap-0",onChange:async()=>{const P=!T;try{await N([{key:"require_email_mfa",value:P}])}catch(H){L(H)}}})]})]})]})},BS=ke(Rj,"Staff"),at={titleAndDescription:["general","title and description","site title","site description","title & description"],timeZone:["general","time","date","site timezone","time zone"],publicationLanguage:["general","publication language","locale"],users:["general","users and permissions","roles","staff","invite people","contributors","editors","authors","administrators"],metadata:["general","metadata","title","description","search","engine","google","meta data","twitter card","structured data","rich cards","x card","social","facebook card"],socialAccounts:["general","social accounts","facebook","twitter","structured data","rich cards"],lockSite:["general","password protection","lock site","make this site private"],analytics:["membership","analytics","tracking","privacy","membership"]},Oj=()=>f.jsxs(ss,{keywords:Object.values(at).flat(),title:"General settings",children:[f.jsx(Mj,{keywords:at.titleAndDescription}),f.jsx(kj,{keywords:at.timeZone}),f.jsx(_5,{keywords:at.publicationLanguage}),f.jsx(BS,{keywords:at.users}),f.jsx(F5,{keywords:at.metadata}),f.jsx(yj,{keywords:at.socialAccounts}),f.jsx(T5,{keywords:at.analytics}),f.jsx(P5,{keywords:at.lockSite})]}),Tj=({keywords:n})=>{const{updateRoute:e}=be(),t=()=>{e("embed-signup-form/show")};return f.jsx(Se,{customButtons:f.jsx(ne,{className:"mt-[-5px]",color:"clear",label:"Embed",size:"sm",onClick:t}),description:"Grow your audience from anywhere on the web",keywords:n,navid:"embed-signup-form",testId:"embed-signup-form",title:"Signup forms"})},$S="/ghost/assets/explore-default-logo-DyP-dkSK.png",Nj="/ghost/assets/ghost-explore-afOk0g_6.png",Pj=({keywords:n})=>{const{settings:e}=Pe(),{mutateAsync:t}=Xr(),r=vt(),{updateRoute:i}=be(),{refetch:s}=pb({searchParams:{limit:"1"}}),[o,a]=x.useState(0);x.useEffect(()=>{(async()=>{const{data:C}=await s(),A=C?.meta?.pagination?.total||0;a(A)})()},[s]);const[l,c]=Te(e,["accent_color","icon"]),{localSettings:u,siteData:d}=Ot(),[h,p]=Te(u,["title","description"]),[g]=Te(e,["explore_ping"]),[m]=Te(e,["explore_ping_growth"]),v=d?.url,b=v?.replace(/^https?:\/\//,"").replace(/\/?$/,""),y=l||"#F6414E",S=async(w,C)=>{const A=[{key:w,value:C.target.checked}];try{await t(A)}catch(k){r(k)}};return f.jsx(Se,{customButtons:f.jsx(Kt,{checked:g,direction:"rtl",testId:"explore-toggle",onChange:w=>S("explore_ping",w)}),description:"Promote your site across Ghost's website and publishing network",keywords:n,navid:"explore",testId:"explore",title:"Ghost Explore",children:g?f.jsxs(Ze,{columns:1,children:[f.jsx(gt,{}),f.jsx(Kt,{checked:m,containerClasses:"!items-center",direction:"rtl",gap:"gap-0",hint:"Enabling this will use your revenue/member growth data to rank your site more highly on Ghost Explore. Total member count will be displayed publicly, other data will be kept private.",label:"Share growth data to rank higher?",labelClasses:"w-full",testId:"explore-growth-toggle",onChange:w=>S("explore_ping_growth",w)}),f.jsx("div",{className:"-mx-5 -mb-5 flex flex-col items-center bg-grey-75 px-7 py-10 md:-mx-7 md:-mb-7","data-testid":"explore-preview",children:f.jsxs("div",{className:"relative w-full max-w-[320px] rounded-lg bg-white p-6 text-black shadow-lg",children:[f.jsx("div",{className:"absolute right-3 top-2.5 text-xs uppercase text-grey-300",children:"Preview"}),c?f.jsx("div",{className:"size-9 rounded-sm bg-cover bg-center",style:{backgroundImage:`url(${c})`}}):f.jsx("div",{className:"flex aspect-square size-10 items-center justify-center overflow-hidden rounded-full p-1 text-white",style:{backgroundColor:y},children:f.jsx("img",{className:"h-auto w-8",src:$S})}),f.jsx("div",{className:"mt-3 text-lg font-semibold tracking-tight",children:h}),p&&f.jsx("div",{className:"mt-1.5 text-sm leading-tight text-grey-700",children:p}),f.jsxs("a",{className:"group mt-8 flex h-6 w-full items-center justify-between gap-5 hover:cursor-pointer",href:v,rel:"noopener noreferrer",target:"_blank",children:[f.jsx("span",{className:"text-sm font-semibold",children:b}),m?f.jsxs("span",{className:"rounded-sm bg-black px-2 py-0.5 text-xs font-semibold text-white","data-testid":"explore-members-count",children:[V2(o),"",o===1?"member":"members"]}):f.jsx("span",{className:"flex size-5 items-center justify-center rounded-full border border-black text-black group-hover:bg-black group-hover:text-white",children:f.jsx(ve,{name:"arrow-right",size:10})})]})]})}),f.jsxs("div",{className:"-mx-5 -mb-5 flex items-center justify-between gap-4 rounded-b-xl border-t border-[rgba(142,66,255,0.1)] bg-gradient-to-tr from-[rgba(142,66,255,0.07)] to-[rgba(142,66,255,0.02)] p-6 px-7 md:-mx-7 md:-mb-7",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"font-medium",children:"Get featured on the Ghost.org homepage"}),f.jsx("span",{className:"text-pretty text-sm text-black/80 dark:text-white/80",children:"Send us a quote we can use to highlight your site"})]}),f.jsx(ne,{className:"border border-purple bg-white text-purple hover:bg-purple/5 hover:text-purple dark:bg-transparent",icon:"send",label:"Send testimonial",onClick:()=>{i("explore/testimonial")}})]})]}):f.jsx("img",{src:Nj})})},Lj=ke(Pj,"Ghost Explore"),_j="/ghost/assets/network-BsaAQxl3.png",jj=({keywords:n})=>{const{settings:e}=Pe(),{mutateAsync:t}=Xr(),r=vt(),{updateRoute:i}=be(),o=Co()?.isDisabled("limitSocialWeb"),{subdir:a}=Ed(),[l]=Te(e,["is_private"]),c=!!a,u=["localhost","127.0.0.1","::1"].includes(window.location.hostname),d=jS.isIP(window.location.hostname),h=o||c||u||d,p=!!l,g=h||p,[m]=Te(e,["social_web"]),v=!!m&&!g,b=async y=>{const S=[{key:"social_web",value:y.target.checked}];try{await t(S)}catch(w){r(w)}};return f.jsx(Se,{customButtons:f.jsx(Kt,{checked:v,direction:"rtl",disabled:g,onChange:b},`${v}-${g}`),description:"Distribute posts to the social web, so people can discover and follow your content across BlueSky, Threads, Mastodon, Flipboard, WordPress, and more.",keywords:n,navid:"network",testId:"network",title:"Network",children:f.jsxs(f.Fragment,{children:[f.jsx(Ze,{columns:1,values:[{key:"private",value:g&&f.jsxs("div",{className:"flex w-full gap-1.5 rounded-md border border-grey-200 bg-grey-75 p-3 text-sm dark:border-grey-900 dark:bg-grey-925",children:[f.jsx(ve,{name:"info",size:16}),f.jsx("div",{className:"-mt-0.5",children:p?f.jsxs(f.Fragment,{children:["Network is automatically disabled while your site is in ",f.jsx("span",{className:"cursor-pointer text-green",onClick:()=>i("locksite"),children:"private mode"})]}):f.jsxs(f.Fragment,{children:["You need to configure a supported custom domain to use this feature. ",f.jsx("a",{className:"text-green",href:"https://ghost.org/help/social-web/#custom-domain-required",rel:"noopener noreferrer",target:"_blank",children:"Help "})]})})]})}]}),f.jsx("div",{className:"-mx-5 -mb-5 overflow-hidden rounded-b-xl md:-mx-7 md:-mb-7",children:f.jsx("img",{className:"dark:opacity-90",src:_j})})]})})},Bj=ke(jj,"Network"),Jv=[{isoCode:"USD",name:"United States dollar"},{isoCode:"EUR",name:"Euro"},{isoCode:"GBP",name:"Pound sterling"},{isoCode:"AUD",name:"Australian dollar"},{isoCode:"CAD",name:"Canadian dollar"},{isoCode:"AED",name:"United Arab Emirates dirham"},{isoCode:"AFN",name:"Afghan afghani"},{isoCode:"ALL",name:"Albanian lek"},{isoCode:"AMD",name:"Armenian dram"},{isoCode:"ANG",name:"Netherlands Antillean guilder"},{isoCode:"AOA",name:"Angolan kwanza"},{isoCode:"ARS",name:"Argentine peso"},{isoCode:"AWG",name:"Aruban florin"},{isoCode:"AZN",name:"Azerbaijani manat"},{isoCode:"BAM",name:"Bosnia and Herzegovina convertible mark"},{isoCode:"BBD",name:"Barbados dollar"},{isoCode:"BDT",name:"Bangladeshi taka"},{isoCode:"BGN",name:"Bulgarian lev"},{isoCode:"BMD",name:"Bermudian dollar"},{isoCode:"BND",name:"Brunei dollar"},{isoCode:"BOB",name:"Boliviano"},{isoCode:"BRL",name:"Brazilian real"},{isoCode:"BSD",name:"Bahamian dollar"},{isoCode:"BWP",name:"Botswana pula"},{isoCode:"BZD",name:"Belize dollar"},{isoCode:"CDF",name:"Congolese franc"},{isoCode:"CHF",name:"Swiss franc"},{isoCode:"CNY",name:"Chinese yuan"},{isoCode:"COP",name:"Colombian peso"},{isoCode:"CRC",name:"Costa Rican colon"},{isoCode:"CVE",name:"Cape Verdean escudo"},{isoCode:"CZK",name:"Czech koruna"},{isoCode:"DKK",name:"Danish krone"},{isoCode:"DOP",name:"Dominican peso"},{isoCode:"DZD",name:"Algerian dinar"},{isoCode:"EGP",name:"Egyptian pound"},{isoCode:"ETB",name:"Ethiopian birr"},{isoCode:"FJD",name:"Fiji dollar"},{isoCode:"FKP",name:"Falkland Islands pound"},{isoCode:"GEL",name:"Georgian lari"},{isoCode:"GIP",name:"Gibraltar pound"},{isoCode:"GMD",name:"Gambian dalasi"},{isoCode:"GTQ",name:"Guatemalan queztal"},{isoCode:"GYD",name:"Guyanese dollar"},{isoCode:"HKD",name:"Hong Kong dollar"},{isoCode:"HNL",name:"Honduran lempira"},{isoCode:"HRK",name:"Croation kuna"},{isoCode:"HTG",name:"Haitian gourde"},{isoCode:"HUF",name:"Hungarian forint"},{isoCode:"IDR",name:"Indonesian rupiah"},{isoCode:"ILS",name:"Israeli new shekel"},{isoCode:"INR",name:"Indian rupee"},{isoCode:"ISK",name:"Icelandic krna"},{isoCode:"JMD",name:"Jamaican dollar"},{isoCode:"KES",name:"Kenyan shilling"},{isoCode:"KGS",name:"Kyrgyzstani som"},{isoCode:"KHR",name:"Cambodian riel"},{isoCode:"KYD",name:"Cayman Islands dollar"},{isoCode:"KZT",name:"Kazakhstani tenge"},{isoCode:"LAK",name:"Lao kip"},{isoCode:"LBP",name:"Lebanese pound"},{isoCode:"LKR",name:"Sri Lankan rupee"},{isoCode:"LRD",name:"Liberian dollar"},{isoCode:"LSL",name:"Lesotho loti"},{isoCode:"MAD",name:"Moroccan dirham"},{isoCode:"MDL",name:"Moldovan leu"},{isoCode:"MKD",name:"Macedonian denar"},{isoCode:"MMK",name:"Myanmar kyat"},{isoCode:"MNT",name:"Mongolian tgrg"},{isoCode:"MOP",name:"Macanese pataca"},{isoCode:"MRO",name:"Mauritanian ouguiya"},{isoCode:"MUR",name:"Mauritian rupee"},{isoCode:"MVR",name:"Maldivian rufiyaa"},{isoCode:"MWK",name:"Malawian kwacha"},{isoCode:"MXN",name:"Mexican peso"},{isoCode:"MYR",name:"Malaysian ringgit"},{isoCode:"MZN",name:"Mozambican metical"},{isoCode:"NAD",name:"Namibian dollar"},{isoCode:"NGN",name:"Nigerian naira"},{isoCode:"NIO",name:"Nicaraguan crdoba"},{isoCode:"NOK",name:"Norwegian krone"},{isoCode:"NPR",name:"Nepalese rupee"},{isoCode:"NZD",name:"New Zealand dollar"},{isoCode:"PAB",name:"Panamanian balboa"},{isoCode:"PEN",name:"Peruvian sol"},{isoCode:"PGK",name:"Papua New Guinean kina"},{isoCode:"PHP",name:"Philippine peso"},{isoCode:"PKR",name:"Pakistani rupee"},{isoCode:"PLN",name:"Polish zoty"},{isoCode:"QAR",name:"Qatari riyal"},{isoCode:"RON",name:"Romanian leu"},{isoCode:"RSD",name:"Serbian dinar"},{isoCode:"RUB",name:"Russian ruble"},{isoCode:"SAR",name:"Saudi riyal"},{isoCode:"SBD",name:"Solomon Islands dollar"},{isoCode:"SCR",name:"Seychelles rupee"},{isoCode:"SEK",name:"Swedish krona"},{isoCode:"SGD",name:"Singapore dollar"},{isoCode:"SHP",name:"Saint Helena pound"},{isoCode:"SLL",name:"Sierra Leonean leone"},{isoCode:"SOS",name:"Somali shilling"},{isoCode:"SRD",name:"Surinamese dollar"},{isoCode:"STD",name:"So Tom and Prncipe dobra"},{isoCode:"SZL",name:"Salvadoran coln"},{isoCode:"THB",name:"Thai baht"},{isoCode:"TJS",name:"Tajikistani somoni"},{isoCode:"TOP",name:"Tongan paanga"},{isoCode:"TRY",name:"Turkish lira"},{isoCode:"TTD",name:"Trinidad and Tobago dollar"},{isoCode:"TWD",name:"New Taiwan dollar"},{isoCode:"TZS",name:"Tanzanian shilling"},{isoCode:"UAH",name:"Ukrainian hryvnia"},{isoCode:"UYU",name:"Uruguayan peso"},{isoCode:"UZS",name:"Uzbekistan som"},{isoCode:"WST",name:"Samoan tala"},{isoCode:"XCD",name:"East Caribbean dollar"},{isoCode:"YER",name:"Yemeni rial"},{isoCode:"ZAR",name:"South African rand"},{isoCode:"ZMW",name:"Zambian kwacha"}];function $j(){return{top:Jv.slice(0,5),other:Jv.slice(5)}}function Xv({showName:n=!1}={}){return Object.values($j()).map((e,t)=>({label:"",key:t.toString(),options:e.map(({isoCode:r,name:i})=>({value:r,label:n?`${r} - ${i}`:r}))}))}function to(n){return n?Intl.NumberFormat("en",{currency:n,style:"currency"}).format(0).replace(/[\d\s.]/g,""):""}function $i(n){return n/100}function Fj(n){switch(n?.toUpperCase()){case"AED":return 4;case"BGN":return 2;case"CZK":return 30;case"DKK":return 5;case"HKD":return 8;case"HUF":return 250;case"JPY":return 100;case"MXN":return 20;case"MYR":return 4;case"NOK":return 6;case"PLN":return 4;case"RON":return 4;case"SEK":return 6;case"THB":return 20;default:return 1}}function Hj(n,e,{allowZero:t=!0,maxAmount:r}={}){if(n===void 0||!e)return;const i=to(e),s=Fj(e);if(!t&&n===0)return`Amount must be at least ${i}${s}.`;if(n!==0&&n<s*100)return`Non-zero amount must be at least ${i}${s}.`;if(r&&n!==0&&n>r*100)return`Suggested amount cannot be more than ${i}${r}.`}const FS=n=>{const e="/ghost/#/members",t=`offer_redemptions:[${n}]`;return`${e}?filter=${encodeURIComponent(t)}`},Vj=n=>n==="month"?"monthly":"yearly",Uj=n=>n==="once"?"First payment":n==="repeating"?"Repeating":"Forever",HS=(n,e,t,r,i)=>{let s="",o="";const a=t==="month"?i?.monthly_price??0:i?.yearly_price??0;let l=a;const c=h=>parseFloat(h.toFixed(2));let u=to(r)+Sn(c($i(a)));switch(n){case"percent":s="text-green",o=e+"% off",l=a-a*e/100;break;case"fixed":s="text-blue",o=Sn(c($i(e)))+" "+r+" off",l=a-e;break;case"trial":s="text-pink",o=e+" days free",u="";break}l<0&&(l=0);const d=to(r)+Sn(c($i(l)));return{discountColor:s,discountOffer:o,originalPriceWithCurrency:u,updatedPriceWithCurrency:d}},VS=({offerCode:n})=>{const[e,t]=x.useState(!1),{siteData:r}=Pe(),i=s=>{s?.stopPropagation();const o=`${U2(r)}${n}`;navigator.clipboard.writeText(o),t(!0),setTimeout(()=>t(!1),2e3)};return f.jsx(th,{containerClassName:"group-hover:opacity-100 opacity-0 inline-flex items-center -mr-1 justify-center leading-none w-5 h-5",content:e?"Copied":"Copy link",size:"sm",children:f.jsx(ne,{color:"clear",hideLabel:!0,icon:e?"check-circle":"hyperlink-circle",iconColorClass:e?"text-green w-[14px] h-[14px]":"w-[14px] h-[14px]",label:e?"Copied":"Copy",unstyled:!0,onClick:i})})},Qv=({title:n="No offers found",description:e,buttonAction:t,buttonLabel:r})=>f.jsxs("div",{className:"flex h-full grow flex-col items-center justify-center text-center",children:[f.jsx(ve,{className:"-mt-14",colorClass:"text-grey-700 -mt-6",name:"tags-block",size:"xl"}),f.jsx("h1",{className:"mt-6 text-2xl",children:n}),f.jsx("p",{className:"mt-3 max-w-[420px] text-[1.6rem]",children:e}),f.jsx(ne,{className:"mt-8",color:"grey",label:r,onClick:t})]}),NB=()=>{const n=rr(),{updateRoute:e}=be(),{data:{offers:t=[]}={},isFetching:r}=gS(),{data:{tiers:i}={}}=Mu(),s=t.filter(w=>{const C=i?.find(A=>A.id===w?.tier.id);return w.status==="active"&&C&&C.active===!0}),o=t.filter(w=>{const C=i?.find(A=>A.id===w?.tier.id);return w.status==="archived"||C&&C.active===!1});let a=[{id:"active",title:"Active"},{id:"archived",title:"Archived"}];const{sortingState:l,setSortingState:c}=E_(),u=l?.find(w=>w.type==="offers"),[d,h]=x.useState("active"),p=u?.option||"date-added",g=u?.direction||"desc",m=w=>{sessionStorage.setItem("editOfferPageSource","offersIndex"),e(`offers/edit/${w}`)},v=t.sort((w,C)=>{const A=g==="desc"?-1:1;switch(p){case"name":return A*w.name.localeCompare(C.name);case"redemptions":return A*(w.redemption_count-C.redemption_count);default:return A*((w.created_at?new Date(w.created_at).getTime():0)-(C.created_at?new Date(C.created_at).getTime():0))}}),b=vS(i||[]),y=f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"m-0 w-full",children:[d==="active"&&s.length>0||d==="archived"&&o.length>0?f.jsxs("tr",{className:"border-b border-b-grey-300 dark:border-grey-800",children:[f.jsxs("th",{className:"px-5 py-2.5 pl-0 text-xs font-normal text-grey-700",children:[d==="active"?s.length:o.length," ",d==="active"?s.length!==1?"offers":"offer":o.length!==1?"offers":"offer"]}),f.jsx("th",{className:"px-5 py-2.5 text-xs font-normal text-grey-700",children:"Terms"}),f.jsx("th",{className:"px-5 py-2.5 text-xs font-normal text-grey-700",children:"Price"}),f.jsx("th",{className:"px-5 py-2.5 text-xs font-normal text-grey-700",children:"Redemptions"}),f.jsx("th",{className:"min-w-[80px] px-5 py-2.5 pr-0 text-xs font-normal text-grey-700"})]}):null,v.filter(w=>{const C=i?.find(A=>A.id===w?.tier.id);return d==="active"&&w.status==="active"&&C&&C.active===!0||d==="archived"&&(w.status==="archived"||C&&C.active===!1)}).map(w=>{const C=i?.find(O=>O.id===w?.tier.id);if(!C)return null;const A=C?.active===!1,{discountOffer:k,originalPriceWithCurrency:I,updatedPriceWithCurrency:D}=HS(w.type,w.amount,w.cadence,w.currency||"USD",C);return f.jsxs("tr",{className:"group relative scale-100 border-b border-b-grey-200 dark:border-grey-800","data-testid":"offer-item",children:[f.jsx("td",{className:`${A?"opacity-50":""} p-0`,children:f.jsxs("a",{className:`block ${A?"cursor-default select-none":"cursor-pointer"} p-5 pl-0`,onClick:A?()=>{}:()=>m(w?.id?w.id:""),children:[f.jsx("span",{className:"font-semibold",children:w?.name}),f.jsx("br",{}),f.jsxs("span",{className:"text-sm text-grey-700",children:[C.name," ",Vj(w.cadence)]})]})}),f.jsx("td",{className:`${A?"opacity-50":""} whitespace-nowrap p-0 text-sm`,children:f.jsxs("a",{className:`block ${A?"cursor-default select-none":"cursor-pointer"} p-5`,onClick:A?()=>{}:()=>m(w?.id?w.id:""),children:[f.jsx("span",{className:"text-[1.3rem] font-medium uppercase",children:k}),f.jsx("br",{}),f.jsx("span",{className:"text-grey-700",children:w.type!=="trial"?Uj(w.duration):"Trial period"})]})}),f.jsx("td",{className:`${A?"opacity-50":""} whitespace-nowrap p-0 text-sm`,children:f.jsxs("a",{className:`block ${A?"cursor-default select-none":"cursor-pointer"} p-5`,onClick:A?()=>{}:()=>m(w?.id?w.id:""),children:[f.jsx("span",{className:"font-medium",children:D})," ",w.type!=="trial"?f.jsx("span",{className:'relative text-xs text-grey-700 before:absolute before:-inset-x-0.5 before:top-1/2 before:rotate-[-20deg] before:border-t before:content-[""]',children:I}):null]})}),f.jsx("td",{className:`${A?"opacity-50":""} w-[120px] whitespace-nowrap p-0 text-sm`,children:f.jsx("a",{className:`block ${A?"cursor-default select-none":"cursor-pointer"} p-5 ${w.redemption_count===0?"":"hover:underline"}`,href:w.redemption_count>0?FS(w.id?w.id:""):void 0,onClick:w.redemption_count===0?A?()=>{}:()=>m(w?.id?w.id:""):()=>{},children:w.redemption_count})}),f.jsx("td",{className:`${A?"opacity-50":""} w-[120px] whitespace-nowrap p-5 pr-8 text-right text-sm leading-none`,children:A?null:f.jsx(VS,{offerCode:w.code})}),A?f.jsxs("div",{className:"absolute right-0 top-[11px] whitespace-nowrap rounded-sm bg-black px-2 py-0.5 text-xs leading-normal text-white opacity-0 transition-all group-hover:opacity-100 dark:bg-grey-950",children:["This offer is disabled, because ",f.jsx("br",{})," it is tied to an archived tier."]}):null]})})]})}),S=[{key:"cancel-modal",label:"Close",onClick:()=>{n.remove(),e("offers")}},{key:"new-offer",icon:"add",label:"New offer",color:"green",onClick:()=>{b.length===0?er({type:"info",title:"You must have an active tier to create an offer."}):e("offers/new")}}];return f.jsx(Rr,{afterClose:()=>{e("offers")},animate:!1,backDropClick:!1,cancelLabel:"",footer:!1,height:"full",size:"lg",testId:"offers-modal",title:"Offers",topRightContent:f.jsx(_s,{buttons:S}),width:1140,children:f.jsxs("div",{className:"flex h-full flex-col pt-8",children:[f.jsx("header",{children:f.jsx(Gn,{selectedTab:d,tabs:a,topRightContent:d==="active"&&s.length>0||d==="archived"&&o.length>0?f.jsx("div",{className:"pt-1",children:f.jsx(cR,{direction:g,items:[{id:"date-added",label:"Date added",selected:p==="date-added",direction:g},{id:"name",label:"Name",selected:p==="name",direction:g},{id:"redemptions",label:"Redemptions",selected:p==="redemptions",direction:g}],position:"end",triggerButtonProps:{link:!0},onDirectionChange:w=>{c?.([{type:"offers",option:p,direction:w==="asc"?"desc":"asc"}])},onSortChange:w=>{c?.([{type:"offers",option:w,direction:g}])}})}):null,onTabChange:h})}),d==="active"&&s.length===0&&!r?f.jsx(Qv,{buttonAction:()=>e("offers/new"),buttonLabel:"Create an offer",description:"Grow your audience with discounts or free trials."}):null,d==="archived"&&o.length===0&&!r?f.jsx(Qv,{buttonAction:()=>h("active"),buttonLabel:"Back to active",description:"All archived offers will be shown here."}):null,y]})})},zj=({offerTitle:n,tier:e,cadence:t,redemptions:r,type:i,amount:s,currency:o,offerId:a,offerCode:l,goToOfferEdit:c})=>{const{discountOffer:u}=HS(i,s,t,o||"USD",e);return f.jsxs("div",{className:"group flex h-full cursor-pointer flex-col justify-between gap-4 break-words rounded-sm border border-transparent bg-grey-100 p-5 transition-all hover:border-grey-100 hover:bg-grey-75 hover:shadow-sm min-[900px]:min-h-[187px] dark:bg-grey-950 dark:hover:border-grey-800",onClick:()=>c(a),children:[f.jsx("span",{className:"text-[1.65rem] font-bold leading-tight tracking-tight text-black dark:text-white",children:n}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-sm font-semibold uppercase",children:u}),f.jsxs("div",{className:"flex gap-1 text-xs",children:[f.jsx("span",{className:"font-semibold",children:e.name}),f.jsx("span",{className:"text-grey-700",children:t==="month"?"monthly":"yearly"})]}),f.jsxs("div",{className:"mt-2 flex items-end justify-between",children:[f.jsxs("a",{className:`text-xs text-grey-700 hover:text-black ${r===0?"pointer-events-none":"hover:underline"}`,"data-test-offer":n,href:FS(a),children:[Sn(r)," ",r===1?"redemption":"redemptions"]}),f.jsx(VS,{offerCode:l})]})]})]})},Wj=({keywords:n})=>{const{updateRoute:e}=be(),{settings:t,config:r}=Pe(),{data:{offers:i=[]}={}}=gS(),{data:{tiers:s}={}}=Mu(),o=vS(s||[]),a=i.map(v=>({...v,tier:o.find(b=>b.id===v.tier.id)})).filter(v=>v.status==="active"&&!!v.tier);a.sort((v,b)=>{const y=v.created_at?new Date(v.created_at):new Date(0);return(b.created_at?new Date(b.created_at):new Date(0)).getTime()-y.getTime()});const l=a.slice(0,3),c=()=>{e("offers/edit")},u=()=>{e("offers/new")},d=()=>{e("/tiers")},h=v=>{sessionStorage.setItem("editOfferPageSource","offers"),e(`offers/edit/${v}`)};let p="Manage offers",g=c,m="Learn more";return i.length>0?(p="Manage offers",g=c):o.length===0&&i.length===0?(p="",g=d,m=""):o.length>0&&i.length===0&&(p="Add offer",g=u),f.jsxs(Se,{customButtons:f.jsx(ne,{className:"mt-[-5px]",color:"clear",disabled:!gr(t,r),label:p,size:"sm",onClick:g}),description:f.jsxs(f.Fragment,{children:["Create discounts & coupons to boost new subscriptions. ",i.length===0&&f.jsx(f.Fragment,{children:f.jsx("a",{className:"text-green",href:"https://ghost.org/help/offers",rel:"noopener noreferrer",target:"_blank",children:m})})]}),keywords:n,navid:"offers",testId:"offers",title:"Offers",children:[l.length>0?f.jsxs("div",{children:[f.jsx("div",{className:"grid grid-cols-1 gap-4 min-[900px]:grid-cols-3",children:l.map(v=>f.jsx(zj,{amount:v.amount,cadence:v.cadence,currency:v.currency||"USD",goToOfferEdit:h,offerCode:v.code,offerId:v.id,offerTitle:v.name,redemptions:v.redemption_count,tier:v.tier,type:v.type},v.id))}),i.length>3&&f.jsx("div",{className:"mt-4 border-t border-t-grey-200 pt-2",children:f.jsxs("span",{className:"text-xs text-grey-700 dark:text-grey-600",children:[i.length," offers in total"]})})]}):null,o.length===0&&i.length===0?f.jsxs("div",{children:[f.jsx("span",{children:"You must have an active tier to create an offer."})," ",f.jsx(ne,{className:"font-normal",color:"green",label:"Manage tiers",link:!0,linkWithPadding:!0,onClick:d})]}):""]})},qj=ke(Wj,"Portal settings"),Gj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZZSURBVHgBzVpNcFNVFD73PdoitEkc21IGCnHnTHEmyMqyAfyhcQWOI+4Kg5aVAgqOC37a0YUCSgszzrSg1p1lHGEHbmxZNIzjOJSR7nAIrVMDyeIlVARjcjnfS194eXl/SdPSbybJfffe93L+7jnnnvsEVYgQo66uLkykRkgREZIiSEKGBVEY41KKEAkK2d4sSRNCapKExhea4F9J8g6P3JY5eSOVSoxRhRB+JulENzzTzc0dTHDEkcCaQI5RXhnOqrmrWiIR95rtykBzc9sWoYrjPG0LPQ1IGs4q+T43RmwZKEh8JRMuD9CSgOxP3v37oN1IGQOhtrZwnVQucjNCSwvxrMhvtWqjhIGC5Fdcp7kFWS3a29fyp53W8SedTlM6k6FMOkM3JydpnpjIPnqwVWMYHcvMo3NmE6YKsWFDB0W7uqiz82XazB83xGLXaDwWox9GLtD09F9UISLsTJhGrWhORQ3Mmc5tqgAg9tChjzyJdgKYOXHqS/23Ekg2pVSi4HKLDLS0rh4mIbr9PADmcWbgdNWEWwFtnGRG/GtEjvGi3oqWzkAl0o92baezZ/opEAiUjcHWJ29O0h/8mWR7n5qeZqKmdYYNM3NiGvOOHD1Ol6/8TH7Aa+FZrAWdgeZVqw9wVDztddNhNpfDhz4s6zdM4SYTnmEm3ABm8Ix3dr1tO37y1Fe6NrwgJfWl7s306gy0rFo96hWs7IiHpI8eO16xDQNg5OJPP7KnWls25o+JghmpaK5sDAy7TYXZnDzxeUnf0NA52r1nbzWeRAc0NXLhArW2turmZQbMDNq8detPlyeIcH2dOiAK6YIy6jQNkrrEkmo3SQrEHznWS7UCHILVpNIcN7a9+pq7gPLZjQqpwjXiwmzMxGNh1pJ4AGYIiZsRDAbo7EC/6315qo8okpSw0wQEJqtkYJ+1BqTdzeY4ZZE2/r/TxVUrSj6iCCnXO03AwjUD0h9hn70QgBv9YH957vixhYYS8F5E4Q2GbW4P27f67IUi3gC8GWKBGdBAu42nAiRvpBR9B2WDaHR7Wd94Fe6yUgydO1/2P04xg2NXWFEcdleImlZYF9pCwRoDNnd2Os5lDdgzYDUf2KhXlK0VChnrEy10dHQ4TQ0pdvtbuxuqDVjVwqwFuFSHdcAM2AA3WIEcfjGBZDBt0jicih0U8onFWMBmIDZMT015zvPNwGItYDPSmfuec2wZAPfW68VawJXClgErsZlMmp4GgoGmYtvJAmwZgMv0s4AWEoVd3Aa97WIBGscxituNxMavWR5oH84XCvt69hbbLg5Ec1zE49dK3WY02kWLBUg/2hUtXl++csVpqqbkuWJsN4LEzWxGb3QtHgOffdpXovGYQwziyraugbjdIOxuZGSkeO2Vm9cKSOGxhTXgVgATUsQVKcQdp4cNDn1TogXX3LwGgOSthQO3zb0kuqOubGx8gdNSW/vAyl/e0FDMBmGbwWCQfhkdo1rC2Hdb1xmId6sTqSLXr65oalzODOx2moTMEKk1qgfApk0vETLxWI1Si56e9+jc4Ndlrhq7P1Q93CDzuS/U+mXNmros94nbREgc0jGSvEKqPT8m8Izvv/tW36w0sJatxO988y2v6K8l79096LuwhdoNClFBU0kRAW8H/1ElqbZXQRhrDsR75V7sgcZSXNjS4wBvK6+SB/DAba+8XlI5gNp//+1X3X4hSbt6KYD+fT3v6gLAx4l4Q/J+Ekfeyw/rv/hqaVnDJ47yOvmAV2XaqI+CmEAgSC+y5vxEcZjj+1yV8KtNVeSfT/BpzZPyug8zMmMXSxw+e908UwyYDLzN0NB5/zfx4V/y3sweNIsMNLdxiVE6lxidUC0j0BRShEEmvNJU3ZA+2iVnZM+tWtOvkNxPVQCLHJEaLhcL3VqwhWngjAxbUxBfrQeTgsvqiZle49pyyBcO1dX/N8q9S+2E0sBE8u7MRnNHSTaqaXFNVfI72cYmaOlhgk1np7VTtXbMzs5qD/65P7iiqUmwerbQkoAcyD76d08qlUpYR1xfNWjjs7NcXvT6PfyrNRCsOOXsM04k7eDrZQ+dEdYGB7xuscAvexSIFldFLnspmUx6mrIvBqxA4MuLfJiTwAintOs5KobZPYT0Srfb6zYFEuP6txQaz+NANPe6jZA3/n/4cMJ8Cu8HjwHQPddRjKN7RgAAAABJRU5ErkJggg==",qh=({title:n,favicon:e,featured_image:t,isGhostSite:r})=>{const[i,s]=x.useState(e||t||null),o=()=>{s(null)};if(!i)return f.jsx("div",{className:"relative size-6 shrink-0 rounded-sm"});const a=r?"This is a Ghost site that supports one-click subscribe":"";return f.jsxs("div",{className:"dark:group-hover/table-row:bg-grey-950 relative size-6 shrink-0 rounded-sm",title:a,children:[f.jsx("img",{alt:n,className:"size-6 rounded-sm",src:i,onError:o}),r&&f.jsx("img",{alt:"Ghost Logo",className:"absolute bottom-[-3px] right-[-3px] size-[14px]",src:Gj})]})},Ao="RecommendationResponseType",Kj=Uc({dataType:Ao,path:"/recommendations/",returnData:n=>{const{pages:e}=n;let t=e.flatMap(r=>r.recommendations);return t=t.filter((r,i)=>t.findIndex(({id:s})=>s===r.id)===i),{recommendations:t,meta:e[e.length-1].meta}}}),Zj=Ve({method:"DELETE",path:n=>`/recommendations/${n.id}/`,invalidateQueries:{dataType:Ao}}),Yj=Ve({method:"PUT",path:n=>`/recommendations/${n.id}/`,body:n=>({recommendations:[n]}),invalidateQueries:{dataType:Ao}}),PB=Ve({method:"POST",path:()=>"/recommendations/",body:({...n})=>({recommendations:[n]}),invalidateQueries:{dataType:Ao}}),LB=Ve({method:"POST",path:()=>"/recommendations/check/",body:n=>({recommendations:[{url:n.toString()}]})}),Jj=Uc({dataType:Ao,path:"/incoming_recommendations/",returnData:n=>{const{pages:e}=n;let t=e.flatMap(r=>r.recommendations);return t=t.filter((r,i)=>t.findIndex(({id:s})=>s===r.id)===i),{recommendations:t,meta:e[e.length-1].meta}}}),Xj=({incomingRecommendation:n,stats:e})=>{const{updateRoute:t}=be(),r=x.useMemo(()=>{let a=n.url;try{a=new URL(n.url).hostname.replace(/^www\./,"")}catch{}return e.reduce((l,c)=>c.source===a?l+c.signups:l,0)},[e,n.url]),i=()=>{t({route:`recommendations/add?url=${n.url}`})},s=()=>{window.open(n.url,"_blank")},o=r===1?"free member":"free members";return f.jsxs(cu,{action:!n.recommending_back&&f.jsx("div",{className:"flex items-center justify-end",children:f.jsx(ne,{color:"green",label:"Recommend back",size:"sm",link:!0,onClick:i})}),testId:"incoming-recommendation-list-item",hideActions:!0,children:[f.jsx($n,{className:"w-80",onClick:s,children:f.jsx("div",{className:"group flex items-center gap-3 hover:cursor-pointer",children:f.jsx("div",{className:"flex grow flex-col",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(qh,{favicon:n.favicon,featured_image:n.featured_image,title:n.title||n.url}),f.jsx("span",{className:"line-clamp-1 font-medium",children:n.title||n.url})]})})})}),f.jsx($n,{className:"hidden w-auto whitespace-nowrap text-left align-middle md:!visible md:!table-cell",padding:!1,onClick:s,children:r===0?f.jsx("span",{className:"text-grey-500 dark:text-grey-900",children:"-"}):f.jsx("div",{className:"mr-2",children:f.jsx("span",{children:Sn(r)})})}),f.jsx($n,{className:"hidden w-[1%] whitespace-nowrap align-middle md:!visible md:!table-cell",onClick:s,children:r===0?null:f.jsx("div",{className:"-mt-px text-left",children:f.jsx("span",{className:"-mb-px inline-block min-w-[60px] whitespace-nowrap text-left text-sm lowercase text-grey-700",children:o})})}),n.recommending_back&&f.jsx($n,{className:"w-[1%] whitespace-nowrap group-hover/table-row:visible md:invisible",children:f.jsx("div",{className:"mt-1 whitespace-nowrap text-right text-sm text-grey-700",children:"Recommending"})})]})},Qj=({incomingRecommendations:n,stats:e,pagination:t,showMore:r,isLoading:i})=>i||n.length?f.jsx(Ni,{isLoading:i,pagination:t,showMore:r,hintSeparator:!0,children:n.map(s=>f.jsx(Xj,{incomingRecommendation:s,stats:e},s.id))}):f.jsx(ei,{children:f.jsx("span",{className:"max-w-[40ch] text-center",children:"No ones recommended you yet. Once they do, youll find them here along with how many memberships theyve driven."})}),eb=function(n,e,t){const r={...n};switch(e){case"title":t?delete r.title:r.title="Title is required";break;case"description":t&&t.length>200?r.description="Description cannot be longer than 200 characters":delete r.description;break;default:const i=e;throw new Error(`Unknown field ${i}`)}return r},US=function(n){let e={};return e=eb(e,"title",n.title),e=eb(e,"description",n.description),e},e6=({showURL:n,formState:e,updateForm:t,errors:r,clearError:i,setErrors:s})=>{const[o,a]=X.useState(e?.description?.length||0),l=o>200?"text-red":"text-green",c=X.useRef(!1);return X.useEffect(()=>{c.current||(c.current=!0,s(US(e)))},[e,s]),f.jsxs(kC,{marginBottom:!1,marginTop:!0,children:[f.jsxs("div",{children:[f.jsx(ft,{className:"mb-2 block text-2xs font-semibold uppercase tracking-wider",grey:!0,level:6,children:"Preview"}),f.jsx("div",{className:"-mx-8 flex items-center justify-center overflow-hidden border-y border-grey-100 bg-grey-50 px-7 py-4 dark:border-grey-950 dark:bg-black",children:f.jsx("div",{className:"w-full rounded bg-white py-3 shadow",children:f.jsx("div",{className:"",children:f.jsxs("a",{className:"flex items-center justify-between bg-white px-5 py-3",href:e.url,rel:"noopener noreferrer",target:"_blank",children:[f.jsxs("div",{className:"flex flex-col gap-[2px]",children:[f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(qh,{...e}),f.jsx("span",{className:"text-[1.6rem] font-semibold text-grey-900",children:e.title})]}),e.description&&f.jsx("span",{className:"pl-[31px] text-[1.35rem] leading-snug text-grey-700",children:e.description})]}),e.one_click_subscribe&&f.jsx("span",{className:"flex whitespace-nowrap pl-6 text-md font-semibold text-green",children:"Subscribe"})]})})})}),e.one_click_subscribe&&f.jsx(qn,{children:"This is a Ghost site, so your readers can subscribe with just one click"})]}),n&&f.jsx(PI,{disabled:!0,title:"URL",value:e.url,onChange:u=>t(d=>({...d,url:u||""}))}),f.jsx(tt,{autoFocus:!0,error:!!r.title,hint:r.title,maxLength:2e3,title:"Title",value:e.title??"",onChange:u=>{i?.("title"),t(d=>({...d,title:u.target.value}))}}),f.jsx(yx,{error:!!r.description,hint:f.jsxs(f.Fragment,{children:["Max: ",f.jsx("strong",{children:"200"})," characters. Youve used ",f.jsx("strong",{className:l,children:o})]}),rows:4,title:"Short description",value:e.description??"",onChange:u=>{i?.("description"),a(u.target.value.length),t(d=>({...d,description:u.target.value}))}})]})},t6=({recommendation:n,animate:e})=>{const t=rr(),{updateRoute:r}=be(),{mutateAsync:i}=Yj(),{mutateAsync:s}=Zj(),o=vt(),{formState:a,updateForm:l,handleSave:c,errors:u,clearError:d,setErrors:h,okProps:p}=uh({initialState:{...n},savingDelay:500,savedDelay:500,onSave:async m=>{await i(m)},onSaveError:o,onValidate:m=>US(m)});let g={label:"Delete",link:!0,color:"red",size:"sm",onClick:()=>{t.remove(),Ye.show(Gr,{title:"Delete recommendation",prompt:f.jsx(f.Fragment,{children:f.jsxs("p",{children:["Your recommendation ",f.jsx("strong",{children:n.title})," will no longer be visible to your audience."]})}),okLabel:"Delete",onOk:async m=>{try{await s(n),m?.remove()}catch(v){er({title:"Failed to delete the recommendation",message:"Please try again later.",type:"error"}),o(v,{withToast:!1})}}})}};return f.jsx(Rr,{afterClose:()=>{r("recommendations")},animate:e??!0,backDropClick:!1,buttonsDisabled:p.disabled,cancelLabel:"Close",leftButtonProps:g,okColor:p.color,okLabel:p.label||"Save",size:"sm",testId:"edit-recommendation-modal",title:"Edit recommendation",stickyFooter:!0,onOk:async()=>{z2();try{await c({force:!0})}catch{er({title:"Something went wrong",type:"error",message:"Please try again later."})}},children:f.jsx(e6,{clearError:d,errors:u,formState:a,setErrors:h,showURL:!0,updateForm:l})})},n6=Ye.create(t6),r6=({recommendation:n})=>{const{route:e}=be(),t=()=>{Ye.show(n6,{pathName:e,animate:!1,recommendation:n})},r=n.one_click_subscribe,i=r&&!!n.count?.subscribers,s=(i?n.count?.subscribers:n.count?.clicks)||0,o=s===1?"signup":"signups",a=s===1?"click":"clicks";return f.jsxs(cu,{className:"group hover:cursor-pointer",testId:"recommendation-list-item",onClick:t,children:[f.jsx($n,{className:"w-80",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(qh,{isGhostSite:r,...n}),f.jsx("span",{className:"line-clamp-1 font-medium",children:n.title})]})}),f.jsx($n,{className:"hidden w-auto whitespace-nowrap text-left align-middle md:!visible md:!table-cell",children:s===0?f.jsx("span",{className:"text-grey-500 dark:text-grey-900",children:"-"}):f.jsx(f.Fragment,{children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"mr-2",children:f.jsx("span",{children:Sn(s)})}),f.jsxs("div",{className:"text-sm lowercase text-grey-700",children:[f.jsx("span",{children:i?o:a}),f.jsx("span",{className:"invisible group-hover:visible",children:" from you"})]})]})})})]})},i6=({recommendations:n,pagination:e,showMore:t,isLoading:r})=>{const{siteData:i}=Ot(),s=`${i?.url.replace(/\/$/,"")}/#/portal/recommendations`,{updateRoute:o}=be(),a=()=>{o("recommendations/add")},[l,c]=x.useState(!1),u=()=>{navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)};return r||n.length?f.jsx(Ni,{hint:f.jsxs("span",{className:"flex items-center gap-1",children:["Shared with new members after signup, or anytime using ",f.jsx(dc,{href:s,target:"_blank",children:"this link"}),f.jsx(th,{containerClassName:"leading-none",content:l?"Copied":"Copy link",size:"sm",children:f.jsx(ne,{color:"clear",hideLabel:!0,icon:l?"check-circle":"duplicate",iconColorClass:l?"text-green w-[14px] h-[14px]":"text-grey-600 hover:opacity-80 w-[14px] h-[14px]",label:l?"Copied":"Copy",unstyled:!0,onClick:u})})]}),isLoading:r,pagination:e,showMore:t,hintSeparator:!0,children:n&&n.map(d=>f.jsx(r6,{recommendation:d},d.id))}):f.jsxs(ei,{children:[f.jsx(ne,{color:"grey",label:"Add first recommendation",size:"sm",onClick:()=>{a()}}),f.jsxs("span",{className:"mt-2 max-w-[40ch] text-center text-xs",children:["Need inspiration? ",f.jsx(dc,{href:"https://ghost.org/explore",target:"_blank",children:"Explore thousands of sites"})]})]})},s6=({keywords:n})=>{const{saveState:e,handleSave:t}=Ot(),{data:{meta:r,recommendations:i}={},isLoading:s,hasNextPage:o,fetchNextPage:a}=Kj({searchParams:{include:"count.clicks,count.subscribers",order:"created_at desc",limit:"5"},getNextPageParams:(I,D)=>{if(!I.meta)return;const{limit:O,page:T,pages:N}=I.meta.pagination;if(T>=N)return;const L=typeof O=="number"&&O<100?1:T+1;return{...D,page:L.toString(),limit:"100"}},keepPreviousData:!0}),l={hasMore:!!o,loadMore:a},{data:{recommendations:c,meta:u}={},isLoading:d,hasNextPage:h,fetchNextPage:p}=Jj({searchParams:{limit:"5",order:"created_at desc"},getNextPageParams:(I,D)=>{if(!I.meta)return;const{limit:O,page:T,pages:N}=I.meta.pagination;if(T>=N)return;const L=typeof O=="number"&&O<100?1:T+1;return{...D,page:L.toString(),limit:"100"}},keepPreviousData:!0}),{data:{stats:g}={},isLoading:m}=tC({}),v={hasMore:!!h,loadMore:p},[b,y]=x.useState("your-recommendations"),S=[{id:"your-recommendations",title:"Your recommendations",counter:r?.pagination?.total,contents:f.jsx(i6,{isLoading:s,recommendations:i??[],showMore:l})},{id:"recommending-you",title:"Recommending you",counter:u?.pagination?.total,contents:f.jsx(Qj,{incomingRecommendations:c??[],isLoading:d||m,showMore:v,stats:g??[]})}],w=f.jsx(f.Fragment,{children:"Recommend any publication that your audience will find valuable, and find out when others are recommending you."}),{updateRoute:C}=be(),A=()=>{C("recommendations/add")},k=f.jsx(ne,{className:"mt-[-5px] hidden md:!visible md:!block",color:"clear",label:"Add recommendation",size:"sm",onClick:()=>{A()}});return f.jsxs(Se,{beta:!0,customButtons:k,description:w,keywords:n,navid:"recommendations",saveState:e,testId:"recommendations",title:"Recommendations",onSave:t,children:[f.jsx("div",{className:"flex justify-center rounded border border-green px-4 py-2 md:hidden",children:f.jsx(ne,{color:"light-grey",label:"Add recommendation",link:!0,onClick:()=>{A()}})}),f.jsx(Gn,{selectedTab:b,tabs:S,onTabChange:y})]})},o6=ke(s6,"Recommendations"),nn={network:["growth","network","activitypub","blog","fediverse","sharing"],explore:["ghost explore","explore","growth","share","list","listing"],recommendations:["growth","recommendations","recommend","blogroll"],embedSignupForm:["growth","embeddable signup form","embeddable form","embeddable sign up form","embeddable sign up"],offers:["growth","offers","discounts","coupons","promotions"]},a6=()=>{const{config:n,settings:e}=Pe(),t=gr(e||[],n||{});return f.jsxs(ss,{keywords:Object.values(nn).flat(),title:"Growth",children:[f.jsx(Bj,{keywords:nn.network}),f.jsx(Lj,{keywords:nn.explore}),f.jsx(o6,{keywords:nn.recommendations}),f.jsx(Tj,{keywords:nn.embedSignupForm}),t&&f.jsx(qj,{keywords:nn.offers})]})},tb=[{value:"all",label:"Anyone can sign up",hint:"All visitors will be able to subscribe and sign in"},{value:"paid",label:"Paid-members only",hint:"A paid Stripe subscription is required to sign up"},{value:"invite",label:"Invite-only",hint:"People can sign in but won't be able to sign up"},{value:"none",label:"Nobody",hint:"Disable all member features, including newsletters"}],nb=[{value:"public",label:"Public",hint:"All site visitors to your site, no login required"},{value:"members",label:"Members only",hint:"All logged-in members"},{value:"paid",label:"Paid-members only",hint:"Only logged-in members with an active Stripe subscription"},{value:"tiers",label:"Specific tiers",hint:"Members with any of the selected tiers"}],rb=[{value:"all",label:"All members",hint:"Logged-in members"},{value:"paid",label:"Paid-members only",hint:"Only logged-in members with an active Stripe subscription"},{value:"off",label:"Nobody",hint:"Disable commenting completely"}],l6=({keywords:n})=>{const{localSettings:e,isEditing:t,saveState:r,handleSave:i,handleCancel:s,updateSetting:o,handleEditingChange:a}=Ot(),[l,c,u,d]=Te(e,["members_signup_access","default_content_visibility","default_content_visibility_tiers","comments_enabled"]),{data:{tiers:h}={}}=Mu(),p=[{label:"Active Tiers",options:h?.filter(({active:y})=>y).map(y=>({value:y.id,label:y.name}))||[]},{label:"Archived Tiers",options:h?.filter(({active:y})=>!y).map(y=>({value:y.id,label:y.name}))||[]}],g=JSON.parse(u||"[]"),m=p.flatMap(y=>y.options).filter(y=>g.includes(y.value)),v=y=>{const S=y.map(w=>w.value);o("default_content_visibility_tiers",JSON.stringify(S))},b=f.jsxs(Ze,{className:"gap-y-4",columns:1,children:[f.jsxs("div",{className:"flex flex-col content-center items-center gap-4 md:flex-row",children:[f.jsx("div",{className:"w-full min-w-[160px] max-w-none md:w-2/3 md:max-w-[320px]",children:"Who should be able to subscribe to your site?"}),f.jsx("div",{className:"w-full md:flex-1",children:f.jsx(zr,{options:tb,selectedOption:tb.find(y=>y.value===l),testId:"subscription-access-select",onSelect:y=>{o("members_signup_access",y?.value||null),a(!0)}})})]}),f.jsx(gt,{className:"border-grey-200 dark:border-grey-900"}),f.jsxs("div",{className:"flex flex-col content-center items-center gap-4 md:flex-row",children:[f.jsx("div",{className:"w-full min-w-[160px] max-w-none md:w-2/3 md:max-w-[320px]",children:"Who should have access to new posts?"}),f.jsx("div",{className:"w-full md:flex-1",children:f.jsx(zr,{options:nb,selectedOption:nb.find(y=>y.value===c),testId:"default-post-access-select",onSelect:y=>{o("default_content_visibility",y?.value||null),a(!0)}})})]}),c==="tiers"&&f.jsxs("div",{className:"flex flex-col content-center items-center gap-4 md:flex-row",children:[f.jsx("div",{className:"w-full min-w-[160px] max-w-none md:w-2/3 md:max-w-[320px]",children:"Select specific tiers"}),f.jsx("div",{className:"w-full md:flex-1",children:f.jsx(xx,{color:"black",options:p.filter(y=>y.options.length>0),testId:"tiers-select",values:m,onChange:y=>{v(y),a(!0)}})})]}),f.jsx(gt,{className:"border-grey-200 dark:border-grey-900"}),f.jsxs("div",{className:"flex flex-col content-center items-center gap-4 md:flex-row",children:[f.jsx("div",{className:"w-full min-w-[160px] max-w-none md:w-2/3 md:max-w-[320px]",children:"Who can comment on posts?"}),f.jsx("div",{className:"w-full md:flex-1",children:f.jsx(zr,{options:rb,selectedOption:rb.find(y=>y.value===d),testId:"commenting-select",title:"",onSelect:y=>{o("comments_enabled",y?.value||null),a(!0)}})})]})]});return f.jsx(Se,{description:"Set up default access options for subscription and posts",isEditing:t,keywords:n,navid:"members",saveState:r,testId:"access",title:"Access",hideEditButton:!0,onCancel:s,onEditingChange:a,onSave:i,children:b})},c6=ke(l6,"Access"),u6=({value:n,placeholder:e,nodes:t="DEFAULT_NODES",singleParagraph:r=!1,className:i,onChange:s})=>{const o=x.useCallback(a=>{if(s&&a&&typeof a=="object"){const l=JSON.stringify(a);l!==n&&s(l)}},[s,n]);return f.jsx(RC,{className:i,emojiPicker:!1,initialEditorState:n,nodes:t,placeholder:e,singleParagraph:r,onChange:o,children:()=>null})},Gh="AutomatedEmailsResponseType",d6=Qr({dataType:Gh,path:"/automated_emails/"}),f6=Ve({method:"POST",path:()=>"/automated_emails/",body:n=>({automated_emails:[n]}),updateQueries:{dataType:Gh,emberUpdateType:"createOrUpdate",update:Vf("automated_emails")}}),zS=Ve({method:"PUT",path:n=>`/automated_emails/${n.id}/`,body:n=>({automated_emails:[n]}),updateQueries:{dataType:Gh,emberUpdateType:"createOrUpdate",update:Uf("automated_emails")}}),h6=n=>{if(!n)return!0;try{const t=JSON.parse(n)?.root?.children;return!t||t.length===0||t.length===1&&t[0].type==="paragraph"&&(!t[0].children||t[0].children.length===0)}catch{return!0}},p6=Ye.create(({emailType:n="free",automatedEmail:e})=>{const{updateRoute:t}=be(),{data:r}=fb(),{mutateAsync:i}=zS(),[s,o]=x.useState(!1),[a,l]=x.useState(r?.email||""),c=x.useRef(null),u=vt(),{settings:d}=Pe(),[h,p]=Te(d,["title","default_email_address"]),{formState:g,saveState:m,updateForm:v,handleSave:b,okProps:y,errors:S}=uh({initialState:{subject:e?.subject||"Welcome",lexical:e?.lexical||""},savingDelay:500,onSave:async k=>{await i({...e,...k})},onSaveError:u,onValidate:k=>{const I={};return k.subject||(I.subject="A subject is required"),h6(k.lexical)&&(I.lexical="Email content is required"),I}});x.useEffect(()=>{r?.email&&l(r.email)},[r?.email]),x.useEffect(()=>{const k=I=>{c.current&&!c.current.contains(I.target)&&o(!1)};return s&&document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[s]);const w=x.useRef(b);x.useEffect(()=>{w.current=b},[b]),x.useEffect(()=>{const k=I=>{(I.metaKey||I.ctrlKey)&&I.key==="s"&&(I.preventDefault(),w.current({fakeWhenUnchanged:!0}))};return window.addEventListener("keydown",k),()=>{window.removeEventListener("keydown",k)}},[]);const C=e?.sender_email||p,A=e?.sender_reply_to||p;return f.jsx(Rr,{afterClose:()=>{t("memberemails")},dirty:m==="unsaved",footer:!1,header:!1,testId:"welcome-email-modal",children:f.jsxs("div",{className:"-mx-8 h-[calc(100vh-16vmin)] overflow-y-auto",children:[f.jsxs("div",{className:"sticky top-0 z-10 flex flex-col gap-2 border-b border-grey-100 bg-white p-5",children:[f.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[f.jsxs("h3",{className:"font-semibold",children:[n==="paid"?"Paid":"Free"," members welcome email"]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{ref:c,className:"relative",children:[f.jsx(ne,{className:"border border-grey-200 font-semibold hover:border-grey-300 hover:!bg-white",color:"clear",icon:"send",label:"Test",onClick:()=>o(!s)}),s&&f.jsxs("div",{className:"absolute right-0 top-full z-10 mt-2 w-[260px] rounded border border-grey-200 bg-white p-4 shadow-lg",children:[f.jsxs("div",{className:"mb-3",children:[f.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Send test email"}),f.jsx(tt,{className:"!h-[36px]",placeholder:"you@yoursite.com",value:a,onChange:k=>l(k.target.value)})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx(ne,{className:"w-full",color:"black",label:"Send",onClick:()=>{o(!1)}})})]})]}),f.jsx(ne,{color:y.color,disabled:y.disabled,label:y.label||"Save",onClick:async()=>await b({fakeWhenUnchanged:!0})})]})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-20 font-semibold",children:"From:"}),f.jsxs("div",{className:"flex grow items-center gap-1",children:[f.jsx("span",{children:e?.sender_name||h}),f.jsx("span",{className:"text-grey-700",children:`<${C}>`})]})]}),A!==C&&f.jsxs("div",{className:"flex items-center py-0.5",children:[f.jsx("div",{className:"w-20 font-semibold",children:"Reply-to:"}),f.jsx("div",{className:"grow text-grey-700",children:A})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-20 font-semibold",children:"Subject:"}),f.jsx("div",{className:"grow",children:f.jsx(tt,{className:"w-full",error:!!S.subject,hint:S.subject||"",maxLength:300,placeholder:`Welcome to ${h}`,value:g.subject,onChange:k=>v(I=>({...I,subject:k.target.value}))})})]})]}),f.jsxs("div",{className:"bg-grey-50 p-6",children:[f.jsx("div",{className:`mx-auto max-w-[600px] rounded border bg-white p-8 text-[1.6rem] leading-[1.6] tracking-[-0.01em] shadow-sm [&_a]:text-black [&_a]:underline [&_p]:mb-4 [&_strong]:font-semibold ${S.lexical?"border-red":"border-grey-200"}`,children:f.jsx(u6,{nodes:"DEFAULT_NODES",placeholder:"Write your welcome email content...",singleParagraph:!1,value:g.lexical,onChange:k=>v(I=>({...I,lexical:k}))},e?.id||"new")}),S.lexical&&f.jsx(qn,{className:"ml-8 mr-auto mt-2 max-w-[600px]",color:"red",children:S.lexical})]})]})})}),m6=`{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"Welcome! Thanks for subscribing  it's great to have you here.","type":"extended-text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"You'll now receive new posts straight to your inbox. You can also log in any time to read the ","type":"extended-text","version":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"full archive","type":"extended-text","version":1}],"direction":"ltr","format":"","indent":0,"type":"link","version":1,"rel":"noreferrer","target":null,"title":null,"url":"__GHOST_URL__/"},{"detail":0,"format":0,"mode":"normal","style":"","text":" or catch up on new posts as they go live.","type":"extended-text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"A little housekeeping: If this email landed in spam or promotions, try moving it to your primary inbox and adding this address to your contacts. Small signals like that help your inbox recognize that these messages matter to you.","type":"extended-text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"Have questions or just want to say hi? Feel free to reply directly to this email or any newsletter in the future.","type":"extended-text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1},{"children":[],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}`,g6=`{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"Welcome, and thank you for your support  it means a lot.","type":"extended-text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"As a paid member, you now have full access to everything: the complete archive, and any paid-only content going forward. New posts will land straight to your inbox, and you can log in any time to ","type":"extended-text","version":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"catch up","type":"extended-text","version":1}],"direction":"ltr","format":"","indent":0,"type":"link","version":1,"rel":"noreferrer","target":null,"title":null,"url":"__GHOST_URL__/"},{"detail":0,"format":0,"mode":"normal","style":"","text":" on anything you've missed.","type":"extended-text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"A little housekeeping: If this email landed in spam or promotions, try moving it to your primary inbox and adding this address to your contacts. Small signals like that help your inbox recognize that these messages matter to you.","type":"extended-text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"Have questions or just want to say hi? Feel free to reply directly to this email or any newsletter in the future.","type":"extended-text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}`,ib=({automatedEmail:n,emailType:e})=>{const{settings:t}=Pe(),[r,i,s]=Te(t,["accent_color","icon","title"]),o=r||"#F6414E",a=n.sender_name||s||"Your Site";return f.jsxs("div",{className:"mb-5 flex items-center justify-between gap-3 rounded-lg border border-grey-100 bg-grey-50 p-5",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[i?f.jsx("div",{className:"size-10 min-h-10 min-w-10 rounded-sm bg-cover bg-center",style:{backgroundImage:`url(${i})`}}):f.jsx("div",{className:"flex aspect-square size-10 items-center justify-center overflow-hidden rounded-full p-1 text-white",style:{backgroundColor:o},children:f.jsx("img",{className:"h-auto w-8",src:$S})}),f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold",children:a}),f.jsx("div",{className:"text-sm",children:n.subject})]})]}),f.jsx(ne,{className:"rounded-md border border-grey-200 font-semibold hover:shadow-xs",color:"white","data-testid":`${e}-welcome-email-edit-button`,icon:"pen",label:"Edit",onClick:()=>{Ye.show(p6,{emailType:e,automatedEmail:n})}})]})},v6=({keywords:n})=>{const{settings:e}=Pe(),[t]=Te(e,["title"]),{data:r,isLoading:i}=d6(),{mutateAsync:s}=f6(),{mutateAsync:o}=zS(),a=vt(),l=r?.automated_emails||[],c=l.find(g=>g.slug==="member-welcome-email-free"),u=l.find(g=>g.slug==="member-welcome-email-paid"),d=c?.status==="active",h=u?.status==="active",p=async g=>{const m=`member-welcome-email-${g}`,v=l.find(y=>y.slug===m),b=g==="free"?`Welcome to ${t||"our site"}`:"Welcome to your paid subscription";try{v?v.status==="active"?await o({...v,status:"inactive"}):await o({...v,status:"active"}):await s({name:g==="free"?"Welcome Email (Free)":"Welcome Email (Paid)",slug:m,subject:b,status:"active",lexical:g==="free"?m6:g6})}catch(y){a(y)}};return f.jsx(Se,{description:"Create and manage automated emails that are sent to your members.",keywords:n,navid:"memberemails",testId:"memberemails",title:"Welcome emails",children:f.jsxs(Ze,{className:"!gap-y-0",columns:1,children:[f.jsx(gt,{}),f.jsx(Kt,{checked:!!d,containerClasses:"items-center",direction:"rtl",disabled:i,gap:"gap-0",hint:"Email new free members receive when they join your site.",label:"Free members welcome email",labelClasses:"py-4 w-full",onChange:()=>p("free")},`free-${i?"loading":c?.status??"none"}`),c&&d&&f.jsx(ib,{automatedEmail:c,emailType:"free"}),f.jsx(gt,{}),f.jsx(Kt,{checked:!!h,containerClasses:"items-center",direction:"rtl",disabled:i,gap:"gap-0",hint:"Sent to new paid members as soon as they start their subscription.",label:"Paid members welcome email",labelClasses:"py-4 w-full",onChange:()=>p("paid")},`paid-${i?"loading":u?.status??"none"}`),u&&h&&f.jsx(ib,{automatedEmail:u,emailType:"paid"})]})})},b6=ke(v6,"MemberEmails"),x6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAcCAYAAAB2+A+pAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATkSURBVHgBrVZrTJtVGD5fWy6FDcZgnR3DsA1QRDaRoICBsEFA4IdEYkwwLEGJCYIJEDISwATBGF1C0B8g/iDETDeSaYgaNQJGMXJTQCVcisXEgm0Kxa3tWqR3n7f9PlIZHd3omzx9+53bc97Lec/h2MHC8XC2t7eLVCpVtEQikQUFBTmnp6dVs7Oz23y/iwVQJPTT19eXpdfrf3C5XIvADaAdaAM+2djY+HFgYCCPHy/2d2HuAFK7yWT6NSwsTAyST0UikRFtNkAHbAIaQAm8ZDAY3sjPz0+DByz4drIDPCDy0S6ura2NBJkrNDS0m+O4MqfTOYr2o8BJu93+pM1ma7VardfxveRwOErDw8OvzczM6BUKRSZPKmL3KeKampqz4FQSL1ALoq8mJiZqq6urT+fl5Um8F01JSQkeHR1Nwrgq4DNgS6vVtnp5zS+RlJeXJ2LyT0AM8F1PT0823yck2V7ZbW9oaJAi+a7Spo1G4zeCIewgS6uqqk5gkgqToqG/9JrIMf/E7Qm4u5XmA993dnY+wnxv2jMBA+3b29unoT+qqKg4yx4gTsIcnU73MUJ0ndZaXl5+nu+7i5xbXFx8E4NeweCKzc3N99jhRFRWVnYM603S8UPytYyPjxfuR0zWrgDHgZuIawLz372+RAwjSrHe7yD+ALqrsrIynHl7sbm5+QI63gIuAZ+zAMnCwsKzWO8FijXIW+fm5l4X+oidS0hIeBR6DJAjxlssQDIyMqKF+hrQofgkpqWlZaanpwcJxK7S0tJL0EeA26hSZlSgaBYAWV1dvQ0lB/oBKWDLyclxh9Ht75iYGDtUOmAGVjIyMh5mARC49g4UxXUCOAGoCwoKsqBdbmKUxH+gonlig9lsPsICIJOTk1Tbo5jHs39SW3JyciLjG+gCoMZ1gM7bVm5u7hl2+KwmseP2orJ5HJgDzshksjCBGAnn+It5bhS6WbIQ8ydYgO7XtbU1IiayReCYWCy2CsRMrVaT/gKgjAuXSqXnWlpaKCn8vl99SWpqaizzJBaF0w4jzQIx19/fr4Y2ME8i/IKDv9rW1kYbcRyCXNTY2BiHa9XCr0vJdWd9ff3v/41CQj1nsVgeQ7ypyjTgrq2HnuaP1v2Su8fDum6+KCUDHxLq6upOMa/8EeFSiELH0xhcB/0qPW148m8HBwcvsHvcMF7iHkNFApcEERXRmsB5PBx+Q7wb9psk6urqiqMSt7Oz8xr0ZeAKJrwN3T8/P1/ibc0+hKykpOShsbGxFzH+Hcx7hieNxv+fEb6bAs/uBG/ywsJC6dDQ0BVUMHLVH8jCo3j2PIW+Dbws9LGxse/SwOLi4hD0xWRmZsrxKjkFK2WI5y10rfFr0fldAm4AJhh1uampifqd+xELO3L29vaexxPoZZAaUWdTmeetdQvfscD7IKGzTw8/E2DnPbEDBANpABWPXljbrdFoxuLj4+fucpEPcddx3KMXs7OznSB14j19EW20Caq3/wIKYAXQ8t+UuSk8MZXJq0qlMjUpKWlEMMgf4l3rQSzr6OjIRYEXBwcHWxGCKLiZrKPzeRI4x/8nK+m5ew14fHh4WFNUVKTYS+oP8d5xLuSADJUtDgtGyuXykIiICOqjoqCnfngmcmpqylhfX7+EN7ZdmMcCIHs3y9GTF3d6CP/0Fcbc06j/APDXjC9ayXo+AAAAAElFTkSuQmCC",y6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKKSURBVHgB7ZmLcdswDIZ/9zpAuoFG8AZ1J0g2qEboBnYnqDewPUHSCeJOkHQCaQNlA4QMoZiGqFgkRUq583eHsySLDxAgCFLAlWlZYCSIaKV+bpUUSpb8+IXlr5KHxWJRY27ojit5pGHslBSYC6ozfyiMNabGMeqNkq2SOz3KLEslpZL7WSnhGHndwZsLZbRClSj3C7nhEbXZeJbfi/JL5ESM4hYBqHJPVh2PyIUY/eqS23xQz1JYoUAO6HwyRvkvnQeBPHOBTKQZxXeFNR+QGu0uts0RCZmo9O6OCOSLx7u2v9eYCT4KvFjXQZNXMEYdwxVQiVibmL01PkLkKKzrGoH4WEDzbF3fIY5b6/o/cqDDnTXxnhCImMCaFXLAkaiJjd9k0uroCBSEanAjRu+nZ/m1KB/riv7QeS6juZgas/VkFhuUS0VD7tRY35cyOvG7a+F6muA5NArcMWmJloYVanr+32MkfMOojV4T+nIYvUgVcC9WutwRU9LjEr5USkpE4nWsQsa/73E6NmlprfEPZrGz046C3/8O9+K3V/I7+ZELmU1IZyKSmbiD8hoy86YkdwAokApH5/V18CaEFdkKJdJsarixRozWKBtxtkbDUjj+X7OVw5Qjs/hUKU3Nbdz0PH9vFyHQ+bLfEOU7FqTYHRt1M8YSGRlDgZ1VQb6zm1P74QpQN21eITNDFfja83yFUxpQq0XmiISQyWbLD14pHEroxfLQV+HO0j7poROJ4xpPqr5kzo7zz0gIHxYcEcbBmQtp1azbb9xIUqgbovV9GzxqJT9kGWf+JEzaYCKGTmKXC9mrYvKRj6WjAJvlyLcHfFZo4q+JROMc/k4Knb4hbPBZmdoTrlyZO6//Zfm9iMHs2AAAAABJRU5ErkJggg==",Ad=({title:n,color:e,price:t})=>f.jsxs("div",{className:"rounded-lg bg-grey-100/70 px-3 pb-3 pt-1.5",children:[f.jsx("div",{className:"font-space-grotesk text-[1.5rem] font-bold",style:{color:e},children:n}),f.jsx("div",{className:"-mt-1 font-space-grotesk text-[1.7rem] font-bold",children:t}),f.jsxs("div",{className:"mt-5 flex flex-col gap-1.5",children:[f.jsx("div",{className:"h-1.5 w-[100%] bg-grey-300/60"}),f.jsx("div",{className:"h-1.5 w-[70%] bg-grey-300/60"}),f.jsx("div",{className:"h-1.5 w-[90%] bg-grey-300/60"})]})]}),w6=({keywords:n})=>{const{updateRoute:e}=be(),{settings:t}=Pe(),[r,i,s]=Te(t,["accent_color","icon","members_signup_access"]),o=()=>{e("portal/edit")},a=r||"#F6414E";return f.jsx(Se,{customButtons:f.jsx(ne,{className:"mt-[-5px]",color:"clear",disabled:s==="none",label:"Customize",size:"sm",onClick:o}),description:"Customize members modal signup flow",keywords:n,navid:"portal",testId:"portal",title:"Signup portal",children:f.jsxs("div",{className:"relative isolate -mx-5 -mb-5 hidden flex-col items-center justify-end overflow-hidden rounded-b-xl bg-grey-50 px-5 pt-6 text-black sm:!visible sm:!flex md:-mx-7 md:-mb-7",children:[f.jsx("div",{className:"absolute bottom-6 right-6 flex size-12 items-center justify-center rounded-full text-white shadow-lg",style:{backgroundColor:a},children:f.jsx("img",{className:"size-6",src:y6})}),f.jsxs("div",{className:"grid w-full max-w-[440px] grid-cols-3 gap-5 rounded-t-xl bg-white px-9 py-6 shadow-xl",children:[f.jsxs("div",{className:"col-span-3 mb-1 flex flex-col items-center justify-center",children:[i?f.jsx("div",{className:"size-6 rounded-sm bg-cover bg-center",style:{backgroundImage:`url(${i})`}}):f.jsx("div",{className:"flex aspect-square items-center justify-center overflow-hidden rounded-full p-1 text-white",style:{backgroundColor:a},children:f.jsx("img",{className:"h-auto w-5",src:x6})}),f.jsx("div",{className:"mt-1.5 font-space-grotesk text-lg font-bold",children:"Sign up"}),f.jsx("div",{className:"mt-1.5 flex h-6 w-1/2 items-center rounded border border-grey-200 p-2 text-xs text-grey-700",children:"jamie@example.com"})]}),f.jsx(Ad,{color:a,price:"$0",title:"Free"}),f.jsx(Ad,{color:a,price:"$5",title:"Silver"}),f.jsx(Ad,{color:a,price:"$10",title:"Gold"})]})]})})},S6=ke(w6,"Portal settings"),C6=({keywords:n})=>{const{localSettings:e,isEditing:t,saveState:r,handleSave:i,handleCancel:s,updateSetting:o,errors:a,clearError:l,handleEditingChange:c}=Ot({onValidate:()=>({})}),[u]=Te(e,["blocked_email_domains"]),d=JSON.parse(u||"[]"),[h,p]=X.useState(d.join(`
`)),g=v=>{const b=v.target.value;p(b);const y=b.split(/[\s,]+/).map(S=>S.trim().toLowerCase().split("@").pop()).filter(S=>S&&S.includes("."));o("blocked_email_domains",JSON.stringify(y)),t||c(!0)},m=f.jsxs(f.Fragment,{children:["Prevent unwanted signups by blocking email domains. Add one domain per line, e.g., ",f.jsx("code",{children:"spam.xyz"})," to block signups from email addresses like ",f.jsx("code",{children:"hello@spam.xyz"}),"."]});return f.jsx(Se,{description:"Protect your member signups from spam",isEditing:t,keywords:n,navid:"spam-filters",saveState:r,testId:"spam-filters",title:"Spam filters",hideEditButton:!0,onCancel:s,onEditingChange:c,onSave:i,children:f.jsx(Ze,{columns:1,children:f.jsx(yx,{className:"h-[86px]",error:!!a.blockedEmailDomains,hint:a.blockedEmailDomains||m,placeholder:`spam.xyz
junk.com`,resize:"vertical",title:"Blocked email domains",value:h,onChange:g,onKeyDown:()=>l("spam-filters")})})})},k6=ke(C6,"Spam Filters"),WS=({size:n="md",trialDays:e})=>{if(!e)return null;const t=_(n==="sm"?"px-1.5 py-0.5 text-xs":"px-2.5 py-1.5 text-sm","relative -mr-1 -mt-1 whitespace-nowrap rounded-full font-semibold leading-none tracking-wide text-grey-900");return f.jsxs("span",{className:t,children:[f.jsx("span",{className:"absolute inset-0 block rounded-full bg-accent opacity-20 dark:bg-pink"}),f.jsxs("span",{className:"dark:text-pink",children:[e," days free"]})]})},A6=({benefits:n})=>n?.length?f.jsx(f.Fragment,{children:n.map(e=>f.jsx("div",{className:"mt-4 w-full text-md leading-snug text-grey-900",children:f.jsxs("div",{className:"mb-2.5 flex items-start",children:[f.jsx(ve,{className:"mr-[10px] mt-[3px] !h-3.5 !w-3.5 min-w-[14px] overflow-visible !stroke-[3px]",name:"check"}),f.jsx("div",{children:e})]})},e))}):f.jsx("div",{className:"mt-4 w-full text-md leading-snug text-grey-900 opacity-30",children:f.jsxs("div",{className:"mb-2.5 flex items-start",children:[f.jsx(ve,{className:"mr-[10px] mt-[3px] !h-3.5 !w-3.5 min-w-[14px] overflow-visible !stroke-[3px]",name:"check"}),f.jsx("div",{children:"Expert analysis"})]})}),M6=({discount:n})=>n?f.jsxs("span",{className:"mt-1 text-sm font-semibold leading-none text-pink",children:[n,"% discount"]}):null,_B=({tier:n,isFreeTier:e})=>{const[t,r]=x.useState(!1),i=n?.name||"",s=n?.description||"",o=parseFloat(n?.trial_days||"0"),a=n?.currency||"USD",l=to(a),c=n?.benefits||[],u=e?0:500,d=e?0:5e3,h=$i(n?.monthly_price??u),p=$i(n?.yearly_price??d),g=n?.monthly_price&&n?.yearly_price?Math.ceil((h*12-p)/(h*12)*100):0;return f.jsxs("div",{"data-testid":"tier-preview",children:[f.jsxs("div",{className:"flex items-baseline justify-between",children:[f.jsx(ft,{className:"pb-2",level:6,grey:!0,children:e?"Free membership preview":"Tier preview"}),!e&&f.jsxs("div",{className:"flex gap-1",children:[f.jsx(ne,{className:`${t===!0?"text-grey-500":"text-grey-900 dark:text-white"}`,label:"Monthly",link:!0,unstyled:!0,onClick:()=>r(!1)}),f.jsx(ne,{className:`ml-2 ${t===!0?"text-grey-900 dark:text-white":"text-grey-500"}`,label:"Yearly",link:!0,unstyled:!0,onClick:()=>r(!0)})]})]}),f.jsx("div",{className:"rounded-sm border border-grey-200 bg-white dark:border-transparent",children:f.jsxs("div",{className:"flex-column relative flex min-h-[200px] w-full max-w-[420px] scale-90 items-start justify-stretch rounded bg-white p-4",children:[f.jsxs("div",{className:"min-h-[56px] w-full",children:[f.jsx("h4",{className:`-mt-1 mb-0 w-full break-words text-lg font-semibold leading-tight text-accent ${!i&&"opacity-30"}`,children:i||(e?"Free":"Bronze")}),f.jsxs("div",{className:"mt-4 flex w-full flex-row flex-wrap items-end justify-between gap-x-1 gap-y-[10px]",children:[f.jsxs("div",{className:`flex flex-wrap text-black ${(t&&n?.yearly_price===void 0||!t&&n?.monthly_price===void 0)&&!e?"opacity-30":""}`,children:[f.jsx("span",{className:"self-start text-[2.7rem] font-bold uppercase leading-[1.115]",children:l}),f.jsx("span",{className:"break-all text-[3.4rem] font-bold leading-none tracking-tight",children:Sn(t?p:h)}),!e&&f.jsxs("span",{className:"ml-1 self-end text-[1.5rem] leading-snug text-grey-800",children:["/",t?"year":"month"]})]}),f.jsx(WS,{trialDays:o})]}),t&&g>0&&f.jsx(M6,{discount:g})]}),f.jsx("div",{className:"flex-column flex w-full flex-1",children:f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:`mt-4 w-full text-[1.55rem] font-semibold leading-snug text-grey-900 ${!s&&"opacity-30"}`,children:s||(e?"Free preview":"Full access to premium content")}),f.jsx(A6,{benefits:c})]})})]})})]})},qS=_("group/tiercard flex cursor-pointer flex-col items-start justify-between gap-4 self-stretch rounded-sm border border-transparent bg-grey-100 p-4 transition-all hover:border-grey-100 hover:bg-grey-75 hover:shadow-sm min-[900px]:min-h-[200px] dark:bg-grey-950 dark:hover:border-grey-800"),I6=({tier:n})=>{const{updateRoute:e}=be(),t=n?.currency||"USD",r=to(t);return f.jsx("div",{className:qS,"data-testid":"tier-card","data-tier":n.slug,children:f.jsxs("div",{className:"w-full grow",onClick:()=>{e({route:`tiers/${n.id}`})},children:[f.jsx("div",{className:"text-[1.65rem] font-bold leading-tight tracking-tight text-black dark:text-white",children:n.name}),f.jsxs("div",{className:"mt-2 flex items-baseline",children:[f.jsx("span",{className:"ml-1 translate-y-[-3px] text-md font-bold uppercase",children:r}),f.jsx("span",{className:"text-xl font-bold tracking-tighter",children:Sn($i(n.monthly_price||0))}),n.monthly_price&&n.monthly_price>0&&f.jsx("span",{className:"text-sm text-grey-700",children:"/month"})]}),n.trial_days?f.jsx("div",{className:"mb-4 mt-1",children:f.jsx(WS,{size:"sm",trialDays:n.trial_days})}):"",f.jsx("div",{className:"mt-2 line-clamp-2 text-[1.4rem] font-medium",children:n.description||f.jsx("span",{className:"opacity-30",children:"No description"})})]})})},Md=({tab:n,tiers:e})=>{const{updateRoute:t}=be(),r=()=>{t("tiers/add")};return e.length?f.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 min-[900px]:grid-cols-3",children:[e.map(i=>f.jsx(I6,{tier:i})),n==="active-tiers"&&f.jsx("button",{className:`${qS} group cursor-pointer`,type:"button",onClick:()=>{r()},children:f.jsx("div",{className:"flex size-full flex-col items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center justify-center",children:[f.jsx("div",{className:"translate-y-[15px] transition-all group-hover:translate-y-0",children:f.jsx(ve,{colorClass:"text-green",name:"add"})}),f.jsx("div",{className:"mt-2 translate-y-[-10px] text-sm font-semibold text-green opacity-0 transition-all group-hover:translate-y-0 group-hover:opacity-100",children:"Add tier"})]})})})]}):f.jsxs(ei,{icon:"money-bags",children:["No ",n==="active-tiers"?"active":"archived"," tiers found."]})},sb=({className:n,onClick:e})=>(n=_("group flex shrink-0 items-center justify-center whitespace-nowrap rounded border border-grey-300 px-3 py-1.5 text-sm font-semibold text-grey-900 transition-all hover:border-grey-500 dark:border-grey-900 dark:text-white",n),f.jsxs("button",{className:n,"data-testid":"stripe-connected",type:"button",onClick:e,children:[f.jsx("span",{className:"inline-flex size-2 rounded-full bg-green transition-all group-hover:bg-[#625BF6]"}),f.jsx("span",{className:"ml-2",children:"Connected to Stripe"})]})),E6=({keywords:n})=>{const[e,t]=x.useState("active-tiers"),{settings:r,config:i}=Pe(),{data:{tiers:s,meta:o,isEnd:a}={},fetchNextPage:l}=Mu(),c=v5(s||[]),u=b5(s||[]),{updateRoute:d}=be(),h=Co(),p=async()=>{if(h?.isDisabled("limitStripeConnect")&&!gr(r,i))try{await h.errorIfWouldGoOverLimit("limitStripeConnect")}catch(b){if(b instanceof So){Ye.show(Lx,{prompt:b.message||"Your current plan doesn't support Stripe Connect.",onOk:()=>d({route:"/pro",isExternal:!0})});return}}d("stripe-connect")},g=b=>[...b].sort((y,S)=>(y.monthly_price??0)-(S.monthly_price??0)),m=[{id:"active-tiers",title:"Active",contents:f.jsx(Md,{tab:"active-tiers",tiers:g(c)})},{id:"archived-tiers",title:"Archived",contents:f.jsx(Md,{tab:"archive-tiers",tiers:g(u)})}];let v;return gr(r,i)?v=f.jsx(Gn,{selectedTab:e,tabs:m,onTabChange:t}):v=f.jsx(Md,{tab:"free-tier",tiers:c.filter(b=>b.type==="free")}),f.jsxs(Se,{customButtons:gr(r,i)?f.jsx(sb,{className:"hidden tablet:!visible tablet:!block",onClick:p}):f.jsx($p,{className:"hidden tablet:!visible tablet:!block",onClick:p}),description:"Set prices and paid member sign up settings",keywords:n,navid:"tiers",testId:"tiers",title:"Tiers",children:[f.jsx("div",{className:"w-full tablet:hidden",children:gr(r,i)?f.jsx(sb,{className:"w-full",onClick:p}):f.jsx($p,{onClick:p})}),v,a===!1&&f.jsx(ne,{label:`Load more (showing ${s?.length||0}/${o?.pagination.total||0} tiers)`,link:!0,onClick:()=>l()})]})},D6=ke(E6,"Tiers"),R6=1e4,O6=({keywords:n})=>{const{localSettings:e,siteData:t,updateSetting:r,saveState:i,handleSave:s,handleCancel:o,focusRef:a,errors:l,validate:c,clearError:u,handleEditingChange:d}=Ot({onValidate:()=>({donationsSuggestedAmount:Hj(g,h,{maxAmount:R6})})}),[h="USD",p="500"]=Te(e,["donations_currency","donations_suggested_amount"]),g=parseInt(p),m=`${t?.url.replace(/\/$/,"")}/#/portal/support`;x.useEffect(()=>{c()},[h]);const[v,b]=x.useState(!1),[y,S]=x.useState(!1);x.useEffect(()=>{e.some(O=>O.dirty)&&!y&&(S(!0),d(!0))},[e,y,d]);const w=()=>{navigator.clipboard.writeText(m),b(!0),setTimeout(()=>b(!1),2e3)},C=()=>{js(i==="unsaved",()=>window.open(m,"_blank"))},A=(D,O)=>{r(D,O)},k=()=>{o(),S(!1)},I=async()=>{await s()&&S(!1)};return f.jsxs(Se,{description:"Give your audience a simple way to support your work with one-time payments.",isEditing:y,keywords:n,navid:"tips-and-donations",saveState:i,testId:"tips-and-donations",title:"Tips & donations",hideEditButton:!0,onCancel:k,onEditingChange:S,onSave:I,children:[f.jsxs(Ze,{columns:1,children:[f.jsx("div",{className:"flex max-w-[180px] items-end gap-[.6rem]",children:f.jsx(CC,{error:!!l.donationsSuggestedAmount,hint:l.donationsSuggestedAmount,inputRef:a,placeholder:"5",rightPlaceholder:f.jsx(zr,{border:!1,clearBg:!0,containerClassName:"w-14",fullWidth:!1,options:Xv(),selectedOption:Xv().flatMap(D=>D.options).find(D=>D.value===h),title:"Currency",hideTitle:!0,isSearchable:!0,onSelect:D=>A("donations_currency",D?.value||"USD")}),title:"Suggested amount",valueInCents:parseInt(p),onBlur:c,onChange:D=>A("donations_suggested_amount",D.toString()),onKeyDown:()=>u("donationsSuggestedAmount")},p)}),f.jsxs("div",{className:"w-100",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx(ft,{level:6,children:"Shareable link"})}),f.jsxs("div",{className:"w-100 group relative mt-0 flex items-center justify-between overflow-hidden border-b border-transparent pb-2 pt-1 hover:border-grey-300 dark:hover:border-grey-600",children:[f.jsx("span",{"data-testid":"donate-url",children:m}),f.jsxs("div",{className:"invisible flex gap-1 bg-white pl-1 group-hover:visible dark:bg-black",children:[f.jsx(ne,{color:"clear","data-testid":"preview-shareable-link",label:"Preview",size:"sm",onClick:C}),f.jsx(ne,{color:"light-grey","data-testid":"copy-shareable-link",label:v?"Copied":"Copy link",size:"sm",onClick:w})]})]})]})]}),f.jsxs("div",{className:"items-center-mt-1 flex text-sm",children:["All tips and donations are subject to Stripe's ",f.jsx("a",{className:"ml-1 text-green",href:"https://ghost.org/help/tips-donations/",rel:"noopener noreferrer",target:"_blank",children:" tipping policy"}),"."]})]})},T6=ke(O6,"Tips & donations"),GS=n=>{const{config:e}=Pe();return e.labs[n]||!1},qt={access:["membership","default","access","subscription","post","membership","comments","commenting","signup","sign up","spam","filters","prevention","prevent","block","domains","email"],tiers:["membership","tiers","payment","paid","stripe"],portal:["membership","portal","signup","sign up","signin","sign in","login","account","membership","support","email","address","support email address","support address"],memberEmails:["membership","signup","welcome email","email","new user","new member","account"],tips:["growth","tips","donations","one time","payment"]},N6=()=>{const{config:n,settings:e}=Pe(),[t]=Te(e,["donations_enabled"]),r=gr(e||[],n||{}),i=GS("welcomeEmails");return f.jsxs(ss,{keywords:Object.values(qt).flat(),title:"Membership",children:[f.jsx(c6,{keywords:qt.access}),f.jsx(k6,{keywords:qt.access}),f.jsx(D6,{keywords:qt.tiers}),f.jsx(S6,{keywords:qt.portal}),i&&f.jsx(b6,{keywords:qt.memberEmails}),t&&r&&f.jsx(T6,{keywords:qt.tips})]})},P6=({keywords:n})=>{const{updateRoute:e}=be(),t=()=>{e("announcement-bar/edit")};return f.jsx(Se,{customButtons:f.jsx(ne,{className:"mt-[-5px]",color:"clear",label:"Customize",size:"sm",onClick:t}),description:"Highlight important updates or offers",keywords:n,navid:"announcement-bar",testId:"announcement-bar",title:"Announcement bar"})},L6=ke(P6,"Announcement bar"),jB=null,Kh="CustomThemeSettingsResponseType",_6=Kh,BB=Qr({dataType:Kh,path:"/custom_theme_settings/"}),$B=Ve({method:"PUT",path:()=>"/custom_theme_settings/",body:n=>({custom_theme_settings:n}),updateQueries:{emberUpdateType:"skip",dataType:Kh,update:n=>n}}),os="ThemesResponseType",j6=Qr({dataType:os,path:"/themes/"}),FB=Qr({dataType:os,path:"/themes/active/"}),HB=Ve({method:"PUT",path:n=>`/themes/${n}/activate/`,updateQueries:{dataType:os,emberUpdateType:"createOrUpdate",update:(n,e)=>({...e,themes:e.themes.map(t=>{const r=n.themes.find(({name:i})=>i===t.name);return r||{...t,active:!1}})})},invalidateQueries:{dataType:_6}}),VB=Ve({method:"DELETE",path:n=>`/themes/${n}/`,updateQueries:{dataType:os,emberUpdateType:"delete",update:(n,e,t)=>({...e,themes:e.themes.filter(r=>r.name!==t)})}}),UB=Ve({method:"POST",path:()=>"/themes/install/",searchParams:n=>({source:"github",ref:n}),updateQueries:{dataType:os,emberUpdateType:"createOrUpdate",update:(n,e)=>e&&{...e,themes:[...e.themes,...n.themes]}}}),zB=Ve({method:"POST",path:()=>"/themes/upload/",body:({file:n})=>{const e=new FormData;return e.append("file",n),e},updateQueries:{dataType:os,emberUpdateType:"createOrUpdate",update:(n,e)=>e&&{...e,themes:[...e.themes,...n.themes]}}});function B6(n){return n.active}function KS(n){return n.name.toLowerCase()==="source"}function ZS(n){return n.name.toLowerCase()==="casper"}function WB(n){return KS(n)||ZS(n)}function qB(n){return!KS(n)&&!ZS(n)&&!B6(n)}const $6=()=>{const n=Co(),{config:e}=Pe(),t=e.hostSettings?.limits?.customThemes?.allowlist,r=t?.length===1||!1;return{checkThemeLimitError:x.useCallback(async s=>{if(!n?.isLimited("customThemes")||!(r||s&&t&&!t.includes(s.toLowerCase())))return null;try{const a=r?".":s||".";return await n.errorIfWouldGoOverLimit("customThemes",{value:a}),null}catch(a){return a instanceof So?a.message||"Your current plan doesn't support changing themes.":null}},[n,t,r]),isThemeLimited:n?.isLimited("customThemes")||!1,isThemeLimitCheckReady:n!==void 0,allowedThemesList:t,noThemeChangesAllowed:r}},F6=({keywords:n})=>{const[e,t]=x.useState(null),[r,i]=x.useState(!1),{checkThemeLimitError:s}=$6(),{updateRoute:o}=be(),{data:a}=j6(),l=a?.themes.find(d=>d.active);x.useEffect(()=>{(async()=>{i(!0);const h=await s();t(h),i(!1)})()},[s]);const c=async()=>{r||(e?Ye.show(Lx,{prompt:e,onOk:()=>o({route:"/pro",isExternal:!0})}):o("design/change-theme"))},u=f.jsx(Ze,{values:[{heading:"Active theme",key:"active-theme",value:l?`${l.name} (v${l.package?.version||"1.0"})`:"Loading..."}]});return f.jsx(Se,{customButtons:f.jsx(ne,{className:"mt-[-5px]",color:"clear",label:"Change theme",size:"sm",onClick:c}),description:"Browse and install official themes or upload one",keywords:n,navid:"theme",testId:"theme",title:"Theme",children:u})},H6=ke(F6,"Branding and design"),V6="/ghost/assets/design-settings-B-S7bLUU.png",U6=({keywords:n})=>{const{updateRoute:e}=be(),t=()=>{e("design/edit")};return f.jsx(Se,{customButtons:f.jsx(ne,{className:"mt-[-5px]",color:"clear",label:"Customize",size:"sm",onClick:t}),description:"Customize the style and layout of your site",keywords:n,navid:"design",testId:"design",title:"Design & branding",children:f.jsx("img",{src:V6})})},z6=ke(U6,"Branding and design"),W6=({keywords:n})=>{const{updateRoute:e}=be(),t=()=>{e("navigation/edit")};return f.jsx(Se,{customButtons:f.jsx(ne,{className:"mt-[-5px]",color:"clear",label:"Customize",size:"sm",onClick:t}),description:"Set up primary and secondary menus",keywords:n,navid:"navigation",testId:"navigation",title:"Navigation"})},q6=ke(W6,"Navigation"),xn={design:["site","logo","cover","colors","fonts","background","themes","appearance","style","design & branding","design and branding"],theme:["theme","template","upload"],navigation:["site","navigation","menus","primary","secondary","links"],announcementBar:["site","announcement bar","important","banner"]},G6=()=>f.jsx(f.Fragment,{children:f.jsxs(ss,{keywords:Object.values(xn).flat(),title:"Site",children:[f.jsx(z6,{keywords:xn.design}),f.jsx(H6,{keywords:xn.theme}),f.jsx(q6,{keywords:xn.navigation}),f.jsx(L6,{keywords:xn.announcementBar})]})}),K6=()=>f.jsx(f.Fragment,{children:f.jsxs("div",{className:"mb-[60vh] px-8 pt-16 tablet:max-w-[760px] tablet:px-14 tablet:pt-0",children:[f.jsx(Oj,{}),f.jsx(G6,{}),f.jsx(N6,{}),f.jsx(R5,{}),f.jsx(a6,{}),f.jsx(g5,{})]})}),Z6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAC9FBMVEUAAAB+J/tVRv9VRf9VRv9XRP9VRf+UGf9ZQf94Lv9WRP/dAPBYRP9yMP+9AP7VAPNWQv9cPv9xMf+DIv+PG//KAPfdAO95Kv9/Jv/1DvHXAPTzAPOjEP9qN//lAPFbQf/5A/JWRf9hPf/5APLFAPr/H/BXRf+rCf9qNv+cE//xAPF3Lf9bQP9sM/9jOv9XPf9mPP/9O+fcHO5iPv//Ref/R+fDAPv/ROhtNf9VRf/eAPH/QOnyAPLUAPOoDP/vAPP8BPLXAPOxB/95LP//SeeHI///GfH+E/L/QOilDv/GAPdsNP9aP//yAfCvCP/uAe7mAO/RAPJbQP+9BPZXRf99M//NAPdfPv/fAPKwCP9yMv/EAPpdQP/NAPZhPf/TAPSdFP+4A///Ku+rC/+/AP7vAPK5Av9uNf/+BfObFP/pAPKDJf9zMP9lO/+UGv+9AP7fAPDMAPZmOv/EAPv4AvJXQ//6APFeP/+vCP/0APGNH/9cQP+eFP/oAPG4A/6KH/+8AP2pCv/FAPn7APPfAPHKAPS4Bv6FIf/lAPXzHPPgAPJhPf/sAPL/Nez4APN4Lv+IJP//QemFJf//R+d5Lf+JIv9fP/+UGv//R+h+Kv+bFf/eAPJtNf+VGf/yAPKQHf//QeiHI//QAPX/Ref3APP/MO2FJP+uB/+MH///L+3/NetpN/+vB///RejsAPFkOv+hEv9kPP//LO3/NepoOP//R+brAfC6Af7bAPLgAPDdAPFbP//4BPP/SOr1APDLAPa2Bv9qOP92L//CAPz/EfOAKf/UAPPGAPqrC/9oOP++AP7/NuyOHv/UAPRmO/+FJf+2BP//MO78CvL/POpuNv//POpWRf//Qeh6LP+cFv9kOv//Ke9gPf+aFf//F/H8APH/N+voAPD/SueWGP+BJ//CAPj7BvLRAPX2APByMf+hDf/hAPP/SOr/K+/jAPK1BP/QAPb/HfHNAPaNIP+4Av/zAPPOAPb/M+xdP/+5AP/HAPj/Tehx7sdAAAAA/HRSTlMABYVVdWhvPDWGfG5kWFhYRj4yMCwsKyIeE6mkoIuLiYWDb21pZWFNSERCLisrJhkSDge1oJyZlZN/enp3bGtnYV9eXFtVVU1HRT85ODY1NC4mIA8OCc2+uaako56dmJeWkZGJg39+fXl0dG5sa2lmZWRiXl5dW1lVUU9NTElHRUI9OTk3MiYkGArWzcnHwLu7trWxr62spqWenJqZlY6JiYSEgn9+fXl3d3V0cW1saGdeXlNRUE5NTT01MDAvKyoe19DHx8bDwLu6t7e0sqmpqKelpZ2alZCPjIaGgH10cWtiX15cWFZKRD4vHRfRvr28sK+YlpaNiHl4cThB/jUsAAAEnElEQVRIx2JAB4whBgYGIaEMxAGdUhYmJkUuFlY15mqfIILKORSvXZNnAgJFSxY2IOARDMGnnFEp7o4SK48aDysbiyXIHiDFxayPU72+7C2l9VsEfHw4ODh8BAWYWbmYLNnYLJlKcbhMz2L16iJBjt06Onp6QfpAEKTHwczCwsPKpai2G0sQACRukZPO6y2kq+utsaW66E6csfG0GHlWZmYetVJWFtZyDM8Y3Mjh5BUS0n3JmyN78uDB7pPnjMPDQXrkFVmZ1ViYBZg5UDUsy+Z0FhbW1sjh7D90hTcIbIauxsZcJfnw7hieci7m3QICjEjqn6xYlq0trO18o/8QpzhCOIRj4+rcuO5w+VIuNR3BaoQOiYXZC4HmZ086OlMcPSxy028BnZb7g0dHQAAumpc3v15EZNmkqa5Ygk9D1uKcbJyS0kafch2YBQBlZuaJiKyY+pkda4ALWVyZkz6nqLxaowgqUpN3l13k8fS57AyM2BIAg1BUlKyFrIag93pBsEjoBrsNIpoJsx5D1WPqeDllDmcUr5Cu93qwwCu7zJpXmbNuwpVjAud+zqh0XT2JLd4gnrrdcj/1ZBlPBjw6OKfMnCIkLqHNC+I4rbHzs0tMxpvwQ8/PPMorIS7ubMDAEJy/3KluTWQF3pTPUDVpwkKJdglnbQaGA/lpfBVpkQcYCFgxYapwe/uTegaGtvwUPr7EREK5cf6ZCa7iwq7AqBVVSSzmi1YhqGH6mRXt7FVgDWb5T09tJ6Th5tzpc0Xq66tAGqJ/PT3cREB9cMLdhFnsmuxVjAAxBBbGLioOEyWgoU1mQ4KMpiZ7DSPDa8f42MKwVgIaGmUqZGQ8gRqAljkuOmv7wYuABvVIpxPJnp6NmkA2v+2xRVL8DPgjzunC8hNr1Bs9/YC8HfzHzsbbBuO3Ie19cqSTup86KH537ZjdNZt7F171RhdO/fyyva6xwgjI6eDn7orgLsAfSIfN0lLqGrY3gHnbaiO6uK124vNC8fEUM74GL742MN+3Vq5n3kOrDtw6Os2izVL8Gur4IFzJ2nXSPanrsjpxalCJPR7t1dpUDEsPzWVfgTqy1uFSz//tU9hz0VYvFSOogGSlgoJ0X2qqPVblkrZS8WH8+0X3FyJiF6A9GfOAOmyWKGMqF+OWireSim0VDWwqRBJ2S8pQuNSnvERBEkV1Ry23nJQVN7+U7X6xQMdA5GBYlbTy9scjDmVLtCBaDF/v26OVJScnN9vKsaUgokUscMdzFLMMra+uXHrxbZJb2X1lhxIHZRsbG/tKLa2HWdtaxHa9KxAT2+mI7lgXE3Prpad7k1TdShzKKl80+/q+KLGx1/IPCIiQCwhoKcBMbG/WmpgsXjCx9/JK1U1ubs8c7mcob/P1F/OXnucfsNO+A2sAAuZiPsPcfKLJg1Xfby+9p+revGffvmfSCr7+lfaSuOLIw3Ty5IkzFltbr3qwabO7u+qlIxla7solRngS5t5Ha61NJ5teX3D96uXTvRdV3VXvNRPIjm9+uyw2nWFiar5g7WaPzZs8OhkIA8O9Hi6PXLZu3eqx15CBaGBkaIjF7QBYMGrq1RZRzQAAAABJRU5ErkJggg==",Le=({keywords:n,navid:e,...t})=>{const{ref:r,props:i}=YL(e),{currentSection:s}=Cu(),{checkVisible:o}=wo(),l=(Array.isArray(e)?e:[e]).includes(s||"");return f.jsx(lR,{ref:r,isCurrent:l,isVisible:o(n),navid:Array.isArray(e)?e[0]:e,...i,...t})},Y6=()=>{const{filter:n,setFilter:e,checkVisible:t,noResult:r,setNoResult:i}=wo(),{updateRoute:s}=be(),o=x.useRef(null),{isAnyTextFieldFocused:a}=Zi();x.useEffect(()=>{const v=b=>{b.target instanceof HTMLElement&&(b.target.nodeName==="INPUT"||b.target.nodeName==="TEXTAREA"||b.target.isContentEditable)||b.key==="/"&&!a&&(b?.preventDefault(),o.current&&o.current.focus())};return window.addEventListener("keydown",v),()=>{window.removeEventListener("keydown",v)}}),x.useEffect(()=>{o.current&&o.current.focus()},[]),x.useEffect(()=>{!t(Object.values(at).flat())&&!t(Object.values(xn).flat())&&!t(Object.values(qt).flat())&&!t(Object.values(nn).flat())&&!t(Object.values(mr).flat())&&!t(Object.values(Wt).flat())?i(!0):i(!1)},[t,i,n]),x.useEffect(()=>{const v=b=>{b.key==="Escape"&&n&&(o.current?.blur(),b.stopPropagation())};return o.current?.addEventListener("keydown",v),()=>{o.current?.removeEventListener("keydown",v)}},[n]);const{settings:l,config:c}=Pe(),[u]=Te(l,["donations_enabled"]),d=gr(l||[],c||{}),h=GS("welcomeEmails"),p=v=>{v&&(e(""),i(!1),s(v.currentTarget.id))},g=v=>{e(v.target.value),v.target.value&&document.querySelector(".admin-x-settings")?.scrollTo({top:0,left:0})},m=_("hidden pt-10 tablet:!visible tablet:!block");return f.jsxs("div",{className:"ml-auto flex w-full flex-col pt-0 tablet:max-w-[240px]","data-testid":"sidebar",children:[f.jsx("div",{className:"sticky top-0 flex content-stretch items-end tablet:h-20 tablet:bg-grey-50 xl:h-20 dark:bg-grey-975 dark:tablet:bg-[#101114]",children:f.jsxs("div",{className:"relative w-full",children:[f.jsx(ve,{className:"absolute left-3 top-3 z-10",colorClass:"text-grey-500",name:"magnifying-glass",size:"sm"}),f.jsx(tt,{autoComplete:"off",className:"mr-12 flex h-10 w-full items-center rounded-lg border border-transparent bg-white px-[33px] py-1.5 text-[14px] shadow-[0_0_1px_rgba(21,23,26,0.25),0_1px_3px_rgba(0,0,0,0.03),0_8px_10px_-12px_rgba(0,0,0,.1)] transition-colors hover:shadow-sm focus:border-green focus:bg-white focus:shadow-[0_0_0_2px_rgba(48,207,67,0.25)] focus:outline-2 tablet:mr-0 dark:border-transparent dark:bg-grey-925 dark:text-white dark:placeholder:text-grey-800 dark:focus:border-green dark:focus:bg-grey-950",containerClassName:"w-100",inputRef:o,placeholder:"Search settings",title:"Search",value:n,clearBg:!0,hideTitle:!0,unstyled:!0,onChange:g}),n?f.jsx(ne,{className:"absolute right-14 top-3 p-1 tablet:right-3",icon:"close",iconColorClass:"text-grey-700 !w-[10px] !h-[10px]",size:"sm",unstyled:!0,onClick:()=>{e(""),o.current?.focus()}}):f.jsx("div",{className:"absolute -right-1/2 top-[9px] hidden rounded border border-grey-400 bg-white px-1.5 py-0.5 text-2xs font-semibold uppercase tracking-wider text-grey-600 shadow-[0px_1px_#CED4D9] tablet:!visible tablet:right-3 tablet:!block dark:border-grey-800 dark:bg-grey-900 dark:text-grey-500 dark:shadow-[0px_1px_#626D79]",children:"/"})]})}),f.jsxs("nav",{className:m,id:"admin-x-settings-sidebar",children:[r&&f.jsxs("div",{className:"ml-2 text-base text-grey-700",children:[f.jsx("h2",{className:"mb-2 text-base font-semibold tracking-normal text-black dark:text-white",children:"No result"}),f.jsxs("div",{children:[`We couldn't find any setting matching '${n}'`,"."]})]}),f.jsxs(ds,{isVisible:t(Object.values(at).flat()),title:"General settings",children:[f.jsx(Le,{icon:"textfield",keywords:at.titleAndDescription,navid:"general",title:"Title & description",onClick:p}),f.jsx(Le,{icon:"world-clock",keywords:at.timeZone,navid:"timezone",title:"Timezone",onClick:p}),f.jsx(Le,{icon:"language",keywords:at.publicationLanguage,navid:"publication-language",title:"Publication language",onClick:p}),f.jsx(Le,{icon:"user-pen",keywords:at.users,navid:"staff",title:"Staff",onClick:p}),f.jsx(Le,{icon:"layer",keywords:at.metadata,navid:"metadata",title:"Meta data",onClick:p}),f.jsx(Le,{icon:"like",keywords:at.socialAccounts,navid:"social-accounts",title:"Social accounts",onClick:p}),f.jsx(Le,{icon:"baseline-chart",keywords:at.analytics,navid:"analytics",title:"Analytics",onClick:p}),f.jsx(Le,{icon:"lock-locked",keywords:at.lockSite,navid:"locksite",title:"Make this site private",onClick:p})]}),f.jsxs(ds,{isVisible:t(Object.values(xn).flat()),title:"Site",children:[f.jsx(Le,{icon:"palette",keywords:xn.design,navid:"design",title:"Design & branding",onClick:p}),f.jsx(Le,{icon:"layout-2-col",keywords:xn.theme,navid:"theme",title:"Theme",onClick:p}),f.jsx(Le,{icon:"navigation",keywords:xn.navigation,navid:"navigation",title:"Navigation",onClick:p}),f.jsx(Le,{icon:"megaphone",keywords:xn.announcementBar,navid:"announcement-bar",title:"Announcement bar",onClick:p})]}),f.jsxs(ds,{isVisible:t([...Object.values(qt).flat(),...mr.newslettersNavMenu]),title:"Membership",children:[f.jsx(Le,{icon:"key",keywords:qt.access,navid:["members","spam-filters"],title:"Access",onClick:p}),f.jsx(Le,{icon:"bills",keywords:qt.tiers,navid:"tiers",title:"Tiers",onClick:p}),f.jsx(Le,{icon:"portal",keywords:qt.portal,navid:"portal",title:"Signup portal",onClick:p}),h&&f.jsx(Le,{icon:"mailplus",keywords:qt.memberEmails,navid:"memberemails",title:"Welcome emails",onClick:p}),u&&d&&f.jsx(Le,{icon:"piggybank",keywords:qt.tips,navid:"tips-and-donations",title:"Tips & donations",onClick:p}),f.jsx(Le,{icon:"email",keywords:mr.newslettersNavMenu,navid:["enable-newsletters","default-recipients","newsletters","mailgun"],title:"Newsletters",onClick:p})]}),f.jsxs(ds,{isVisible:t(Object.values(nn).flat()),title:"Growth",children:[f.jsx(Le,{icon:"ap-network",keywords:nn.network,navid:"network",title:"Network",onClick:p}),f.jsx(Le,{icon:"globe-simple",keywords:nn.explore,navid:"explore",title:"Ghost Explore",onClick:p}),f.jsx(Le,{icon:"heart",keywords:nn.recommendations,navid:"recommendations",title:"Recommendations",onClick:p}),f.jsx(Le,{icon:"emailfield",keywords:nn.embedSignupForm,navid:"embed-signup-form",title:"Signup forms",onClick:p}),d&&f.jsx(Le,{icon:"discount",keywords:nn.offers,navid:"offers",title:"Offers",onClick:p})]}),f.jsxs(ds,{isVisible:t(Object.values(Wt).flat()),title:"Advanced",children:[f.jsx(Le,{icon:"modules-3",keywords:Wt.integrations,navid:"integrations",title:"Integrations",onClick:p}),f.jsx(Le,{icon:"download",keywords:Wt.migrationtools,navid:"migration",title:"Import/Export",onClick:p}),f.jsx(Le,{icon:"brackets",keywords:Wt.codeInjection,navid:"code-injection",title:"Code injection",onClick:p}),f.jsx(Le,{icon:"labs-flask",keywords:Wt.labs,navid:"labs",title:"Labs",onClick:p}),f.jsx(Le,{icon:"time-back",keywords:Wt.history,navid:"history",title:"History",onClick:p})]}),!n&&f.jsxs("a",{className:"w-100 mb-10 mt-1 flex h-[38px] cursor-pointer items-center rounded-lg px-3 py-2 text-left text-[14px] font-medium text-grey-800 transition-all hover:bg-grey-200 focus:bg-grey-100 dark:text-grey-600 dark:hover:bg-grey-950 dark:focus:bg-grey-925",onClick:()=>{s("about")},children:[f.jsx("img",{alt:"Ghost Logo",className:"mr-[7px] size-[18px]",src:Z6}),"About Ghost"]})]})]})},ob=({children:n})=>f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed right-0 top-2 z-50 flex justify-end bg-transparent p-8 tablet:fixed tablet:top-0 tablet:px-8",id:"done-button-container",children:f.jsx(NL,{})}),f.jsx("div",{className:"w-full tablet:fixed tablet:left-0 tablet:top-0 tablet:flex tablet:h-full dark:bg-grey-975",id:"admin-x-settings-content",children:n})]}),J6=()=>{const{currentUser:n}=Pe(),{loadingModal:e}=be(),{isDirty:t}=qc(),r=i=>{window.location.hash=i};return x.useEffect(()=>{const i=s=>{s.key==="Escape"&&js(t,()=>{r("/")})};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[t]),x.useEffect(()=>{W2.remove()},[]),q2(n)?mb(n)?f.jsx(ob,{children:f.jsxs("div",{className:"mx-auto w-full max-w-5xl overflow-y-auto px-[5vmin] tablet:mt-16 xl:mt-10",id:"admin-x-settings-scroller",children:[f.jsx(ft,{className:"mb-[5vmin]",children:"Settings"}),f.jsx(BS,{highlight:!1,keywords:[]})]})}):f.jsxs(ob,{children:[e&&f.jsx("div",{className:`fixed inset-0 z-40 h-[calc(100vh-55px)] w-[100vw] tablet:h-[100vh] ${Px}`}),f.jsx("div",{className:"no-scrollbar fixed inset-x-0 top-0 z-[35] flex-1 basis-[320px] bg-white p-8 tablet:relative tablet:inset-x-auto tablet:top-auto tablet:h-full tablet:overflow-y-scroll tablet:bg-grey-50 tablet:py-0 dark:bg-grey-975 dark:tablet:bg-[#101114]",id:"admin-x-settings-sidebar-scroller",children:f.jsx("div",{className:"relative w-full",children:f.jsx(Y6,{})})}),f.jsx("div",{className:"relative h-full flex-1 overflow-y-scroll bg-white pt-12 tablet:basis-[800px] dark:bg-grey-975 dark:tablet:bg-black",id:"admin-x-settings-scroller",children:f.jsx(K6,{})})]}):null},X6={"design/change-theme":"DesignAndThemeModal","design/edit":"DesignAndThemeModal","theme/install":"DesignAndThemeModal","navigation/edit":"NavigationModal","staff/invite":"InviteUserModal","staff/:slug/social-links":"UserDetailModal","staff/:slug/email-notifications":"UserDetailModal","staff/:slug/edit":"UserDetailModal","staff/:slug":"UserDetailModal","portal/edit":"PortalModal","tiers/add":"TierDetailModal","tiers/:id":"TierDetailModal","stripe-connect":"StripeConnectModal","newsletters/new":"AddNewsletterModal","newsletters/:id":"NewsletterDetailModal","history/view":"HistoryModal","history/view/:user":"HistoryModal","integrations/zapier":"ZapierModal","integrations/slack":"SlackModal","integrations/unsplash":"UnsplashModal","integrations/firstpromoter":"FirstPromoterModal","integrations/pintura":"PinturaModal","integrations/new":"AddIntegrationModal","integrations/:id":"CustomIntegrationModal","recommendations/add":"AddRecommendationModal","recommendations/edit":"EditRecommendationModal","announcement-bar/edit":"AnnouncementBarModal","embed-signup-form/show":"EmbedSignupFormModal","offers/edit":"OffersContainerModal","offers/edit/:id":"OffersContainerModal","offers/new":"OffersContainerModal","explore/testimonial":"TestimonialsModal",about:"AboutModal"},Q6=()=>no(()=>import("./modals-xz56TizU.js"),__vite__mapDeps([10,1,2,4,5,3,6,11])),eB=()=>{const{updateNavigatedSection:n,scrollToSection:e}=Cu(),{route:t}=be();return WL((r,i)=>{r===i&&e(r.split("/")[0])},[e]),x.useEffect(()=>{t!==void 0&&n(t.split("/")[0])},[t,n]),null};function tB({designSystem:n,upgradeStatus:e}){return f.jsx(I_,{upgradeStatus:e,children:f.jsx(Ye.Provider,{children:f.jsx(zL,{basePath:"settings",modals:{paths:X6,load:Q6},children:f.jsxs(mR,{className:"admin-x-settings",...n,children:[f.jsx(eB,{}),f.jsx(J6,{})]})})})})}async function nB(){return await no(()=>import("./koenig-lexical-CNibzgv8.js"),__vite__mapDeps([12,1,2]))}function rB(){return Hr.createPortal(f.jsx("div",{className:"shade shade-admin",style:{position:"absolute",inset:0,zIndex:20},children:f.jsx(tB,{designSystem:{darkMode:!1,fetchKoenigLexical:nB}})}),document.body)}const GB=Object.freeze(Object.defineProperty({__proto__:null,default:rB},Symbol.toStringTag,{value:"Module"}));export{Gr as $,zr as A,ne as B,_s as C,lN as D,G as E,js as F,Gn as G,ft as H,We as I,lE as J,RC as K,If as L,Rr as M,Py as N,ch as O,mN as P,CB as Q,TL as R,gt as S,dt as T,Ye as U,be as V,ku as W,JL as X,Pe as Y,Xi as Z,ru as _,qn as a,ei as a$,jS as a0,Mu as a1,TB as a2,OB as a3,Ot as a4,uh as a5,Jv as a6,Hj as a7,kC as a8,tt as a9,Qh as aA,Cd as aB,nE as aC,FB as aD,KS as aE,ZS as aF,B6 as aG,HB as aH,VB as aI,qB as aJ,MB as aK,WB as aL,j6 as aM,UB as aN,$6 as aO,zB as aP,rc as aQ,hS as aR,Ji as aS,qr as aT,jB as aU,BB as aV,$B as aW,xS as aX,Ku as aY,xx as aZ,tE as a_,Xv as aa,CC as ab,Kt as ac,PI as ad,sR as ae,_B as af,IB as ag,uB as ah,kB as ai,Co as aj,So as ak,Lx as al,yx as am,Sn as an,PB as ao,US as ap,U_ as aq,e6 as ar,LB as as,Uu as at,xb as au,Ni as av,cu as aw,$n as ax,AB as ay,j5 as az,Xt as b,nh as b0,bS as b1,Vh as b2,e5 as b3,Y_ as b4,J_ as b5,dB as b6,EB as b7,$i as b8,vS as b9,RB as ba,gS as bb,DB as bc,FS as bd,NB as be,Z6 as bf,$p as bg,aR as bh,GS as bi,Ze as bj,Kv as bk,Yv as bl,Zv as bm,bj as bn,Gv as bo,vj as bp,pS as bq,n6 as br,GB as bs,xe as c,xB as d,yB as e,GN as f,gB as g,At as h,jN as i,hB as j,vB as k,bB as l,NN as m,TN as n,wB as o,pB as p,l3 as q,B as r,IN as s,j as t,Zi as u,SB as v,vP as w,rC as x,rr as y,qc as z};

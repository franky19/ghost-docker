import{r as n,c3 as Je,j as t,c4 as le,at as se,c5 as Qe,c6 as et,c7 as tt,c8 as rt,y as V,c9 as at,ca as ze,cb as Fe,cc as st,an as M,cd as _e,$ as J,aW as nt,ap as lt,aY as ot,a_ as it,ce as ut,X as ct,bY as dt,bZ as pt,b_ as mt}from"./index-DQyPmpGB.js";import{L as ke,d as vt}from"./message-square-text-C7V7BkDm.js";var Ve=1,ft=.9,ht=.8,xt=.17,we=.1,Ne=.999,gt=.9999,bt=.99,yt=/[\\\/_+.#"@\[\(\{&]/,jt=/[\\\/_+.#"@\[\(\{&]/g,wt=/[\s-]/,Oe=/[\s-]/g;function Se(e,a,r,o,l,c,f){if(c===a.length)return l===e.length?Ve:bt;var p=`${l},${c}`;if(f[p]!==void 0)return f[p];for(var w=o.charAt(c),m=r.indexOf(w,l),u=0,N,C,k,_;m>=0;)N=Se(e,a,r,o,m+1,c+1,f),N>u&&(m===l?N*=Ve:yt.test(e.charAt(m-1))?(N*=ht,k=e.slice(l,m-1).match(jt),k&&l>0&&(N*=Math.pow(Ne,k.length))):wt.test(e.charAt(m-1))?(N*=ft,_=e.slice(l,m-1).match(Oe),_&&l>0&&(N*=Math.pow(Ne,_.length))):(N*=xt,l>0&&(N*=Math.pow(Ne,m-l))),e.charAt(m)!==a.charAt(c)&&(N*=gt)),(N<we&&r.charAt(m-1)===o.charAt(c+1)||o.charAt(c+1)===o.charAt(c)&&r.charAt(m-1)!==o.charAt(c))&&(C=Se(e,a,r,o,m+1,c+2,f),C*we>N&&(N=C*we)),N>u&&(u=N),m=r.indexOf(w,m+1);return f[p]=u,u}function Re(e){return e.toLowerCase().replace(Oe," ")}function Nt(e,a,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,Se(e,a,Re(e),Re(a),0,0,{})}var Ct=Symbol.for("react.lazy"),he=Je[" use ".trim().toString()];function kt(e){return typeof e=="object"&&e!==null&&"then"in e}function Te(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Ct&&"_payload"in e&&kt(e._payload)}function St(e){const a=Et(e),r=n.forwardRef((o,l)=>{let{children:c,...f}=o;Te(c)&&typeof he=="function"&&(c=he(c._payload));const p=n.Children.toArray(c),w=p.find(Ft);if(w){const m=w.props.children,u=p.map(N=>N===w?n.Children.count(m)>1?n.Children.only(null):n.isValidElement(m)?m.props.children:null:N);return t.jsx(a,{...f,ref:l,children:n.isValidElement(m)?n.cloneElement(m,void 0,u):null})}return t.jsx(a,{...f,ref:l,children:c})});return r.displayName=`${e}.Slot`,r}function Et(e){const a=n.forwardRef((r,o)=>{let{children:l,...c}=r;if(Te(l)&&typeof he=="function"&&(l=he(l._payload)),n.isValidElement(l)){const f=It(l),p=_t(c,l.props);return l.type!==n.Fragment&&(p.ref=o?le(o,f):f),n.cloneElement(l,p)}return n.Children.count(l)>1?n.Children.only(null):null});return a.displayName=`${e}.SlotClone`,a}var zt=Symbol("radix.slottable");function Ft(e){return n.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===zt}function _t(e,a){const r={...a};for(const o in a){const l=e[o],c=a[o];/^on[A-Z]/.test(o)?l&&c?r[o]=(...p)=>{const w=c(...p);return l(...p),w}:l&&(r[o]=l):o==="style"?r[o]={...l,...c}:o==="className"&&(r[o]=[l,c].filter(Boolean).join(" "))}return{...e,...r}}function It(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=a&&"isReactWarning"in a&&a.isReactWarning;return r?e.ref:(a=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Vt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Y=Vt.reduce((e,a)=>{const r=St(`Primitive.${a}`),o=n.forwardRef((l,c)=>{const{asChild:f,...p}=l,w=f?r:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(w,{...p,ref:c})});return o.displayName=`Primitive.${a}`,{...e,[a]:o}},{}),ie='[cmdk-group=""]',Ce='[cmdk-group-items=""]',Rt='[cmdk-group-heading=""]',Le='[cmdk-item=""]',$e=`${Le}:not([aria-disabled="true"])`,Ee="cmdk-item-select",te="data-value",$t=(e,a,r)=>Nt(e,a,r),Me=n.createContext(void 0),ce=()=>n.useContext(Me),De=n.createContext(void 0),Ie=()=>n.useContext(De),qe=n.createContext(void 0),We=n.forwardRef((e,a)=>{let r=re(()=>{var s,d;return{search:"",value:(d=(s=e.value)!=null?s:e.defaultValue)!=null?d:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),o=re(()=>new Set),l=re(()=>new Map),c=re(()=>new Map),f=re(()=>new Set),p=Ke(e),{label:w,children:m,value:u,onValueChange:N,filter:C,shouldFilter:k,loop:_,disablePointerSelection:v=!1,vimBindings:x=!0,...b}=e,$=se(),P=se(),i=se(),S=n.useRef(null),E=Bt();Q(()=>{if(u!==void 0){let s=u.trim();r.current.value=s,R.emit()}},[u]),Q(()=>{E(6,W)},[]);let R=n.useMemo(()=>({subscribe:s=>(f.current.add(s),()=>f.current.delete(s)),snapshot:()=>r.current,setState:(s,d,j)=>{var g,F,I,O;if(!Object.is(r.current[s],d)){if(r.current[s]=d,s==="search")U(),D(),E(1,q);else if(s==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let A=document.getElementById(i);A?A.focus():(g=document.getElementById($))==null||g.focus()}if(E(7,()=>{var A;r.current.selectedItemId=(A=K())==null?void 0:A.id,R.emit()}),j||E(5,W),((F=p.current)==null?void 0:F.value)!==void 0){let A=d??"";(O=(I=p.current).onValueChange)==null||O.call(I,A);return}}R.emit()}},emit:()=>{f.current.forEach(s=>s())}}),[]),L=n.useMemo(()=>({value:(s,d,j)=>{var g;d!==((g=c.current.get(s))==null?void 0:g.value)&&(c.current.set(s,{value:d,keywords:j}),r.current.filtered.items.set(s,pe(d,j)),E(2,()=>{D(),R.emit()}))},item:(s,d)=>(o.current.add(s),d&&(l.current.has(d)?l.current.get(d).add(s):l.current.set(d,new Set([s]))),E(3,()=>{U(),D(),r.current.value||q(),R.emit()}),()=>{c.current.delete(s),o.current.delete(s),r.current.filtered.items.delete(s);let j=K();E(4,()=>{U(),j?.getAttribute("id")===s&&q(),R.emit()})}),group:s=>(l.current.has(s)||l.current.set(s,new Set),()=>{c.current.delete(s),l.current.delete(s)}),filter:()=>p.current.shouldFilter,label:w||e["aria-label"],getDisablePointerSelection:()=>p.current.disablePointerSelection,listId:$,inputId:i,labelId:P,listInnerRef:S}),[]);function pe(s,d){var j,g;let F=(g=(j=p.current)==null?void 0:j.filter)!=null?g:$t;return s?F(s,r.current.search,d):0}function D(){if(!r.current.search||p.current.shouldFilter===!1)return;let s=r.current.filtered.items,d=[];r.current.filtered.groups.forEach(g=>{let F=l.current.get(g),I=0;F.forEach(O=>{let A=s.get(O);I=Math.max(A,I)}),d.push([g,I])});let j=S.current;H().sort((g,F)=>{var I,O;let A=g.getAttribute("id"),ve=F.getAttribute("id");return((I=s.get(ve))!=null?I:0)-((O=s.get(A))!=null?O:0)}).forEach(g=>{let F=g.closest(Ce);F?F.appendChild(g.parentElement===F?g:g.closest(`${Ce} > *`)):j.appendChild(g.parentElement===j?g:g.closest(`${Ce} > *`))}),d.sort((g,F)=>F[1]-g[1]).forEach(g=>{var F;let I=(F=S.current)==null?void 0:F.querySelector(`${ie}[${te}="${encodeURIComponent(g[0])}"]`);I?.parentElement.appendChild(I)})}function q(){let s=H().find(j=>j.getAttribute("aria-disabled")!=="true"),d=s?.getAttribute(te);R.setState("value",d||void 0)}function U(){var s,d,j,g;if(!r.current.search||p.current.shouldFilter===!1){r.current.filtered.count=o.current.size;return}r.current.filtered.groups=new Set;let F=0;for(let I of o.current){let O=(d=(s=c.current.get(I))==null?void 0:s.value)!=null?d:"",A=(g=(j=c.current.get(I))==null?void 0:j.keywords)!=null?g:[],ve=pe(O,A);r.current.filtered.items.set(I,ve),ve>0&&F++}for(let[I,O]of l.current)for(let A of O)if(r.current.filtered.items.get(A)>0){r.current.filtered.groups.add(I);break}r.current.filtered.count=F}function W(){var s,d,j;let g=K();g&&(((s=g.parentElement)==null?void 0:s.firstChild)===g&&((j=(d=g.closest(ie))==null?void 0:d.querySelector(Rt))==null||j.scrollIntoView({block:"nearest"})),g.scrollIntoView({block:"nearest"}))}function K(){var s;return(s=S.current)==null?void 0:s.querySelector(`${Le}[aria-selected="true"]`)}function H(){var s;return Array.from(((s=S.current)==null?void 0:s.querySelectorAll($e))||[])}function X(s){let d=H()[s];d&&R.setState("value",d.getAttribute(te))}function oe(s){var d;let j=K(),g=H(),F=g.findIndex(O=>O===j),I=g[F+s];(d=p.current)!=null&&d.loop&&(I=F+s<0?g[g.length-1]:F+s===g.length?g[0]:g[F+s]),I&&R.setState("value",I.getAttribute(te))}function me(s){let d=K(),j=d?.closest(ie),g;for(;j&&!g;)j=s>0?Wt(j,ie):Kt(j,ie),g=j?.querySelector($e);g?R.setState("value",g.getAttribute(te)):oe(s)}let y=()=>X(H().length-1),h=s=>{s.preventDefault(),s.metaKey?y():s.altKey?me(1):oe(1)},z=s=>{s.preventDefault(),s.metaKey?X(0):s.altKey?me(-1):oe(-1)};return n.createElement(Y.div,{ref:a,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:s=>{var d;(d=b.onKeyDown)==null||d.call(b,s);let j=s.nativeEvent.isComposing||s.keyCode===229;if(!(s.defaultPrevented||j))switch(s.key){case"n":case"j":{x&&s.ctrlKey&&h(s);break}case"ArrowDown":{h(s);break}case"p":case"k":{x&&s.ctrlKey&&z(s);break}case"ArrowUp":{z(s);break}case"Home":{s.preventDefault(),X(0);break}case"End":{s.preventDefault(),y();break}case"Enter":{s.preventDefault();let g=K();if(g){let F=new Event(Ee);g.dispatchEvent(F)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:L.inputId,id:L.labelId,style:Zt},w),je(e,s=>n.createElement(De.Provider,{value:R},n.createElement(Me.Provider,{value:L},s))))}),At=n.forwardRef((e,a)=>{var r,o;let l=se(),c=n.useRef(null),f=n.useContext(qe),p=ce(),w=Ke(e),m=(o=(r=w.current)==null?void 0:r.forceMount)!=null?o:f?.forceMount;Q(()=>{if(!m)return p.item(l,f?.id)},[m]);let u=Be(l,c,[e.value,e.children,c],e.keywords),N=Ie(),C=G(E=>E.value&&E.value===u.current),k=G(E=>m||p.filter()===!1?!0:E.search?E.filtered.items.get(l)>0:!0);n.useEffect(()=>{let E=c.current;if(!(!E||e.disabled))return E.addEventListener(Ee,_),()=>E.removeEventListener(Ee,_)},[k,e.onSelect,e.disabled]);function _(){var E,R;v(),(R=(E=w.current).onSelect)==null||R.call(E,u.current)}function v(){N.setState("value",u.current,!0)}if(!k)return null;let{disabled:x,value:b,onSelect:$,forceMount:P,keywords:i,...S}=e;return n.createElement(Y.div,{ref:le(c,a),...S,id:l,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!C,"data-disabled":!!x,"data-selected":!!C,onPointerMove:x||p.getDisablePointerSelection()?void 0:v,onClick:x?void 0:_},e.children)}),Pt=n.forwardRef((e,a)=>{let{heading:r,children:o,forceMount:l,...c}=e,f=se(),p=n.useRef(null),w=n.useRef(null),m=se(),u=ce(),N=G(k=>l||u.filter()===!1?!0:k.search?k.filtered.groups.has(f):!0);Q(()=>u.group(f),[]),Be(f,p,[e.value,e.heading,w]);let C=n.useMemo(()=>({id:f,forceMount:l}),[l]);return n.createElement(Y.div,{ref:le(p,a),...c,"cmdk-group":"",role:"presentation",hidden:N?void 0:!0},r&&n.createElement("div",{ref:w,"cmdk-group-heading":"","aria-hidden":!0,id:m},r),je(e,k=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?m:void 0},n.createElement(qe.Provider,{value:C},k))))}),Ot=n.forwardRef((e,a)=>{let{alwaysRender:r,...o}=e,l=n.useRef(null),c=G(f=>!f.search);return!r&&!c?null:n.createElement(Y.div,{ref:le(l,a),...o,"cmdk-separator":"",role:"separator"})}),Tt=n.forwardRef((e,a)=>{let{onValueChange:r,...o}=e,l=e.value!=null,c=Ie(),f=G(m=>m.search),p=G(m=>m.selectedItemId),w=ce();return n.useEffect(()=>{e.value!=null&&c.setState("search",e.value)},[e.value]),n.createElement(Y.input,{ref:a,...o,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":w.listId,"aria-labelledby":w.labelId,"aria-activedescendant":p,id:w.inputId,type:"text",value:l?e.value:f,onChange:m=>{l||c.setState("search",m.target.value),r?.(m.target.value)}})}),Lt=n.forwardRef((e,a)=>{let{children:r,label:o="Suggestions",...l}=e,c=n.useRef(null),f=n.useRef(null),p=G(m=>m.selectedItemId),w=ce();return n.useEffect(()=>{if(f.current&&c.current){let m=f.current,u=c.current,N,C=new ResizeObserver(()=>{N=requestAnimationFrame(()=>{let k=m.offsetHeight;u.style.setProperty("--cmdk-list-height",k.toFixed(1)+"px")})});return C.observe(m),()=>{cancelAnimationFrame(N),C.unobserve(m)}}},[]),n.createElement(Y.div,{ref:le(c,a),...l,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":p,"aria-label":o,id:w.listId},je(e,m=>n.createElement("div",{ref:le(f,w.listInnerRef),"cmdk-list-sizer":""},m)))}),Mt=n.forwardRef((e,a)=>{let{open:r,onOpenChange:o,overlayClassName:l,contentClassName:c,container:f,...p}=e;return n.createElement(Qe,{open:r,onOpenChange:o},n.createElement(et,{container:f},n.createElement(tt,{"cmdk-overlay":"",className:l}),n.createElement(rt,{"aria-label":e.label,"cmdk-dialog":"",className:c},n.createElement(We,{ref:a,...p}))))}),Dt=n.forwardRef((e,a)=>G(r=>r.filtered.count===0)?n.createElement(Y.div,{ref:a,...e,"cmdk-empty":"",role:"presentation"}):null),qt=n.forwardRef((e,a)=>{let{progress:r,children:o,label:l="Loading...",...c}=e;return n.createElement(Y.div,{ref:a,...c,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},je(e,f=>n.createElement("div",{"aria-hidden":!0},f)))}),ee=Object.assign(We,{List:Lt,Item:At,Input:Tt,Group:Pt,Separator:Ot,Dialog:Mt,Empty:Dt,Loading:qt});function Wt(e,a){let r=e.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function Kt(e,a){let r=e.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function Ke(e){let a=n.useRef(e);return Q(()=>{a.current=e}),a}var Q=typeof window>"u"?n.useEffect:n.useLayoutEffect;function re(e){let a=n.useRef();return a.current===void 0&&(a.current=e()),a}function G(e){let a=Ie(),r=()=>e(a.snapshot());return n.useSyncExternalStore(a.subscribe,r,r)}function Be(e,a,r,o=[]){let l=n.useRef(),c=ce();return Q(()=>{var f;let p=(()=>{var m;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(m=u.current.textContent)==null?void 0:m.trim():l.current}})(),w=o.map(m=>m.trim());c.value(e,p,w),(f=a.current)==null||f.setAttribute(te,p),l.current=p}),l}var Bt=()=>{let[e,a]=n.useState(),r=re(()=>new Map);return Q(()=>{r.current.forEach(o=>o()),r.current=new Map},[e]),(o,l)=>{r.current.set(o,l),a({})}};function Ut(e){let a=e.type;return typeof a=="function"?a(e.props):"render"in a?a.render(e.props):e}function je({asChild:e,children:a},r){return e&&n.isValidElement(a)?n.cloneElement(Ut(a),{ref:a.ref},r(a.props.children)):r(a)}var Zt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function xe({className:e,...a}){return t.jsx(ee,{className:V("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...a})}function ge({className:e,...a}){return t.jsxs("div",{className:"flex items-center border-b border-border px-3","cmdk-input-wrapper":"","data-slot":"command-input",children:[t.jsx(at,{className:"me-2 size-4 shrink-0 opacity-50"}),t.jsx(ee.Input,{className:V("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-hidden text-foreground placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...a})]})}function be({className:e,...a}){return t.jsx(ee.List,{className:V("max-h-[300px] p-1 overflow-y-auto overflow-x-hidden",e),"data-slot":"command-list",...a})}function ye({...e}){return t.jsx(ee.Empty,{className:"py-6 text-center text-sm","data-slot":"command-empty",...e})}function Z({className:e,...a}){return t.jsx(ee.Group,{className:V("overflow-hidden p-1.5 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),"data-slot":"command-group",...a})}function ne({className:e,...a}){return t.jsx(ee.Separator,{className:V("-mx-1.5 h-px bg-border",e),"data-slot":"command-separator",...a})}function B({className:e,...a}){return t.jsx(ee.Item,{className:V("relative flex text-foreground cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-hidden data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0","[&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 [&_svg]:stroke-[1.5px]",e),"data-slot":"command-item",...a})}const ae={addFilter:"",searchFields:"Search fields...",noFieldsFound:"No fields found.",noResultsFound:"No results found.",loading:"Loading...",select:"Select...",true:"True",false:"False",min:"Min",max:"Max",to:"to",typeAndPressEnter:"Type and press Enter to add tag",selected:"selected",selectedCount:"selected",percent:"%",defaultCurrency:"$",defaultColor:"#000000",addFilterTitle:"",operators:{is:"is",isNot:"is not",isAnyOf:"is any of",isNotAnyOf:"is not any of",includesAll:"includes all",excludesAll:"excludes all",before:"before",after:"after",between:"between",notBetween:"not between",contains:"contains",notContains:"does not contain",startsWith:"starts with",endsWith:"ends with",isExactly:"is exactly",equals:"equals",notEquals:"not equals",greaterThan:"greater than",lessThan:"less than",overlaps:"overlaps",includes:"includes",excludes:"excludes",includesAllOf:"includes all of",includesAnyOf:"includes any of",empty:"is empty",notEmpty:"is not empty"},placeholders:{enterField:e=>`Enter ${e}...`,selectField:"Select...",searchField:e=>`Search ${e.toLowerCase()}...`,enterKey:"Enter key...",enterValue:"Enter value..."},helpers:{formatOperator:e=>e.replace(/_/g," ")},validation:{invalidEmail:"Invalid email format",invalidUrl:"Invalid URL format",invalidTel:"Invalid phone format",invalid:"Invalid input format"}},Ue=n.createContext({variant:"outline",size:"md",radius:"md",i18n:ae,cursorPointer:!0,className:void 0,showAddButton:!0,addButtonText:void 0,addButtonIcon:void 0,addButtonClassName:void 0,addButton:void 0,showSearchInput:!0,trigger:void 0,allowMultiple:!0}),de=()=>n.useContext(Ue),Gt=M(["relative flex shrink-0 items-center text-foreground outline-none transition","has-[[data-slot=filters-input]:focus-visible]:ring-ring/30","has-[[data-slot=filters-input]:focus-visible]:border-ring","has-[[data-slot=filters-input]:focus-visible]:outline-none","has-[[data-slot=filters-input]:focus-visible]:ring-[3px]","has-[[data-slot=filters-input]:focus-visible]:z-1","has-[[data-slot=filters-input]:[aria-invalid=true]]:border","has-[[data-slot=filters-input]:[aria-invalid=true]]:border-solid","has-[[data-slot=filters-input]:[aria-invalid=true]]:border-destructive/60","has-[[data-slot=filters-input]:[aria-invalid=true]]:ring-destructive/10","dark:has-[[data-slot=filters-input]:[aria-invalid=true]]:border-destructive","dark:has-[[data-slot=filters-input]:[aria-invalid=true]]:ring-destructive/20"],{variants:{variant:{solid:"border-0 bg-secondary",outline:"border border-border bg-background"},size:{lg:"h-10 px-2.5 text-sm has-[[data-slot=filters-prefix]]:ps-0 has-[[data-slot=filters-suffix]]:pe-0",md:"h-[34px] px-2 text-sm has-[[data-slot=filters-prefix]]:ps-0 has-[[data-slot=filters-suffix]]:pe-0",sm:"h-8 px-2 text-xs has-[[data-slot=filters-prefix]]:ps-0 has-[[data-slot=filters-suffix]]:pe-0"},cursorPointer:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"outline",size:"md",cursorPointer:!0}}),Yt=M(["inline-flex shrink-0 items-center justify-center text-muted-foreground transition hover:text-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"],{variants:{variant:{solid:"bg-secondary",outline:"border border-s-0 border-border hover:bg-secondary"},size:{lg:"size-10 [&_svg:not([class*=size-])]:size-4",md:"size-[34px] [&_svg:not([class*=size-])]:size-3.5",sm:"size-8 [&_svg:not([class*=size-])]:size-3"},cursorPointer:{true:"cursor-pointer",false:""},radius:{md:"rounded-e-md",full:"rounded-e-full"}},defaultVariants:{variant:"outline",size:"md",radius:"md",cursorPointer:!0}}),Ht=M(["inline-flex shrink-0 items-center justify-center text-foreground transition","[&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 [&_svg]:stroke-[1.5px]","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"],{variants:{variant:{solid:"border border-input hover:bg-secondary/60",outline:"border border-border hover:bg-accent"},size:{lg:"h-10 gap-1.5 px-4 text-sm [&_svg:not([class*=size-])]:size-4",md:"h-[34px] gap-1.5 px-3 text-sm [&_svg:not([class*=size-])]:size-4",sm:"h-8 gap-1.5 px-2.5 text-xs [&_svg:not([class*=size-])]:size-3.5"},radius:{md:"rounded-md",full:"rounded-full"},cursorPointer:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"outline",size:"md",cursorPointer:!0}}),Xt=M(["focus-visible:z-1 relative flex shrink-0 items-center text-muted-foreground transition hover:text-foreground data-[state=open]:text-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"],{variants:{variant:{solid:"bg-secondary",outline:"border border-e-0 border-border bg-background hover:bg-secondary data-[state=open]:bg-secondary [&+[data-slot=filters-remove]]:border-s"},size:{lg:"h-10 gap-1.5 px-4 text-sm",md:"h-[34px] gap-0.5 px-3 text-sm",sm:"h-8 gap-1 px-2.5 text-xs"},cursorPointer:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"outline",size:"md",cursorPointer:!0}}),Jt=M(["flex shrink-0 items-center gap-1.5 px-1.5 py-1 text-foreground","[&_svg:not([class*=size-])]:size-4"],{variants:{variant:{solid:"bg-secondary",outline:"border border-e-0 border-border"},size:{lg:"h-10 gap-1.5 px-4 text-sm [&_svg:not([class*=size-])]:size-4",md:"h-[34px] gap-1.5 px-3 text-sm [&_svg:not([class*=size-])]:size-4",sm:"h-8 gap-0.5 px-2.5 text-xs [&_svg:not([class*=size-])]:size-3.5"},radius:{md:"rounded-s-md",full:"rounded-s-full"}},defaultVariants:{variant:"outline",size:"md"}}),ue=M(["focus-visible:z-1 relative flex shrink-0 items-center gap-1 text-foreground transition","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"],{variants:{variant:{solid:"bg-secondary",outline:"border border-border bg-background hover:bg-secondary has-[[data-slot=switch]]:hover:bg-transparent"},size:{lg:"h-10 gap-1.5 px-4 text-sm [&_svg:not([class*=size-])]:size-4",md:"h-[34px] gap-1.5 px-3 text-sm [&_svg:not([class*=size-])]:size-4",sm:"h-8 gap-0.5 px-2.5 text-xs [&_svg:not([class*=size-])]:size-3.5"},cursorPointer:{true:"cursor-pointer has-[[data-slot=switch]]:cursor-default",false:""}},defaultVariants:{variant:"outline",size:"md",cursorPointer:!0}}),Ae=M("flex shrink-0 items-center justify-center text-foreground",{variants:{variant:{solid:"",outline:""},size:{lg:"h-10 px-4 text-sm",md:"h-[34px] px-3 text-sm",sm:"h-8 px-2.5 text-xs"}},defaultVariants:{variant:"outline",size:"md"}}),fe=M("flex shrink-0 items-center text-muted-foreground",{variants:{variant:{solid:"bg-secondary",outline:"border border-x-0 border-border bg-background"},size:{lg:"h-10 px-4 text-sm",md:"h-[34px] px-3 text-sm",sm:"h-8 px-2.5 text-xs"}},defaultVariants:{variant:"outline",size:"md"}}),Qt=M("flex flex-wrap items-center",{variants:{variant:{solid:"gap-2",outline:""},size:{sm:"gap-1.5",md:"gap-2.5",lg:"gap-3.5"}},defaultVariants:{variant:"outline",size:"md"}}),er=M("flex items-center",{variants:{variant:{solid:"gap-px",outline:""}},defaultVariants:{variant:"outline"}});function T({field:e,onChange:a,onBlur:r,onKeyDown:o,onInputChange:l,className:c,...f}){const p=de(),[w,m]=n.useState(!0),[u,N]=n.useState(""),C=(b,$)=>!$||!b?!0:new RegExp($).test(b),k=(b,$=!1)=>{if((b==="text"||b==="number")&&$)return p.i18n.validation.invalid;switch(b){case"email":return p.i18n.validation.invalidEmail;case"url":return p.i18n.validation.invalidUrl;case"tel":return p.i18n.validation.invalidTel;default:return p.i18n.validation.invalid}},_=b=>{a?.(b)},v=b=>{const $=b.target.value,P=e?.pattern||f.pattern;if($&&P){let i=!0;e?.validation?i=e.validation($):i=C($,P),m(i);const S=!!(e?.pattern||f.pattern);N(i?"":k(e?.type||"",S))}else m(!0),N("");l&&l(b),r?.(b)},x=b=>{if(!w&&!["Tab","Escape","Enter","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(b.key)&&(m(!0),N("")),b.key==="Enter"&&l){const $={...b,target:b.target,currentTarget:b.currentTarget};l($)}o?.(b)};return t.jsxs("div",{className:V("w-36",Gt({variant:p.variant,size:p.size}),c),"data-slot":"filters-input-wrapper",children:[e?.prefix&&t.jsx("div",{className:Ae({variant:p.variant,size:p.size}),"data-slot":"filters-prefix",children:e.prefix}),t.jsxs("div",{className:"flex w-full items-stretch",children:[t.jsx("input",{"aria-describedby":!w&&u?`${e?.key||"input"}-error`:void 0,"aria-invalid":!w,className:"w-full outline-none","data-slot":"filters-input",onBlur:v,onChange:_,onKeyDown:x,...f}),!w&&u&&t.jsxs(dt,{children:[t.jsx(pt,{asChild:!0,children:t.jsx("div",{className:"absolute right-2 top-1/2 flex -translate-y-1/2 items-center",children:t.jsx(vt,{className:"size-3.5 text-destructive"})})}),t.jsx(mt,{children:t.jsx("p",{className:"text-sm",children:u})})]})]}),e?.suffix&&t.jsx("div",{className:V(Ae({variant:p.variant,size:p.size})),"data-slot":"filters-suffix",children:e.suffix})]})}function tr({className:e,icon:a=t.jsx(ct,{}),...r}){const o=de();return t.jsx("button",{className:V(Yt({variant:o.variant,size:o.size,cursorPointer:o.cursorPointer,radius:o.radius}),e),"data-slot":"filters-remove",...r,type:"button",children:a})}const Ze=e=>"fields"in e&&Array.isArray(e.fields),Ge=e=>!!(e.group&&e.fields),Ye=e=>e.reduce((a,r)=>Ze(r)?[...a,...r.fields]:Ge(r)?[...a,...r.fields]:[...a,r],[]),rr=e=>Ye(e).reduce((r,o)=>(o.key&&(r[o.key]=o),r),{}),He=e=>({select:[{value:"is",label:e.operators.is},{value:"is_not",label:e.operators.isNot},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],multiselect:[{value:"is_any_of",label:e.operators.isAnyOf},{value:"is_not_any_of",label:e.operators.isNotAnyOf},{value:"includes_all",label:e.operators.includesAll},{value:"excludes_all",label:e.operators.excludesAll},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],date:[{value:"before",label:e.operators.before},{value:"after",label:e.operators.after},{value:"is",label:e.operators.is},{value:"is_not",label:e.operators.isNot},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],daterange:[{value:"between",label:e.operators.between},{value:"not_between",label:e.operators.notBetween},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],text:[{value:"contains",label:e.operators.contains},{value:"not_contains",label:e.operators.notContains},{value:"starts_with",label:e.operators.startsWith},{value:"ends_with",label:e.operators.endsWith},{value:"is",label:e.operators.isExactly},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],number:[{value:"equals",label:e.operators.equals},{value:"not_equals",label:e.operators.notEquals},{value:"greater_than",label:e.operators.greaterThan},{value:"less_than",label:e.operators.lessThan},{value:"between",label:e.operators.between},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],numberrange:[{value:"between",label:e.operators.between},{value:"overlaps",label:e.operators.overlaps},{value:"contains",label:e.operators.contains},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],boolean:[{value:"is",label:e.operators.is},{value:"is_not",label:e.operators.isNot},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],email:[{value:"contains",label:e.operators.contains},{value:"not_contains",label:e.operators.notContains},{value:"starts_with",label:e.operators.startsWith},{value:"ends_with",label:e.operators.endsWith},{value:"is",label:e.operators.isExactly},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],url:[{value:"contains",label:e.operators.contains},{value:"not_contains",label:e.operators.notContains},{value:"starts_with",label:e.operators.startsWith},{value:"ends_with",label:e.operators.endsWith},{value:"is",label:e.operators.isExactly},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],tel:[{value:"contains",label:e.operators.contains},{value:"not_contains",label:e.operators.notContains},{value:"starts_with",label:e.operators.startsWith},{value:"ends_with",label:e.operators.endsWith},{value:"is",label:e.operators.isExactly},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],time:[{value:"before",label:e.operators.before},{value:"after",label:e.operators.after},{value:"is",label:e.operators.is},{value:"between",label:e.operators.between},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],datetime:[{value:"before",label:e.operators.before},{value:"after",label:e.operators.after},{value:"is",label:e.operators.is},{value:"between",label:e.operators.between},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}]});He(ae);const ar=(e,a,r)=>{if(e.operators)return e.operators;const o=He(r);let l=e.type||"select";return l==="select"&&a.length>1&&(l="multiselect"),l==="multiselect"||e.type==="multiselect"?o.multiselect:o[l]||o.select};function sr({field:e,operator:a,values:r,onChange:o}){var l;const c=de(),f=ar(e,r,c.i18n),p=((l=f.find(w=>w.value===a))==null?void 0:l.label)||c.i18n.helpers.formatOperator(a);return e.hideOperatorSelect?t.jsx("div",{className:"flex items-center self-stretch border border-r-[0px] px-3 text-sm text-muted-foreground",children:p}):t.jsxs(nt,{children:[t.jsx(lt,{className:Xt({variant:c.variant,size:c.size}),children:p}),t.jsx(ot,{align:"start",className:"w-fit min-w-fit",children:f.map(w=>t.jsxs(it,{className:"flex items-center justify-between",onClick:()=>o(w.value),children:[t.jsx("span",{children:w.label}),t.jsx(J,{className:`ms-auto text-primary ${w.value===a?"opacity-100":"opacity-0"}`})]},w.value))})]})}function Xe({field:e,values:a,onChange:r,onClose:o,inline:l=!1}){var c;const[f,p]=n.useState(!1),[w,m]=n.useState(e.searchValue||""),[u,N]=n.useState([]),C=de();n.useEffect(()=>{e.searchValue!==void 0&&m(e.searchValue)},[e.searchValue]);const k=e.type==="multiselect"||a.length>1,_=(e.value!==void 0?e.value:a)||[];n.useEffect(()=>{f&&e.searchable!==!1&&setTimeout(()=>{const i=document.querySelector("[cmdk-input]");i&&i.focus()},0)},[f,e.searchable]);const v=n.useMemo(()=>{var i;return((i=e.options)==null?void 0:i.filter(S=>_.includes(S.value)))||[]},[e.options,JSON.stringify(_)]);n.useEffect(()=>{if(_.length===0){N([]);return}v.length>0&&N(i=>{const S=[];for(const E of _){const R=v.find(L=>L.value===E)??i.find(L=>L.value===E);R&&S.push(R)}return S})},[v,_]);const x=_.length>0?u.length>0?u:v:[],b=((c=e.options)==null?void 0:c.filter(i=>!_.includes(i.value)))||[],$=i=>{var S;m(i),(S=e.onSearchChange)==null||S.call(e,i)},P=()=>{p(!1),e.searchValue===void 0&&setTimeout(()=>m(""),200),o?.()};return l?t.jsx("div",{className:"w-full",children:t.jsxs(xe,{children:[e.searchable!==!1&&t.jsx(ge,{className:"h-8.5 text-sm",placeholder:C.i18n.placeholders.searchField(e.label||""),value:w,onValueChange:$}),t.jsxs(be,{className:"outline-none",children:[e.isLoading?t.jsxs("div",{className:"flex items-center justify-center py-6 text-sm text-muted-foreground",children:[t.jsx(ke,{className:"mr-2 size-4 animate-spin"}),C.i18n.loading]}):t.jsx(ye,{children:C.i18n.noResultsFound}),x.length>0&&t.jsx(Z,{heading:e.label||"Selected",children:x.map(i=>t.jsxs(B,{className:"group flex items-center gap-2",onSelect:()=>{if(k){const S=_.filter(E=>E!==i.value);e.onValueChange?e.onValueChange(S):r(S)}else e.onValueChange?e.onValueChange([]):r([])},children:[i.icon&&i.icon,t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("span",{className:"truncate text-accent-foreground",title:i.label,children:i.label}),i.detail&&t.jsx("span",{className:"truncate text-sm text-muted-foreground",title:i.detail,children:i.detail})]}),t.jsx(J,{className:"ms-auto text-primary"})]},String(i.value)))}),b.length>0&&t.jsxs(t.Fragment,{children:[x.length>0&&t.jsx(ne,{}),t.jsx(Z,{children:b.map(i=>t.jsxs(B,{className:"group flex items-center gap-2",value:i.label+(i.detail?` - ${i.detail}`:""),onSelect:()=>{if(k){const S=[..._,i.value];if(e.maxSelections&&S.length>e.maxSelections)return;e.onValueChange?e.onValueChange(S):r(S),e.autoCloseOnSelect&&o?.()}else e.onValueChange?e.onValueChange([i.value]):r([i.value]),o?.()},children:[i.icon&&i.icon,t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("span",{className:"truncate text-accent-foreground",title:i.label,children:i.label}),i.detail&&t.jsx("span",{className:"truncate text-sm text-muted-foreground",title:i.detail,children:i.detail})]}),t.jsx(J,{className:"ms-auto text-primary opacity-0"})]},String(i.value)))})]})]})]})}):t.jsxs(ze,{open:f,onOpenChange:i=>{p(i),!i&&e.searchValue===void 0&&setTimeout(()=>m(""),200)},children:[t.jsx(Fe,{className:ue({variant:C.variant,size:C.size,cursorPointer:C.cursorPointer}),children:t.jsx("div",{className:"flex items-center gap-1.5",children:e.customValueRenderer?e.customValueRenderer(a,e.options||[]):t.jsxs(t.Fragment,{children:[x.length>0&&t.jsx("div",{className:V("-space-x-0.5 flex items-center",e.selectedOptionsClassName),children:x.slice(0,3).map(i=>t.jsx("div",{children:i.icon},String(i.value)))}),x.length===1?x[0].detail?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"truncate text-accent-foreground",title:x[0].label,children:x[0].label}),t.jsx("span",{className:"truncate text-sm text-muted-foreground",title:x[0].detail,children:x[0].detail})]}):t.jsx("span",{className:"truncate text-accent-foreground",title:x[0].label,children:x[0].label}):x.length>1?`${x.length} ${C.i18n.selectedCount}`:C.i18n.select]})})}),t.jsx(_e,{align:"start",className:V("p-0 data-[state=closed]:!animation-none data-[state=closed]:!duration-0",e.className||"w-[200px]"),children:t.jsxs(xe,{children:[e.searchable!==!1&&t.jsx(ge,{className:"h-[34px] text-sm",placeholder:C.i18n.placeholders.searchField(e.label||""),value:w,onValueChange:$}),t.jsxs(be,{className:"outline-none",children:[e.isLoading?t.jsxs("div",{className:"flex items-center justify-center py-6 text-sm text-muted-foreground",children:[t.jsx(ke,{className:"mr-2 size-4 animate-spin"}),C.i18n.loading]}):t.jsx(ye,{children:C.i18n.noResultsFound}),x.length>0&&t.jsx(Z,{children:x.map(i=>t.jsxs(B,{className:"group flex items-center gap-2",onSelect:()=>{r(k?a.filter(S=>S!==i.value):[]),k||(p(!1),P())},children:[i.icon&&i.icon,t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("span",{className:"truncate text-accent-foreground",title:i.label,children:i.label}),i.detail&&t.jsx("span",{className:"truncate text-sm text-muted-foreground",title:i.detail,children:i.detail})]}),t.jsx(J,{className:"ms-auto text-primary"})]},String(i.value)))}),b.length>0&&t.jsxs(t.Fragment,{children:[x.length>0&&t.jsx(ne,{}),t.jsx(Z,{children:b.map(i=>t.jsxs(B,{className:"group flex items-center gap-2",value:i.label+(i.detail?` - ${i.detail}`:""),onSelect:()=>{if(k){const S=[...a,i.value];if(e.maxSelections&&S.length>e.maxSelections)return;r(S),e.autoCloseOnSelect&&P()}else r([i.value]),p(!1),P()},children:[i.icon&&i.icon,t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("span",{className:"truncate text-accent-foreground",title:i.label,children:i.label}),i.detail&&t.jsx("span",{className:"truncate text-sm text-muted-foreground",title:i.detail,children:i.detail})]}),t.jsx(J,{className:"ms-auto text-primary opacity-0"})]},String(i.value)))})]})]})]})})]})}function nr({field:e,values:a,onChange:r,operator:o}){var l,c;const[f,p]=n.useState(!1),[w,m]=n.useState(e.searchValue||""),u=de();n.useEffect(()=>{e.searchValue!==void 0&&m(e.searchValue)},[e.searchValue]);const N=v=>{var x;m(v),(x=e.onSearchChange)==null||x.call(e,v)};if(n.useEffect(()=>{f&&e.searchable!==!1&&setTimeout(()=>{const v=document.querySelector("[cmdk-input]");v&&v.focus()},0)},[f,e.searchable]),o==="empty"||o==="not_empty")return null;if(e.customRenderer)return t.jsx("div",{className:ue({variant:u.variant,size:u.size,cursorPointer:u.cursorPointer}),children:e.customRenderer({field:e,values:a,onChange:r,operator:o})});if(e.type==="boolean"){const v=a[0]===!0,x=e.onLabel||u.i18n.true,b=e.offLabel||u.i18n.false;return t.jsx("div",{className:ue({variant:u.variant,size:u.size,cursorPointer:u.cursorPointer}),children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ut,{checked:v,size:"sm",onCheckedChange:$=>r([$])}),e.onLabel&&e.offLabel&&t.jsx("span",{className:"text-xs text-muted-foreground",children:v?x:b})]})})}if(e.type==="time"){if(o==="between"){const v=a[0]||"",x=a[1]||"";return t.jsxs("div",{className:"flex items-center","data-slot":"filters-item",children:[t.jsx(T,{className:e.className,field:e,type:"time",value:v,onChange:b=>r([b.target.value,x]),onInputChange:e.onInputChange}),t.jsx("div",{className:fe({variant:u.variant,size:u.size}),"data-slot":"filters-between",children:u.i18n.to}),t.jsx(T,{className:e.className,field:e,type:"time",value:x,onChange:b=>r([v,b.target.value]),onInputChange:e.onInputChange})]})}return t.jsx(T,{className:e.className,field:e,type:"time",value:a[0]||"",onChange:v=>r([v.target.value]),onInputChange:e.onInputChange})}if(e.type==="datetime"){if(o==="between"){const v=a[0]||"",x=a[1]||"";return t.jsxs("div",{className:"flex items-center","data-slot":"filters-item",children:[t.jsx(T,{className:V("w-36",e.className),field:e,type:"datetime-local",value:v,onChange:b=>r([b.target.value,x]),onInputChange:e.onInputChange}),t.jsx("div",{className:fe({variant:u.variant,size:u.size}),"data-slot":"filters-between",children:u.i18n.to}),t.jsx(T,{className:V("w-36",e.className),field:e,type:"datetime-local",value:x,onChange:b=>r([v,b.target.value]),onInputChange:e.onInputChange})]})}return t.jsx(T,{className:V("w-36",e.className),field:e,type:"datetime-local",value:a[0]||"",onChange:v=>r([v.target.value]),onInputChange:e.onInputChange})}if(["email","url","tel"].includes(e.type||"")){const v=()=>{switch(e.type){case"email":return"email";case"url":return"url";case"tel":return"tel";default:return"text"}},x=()=>{switch(e.type){case"email":return"^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$";case"url":return"^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)$";case"tel":return"^[\\+]?[1-9][\\d]{0,15}$";default:return}};return t.jsx(T,{className:e.className,field:e,pattern:e.pattern||x(),placeholder:e.placeholder||u.i18n.placeholders.enterField(e.type||"text"),type:v(),value:a[0]||"",onChange:b=>r([b.target.value]),onInputChange:e.onInputChange})}if(e.type==="daterange"){const v=a[0]||"",x=a[1]||"";return t.jsxs("div",{className:ue({variant:u.variant,size:u.size,cursorPointer:u.cursorPointer}),children:[t.jsx(T,{className:V("w-24",e.className),field:e,type:"date",value:v,onChange:b=>r([b.target.value,x]),onInputChange:e.onInputChange}),t.jsx("div",{className:fe({variant:u.variant,size:u.size}),"data-slot":"filters-between",children:u.i18n.to}),t.jsx(T,{className:V("w-24",e.className),field:e,type:"date",value:x,onChange:b=>r([v,b.target.value]),onInputChange:e.onInputChange})]})}if(e.type==="text"||e.type==="number"){if(e.type==="number"&&o==="between"){const v=a[0]||"",x=a[1]||"";return t.jsxs("div",{className:"flex items-center","data-slot":"filters-item",children:[t.jsx(T,{className:V("w-16",e.className),field:e,max:e.max,min:e.min,pattern:e.pattern,placeholder:u.i18n.min,step:e.step,type:"number",value:v,onChange:b=>r([b.target.value,x]),onInputChange:e.onInputChange}),t.jsx("div",{className:fe({variant:u.variant,size:u.size}),"data-slot":"filters-between",children:u.i18n.to}),t.jsx(T,{className:V("w-16",e.className),field:e,max:e.max,min:e.min,pattern:e.pattern,placeholder:u.i18n.max,step:e.step,type:"number",value:x,onChange:b=>r([v,b.target.value]),onInputChange:e.onInputChange})]})}return t.jsx("div",{className:"flex items-center","data-slot":"filters-item",children:t.jsx(T,{className:V("w-36",e.className),field:e,max:e.type==="number"?e.max:void 0,min:e.type==="number"?e.min:void 0,pattern:e.pattern,placeholder:e.placeholder,step:e.type==="number"?e.step:void 0,type:e.type==="number"?"number":"text",value:a[0]||"",onChange:v=>r([v.target.value]),onInputChange:e.onInputChange})})}if(e.type==="date")return t.jsx(T,{className:V("w-16",e.className),field:e,type:"date",value:a[0]||"",onChange:v=>r([v.target.value]),onInputChange:e.onInputChange});if(e.type==="select"||e.type==="multiselect")return t.jsx(Xe,{field:e,values:a,onChange:r});const C=a.length>1,k=((l=e.options)==null?void 0:l.filter(v=>a.includes(v.value)))||[],_=((c=e.options)==null?void 0:c.filter(v=>!a.includes(v.value)))||[];return t.jsxs(ze,{open:f,onOpenChange:v=>{p(v),!v&&e.searchValue===void 0&&setTimeout(()=>m(""),200)},children:[t.jsx(Fe,{className:ue({variant:u.variant,size:u.size,cursorPointer:u.cursorPointer}),children:t.jsx("div",{className:"flex items-center gap-1.5",children:e.customValueRenderer?e.customValueRenderer(a,e.options||[]):t.jsxs(t.Fragment,{children:[k.length>0&&t.jsx("div",{className:"flex items-center -space-x-1.5",children:k.slice(0,3).map(v=>t.jsx("div",{children:v.icon},String(v.value)))}),k.length===1?k[0].label:k.length>1?`${k.length} ${u.i18n.selectedCount}`:u.i18n.select]})})}),t.jsx(_e,{className:V("w-36 p-0 data-[state=closed]:!animation-none data-[state=closed]:!duration-0",e.popoverContentClassName),children:t.jsxs(xe,{children:[e.searchable!==!1&&t.jsx(ge,{className:"h-[34px] text-sm",placeholder:u.i18n.placeholders.searchField(e.label||""),value:w,onValueChange:N}),t.jsxs(be,{className:"outline-none",children:[e.isLoading?t.jsxs("div",{className:"flex items-center justify-center py-6 text-sm text-muted-foreground",children:[t.jsx(ke,{className:"mr-2 size-4 animate-spin"}),u.i18n.loading]}):t.jsx(ye,{children:u.i18n.noResultsFound}),k.length>0&&t.jsx(Z,{children:k.map(v=>t.jsxs(B,{className:"group flex items-center gap-2",onSelect:()=>{r(C?a.filter(x=>x!==v.value):[]),C||p(!1)},children:[v.icon&&v.icon,t.jsx("span",{className:"truncate text-accent-foreground",children:v.label}),t.jsx(J,{className:"ms-auto text-primary"})]},String(v.value)))}),_.length>0&&t.jsxs(t.Fragment,{children:[k.length>0&&t.jsx(ne,{}),t.jsx(Z,{children:_.map(v=>t.jsxs(B,{className:"group flex items-center gap-2",value:v.label,onSelect:()=>{if(C){const x=[...a,v.value];if(e.maxSelections&&x.length>e.maxSelections)return;r(x)}else r([v.value]),p(!1)},children:[v.icon&&v.icon,t.jsx("span",{className:"truncate text-accent-foreground",children:v.label}),t.jsx(J,{className:"ms-auto text-primary opacity-0"})]},String(v.value)))})]})]})]})})]})}function ir({filters:e,fields:a,onChange:r,className:o,showAddButton:l=!0,addButtonText:c,addButtonIcon:f,addButtonClassName:p,addButton:w,variant:m="outline",size:u="md",radius:N="md",i18n:C,showSearchInput:k=!0,cursorPointer:_=!0,trigger:v,allowMultiple:x=!0,popoverContentClassName:b,popoverAlign:$="start",keyboardShortcut:P,onActiveFieldChange:i}){const[S,E]=n.useState(!1),[R,L]=n.useState(null),[pe,D]=n.useState([]);n.useEffect(()=>{i?.(R)},[R,i]),n.useEffect(()=>{if(!P)return;const y=h=>{const z=h.target;z.tagName==="INPUT"||z.tagName==="TEXTAREA"||z.isContentEditable||h.key.toLowerCase()===P.toLowerCase()&&!h.metaKey&&!h.ctrlKey&&!h.altKey&&(h.preventDefault(),E(s=>!s))};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[P]),n.useEffect(()=>{S&&setTimeout(()=>{const y=document.querySelector("[cmdk-input]");if(y)y.focus();else{const h=document.querySelector("[cmdk-root]");h&&h.focus()}},0)},[S,R,k]);const q={...ae,...C,operators:{...ae.operators,...C?.operators},placeholders:{...ae.placeholders,...C?.placeholders},validation:{...ae.validation,...C?.validation}},U=n.useMemo(()=>rr(a),[a]),W=R?U[R]:null,K=n.useCallback((y,h)=>{r(e.map(z=>{if(z.id===y){const s={...z,...h};return(h.operator==="empty"||h.operator==="not_empty")&&(s.values=[]),s}return z}))},[e,r]),H=n.useCallback(y=>{r(e.filter(h=>h.id!==y))},[e,r]),X=n.useCallback(y=>{const h=U[y];if(h&&h.key){if(h.type==="select"||h.type==="multiselect"){L(h.key);const g=e.find(I=>I.field===y),F=h.type==="multiselect"&&g?g.values:[];D(F);return}const z=h.defaultOperator||(h.type==="daterange"||h.type==="numberrange"?"between":(h.type==="boolean","is"));let s=[];["text","number","date","email","url","tel","time","datetime"].includes(h.type||"")?s=[""]:h.type==="daterange"?s=["",""]:h.type==="numberrange"?s=[h.min||0,h.max||100]:h.type==="boolean"?s=[!1]:h.type==="time"?s=[""]:h.type==="datetime"&&(s=[""]);const d=Pe(y,z,s),j=[...e,d];r(j),E(!1)}},[U,e,r]),oe=n.useCallback((y,h,z=!0)=>{if(!y.key)return;const s=y.defaultOperator||(y.type==="multiselect"?"is_any_of":"is"),d=e.findIndex(j=>j.field===y.key);if(d>=0){const j=[...e];j[d]={...j[d],values:h},r(j)}else{const j=Pe(y.key,s,h),g=[...e,j];r(g)}z?(E(!1),L(null),D([])):D(h)},[e,r]),me=n.useMemo(()=>Ye(a).filter(h=>!h.key||h.type==="separator"?!1:x?!0:!e.some(z=>z.field===h.key)),[a,e,x]);return t.jsx(Ue.Provider,{value:{variant:m,size:u,radius:N,i18n:q,cursorPointer:_,className:o,showAddButton:l,addButtonText:c,addButtonIcon:f,addButtonClassName:p,addButton:w,showSearchInput:k,trigger:v,allowMultiple:x},children:t.jsxs("div",{className:V(Qt({variant:m,size:u}),o),children:[l&&me.length>0&&t.jsxs(ze,{open:S,onOpenChange:y=>{E(y),y||(L(null),D([]))},children:[t.jsx(Fe,{asChild:!0,children:w||t.jsxs("button",{className:V(Ht({variant:m,size:u,cursorPointer:_,radius:N}),p),title:q.addFilterTitle,type:"button",children:[f||t.jsx(st,{}),c||q.addFilter]})}),t.jsx(_e,{align:$,className:V("p-0 data-[state=closed]:!animation-none data-[state=closed]:!duration-0",W?.className||b||"w-[200px]"),children:W?t.jsx(Xe,{field:W,inline:!0,values:pe,onChange:y=>{const h=W.type==="select";oe(W,y,h)},onClose:()=>{E(!1),L(null),D([])}}):t.jsxs(xe,{className:"outline-none",tabIndex:k?void 0:0,children:[k&&t.jsx(ge,{className:"h-[34px]",placeholder:q.searchFields}),t.jsxs(be,{className:"outline-none",children:[t.jsx(ye,{children:q.noFieldsFound}),a.map((y,h)=>{if(Ze(y)){const s=y.fields.filter(d=>d.type==="separator"||x?!0:!e.some(j=>j.field===d.key));return s.length===0?null:t.jsx(Z,{heading:y.group||"Fields",children:s.map((d,j)=>{if(d.type==="separator"){const g=d.key??`${y.group??`group-${h}`}-separator-${j}`;return t.jsx(ne,{},g)}return t.jsxs(B,{onSelect:()=>d.key&&X(d.key),children:[d.icon,t.jsx("span",{children:d.label})]},d.key??`${y.group??`group-${h}`}-field-${j}`)})},y.group||`group-${h}`)}if(Ge(y)){const s=y.fields.filter(d=>d.type==="separator"||x?!0:!e.some(j=>j.field===d.key));return s.length===0?null:t.jsx(Z,{heading:y.group||"Fields",children:s.map(d=>{if(d.type==="separator"){const j=d.key||`${y.group||`group-${h}`}-separator-${d.label||Math.random()}`;return t.jsx(ne,{},j)}return t.jsxs(B,{onSelect:()=>d.key&&X(d.key),children:[d.icon,t.jsx("span",{children:d.label})]},d.key)})},y.group||`group-${h}`)}const z=y;if(z.type==="separator"){const s=z.key||`flat-separator-${z.label||h}`;return t.jsx(ne,{},s)}return t.jsxs(B,{onSelect:()=>z.key&&X(z.key),children:[z.icon,t.jsx("span",{children:z.label})]},z.key)})]})]})})]}),e.map(y=>{const h=U[y.field];return h?t.jsxs("div",{className:er({variant:m}),"data-slot":"filter-item",children:[t.jsxs("div",{className:Jt({variant:m,size:u,radius:N}),children:[h.icon,h.label]}),t.jsx(sr,{field:h,operator:y.operator,values:y.values,onChange:z=>K(y.id,{operator:z})}),t.jsx(nr,{field:h,operator:y.operator,values:y.values,onChange:z=>K(y.id,{values:z})}),t.jsx(tr,{onClick:()=>H(y.id)})]},y.id):null})]})})}const Pe=(e,a,r=[])=>({id:`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,field:e,operator:a||"is",values:r});export{ir as F,Pe as c};
